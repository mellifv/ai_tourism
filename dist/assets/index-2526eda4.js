(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var HI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function MX(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var IP={exports:{}},$v={},DP={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up=Symbol.for("react.element"),WI=Symbol.for("react.portal"),jI=Symbol.for("react.fragment"),ZI=Symbol.for("react.strict_mode"),XI=Symbol.for("react.profiler"),YI=Symbol.for("react.provider"),qI=Symbol.for("react.context"),KI=Symbol.for("react.forward_ref"),JI=Symbol.for("react.suspense"),QI=Symbol.for("react.memo"),$I=Symbol.for("react.lazy"),ob=Symbol.iterator;function eD(n){return n===null||typeof n!="object"?null:(n=ob&&n[ob]||n["@@iterator"],typeof n=="function"?n:null)}var NP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OP=Object.assign,zP={};function zf(n,e,t){this.props=n,this.context=e,this.refs=zP,this.updater=t||NP}zf.prototype.isReactComponent={};zf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function FP(){}FP.prototype=zf.prototype;function rw(n,e,t){this.props=n,this.context=e,this.refs=zP,this.updater=t||NP}var sw=rw.prototype=new FP;sw.constructor=rw;OP(sw,zf.prototype);sw.isPureReactComponent=!0;var ab=Array.isArray,UP=Object.prototype.hasOwnProperty,ow={current:null},BP={key:!0,ref:!0,__self:!0,__source:!0};function VP(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)UP.call(e,i)&&!BP.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:up,type:n,key:s,ref:o,props:r,_owner:ow.current}}function tD(n,e){return{$$typeof:up,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function aw(n){return typeof n=="object"&&n!==null&&n.$$typeof===up}function nD(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var lb=/\/+/g;function _y(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nD(""+n.key):e.toString(36)}function Ug(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case up:case WI:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+_y(o,0):i,ab(r)?(t="",n!=null&&(t=n.replace(lb,"$&/")+"/"),Ug(r,e,t,"",function(c){return c})):r!=null&&(aw(r)&&(r=tD(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(lb,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ab(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+_y(s,a);o+=Ug(s,e,t,l,r)}else if(l=eD(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+_y(s,a++),o+=Ug(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bm(n,e,t){if(n==null)return n;var i=[],r=0;return Ug(n,i,"","",function(s){return e.call(t,s,r++)}),i}function iD(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Or={current:null},Bg={transition:null},rD={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:Bg,ReactCurrentOwner:ow};function GP(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:bm,forEach:function(n,e,t){bm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return bm(n,function(){e++}),e},toArray:function(n){return bm(n,function(e){return e})||[]},only:function(n){if(!aw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Qt.Component=zf;Qt.Fragment=jI;Qt.Profiler=XI;Qt.PureComponent=rw;Qt.StrictMode=ZI;Qt.Suspense=JI;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rD;Qt.act=GP;Qt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=OP({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ow.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)UP.call(e,l)&&!BP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:up,type:n.type,key:r,ref:s,props:i,_owner:o}};Qt.createContext=function(n){return n={$$typeof:qI,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:YI,_context:n},n.Consumer=n};Qt.createElement=VP;Qt.createFactory=function(n){var e=VP.bind(null,n);return e.type=n,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(n){return{$$typeof:KI,render:n}};Qt.isValidElement=aw;Qt.lazy=function(n){return{$$typeof:$I,_payload:{_status:-1,_result:n},_init:iD}};Qt.memo=function(n,e){return{$$typeof:QI,type:n,compare:e===void 0?null:e}};Qt.startTransition=function(n){var e=Bg.transition;Bg.transition={};try{n()}finally{Bg.transition=e}};Qt.unstable_act=GP;Qt.useCallback=function(n,e){return Or.current.useCallback(n,e)};Qt.useContext=function(n){return Or.current.useContext(n)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(n){return Or.current.useDeferredValue(n)};Qt.useEffect=function(n,e){return Or.current.useEffect(n,e)};Qt.useId=function(){return Or.current.useId()};Qt.useImperativeHandle=function(n,e,t){return Or.current.useImperativeHandle(n,e,t)};Qt.useInsertionEffect=function(n,e){return Or.current.useInsertionEffect(n,e)};Qt.useLayoutEffect=function(n,e){return Or.current.useLayoutEffect(n,e)};Qt.useMemo=function(n,e){return Or.current.useMemo(n,e)};Qt.useReducer=function(n,e,t){return Or.current.useReducer(n,e,t)};Qt.useRef=function(n){return Or.current.useRef(n)};Qt.useState=function(n){return Or.current.useState(n)};Qt.useSyncExternalStore=function(n,e,t){return Or.current.useSyncExternalStore(n,e,t)};Qt.useTransition=function(){return Or.current.useTransition()};Qt.version="18.3.1";DP.exports=Qt;var K=DP.exports;const ju=iw(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD=K,oD=Symbol.for("react.element"),aD=Symbol.for("react.fragment"),lD=Object.prototype.hasOwnProperty,uD=sD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cD={key:!0,ref:!0,__self:!0,__source:!0};function HP(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)lD.call(e,i)&&!cD.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:oD,type:n,key:s,ref:o,props:r,_owner:uD.current}}$v.Fragment=aD;$v.jsx=HP;$v.jsxs=HP;IP.exports=$v;var G=IP.exports,WP={exports:{}},ds={},jP={exports:{}},ZP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,X){var H=F.length;F.push(X);e:for(;0<H;){var W=H-1>>>1,j=F[W];if(0<r(j,X))F[W]=X,F[H]=j,H=W;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],H=F.pop();if(H!==X){F[0]=H;e:for(var W=0,j=F.length,se=j>>>1;W<se;){var ee=2*(W+1)-1,Z=F[ee],ue=ee+1,de=F[ue];if(0>r(Z,H))ue<j&&0>r(de,Z)?(F[W]=de,F[ue]=H,W=ue):(F[W]=Z,F[ee]=H,W=ee);else if(ue<j&&0>r(de,H))F[W]=de,F[ue]=H,W=ue;else break e}}return X}function r(F,X){var H=F.sortIndex-X.sortIndex;return H!==0?H:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,p=null,m=3,v=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(_=!1,b(F),!y)if(t(l)!==null)y=!0,ce(k);else{var X=t(c);X!==null&&ye(C,X.startTime-F)}}function k(F,X){y=!1,_&&(_=!1,T(A),A=-1),v=!0;var H=m;try{for(b(X),p=t(l);p!==null&&(!(p.expirationTime>X)||F&&!$());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var j=W(p.expirationTime<=X);X=n.unstable_now(),typeof j=="function"?p.callback=j:p===t(l)&&i(l),b(X)}else i(l);p=t(l)}if(p!==null)var se=!0;else{var ee=t(c);ee!==null&&ye(C,ee.startTime-X),se=!1}return se}finally{p=null,m=H,v=!1}}var I=!1,z=null,A=-1,O=5,U=-1;function $(){return!(n.unstable_now()-U<O)}function Y(){if(z!==null){var F=n.unstable_now();U=F;var X=!0;try{X=z(!0,F)}finally{X?te():(I=!1,z=null)}}else I=!1}var te;if(typeof M=="function")te=function(){M(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,te=function(){ae.postMessage(null)}}else te=function(){S(Y,0)};function ce(F){z=F,I||(I=!0,te())}function ye(F,X){A=S(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||v||(y=!0,ce(k))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var H=m;m=X;try{return F()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=m;m=F;try{return X()}finally{m=H}},n.unstable_scheduleCallback=function(F,X,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,F={id:f++,callback:X,priorityLevel:F,startTime:H,expirationTime:j,sortIndex:-1},H>W?(F.sortIndex=H,e(c,F),t(l)===null&&F===t(c)&&(_?(T(A),A=-1):_=!0,ye(C,H-W))):(F.sortIndex=j,e(l,F),y||v||(y=!0,ce(k))),F},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(F){var X=m;return function(){var H=m;m=X;try{return F.apply(this,arguments)}finally{m=H}}}})(ZP);jP.exports=ZP;var fD=jP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD=K,hs=fD;function et(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XP=new Set,wd={};function nc(n,e){Mf(n,e),Mf(n+"Capture",e)}function Mf(n,e){for(wd[n]=e,n=0;n<e.length;n++)XP.add(e[n])}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J_=Object.prototype.hasOwnProperty,dD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ub={},cb={};function pD(n){return J_.call(cb,n)?!0:J_.call(ub,n)?!1:dD.test(n)?cb[n]=!0:(ub[n]=!0,!1)}function mD(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gD(n,e,t,i){if(e===null||typeof e>"u"||mD(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Yi[n]=new zr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Yi[e]=new zr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Yi[n]=new zr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Yi[n]=new zr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Yi[n]=new zr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Yi[n]=new zr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Yi[n]=new zr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Yi[n]=new zr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Yi[n]=new zr(n,5,!1,n.toLowerCase(),null,!1,!1)});var lw=/[\-:]([a-z])/g;function uw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(lw,uw);Yi[e]=new zr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(lw,uw);Yi[e]=new zr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(lw,uw);Yi[e]=new zr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Yi[n]=new zr(n,1,!1,n.toLowerCase(),null,!1,!1)});Yi.xlinkHref=new zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Yi[n]=new zr(n,1,!1,n.toLowerCase(),null,!0,!0)});function cw(n,e,t,i){var r=Yi.hasOwnProperty(e)?Yi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gD(e,t,r,i)&&(t=null),i||r===null?pD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var La=hD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tm=Symbol.for("react.element"),Zc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),Q_=Symbol.for("react.profiler"),YP=Symbol.for("react.provider"),qP=Symbol.for("react.context"),hw=Symbol.for("react.forward_ref"),$_=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),dw=Symbol.for("react.memo"),cl=Symbol.for("react.lazy"),KP=Symbol.for("react.offscreen"),fb=Symbol.iterator;function _h(n){return n===null||typeof n!="object"?null:(n=fb&&n[fb]||n["@@iterator"],typeof n=="function"?n:null)}var Hn=Object.assign,xy;function Zh(n){if(xy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);xy=e&&e[1]||""}return`
`+xy+n}var wy=!1;function Sy(n,e){if(!n||wy)return"";wy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{wy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Zh(n):""}function vD(n){switch(n.tag){case 5:return Zh(n.type);case 16:return Zh("Lazy");case 13:return Zh("Suspense");case 19:return Zh("SuspenseList");case 0:case 2:case 15:return n=Sy(n.type,!1),n;case 11:return n=Sy(n.type.render,!1),n;case 1:return n=Sy(n.type,!0),n;default:return""}}function tx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Xc:return"Fragment";case Zc:return"Portal";case Q_:return"Profiler";case fw:return"StrictMode";case $_:return"Suspense";case ex:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case qP:return(n.displayName||"Context")+".Consumer";case YP:return(n._context.displayName||"Context")+".Provider";case hw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dw:return e=n.displayName||null,e!==null?e:tx(n.type)||"Memo";case cl:e=n._payload,n=n._init;try{return tx(n(e))}catch{}}return null}function yD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tx(e);case 8:return e===fw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function JP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _D(n){var e=JP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Em(n){n._valueTracker||(n._valueTracker=_D(n))}function QP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=JP(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function hv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function nx(n,e){var t=e.checked;return Hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function hb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Rl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $P(n,e){e=e.checked,e!=null&&cw(n,"checked",e,!1)}function ix(n,e){$P(n,e);var t=Rl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?rx(n,e.type,t):e.hasOwnProperty("defaultValue")&&rx(n,e.type,Rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function db(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function rx(n,e,t){(e!=="number"||hv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xh=Array.isArray;function df(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Rl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function sx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return Hn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(et(92));if(Xh(t)){if(1<t.length)throw Error(et(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Rl(t)}}function eC(n,e){var t=Rl(e.value),i=Rl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function mb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function tC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ox(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?tC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pm,nC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Pm=Pm||document.createElement("div"),Pm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Sd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Qh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xD=["Webkit","ms","Moz","O"];Object.keys(Qh).forEach(function(n){xD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Qh[e]=Qh[n]})});function iC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Qh.hasOwnProperty(n)&&Qh[n]?(""+e).trim():e+"px"}function rC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=iC(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var wD=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ax(n,e){if(e){if(wD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function lx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ux=null;function pw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cx=null,pf=null,mf=null;function gb(n){if(n=hp(n)){if(typeof cx!="function")throw Error(et(280));var e=n.stateNode;e&&(e=r0(e),cx(n.stateNode,n.type,e))}}function sC(n){pf?mf?mf.push(n):mf=[n]:pf=n}function oC(){if(pf){var n=pf,e=mf;if(mf=pf=null,gb(n),e)for(n=0;n<e.length;n++)gb(e[n])}}function aC(n,e){return n(e)}function lC(){}var My=!1;function uC(n,e,t){if(My)return n(e,t);My=!0;try{return aC(n,e,t)}finally{My=!1,(pf!==null||mf!==null)&&(lC(),oC())}}function Md(n,e){var t=n.stateNode;if(t===null)return null;var i=r0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(et(231,e,typeof t));return t}var fx=!1;if(_a)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){fx=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{fx=!1}function SD(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(f){this.onError(f)}}var $h=!1,dv=null,pv=!1,hx=null,MD={onError:function(n){$h=!0,dv=n}};function bD(n,e,t,i,r,s,o,a,l){$h=!1,dv=null,SD.apply(MD,arguments)}function TD(n,e,t,i,r,s,o,a,l){if(bD.apply(this,arguments),$h){if($h){var c=dv;$h=!1,dv=null}else throw Error(et(198));pv||(pv=!0,hx=c)}}function ic(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function cC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vb(n){if(ic(n)!==n)throw Error(et(188))}function ED(n){var e=n.alternate;if(!e){if(e=ic(n),e===null)throw Error(et(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return vb(r),n;if(s===i)return vb(r),e;s=s.sibling}throw Error(et(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(et(189))}}if(t.alternate!==i)throw Error(et(190))}if(t.tag!==3)throw Error(et(188));return t.stateNode.current===t?n:e}function fC(n){return n=ED(n),n!==null?hC(n):null}function hC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=hC(n);if(e!==null)return e;n=n.sibling}return null}var dC=hs.unstable_scheduleCallback,yb=hs.unstable_cancelCallback,PD=hs.unstable_shouldYield,CD=hs.unstable_requestPaint,ti=hs.unstable_now,AD=hs.unstable_getCurrentPriorityLevel,mw=hs.unstable_ImmediatePriority,pC=hs.unstable_UserBlockingPriority,mv=hs.unstable_NormalPriority,LD=hs.unstable_LowPriority,mC=hs.unstable_IdlePriority,e0=null,ko=null;function RD(n){if(ko&&typeof ko.onCommitFiberRoot=="function")try{ko.onCommitFiberRoot(e0,n,void 0,(n.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:DD,kD=Math.log,ID=Math.LN2;function DD(n){return n>>>=0,n===0?32:31-(kD(n)/ID|0)|0}var Cm=64,Am=4194304;function Yh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Yh(a):(s&=o,s!==0&&(i=Yh(s)))}else o=t&~r,o!==0?i=Yh(o):s!==0&&(i=Yh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-co(e),r=1<<t,i|=n[t],e&=~r;return i}function ND(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-co(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=ND(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function dx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gC(){var n=Cm;return Cm<<=1,!(Cm&4194240)&&(Cm=64),n}function by(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function cp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-co(e),n[e]=t}function zD(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-co(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function gw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-co(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var pn=0;function vC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yC,vw,_C,xC,wC,px=!1,Lm=[],wl=null,Sl=null,Ml=null,bd=new Map,Td=new Map,dl=[],FD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _b(n,e){switch(n){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":bd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function wh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=hp(e),e!==null&&vw(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function UD(n,e,t,i,r){switch(e){case"focusin":return wl=wh(wl,n,e,t,i,r),!0;case"dragenter":return Sl=wh(Sl,n,e,t,i,r),!0;case"mouseover":return Ml=wh(Ml,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return bd.set(s,wh(bd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Td.set(s,wh(Td.get(s)||null,n,e,t,i,r)),!0}return!1}function SC(n){var e=Cu(n.target);if(e!==null){var t=ic(e);if(t!==null){if(e=t.tag,e===13){if(e=cC(t),e!==null){n.blockedOn=e,wC(n.priority,function(){_C(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=mx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);ux=i,t.target.dispatchEvent(i),ux=null}else return e=hp(t),e!==null&&vw(e),n.blockedOn=t,!1;e.shift()}return!0}function xb(n,e,t){Vg(n)&&t.delete(e)}function BD(){px=!1,wl!==null&&Vg(wl)&&(wl=null),Sl!==null&&Vg(Sl)&&(Sl=null),Ml!==null&&Vg(Ml)&&(Ml=null),bd.forEach(xb),Td.forEach(xb)}function Sh(n,e){n.blockedOn===e&&(n.blockedOn=null,px||(px=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,BD)))}function Ed(n){function e(r){return Sh(r,n)}if(0<Lm.length){Sh(Lm[0],n);for(var t=1;t<Lm.length;t++){var i=Lm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(wl!==null&&Sh(wl,n),Sl!==null&&Sh(Sl,n),Ml!==null&&Sh(Ml,n),bd.forEach(e),Td.forEach(e),t=0;t<dl.length;t++)i=dl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<dl.length&&(t=dl[0],t.blockedOn===null);)SC(t),t.blockedOn===null&&dl.shift()}var gf=La.ReactCurrentBatchConfig,vv=!0;function VD(n,e,t,i){var r=pn,s=gf.transition;gf.transition=null;try{pn=1,yw(n,e,t,i)}finally{pn=r,gf.transition=s}}function GD(n,e,t,i){var r=pn,s=gf.transition;gf.transition=null;try{pn=4,yw(n,e,t,i)}finally{pn=r,gf.transition=s}}function yw(n,e,t,i){if(vv){var r=mx(n,e,t,i);if(r===null)Dy(n,e,i,yv,t),_b(n,i);else if(UD(r,n,e,t,i))i.stopPropagation();else if(_b(n,i),e&4&&-1<FD.indexOf(n)){for(;r!==null;){var s=hp(r);if(s!==null&&yC(s),s=mx(n,e,t,i),s===null&&Dy(n,e,i,yv,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Dy(n,e,i,null,t)}}var yv=null;function mx(n,e,t,i){if(yv=null,n=pw(i),n=Cu(n),n!==null)if(e=ic(n),e===null)n=null;else if(t=e.tag,t===13){if(n=cC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return yv=n,null}function MC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AD()){case mw:return 1;case pC:return 4;case mv:case LD:return 16;case mC:return 536870912;default:return 16}default:return 16}}var ml=null,_w=null,Gg=null;function bC(){if(Gg)return Gg;var n,e=_w,t=e.length,i,r="value"in ml?ml.value:ml.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Gg=r.slice(n,1<i?1-i:void 0)}function Hg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Rm(){return!0}function wb(){return!1}function ps(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rm:wb,this.isPropagationStopped=wb,this}return Hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),e}var Ff={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xw=ps(Ff),fp=Hn({},Ff,{view:0,detail:0}),HD=ps(fp),Ty,Ey,Mh,t0=Hn({},fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ww,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mh&&(Mh&&n.type==="mousemove"?(Ty=n.screenX-Mh.screenX,Ey=n.screenY-Mh.screenY):Ey=Ty=0,Mh=n),Ty)},movementY:function(n){return"movementY"in n?n.movementY:Ey}}),Sb=ps(t0),WD=Hn({},t0,{dataTransfer:0}),jD=ps(WD),ZD=Hn({},fp,{relatedTarget:0}),Py=ps(ZD),XD=Hn({},Ff,{animationName:0,elapsedTime:0,pseudoElement:0}),YD=ps(XD),qD=Hn({},Ff,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),KD=ps(qD),JD=Hn({},Ff,{data:0}),Mb=ps(JD),QD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=eN[n])?!!e[n]:!1}function ww(){return tN}var nN=Hn({},fp,{key:function(n){if(n.key){var e=QD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Hg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$D[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ww,charCode:function(n){return n.type==="keypress"?Hg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),iN=ps(nN),rN=Hn({},t0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bb=ps(rN),sN=Hn({},fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ww}),oN=ps(sN),aN=Hn({},Ff,{propertyName:0,elapsedTime:0,pseudoElement:0}),lN=ps(aN),uN=Hn({},t0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),cN=ps(uN),fN=[9,13,27,32],Sw=_a&&"CompositionEvent"in window,ed=null;_a&&"documentMode"in document&&(ed=document.documentMode);var hN=_a&&"TextEvent"in window&&!ed,TC=_a&&(!Sw||ed&&8<ed&&11>=ed),Tb=String.fromCharCode(32),Eb=!1;function EC(n,e){switch(n){case"keyup":return fN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yc=!1;function dN(n,e){switch(n){case"compositionend":return PC(e);case"keypress":return e.which!==32?null:(Eb=!0,Tb);case"textInput":return n=e.data,n===Tb&&Eb?null:n;default:return null}}function pN(n,e){if(Yc)return n==="compositionend"||!Sw&&EC(n,e)?(n=bC(),Gg=_w=ml=null,Yc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TC&&e.locale!=="ko"?null:e.data;default:return null}}var mN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!mN[n.type]:e==="textarea"}function CC(n,e,t,i){sC(i),e=_v(e,"onChange"),0<e.length&&(t=new xw("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var td=null,Pd=null;function gN(n){UC(n,0)}function n0(n){var e=Jc(n);if(QP(e))return n}function vN(n,e){if(n==="change")return e}var AC=!1;if(_a){var Cy;if(_a){var Ay="oninput"in document;if(!Ay){var Cb=document.createElement("div");Cb.setAttribute("oninput","return;"),Ay=typeof Cb.oninput=="function"}Cy=Ay}else Cy=!1;AC=Cy&&(!document.documentMode||9<document.documentMode)}function Ab(){td&&(td.detachEvent("onpropertychange",LC),Pd=td=null)}function LC(n){if(n.propertyName==="value"&&n0(Pd)){var e=[];CC(e,Pd,n,pw(n)),uC(gN,e)}}function yN(n,e,t){n==="focusin"?(Ab(),td=e,Pd=t,td.attachEvent("onpropertychange",LC)):n==="focusout"&&Ab()}function _N(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return n0(Pd)}function xN(n,e){if(n==="click")return n0(e)}function wN(n,e){if(n==="input"||n==="change")return n0(e)}function SN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var go=typeof Object.is=="function"?Object.is:SN;function Cd(n,e){if(go(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!J_.call(e,r)||!go(n[r],e[r]))return!1}return!0}function Lb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rb(n,e){var t=Lb(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Lb(t)}}function RC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kC(){for(var n=window,e=hv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=hv(n.document)}return e}function Mw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function MN(n){var e=kC(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&RC(t.ownerDocument.documentElement,t)){if(i!==null&&Mw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Rb(t,s);var o=Rb(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var bN=_a&&"documentMode"in document&&11>=document.documentMode,qc=null,gx=null,nd=null,vx=!1;function kb(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;vx||qc==null||qc!==hv(i)||(i=qc,"selectionStart"in i&&Mw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nd&&Cd(nd,i)||(nd=i,i=_v(gx,"onSelect"),0<i.length&&(e=new xw("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=qc)))}function km(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Kc={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},Ly={},IC={};_a&&(IC=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function i0(n){if(Ly[n])return Ly[n];if(!Kc[n])return n;var e=Kc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in IC)return Ly[n]=e[t];return n}var DC=i0("animationend"),NC=i0("animationiteration"),OC=i0("animationstart"),zC=i0("transitionend"),FC=new Map,Ib="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zl(n,e){FC.set(n,e),nc(e,[n])}for(var Ry=0;Ry<Ib.length;Ry++){var ky=Ib[Ry],TN=ky.toLowerCase(),EN=ky[0].toUpperCase()+ky.slice(1);zl(TN,"on"+EN)}zl(DC,"onAnimationEnd");zl(NC,"onAnimationIteration");zl(OC,"onAnimationStart");zl("dblclick","onDoubleClick");zl("focusin","onFocus");zl("focusout","onBlur");zl(zC,"onTransitionEnd");Mf("onMouseEnter",["mouseout","mouseover"]);Mf("onMouseLeave",["mouseout","mouseover"]);Mf("onPointerEnter",["pointerout","pointerover"]);Mf("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PN=new Set("cancel close invalid load scroll toggle".split(" ").concat(qh));function Db(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,TD(i,e,void 0,n),n.currentTarget=null}function UC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Db(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Db(r,a,c),s=l}}}if(pv)throw n=hx,pv=!1,hx=null,n}function Rn(n,e){var t=e[Sx];t===void 0&&(t=e[Sx]=new Set);var i=n+"__bubble";t.has(i)||(BC(e,n,2,!1),t.add(i))}function Iy(n,e,t){var i=0;e&&(i|=4),BC(t,n,i,e)}var Im="_reactListening"+Math.random().toString(36).slice(2);function Ad(n){if(!n[Im]){n[Im]=!0,XP.forEach(function(t){t!=="selectionchange"&&(PN.has(t)||Iy(t,!1,n),Iy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Im]||(e[Im]=!0,Iy("selectionchange",!1,e))}}function BC(n,e,t,i){switch(MC(e)){case 1:var r=VD;break;case 4:r=GD;break;default:r=yw}t=r.bind(null,e,t,n),r=void 0,!fx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Dy(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Cu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}uC(function(){var c=s,f=pw(t),p=[];e:{var m=FC.get(n);if(m!==void 0){var v=xw,y=n;switch(n){case"keypress":if(Hg(t)===0)break e;case"keydown":case"keyup":v=iN;break;case"focusin":y="focus",v=Py;break;case"focusout":y="blur",v=Py;break;case"beforeblur":case"afterblur":v=Py;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Sb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=jD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=oN;break;case DC:case NC:case OC:v=YD;break;case zC:v=lN;break;case"scroll":v=HD;break;case"wheel":v=cN;break;case"copy":case"cut":case"paste":v=KD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=bb}var _=(e&4)!==0,S=!_&&n==="scroll",T=_?m!==null?m+"Capture":null:m;_=[];for(var M=c,b;M!==null;){b=M;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,T!==null&&(C=Md(M,T),C!=null&&_.push(Ld(M,C,b)))),S)break;M=M.return}0<_.length&&(m=new v(m,y,null,t,f),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&t!==ux&&(y=t.relatedTarget||t.fromElement)&&(Cu(y)||y[xa]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=t.relatedTarget||t.toElement,v=c,y=y?Cu(y):null,y!==null&&(S=ic(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(_=Sb,C="onMouseLeave",T="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(_=bb,C="onPointerLeave",T="onPointerEnter",M="pointer"),S=v==null?m:Jc(v),b=y==null?m:Jc(y),m=new _(C,M+"leave",v,t,f),m.target=S,m.relatedTarget=b,C=null,Cu(f)===c&&(_=new _(T,M+"enter",y,t,f),_.target=b,_.relatedTarget=S,C=_),S=C,v&&y)t:{for(_=v,T=y,M=0,b=_;b;b=Mc(b))M++;for(b=0,C=T;C;C=Mc(C))b++;for(;0<M-b;)_=Mc(_),M--;for(;0<b-M;)T=Mc(T),b--;for(;M--;){if(_===T||T!==null&&_===T.alternate)break t;_=Mc(_),T=Mc(T)}_=null}else _=null;v!==null&&Nb(p,m,v,_,!1),y!==null&&S!==null&&Nb(p,S,y,_,!0)}}e:{if(m=c?Jc(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var k=vN;else if(Pb(m))if(AC)k=wN;else{k=_N;var I=yN}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=xN);if(k&&(k=k(n,c))){CC(p,k,t,f);break e}I&&I(n,m,c),n==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&rx(m,"number",m.value)}switch(I=c?Jc(c):window,n){case"focusin":(Pb(I)||I.contentEditable==="true")&&(qc=I,gx=c,nd=null);break;case"focusout":nd=gx=qc=null;break;case"mousedown":vx=!0;break;case"contextmenu":case"mouseup":case"dragend":vx=!1,kb(p,t,f);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":kb(p,t,f)}var z;if(Sw)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Yc?EC(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(TC&&t.locale!=="ko"&&(Yc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Yc&&(z=bC()):(ml=f,_w="value"in ml?ml.value:ml.textContent,Yc=!0)),I=_v(c,A),0<I.length&&(A=new Mb(A,n,null,t,f),p.push({event:A,listeners:I}),z?A.data=z:(z=PC(t),z!==null&&(A.data=z)))),(z=hN?dN(n,t):pN(n,t))&&(c=_v(c,"onBeforeInput"),0<c.length&&(f=new Mb("onBeforeInput","beforeinput",null,t,f),p.push({event:f,listeners:c}),f.data=z))}UC(p,e)})}function Ld(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _v(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Md(n,t),s!=null&&i.unshift(Ld(n,s,r)),s=Md(n,e),s!=null&&i.push(Ld(n,s,r))),n=n.return}return i}function Mc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nb(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Md(t,s),l!=null&&o.unshift(Ld(t,l,a))):r||(l=Md(t,s),l!=null&&o.push(Ld(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var CN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function Ob(n){return(typeof n=="string"?n:""+n).replace(CN,`
`).replace(AN,"")}function Dm(n,e,t){if(e=Ob(e),Ob(n)!==e&&t)throw Error(et(425))}function xv(){}var yx=null,_x=null;function xx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wx=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,zb=typeof Promise=="function"?Promise:void 0,RN=typeof queueMicrotask=="function"?queueMicrotask:typeof zb<"u"?function(n){return zb.resolve(null).then(n).catch(kN)}:wx;function kN(n){setTimeout(function(){throw n})}function Ny(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ed(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ed(e)}function bl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Fb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),Ro="__reactFiber$"+Uf,Rd="__reactProps$"+Uf,xa="__reactContainer$"+Uf,Sx="__reactEvents$"+Uf,IN="__reactListeners$"+Uf,DN="__reactHandles$"+Uf;function Cu(n){var e=n[Ro];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xa]||t[Ro]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Fb(n);n!==null;){if(t=n[Ro])return t;n=Fb(n)}return e}n=t,t=n.parentNode}return null}function hp(n){return n=n[Ro]||n[xa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Jc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(et(33))}function r0(n){return n[Rd]||null}var Mx=[],Qc=-1;function Fl(n){return{current:n}}function kn(n){0>Qc||(n.current=Mx[Qc],Mx[Qc]=null,Qc--)}function Pn(n,e){Qc++,Mx[Qc]=n.current,n.current=e}var kl={},hr=Fl(kl),qr=Fl(!1),Zu=kl;function bf(n,e){var t=n.type.contextTypes;if(!t)return kl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Kr(n){return n=n.childContextTypes,n!=null}function wv(){kn(qr),kn(hr)}function Ub(n,e,t){if(hr.current!==kl)throw Error(et(168));Pn(hr,e),Pn(qr,t)}function VC(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(et(108,yD(n)||"Unknown",r));return Hn({},t,i)}function Sv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||kl,Zu=hr.current,Pn(hr,n),Pn(qr,qr.current),!0}function Bb(n,e,t){var i=n.stateNode;if(!i)throw Error(et(169));t?(n=VC(n,e,Zu),i.__reactInternalMemoizedMergedChildContext=n,kn(qr),kn(hr),Pn(hr,n)):kn(qr),Pn(qr,t)}var ua=null,s0=!1,Oy=!1;function GC(n){ua===null?ua=[n]:ua.push(n)}function NN(n){s0=!0,GC(n)}function Ul(){if(!Oy&&ua!==null){Oy=!0;var n=0,e=pn;try{var t=ua;for(pn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ua=null,s0=!1}catch(r){throw ua!==null&&(ua=ua.slice(n+1)),dC(mw,Ul),r}finally{pn=e,Oy=!1}}return null}var $c=[],ef=0,Mv=null,bv=0,Ls=[],Rs=0,Xu=null,ha=1,da="";function wu(n,e){$c[ef++]=bv,$c[ef++]=Mv,Mv=n,bv=e}function HC(n,e,t){Ls[Rs++]=ha,Ls[Rs++]=da,Ls[Rs++]=Xu,Xu=n;var i=ha;n=da;var r=32-co(i)-1;i&=~(1<<r),t+=1;var s=32-co(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ha=1<<32-co(e)+r|t<<r|i,da=s+n}else ha=1<<s|t<<r|i,da=n}function bw(n){n.return!==null&&(wu(n,1),HC(n,1,0))}function Tw(n){for(;n===Mv;)Mv=$c[--ef],$c[ef]=null,bv=$c[--ef],$c[ef]=null;for(;n===Xu;)Xu=Ls[--Rs],Ls[Rs]=null,da=Ls[--Rs],Ls[Rs]=null,ha=Ls[--Rs],Ls[Rs]=null}var cs=null,us=null,Dn=!1,oo=null;function WC(n,e){var t=Is(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Vb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,cs=n,us=bl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,cs=n,us=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xu!==null?{id:ha,overflow:da}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Is(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,cs=n,us=null,!0):!1;default:return!1}}function bx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tx(n){if(Dn){var e=us;if(e){var t=e;if(!Vb(n,e)){if(bx(n))throw Error(et(418));e=bl(t.nextSibling);var i=cs;e&&Vb(n,e)?WC(i,t):(n.flags=n.flags&-4097|2,Dn=!1,cs=n)}}else{if(bx(n))throw Error(et(418));n.flags=n.flags&-4097|2,Dn=!1,cs=n}}}function Gb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cs=n}function Nm(n){if(n!==cs)return!1;if(!Dn)return Gb(n),Dn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!xx(n.type,n.memoizedProps)),e&&(e=us)){if(bx(n))throw jC(),Error(et(418));for(;e;)WC(n,e),e=bl(e.nextSibling)}if(Gb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(et(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){us=bl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}us=null}}else us=cs?bl(n.stateNode.nextSibling):null;return!0}function jC(){for(var n=us;n;)n=bl(n.nextSibling)}function Tf(){us=cs=null,Dn=!1}function Ew(n){oo===null?oo=[n]:oo.push(n)}var ON=La.ReactCurrentBatchConfig;function bh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(et(309));var i=t.stateNode}if(!i)throw Error(et(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(et(284));if(!t._owner)throw Error(et(290,n))}return n}function Om(n,e){throw n=Object.prototype.toString.call(e),Error(et(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Hb(n){var e=n._init;return e(n._payload)}function ZC(n){function e(T,M){if(n){var b=T.deletions;b===null?(T.deletions=[M],T.flags|=16):b.push(M)}}function t(T,M){if(!n)return null;for(;M!==null;)e(T,M),M=M.sibling;return null}function i(T,M){for(T=new Map;M!==null;)M.key!==null?T.set(M.key,M):T.set(M.index,M),M=M.sibling;return T}function r(T,M){return T=Cl(T,M),T.index=0,T.sibling=null,T}function s(T,M,b){return T.index=b,n?(b=T.alternate,b!==null?(b=b.index,b<M?(T.flags|=2,M):b):(T.flags|=2,M)):(T.flags|=1048576,M)}function o(T){return n&&T.alternate===null&&(T.flags|=2),T}function a(T,M,b,C){return M===null||M.tag!==6?(M=Hy(b,T.mode,C),M.return=T,M):(M=r(M,b),M.return=T,M)}function l(T,M,b,C){var k=b.type;return k===Xc?f(T,M,b.props.children,C,b.key):M!==null&&(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cl&&Hb(k)===M.type)?(C=r(M,b.props),C.ref=bh(T,M,b),C.return=T,C):(C=Kg(b.type,b.key,b.props,null,T.mode,C),C.ref=bh(T,M,b),C.return=T,C)}function c(T,M,b,C){return M===null||M.tag!==4||M.stateNode.containerInfo!==b.containerInfo||M.stateNode.implementation!==b.implementation?(M=Wy(b,T.mode,C),M.return=T,M):(M=r(M,b.children||[]),M.return=T,M)}function f(T,M,b,C,k){return M===null||M.tag!==7?(M=Fu(b,T.mode,C,k),M.return=T,M):(M=r(M,b),M.return=T,M)}function p(T,M,b){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Hy(""+M,T.mode,b),M.return=T,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Tm:return b=Kg(M.type,M.key,M.props,null,T.mode,b),b.ref=bh(T,null,M),b.return=T,b;case Zc:return M=Wy(M,T.mode,b),M.return=T,M;case cl:var C=M._init;return p(T,C(M._payload),b)}if(Xh(M)||_h(M))return M=Fu(M,T.mode,b,null),M.return=T,M;Om(T,M)}return null}function m(T,M,b,C){var k=M!==null?M.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(T,M,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tm:return b.key===k?l(T,M,b,C):null;case Zc:return b.key===k?c(T,M,b,C):null;case cl:return k=b._init,m(T,M,k(b._payload),C)}if(Xh(b)||_h(b))return k!==null?null:f(T,M,b,C,null);Om(T,b)}return null}function v(T,M,b,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return T=T.get(b)||null,a(M,T,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Tm:return T=T.get(C.key===null?b:C.key)||null,l(M,T,C,k);case Zc:return T=T.get(C.key===null?b:C.key)||null,c(M,T,C,k);case cl:var I=C._init;return v(T,M,b,I(C._payload),k)}if(Xh(C)||_h(C))return T=T.get(b)||null,f(M,T,C,k,null);Om(M,C)}return null}function y(T,M,b,C){for(var k=null,I=null,z=M,A=M=0,O=null;z!==null&&A<b.length;A++){z.index>A?(O=z,z=null):O=z.sibling;var U=m(T,z,b[A],C);if(U===null){z===null&&(z=O);break}n&&z&&U.alternate===null&&e(T,z),M=s(U,M,A),I===null?k=U:I.sibling=U,I=U,z=O}if(A===b.length)return t(T,z),Dn&&wu(T,A),k;if(z===null){for(;A<b.length;A++)z=p(T,b[A],C),z!==null&&(M=s(z,M,A),I===null?k=z:I.sibling=z,I=z);return Dn&&wu(T,A),k}for(z=i(T,z);A<b.length;A++)O=v(z,T,A,b[A],C),O!==null&&(n&&O.alternate!==null&&z.delete(O.key===null?A:O.key),M=s(O,M,A),I===null?k=O:I.sibling=O,I=O);return n&&z.forEach(function($){return e(T,$)}),Dn&&wu(T,A),k}function _(T,M,b,C){var k=_h(b);if(typeof k!="function")throw Error(et(150));if(b=k.call(b),b==null)throw Error(et(151));for(var I=k=null,z=M,A=M=0,O=null,U=b.next();z!==null&&!U.done;A++,U=b.next()){z.index>A?(O=z,z=null):O=z.sibling;var $=m(T,z,U.value,C);if($===null){z===null&&(z=O);break}n&&z&&$.alternate===null&&e(T,z),M=s($,M,A),I===null?k=$:I.sibling=$,I=$,z=O}if(U.done)return t(T,z),Dn&&wu(T,A),k;if(z===null){for(;!U.done;A++,U=b.next())U=p(T,U.value,C),U!==null&&(M=s(U,M,A),I===null?k=U:I.sibling=U,I=U);return Dn&&wu(T,A),k}for(z=i(T,z);!U.done;A++,U=b.next())U=v(z,T,A,U.value,C),U!==null&&(n&&U.alternate!==null&&z.delete(U.key===null?A:U.key),M=s(U,M,A),I===null?k=U:I.sibling=U,I=U);return n&&z.forEach(function(Y){return e(T,Y)}),Dn&&wu(T,A),k}function S(T,M,b,C){if(typeof b=="object"&&b!==null&&b.type===Xc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Tm:e:{for(var k=b.key,I=M;I!==null;){if(I.key===k){if(k=b.type,k===Xc){if(I.tag===7){t(T,I.sibling),M=r(I,b.props.children),M.return=T,T=M;break e}}else if(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cl&&Hb(k)===I.type){t(T,I.sibling),M=r(I,b.props),M.ref=bh(T,I,b),M.return=T,T=M;break e}t(T,I);break}else e(T,I);I=I.sibling}b.type===Xc?(M=Fu(b.props.children,T.mode,C,b.key),M.return=T,T=M):(C=Kg(b.type,b.key,b.props,null,T.mode,C),C.ref=bh(T,M,b),C.return=T,T=C)}return o(T);case Zc:e:{for(I=b.key;M!==null;){if(M.key===I)if(M.tag===4&&M.stateNode.containerInfo===b.containerInfo&&M.stateNode.implementation===b.implementation){t(T,M.sibling),M=r(M,b.children||[]),M.return=T,T=M;break e}else{t(T,M);break}else e(T,M);M=M.sibling}M=Wy(b,T.mode,C),M.return=T,T=M}return o(T);case cl:return I=b._init,S(T,M,I(b._payload),C)}if(Xh(b))return y(T,M,b,C);if(_h(b))return _(T,M,b,C);Om(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,M!==null&&M.tag===6?(t(T,M.sibling),M=r(M,b),M.return=T,T=M):(t(T,M),M=Hy(b,T.mode,C),M.return=T,T=M),o(T)):t(T,M)}return S}var Ef=ZC(!0),XC=ZC(!1),Tv=Fl(null),Ev=null,tf=null,Pw=null;function Cw(){Pw=tf=Ev=null}function Aw(n){var e=Tv.current;kn(Tv),n._currentValue=e}function Ex(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function vf(n,e){Ev=n,Pw=tf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Yr=!0),n.firstContext=null)}function Ns(n){var e=n._currentValue;if(Pw!==n)if(n={context:n,memoizedValue:e,next:null},tf===null){if(Ev===null)throw Error(et(308));tf=n,Ev.dependencies={lanes:0,firstContext:n}}else tf=tf.next=n;return e}var Au=null;function Lw(n){Au===null?Au=[n]:Au.push(n)}function YC(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Lw(e)):(t.next=r.next,r.next=t),e.interleaved=t,wa(n,i)}function wa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fl=!1;function Rw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ga(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Tl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,rn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,wa(n,t)}return r=i.interleaved,r===null?(e.next=e,Lw(i)):(e.next=r.next,r.next=e),i.interleaved=e,wa(n,t)}function Wg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,gw(n,t)}}function Wb(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Pv(n,e,t,i){var r=n.updateQueue;fl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;o=0,f=c=l=null,a=s;do{var m=a.lane,v=a.eventTime;if((i&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,_=a;switch(m=e,v=t,_.tag){case 1:if(y=_.payload,typeof y=="function"){p=y.call(v,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,m=typeof y=="function"?y.call(v,p,m):y,m==null)break e;p=Hn({},p,m);break e;case 2:fl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=v,l=p):f=f.next=v,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(f===null&&(l=p),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);qu|=o,n.lanes=o,n.memoizedState=p}}function jb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(et(191,r));r.call(i)}}}var dp={},Io=Fl(dp),kd=Fl(dp),Id=Fl(dp);function Lu(n){if(n===dp)throw Error(et(174));return n}function kw(n,e){switch(Pn(Id,e),Pn(kd,n),Pn(Io,dp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ox(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ox(e,n)}kn(Io),Pn(Io,e)}function Pf(){kn(Io),kn(kd),kn(Id)}function KC(n){Lu(Id.current);var e=Lu(Io.current),t=ox(e,n.type);e!==t&&(Pn(kd,n),Pn(Io,t))}function Iw(n){kd.current===n&&(kn(Io),kn(kd))}var zn=Fl(0);function Cv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zy=[];function Dw(){for(var n=0;n<zy.length;n++)zy[n]._workInProgressVersionPrimary=null;zy.length=0}var jg=La.ReactCurrentDispatcher,Fy=La.ReactCurrentBatchConfig,Yu=0,Bn=null,Ti=null,Di=null,Av=!1,id=!1,Dd=0,zN=0;function ir(){throw Error(et(321))}function Nw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!go(n[t],e[t]))return!1;return!0}function Ow(n,e,t,i,r,s){if(Yu=s,Bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jg.current=n===null||n.memoizedState===null?VN:GN,n=t(i,r),id){s=0;do{if(id=!1,Dd=0,25<=s)throw Error(et(301));s+=1,Di=Ti=null,e.updateQueue=null,jg.current=HN,n=t(i,r)}while(id)}if(jg.current=Lv,e=Ti!==null&&Ti.next!==null,Yu=0,Di=Ti=Bn=null,Av=!1,e)throw Error(et(300));return n}function zw(){var n=Dd!==0;return Dd=0,n}function Ao(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Bn.memoizedState=Di=n:Di=Di.next=n,Di}function Os(){if(Ti===null){var n=Bn.alternate;n=n!==null?n.memoizedState:null}else n=Ti.next;var e=Di===null?Bn.memoizedState:Di.next;if(e!==null)Di=e,Ti=n;else{if(n===null)throw Error(et(310));Ti=n,n={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},Di===null?Bn.memoizedState=Di=n:Di=Di.next=n}return Di}function Nd(n,e){return typeof e=="function"?e(n):e}function Uy(n){var e=Os(),t=e.queue;if(t===null)throw Error(et(311));t.lastRenderedReducer=n;var i=Ti,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var f=c.lane;if((Yu&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=i):l=l.next=p,Bn.lanes|=f,qu|=f}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,go(i,e.memoizedState)||(Yr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Bn.lanes|=s,qu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function By(n){var e=Os(),t=e.queue;if(t===null)throw Error(et(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);go(s,e.memoizedState)||(Yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function JC(){}function QC(n,e){var t=Bn,i=Os(),r=e(),s=!go(i.memoizedState,r);if(s&&(i.memoizedState=r,Yr=!0),i=i.queue,Fw(t3.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Di!==null&&Di.memoizedState.tag&1){if(t.flags|=2048,Od(9,e3.bind(null,t,i,r,e),void 0,null),Oi===null)throw Error(et(349));Yu&30||$C(t,e,r)}return r}function $C(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function e3(n,e,t,i){e.value=t,e.getSnapshot=i,n3(e)&&i3(n)}function t3(n,e,t){return t(function(){n3(e)&&i3(n)})}function n3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!go(n,t)}catch{return!0}}function i3(n){var e=wa(n,1);e!==null&&fo(e,n,1,-1)}function Zb(n){var e=Ao();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nd,lastRenderedState:n},e.queue=n,n=n.dispatch=BN.bind(null,Bn,n),[e.memoizedState,n]}function Od(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function r3(){return Os().memoizedState}function Zg(n,e,t,i){var r=Ao();Bn.flags|=n,r.memoizedState=Od(1|e,t,void 0,i===void 0?null:i)}function o0(n,e,t,i){var r=Os();i=i===void 0?null:i;var s=void 0;if(Ti!==null){var o=Ti.memoizedState;if(s=o.destroy,i!==null&&Nw(i,o.deps)){r.memoizedState=Od(e,t,s,i);return}}Bn.flags|=n,r.memoizedState=Od(1|e,t,s,i)}function Xb(n,e){return Zg(8390656,8,n,e)}function Fw(n,e){return o0(2048,8,n,e)}function s3(n,e){return o0(4,2,n,e)}function o3(n,e){return o0(4,4,n,e)}function a3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function l3(n,e,t){return t=t!=null?t.concat([n]):null,o0(4,4,a3.bind(null,e,n),t)}function Uw(){}function u3(n,e){var t=Os();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Nw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function c3(n,e){var t=Os();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Nw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function f3(n,e,t){return Yu&21?(go(t,e)||(t=gC(),Bn.lanes|=t,qu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Yr=!0),n.memoizedState=t)}function FN(n,e){var t=pn;pn=t!==0&&4>t?t:4,n(!0);var i=Fy.transition;Fy.transition={};try{n(!1),e()}finally{pn=t,Fy.transition=i}}function h3(){return Os().memoizedState}function UN(n,e,t){var i=Pl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},d3(n))p3(e,t);else if(t=YC(n,e,t,i),t!==null){var r=Dr();fo(t,n,i,r),m3(t,e,i)}}function BN(n,e,t){var i=Pl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(d3(n))p3(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,go(a,o)){var l=e.interleaved;l===null?(r.next=r,Lw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=YC(n,e,r,i),t!==null&&(r=Dr(),fo(t,n,i,r),m3(t,e,i))}}function d3(n){var e=n.alternate;return n===Bn||e!==null&&e===Bn}function p3(n,e){id=Av=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function m3(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,gw(n,t)}}var Lv={readContext:Ns,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},VN={readContext:Ns,useCallback:function(n,e){return Ao().memoizedState=[n,e===void 0?null:e],n},useContext:Ns,useEffect:Xb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Zg(4194308,4,a3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Zg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Zg(4,2,n,e)},useMemo:function(n,e){var t=Ao();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ao();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=UN.bind(null,Bn,n),[i.memoizedState,n]},useRef:function(n){var e=Ao();return n={current:n},e.memoizedState=n},useState:Zb,useDebugValue:Uw,useDeferredValue:function(n){return Ao().memoizedState=n},useTransition:function(){var n=Zb(!1),e=n[0];return n=FN.bind(null,n[1]),Ao().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Bn,r=Ao();if(Dn){if(t===void 0)throw Error(et(407));t=t()}else{if(t=e(),Oi===null)throw Error(et(349));Yu&30||$C(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Xb(t3.bind(null,i,s,n),[n]),i.flags|=2048,Od(9,e3.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ao(),e=Oi.identifierPrefix;if(Dn){var t=da,i=ha;t=(i&~(1<<32-co(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=zN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},GN={readContext:Ns,useCallback:u3,useContext:Ns,useEffect:Fw,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:o3,useMemo:c3,useReducer:Uy,useRef:r3,useState:function(){return Uy(Nd)},useDebugValue:Uw,useDeferredValue:function(n){var e=Os();return f3(e,Ti.memoizedState,n)},useTransition:function(){var n=Uy(Nd)[0],e=Os().memoizedState;return[n,e]},useMutableSource:JC,useSyncExternalStore:QC,useId:h3,unstable_isNewReconciler:!1},HN={readContext:Ns,useCallback:u3,useContext:Ns,useEffect:Fw,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:o3,useMemo:c3,useReducer:By,useRef:r3,useState:function(){return By(Nd)},useDebugValue:Uw,useDeferredValue:function(n){var e=Os();return Ti===null?e.memoizedState=n:f3(e,Ti.memoizedState,n)},useTransition:function(){var n=By(Nd)[0],e=Os().memoizedState;return[n,e]},useMutableSource:JC,useSyncExternalStore:QC,useId:h3,unstable_isNewReconciler:!1};function no(n,e){if(n&&n.defaultProps){e=Hn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Px(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Hn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var a0={isMounted:function(n){return(n=n._reactInternals)?ic(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Dr(),r=Pl(n),s=ga(i,r);s.payload=e,t!=null&&(s.callback=t),e=Tl(n,s,r),e!==null&&(fo(e,n,r,i),Wg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Dr(),r=Pl(n),s=ga(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Tl(n,s,r),e!==null&&(fo(e,n,r,i),Wg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Dr(),i=Pl(n),r=ga(t,i);r.tag=2,e!=null&&(r.callback=e),e=Tl(n,r,i),e!==null&&(fo(e,n,i,t),Wg(e,n,i))}};function Yb(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cd(t,i)||!Cd(r,s):!0}function g3(n,e,t){var i=!1,r=kl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ns(s):(r=Kr(e)?Zu:hr.current,i=e.contextTypes,s=(i=i!=null)?bf(n,r):kl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=a0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function qb(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&a0.enqueueReplaceState(e,e.state,null)}function Cx(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},Rw(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ns(s):(s=Kr(e)?Zu:hr.current,r.context=bf(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Px(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&a0.enqueueReplaceState(r,r.state,null),Pv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Cf(n,e){try{var t="",i=e;do t+=vD(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Vy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ax(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var WN=typeof WeakMap=="function"?WeakMap:Map;function v3(n,e,t){t=ga(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){kv||(kv=!0,Ux=i),Ax(n,e)},t}function y3(n,e,t){t=ga(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Ax(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Ax(n,e),typeof i!="function"&&(El===null?El=new Set([this]):El.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Kb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new WN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=rO.bind(null,n,e,t),e.then(n,n))}function Jb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Qb(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ga(-1,1),e.tag=2,Tl(t,e,1))),t.lanes|=1),n)}var jN=La.ReactCurrentOwner,Yr=!1;function Ir(n,e,t,i){e.child=n===null?XC(e,null,t,i):Ef(e,n.child,t,i)}function $b(n,e,t,i,r){t=t.render;var s=e.ref;return vf(e,r),i=Ow(n,e,t,i,s,r),t=zw(),n!==null&&!Yr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Sa(n,e,r)):(Dn&&t&&bw(e),e.flags|=1,Ir(n,e,i,r),e.child)}function e2(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Xw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,_3(n,e,s,i,r)):(n=Kg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Cd,t(o,i)&&n.ref===e.ref)return Sa(n,e,r)}return e.flags|=1,n=Cl(s,i),n.ref=e.ref,n.return=e,e.child=n}function _3(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Cd(s,i)&&n.ref===e.ref)if(Yr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Yr=!0);else return e.lanes=n.lanes,Sa(n,e,r)}return Lx(n,e,t,i,r)}function x3(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(rf,ls),ls|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pn(rf,ls),ls|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Pn(rf,ls),ls|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Pn(rf,ls),ls|=i;return Ir(n,e,r,t),e.child}function w3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Lx(n,e,t,i,r){var s=Kr(t)?Zu:hr.current;return s=bf(e,s),vf(e,r),t=Ow(n,e,t,i,s,r),i=zw(),n!==null&&!Yr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Sa(n,e,r)):(Dn&&i&&bw(e),e.flags|=1,Ir(n,e,t,r),e.child)}function t2(n,e,t,i,r){if(Kr(t)){var s=!0;Sv(e)}else s=!1;if(vf(e,r),e.stateNode===null)Xg(n,e),g3(e,t,i),Cx(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ns(c):(c=Kr(t)?Zu:hr.current,c=bf(e,c));var f=t.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&qb(e,o,i,c),fl=!1;var m=e.memoizedState;o.state=m,Pv(e,i,o,r),l=e.memoizedState,a!==i||m!==l||qr.current||fl?(typeof f=="function"&&(Px(e,t,f,i),l=e.memoizedState),(a=fl||Yb(e,t,a,i,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,qC(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:no(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ns(l):(l=Kr(t)?Zu:hr.current,l=bf(e,l));var v=t.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&qb(e,o,i,l),fl=!1,m=e.memoizedState,o.state=m,Pv(e,i,o,r);var y=e.memoizedState;a!==p||m!==y||qr.current||fl?(typeof v=="function"&&(Px(e,t,v,i),y=e.memoizedState),(c=fl||Yb(e,t,c,i,m,y,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Rx(n,e,t,i,s,r)}function Rx(n,e,t,i,r,s){w3(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Bb(e,t,!1),Sa(n,e,s);i=e.stateNode,jN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Ef(e,n.child,null,s),e.child=Ef(e,null,a,s)):Ir(n,e,a,s),e.memoizedState=i.state,r&&Bb(e,t,!0),e.child}function S3(n){var e=n.stateNode;e.pendingContext?Ub(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ub(n,e.context,!1),kw(n,e.containerInfo)}function n2(n,e,t,i,r){return Tf(),Ew(r),e.flags|=256,Ir(n,e,t,i),e.child}var kx={dehydrated:null,treeContext:null,retryLane:0};function Ix(n){return{baseLanes:n,cachePool:null,transitions:null}}function M3(n,e,t){var i=e.pendingProps,r=zn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Pn(zn,r&1),n===null)return Tx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=c0(o,i,0,null),n=Fu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Ix(t),e.memoizedState=kx,n):Bw(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ZN(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Cl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Cl(a,s):(s=Fu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Ix(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=kx,i}return s=n.child,n=s.sibling,i=Cl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Bw(n,e){return e=c0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zm(n,e,t,i){return i!==null&&Ew(i),Ef(e,n.child,null,t),n=Bw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ZN(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Vy(Error(et(422))),zm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=c0({mode:"visible",children:i.children},r,0,null),s=Fu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ef(e,n.child,null,o),e.child.memoizedState=Ix(o),e.memoizedState=kx,s);if(!(e.mode&1))return zm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(et(419)),i=Vy(s,i,void 0),zm(n,e,o,i)}if(a=(o&n.childLanes)!==0,Yr||a){if(i=Oi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,wa(n,r),fo(i,n,r,-1))}return Zw(),i=Vy(Error(et(421))),zm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=sO.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,us=bl(r.nextSibling),cs=e,Dn=!0,oo=null,n!==null&&(Ls[Rs++]=ha,Ls[Rs++]=da,Ls[Rs++]=Xu,ha=n.id,da=n.overflow,Xu=e),e=Bw(e,i.children),e.flags|=4096,e)}function i2(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Ex(n.return,e,t)}function Gy(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function b3(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ir(n,e,i.children,t),i=zn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&i2(n,t,e);else if(n.tag===19)i2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Pn(zn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Cv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Gy(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Cv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Gy(e,!0,t,null,s);break;case"together":Gy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Sa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),qu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(et(153));if(e.child!==null){for(n=e.child,t=Cl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function XN(n,e,t){switch(e.tag){case 3:S3(e),Tf();break;case 5:KC(e);break;case 1:Kr(e.type)&&Sv(e);break;case 4:kw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Pn(Tv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Pn(zn,zn.current&1),e.flags|=128,null):t&e.child.childLanes?M3(n,e,t):(Pn(zn,zn.current&1),n=Sa(n,e,t),n!==null?n.sibling:null);Pn(zn,zn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return b3(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pn(zn,zn.current),i)break;return null;case 22:case 23:return e.lanes=0,x3(n,e,t)}return Sa(n,e,t)}var T3,Dx,E3,P3;T3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Dx=function(){};E3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Lu(Io.current);var s=null;switch(t){case"input":r=nx(n,r),i=nx(n,i),s=[];break;case"select":r=Hn({},r,{value:void 0}),i=Hn({},i,{value:void 0}),s=[];break;case"textarea":r=sx(n,r),i=sx(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=xv)}ax(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};P3=function(n,e,t,i){t!==i&&(e.flags|=4)};function Th(n,e){if(!Dn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function rr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function YN(n,e,t){var i=e.pendingProps;switch(Tw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(e),null;case 1:return Kr(e.type)&&wv(),rr(e),null;case 3:return i=e.stateNode,Pf(),kn(qr),kn(hr),Dw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Nm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oo!==null&&(Gx(oo),oo=null))),Dx(n,e),rr(e),null;case 5:Iw(e);var r=Lu(Id.current);if(t=e.type,n!==null&&e.stateNode!=null)E3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(et(166));return rr(e),null}if(n=Lu(Io.current),Nm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ro]=e,i[Rd]=s,n=(e.mode&1)!==0,t){case"dialog":Rn("cancel",i),Rn("close",i);break;case"iframe":case"object":case"embed":Rn("load",i);break;case"video":case"audio":for(r=0;r<qh.length;r++)Rn(qh[r],i);break;case"source":Rn("error",i);break;case"img":case"image":case"link":Rn("error",i),Rn("load",i);break;case"details":Rn("toggle",i);break;case"input":hb(i,s),Rn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Rn("invalid",i);break;case"textarea":pb(i,s),Rn("invalid",i)}ax(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dm(i.textContent,a,n),r=["children",""+a]):wd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rn("scroll",i)}switch(t){case"input":Em(i),db(i,s,!0);break;case"textarea":Em(i),mb(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=xv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ro]=e,n[Rd]=i,T3(n,e,!1,!1),e.stateNode=n;e:{switch(o=lx(t,i),t){case"dialog":Rn("cancel",n),Rn("close",n),r=i;break;case"iframe":case"object":case"embed":Rn("load",n),r=i;break;case"video":case"audio":for(r=0;r<qh.length;r++)Rn(qh[r],n);r=i;break;case"source":Rn("error",n),r=i;break;case"img":case"image":case"link":Rn("error",n),Rn("load",n),r=i;break;case"details":Rn("toggle",n),r=i;break;case"input":hb(n,i),r=nx(n,i),Rn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Hn({},i,{value:void 0}),Rn("invalid",n);break;case"textarea":pb(n,i),r=sx(n,i),Rn("invalid",n);break;default:r=i}ax(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rC(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nC(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Sd(n,l):typeof l=="number"&&Sd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rn("scroll",n):l!=null&&cw(n,s,l,o))}switch(t){case"input":Em(n),db(n,i,!1);break;case"textarea":Em(n),mb(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Rl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?df(n,!!i.multiple,s,!1):i.defaultValue!=null&&df(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=xv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rr(e),null;case 6:if(n&&e.stateNode!=null)P3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(et(166));if(t=Lu(Id.current),Lu(Io.current),Nm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ro]=e,(s=i.nodeValue!==t)&&(n=cs,n!==null))switch(n.tag){case 3:Dm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Dm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ro]=e,e.stateNode=i}return rr(e),null;case 13:if(kn(zn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dn&&us!==null&&e.mode&1&&!(e.flags&128))jC(),Tf(),e.flags|=98560,s=!1;else if(s=Nm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(et(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Ro]=e}else Tf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rr(e),s=!1}else oo!==null&&(Gx(oo),oo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||zn.current&1?Ei===0&&(Ei=3):Zw())),e.updateQueue!==null&&(e.flags|=4),rr(e),null);case 4:return Pf(),Dx(n,e),n===null&&Ad(e.stateNode.containerInfo),rr(e),null;case 10:return Aw(e.type._context),rr(e),null;case 17:return Kr(e.type)&&wv(),rr(e),null;case 19:if(kn(zn),s=e.memoizedState,s===null)return rr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Th(s,!1);else{if(Ei!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Cv(n),o!==null){for(e.flags|=128,Th(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pn(zn,zn.current&1|2),e.child}n=n.sibling}s.tail!==null&&ti()>Af&&(e.flags|=128,i=!0,Th(s,!1),e.lanes=4194304)}else{if(!i)if(n=Cv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Th(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dn)return rr(e),null}else 2*ti()-s.renderingStartTime>Af&&t!==1073741824&&(e.flags|=128,i=!0,Th(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ti(),e.sibling=null,t=zn.current,Pn(zn,i?t&1|2:t&1),e):(rr(e),null);case 22:case 23:return jw(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ls&1073741824&&(rr(e),e.subtreeFlags&6&&(e.flags|=8192)):rr(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function qN(n,e){switch(Tw(e),e.tag){case 1:return Kr(e.type)&&wv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Pf(),kn(qr),kn(hr),Dw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Iw(e),null;case 13:if(kn(zn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(et(340));Tf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return kn(zn),null;case 4:return Pf(),null;case 10:return Aw(e.type._context),null;case 22:case 23:return jw(),null;case 24:return null;default:return null}}var Fm=!1,ur=!1,KN=typeof WeakSet=="function"?WeakSet:Set,dt=null;function nf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Xn(n,e,i)}else t.current=null}function Nx(n,e,t){try{t()}catch(i){Xn(n,e,i)}}var r2=!1;function JN(n,e){if(yx=vv,n=kC(),Mw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,f=0,p=n,m=null;t:for(;;){for(var v;p!==t||r!==0&&p.nodeType!==3||(a=o+r),p!==s||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===n)break t;if(m===t&&++c===r&&(a=o),m===s&&++f===i&&(l=o),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(_x={focusedElem:n,selectionRange:t},vv=!1,dt=e;dt!==null;)if(e=dt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,dt=n;else for(;dt!==null;){e=dt;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,T=e.stateNode,M=T.getSnapshotBeforeUpdate(e.elementType===e.type?_:no(e.type,_),S);T.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(C){Xn(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,dt=n;break}dt=e.return}return y=r2,r2=!1,y}function rd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Nx(e,t,s)}r=r.next}while(r!==i)}}function l0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Ox(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function C3(n){var e=n.alternate;e!==null&&(n.alternate=null,C3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ro],delete e[Rd],delete e[Sx],delete e[IN],delete e[DN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function A3(n){return n.tag===5||n.tag===3||n.tag===4}function s2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||A3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=xv));else if(i!==4&&(n=n.child,n!==null))for(zx(n,e,t),n=n.sibling;n!==null;)zx(n,e,t),n=n.sibling}function Fx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Fx(n,e,t),n=n.sibling;n!==null;)Fx(n,e,t),n=n.sibling}var Zi=null,io=!1;function nl(n,e,t){for(t=t.child;t!==null;)L3(n,e,t),t=t.sibling}function L3(n,e,t){if(ko&&typeof ko.onCommitFiberUnmount=="function")try{ko.onCommitFiberUnmount(e0,t)}catch{}switch(t.tag){case 5:ur||nf(t,e);case 6:var i=Zi,r=io;Zi=null,nl(n,e,t),Zi=i,io=r,Zi!==null&&(io?(n=Zi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Zi.removeChild(t.stateNode));break;case 18:Zi!==null&&(io?(n=Zi,t=t.stateNode,n.nodeType===8?Ny(n.parentNode,t):n.nodeType===1&&Ny(n,t),Ed(n)):Ny(Zi,t.stateNode));break;case 4:i=Zi,r=io,Zi=t.stateNode.containerInfo,io=!0,nl(n,e,t),Zi=i,io=r;break;case 0:case 11:case 14:case 15:if(!ur&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Nx(t,e,o),r=r.next}while(r!==i)}nl(n,e,t);break;case 1:if(!ur&&(nf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Xn(t,e,a)}nl(n,e,t);break;case 21:nl(n,e,t);break;case 22:t.mode&1?(ur=(i=ur)||t.memoizedState!==null,nl(n,e,t),ur=i):nl(n,e,t);break;default:nl(n,e,t)}}function o2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new KN),e.forEach(function(i){var r=oO.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Js(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zi=a.stateNode,io=!1;break e;case 3:Zi=a.stateNode.containerInfo,io=!0;break e;case 4:Zi=a.stateNode.containerInfo,io=!0;break e}a=a.return}if(Zi===null)throw Error(et(160));L3(s,o,r),Zi=null,io=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Xn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R3(e,n),e=e.sibling}function R3(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Js(e,n),Po(n),i&4){try{rd(3,n,n.return),l0(3,n)}catch(_){Xn(n,n.return,_)}try{rd(5,n,n.return)}catch(_){Xn(n,n.return,_)}}break;case 1:Js(e,n),Po(n),i&512&&t!==null&&nf(t,t.return);break;case 5:if(Js(e,n),Po(n),i&512&&t!==null&&nf(t,t.return),n.flags&32){var r=n.stateNode;try{Sd(r,"")}catch(_){Xn(n,n.return,_)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$P(r,s),lx(a,o);var c=lx(a,s);for(o=0;o<l.length;o+=2){var f=l[o],p=l[o+1];f==="style"?rC(r,p):f==="dangerouslySetInnerHTML"?nC(r,p):f==="children"?Sd(r,p):cw(r,f,p,c)}switch(a){case"input":ix(r,s);break;case"textarea":eC(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?df(r,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?df(r,!!s.multiple,s.defaultValue,!0):df(r,!!s.multiple,s.multiple?[]:"",!1))}r[Rd]=s}catch(_){Xn(n,n.return,_)}}break;case 6:if(Js(e,n),Po(n),i&4){if(n.stateNode===null)throw Error(et(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(_){Xn(n,n.return,_)}}break;case 3:if(Js(e,n),Po(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(_){Xn(n,n.return,_)}break;case 4:Js(e,n),Po(n);break;case 13:Js(e,n),Po(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hw=ti())),i&4&&o2(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(ur=(c=ur)||f,Js(e,n),ur=c):Js(e,n),Po(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!f&&n.mode&1)for(dt=n,f=n.child;f!==null;){for(p=dt=f;dt!==null;){switch(m=dt,v=m.child,m.tag){case 0:case 11:case 14:case 15:rd(4,m,m.return);break;case 1:nf(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Xn(i,t,_)}}break;case 5:nf(m,m.return);break;case 22:if(m.memoizedState!==null){l2(p);continue}}v!==null?(v.return=m,dt=v):l2(p)}f=f.sibling}e:for(f=null,p=n;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iC("display",o))}catch(_){Xn(n,n.return,_)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(_){Xn(n,n.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Js(e,n),Po(n),i&4&&o2(n);break;case 21:break;default:Js(e,n),Po(n)}}function Po(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(A3(t)){var i=t;break e}t=t.return}throw Error(et(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Sd(r,""),i.flags&=-33);var s=s2(n);Fx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=s2(n);zx(n,a,o);break;default:throw Error(et(161))}}catch(l){Xn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function QN(n,e,t){dt=n,k3(n)}function k3(n,e,t){for(var i=(n.mode&1)!==0;dt!==null;){var r=dt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Fm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ur;a=Fm;var c=ur;if(Fm=o,(ur=l)&&!c)for(dt=r;dt!==null;)o=dt,l=o.child,o.tag===22&&o.memoizedState!==null?u2(r):l!==null?(l.return=o,dt=l):u2(r);for(;s!==null;)dt=s,k3(s),s=s.sibling;dt=r,Fm=a,ur=c}a2(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,dt=s):a2(n)}}function a2(n){for(;dt!==null;){var e=dt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ur||l0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ur)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:no(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jb(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}jb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ed(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}ur||e.flags&512&&Ox(e)}catch(m){Xn(e,e.return,m)}}if(e===n){dt=null;break}if(t=e.sibling,t!==null){t.return=e.return,dt=t;break}dt=e.return}}function l2(n){for(;dt!==null;){var e=dt;if(e===n){dt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,dt=t;break}dt=e.return}}function u2(n){for(;dt!==null;){var e=dt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{l0(4,e)}catch(l){Xn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Xn(e,r,l)}}var s=e.return;try{Ox(e)}catch(l){Xn(e,s,l)}break;case 5:var o=e.return;try{Ox(e)}catch(l){Xn(e,o,l)}}}catch(l){Xn(e,e.return,l)}if(e===n){dt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,dt=a;break}dt=e.return}}var $N=Math.ceil,Rv=La.ReactCurrentDispatcher,Vw=La.ReactCurrentOwner,Ds=La.ReactCurrentBatchConfig,rn=0,Oi=null,di=null,Xi=0,ls=0,rf=Fl(0),Ei=0,zd=null,qu=0,u0=0,Gw=0,sd=null,Zr=null,Hw=0,Af=1/0,la=null,kv=!1,Ux=null,El=null,Um=!1,gl=null,Iv=0,od=0,Bx=null,Yg=-1,qg=0;function Dr(){return rn&6?ti():Yg!==-1?Yg:Yg=ti()}function Pl(n){return n.mode&1?rn&2&&Xi!==0?Xi&-Xi:ON.transition!==null?(qg===0&&(qg=gC()),qg):(n=pn,n!==0||(n=window.event,n=n===void 0?16:MC(n.type)),n):1}function fo(n,e,t,i){if(50<od)throw od=0,Bx=null,Error(et(185));cp(n,t,i),(!(rn&2)||n!==Oi)&&(n===Oi&&(!(rn&2)&&(u0|=t),Ei===4&&pl(n,Xi)),Jr(n,i),t===1&&rn===0&&!(e.mode&1)&&(Af=ti()+500,s0&&Ul()))}function Jr(n,e){var t=n.callbackNode;OD(n,e);var i=gv(n,n===Oi?Xi:0);if(i===0)t!==null&&yb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&yb(t),e===1)n.tag===0?NN(c2.bind(null,n)):GC(c2.bind(null,n)),RN(function(){!(rn&6)&&Ul()}),t=null;else{switch(vC(i)){case 1:t=mw;break;case 4:t=pC;break;case 16:t=mv;break;case 536870912:t=mC;break;default:t=mv}t=B3(t,I3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function I3(n,e){if(Yg=-1,qg=0,rn&6)throw Error(et(327));var t=n.callbackNode;if(yf()&&n.callbackNode!==t)return null;var i=gv(n,n===Oi?Xi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Dv(n,i);else{e=i;var r=rn;rn|=2;var s=N3();(Oi!==n||Xi!==e)&&(la=null,Af=ti()+500,zu(n,e));do try{nO();break}catch(a){D3(n,a)}while(1);Cw(),Rv.current=s,rn=r,di!==null?e=0:(Oi=null,Xi=0,e=Ei)}if(e!==0){if(e===2&&(r=dx(n),r!==0&&(i=r,e=Vx(n,r))),e===1)throw t=zd,zu(n,0),pl(n,i),Jr(n,ti()),t;if(e===6)pl(n,i);else{if(r=n.current.alternate,!(i&30)&&!eO(r)&&(e=Dv(n,i),e===2&&(s=dx(n),s!==0&&(i=s,e=Vx(n,s))),e===1))throw t=zd,zu(n,0),pl(n,i),Jr(n,ti()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(et(345));case 2:Su(n,Zr,la);break;case 3:if(pl(n,i),(i&130023424)===i&&(e=Hw+500-ti(),10<e)){if(gv(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Dr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=wx(Su.bind(null,n,Zr,la),e);break}Su(n,Zr,la);break;case 4:if(pl(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-co(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ti()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$N(i/1960))-i,10<i){n.timeoutHandle=wx(Su.bind(null,n,Zr,la),i);break}Su(n,Zr,la);break;case 5:Su(n,Zr,la);break;default:throw Error(et(329))}}}return Jr(n,ti()),n.callbackNode===t?I3.bind(null,n):null}function Vx(n,e){var t=sd;return n.current.memoizedState.isDehydrated&&(zu(n,e).flags|=256),n=Dv(n,e),n!==2&&(e=Zr,Zr=t,e!==null&&Gx(e)),n}function Gx(n){Zr===null?Zr=n:Zr.push.apply(Zr,n)}function eO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!go(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pl(n,e){for(e&=~Gw,e&=~u0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-co(e),i=1<<t;n[t]=-1,e&=~i}}function c2(n){if(rn&6)throw Error(et(327));yf();var e=gv(n,0);if(!(e&1))return Jr(n,ti()),null;var t=Dv(n,e);if(n.tag!==0&&t===2){var i=dx(n);i!==0&&(e=i,t=Vx(n,i))}if(t===1)throw t=zd,zu(n,0),pl(n,e),Jr(n,ti()),t;if(t===6)throw Error(et(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Su(n,Zr,la),Jr(n,ti()),null}function Ww(n,e){var t=rn;rn|=1;try{return n(e)}finally{rn=t,rn===0&&(Af=ti()+500,s0&&Ul())}}function Ku(n){gl!==null&&gl.tag===0&&!(rn&6)&&yf();var e=rn;rn|=1;var t=Ds.transition,i=pn;try{if(Ds.transition=null,pn=1,n)return n()}finally{pn=i,Ds.transition=t,rn=e,!(rn&6)&&Ul()}}function jw(){ls=rf.current,kn(rf)}function zu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,LN(t)),di!==null)for(t=di.return;t!==null;){var i=t;switch(Tw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wv();break;case 3:Pf(),kn(qr),kn(hr),Dw();break;case 5:Iw(i);break;case 4:Pf();break;case 13:kn(zn);break;case 19:kn(zn);break;case 10:Aw(i.type._context);break;case 22:case 23:jw()}t=t.return}if(Oi=n,di=n=Cl(n.current,null),Xi=ls=e,Ei=0,zd=null,Gw=u0=qu=0,Zr=sd=null,Au!==null){for(e=0;e<Au.length;e++)if(t=Au[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Au=null}return n}function D3(n,e){do{var t=di;try{if(Cw(),jg.current=Lv,Av){for(var i=Bn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Av=!1}if(Yu=0,Di=Ti=Bn=null,id=!1,Dd=0,Vw.current=null,t===null||t.return===null){Ei=1,zd=e,di=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Xi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Jb(o);if(v!==null){v.flags&=-257,Qb(v,o,a,s,e),v.mode&1&&Kb(s,c,e),e=v,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){Kb(s,c,e),Zw();break e}l=Error(et(426))}}else if(Dn&&a.mode&1){var S=Jb(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Qb(S,o,a,s,e),Ew(Cf(l,a));break e}}s=l=Cf(l,a),Ei!==4&&(Ei=2),sd===null?sd=[s]:sd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=v3(s,l,e);Wb(s,T);break e;case 1:a=l;var M=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(El===null||!El.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=y3(s,a,e);Wb(s,C);break e}}s=s.return}while(s!==null)}z3(t)}catch(k){e=k,di===t&&t!==null&&(di=t=t.return);continue}break}while(1)}function N3(){var n=Rv.current;return Rv.current=Lv,n===null?Lv:n}function Zw(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Oi===null||!(qu&268435455)&&!(u0&268435455)||pl(Oi,Xi)}function Dv(n,e){var t=rn;rn|=2;var i=N3();(Oi!==n||Xi!==e)&&(la=null,zu(n,e));do try{tO();break}catch(r){D3(n,r)}while(1);if(Cw(),rn=t,Rv.current=i,di!==null)throw Error(et(261));return Oi=null,Xi=0,Ei}function tO(){for(;di!==null;)O3(di)}function nO(){for(;di!==null&&!PD();)O3(di)}function O3(n){var e=U3(n.alternate,n,ls);n.memoizedProps=n.pendingProps,e===null?z3(n):di=e,Vw.current=null}function z3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=qN(t,e),t!==null){t.flags&=32767,di=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ei=6,di=null;return}}else if(t=YN(t,e,ls),t!==null){di=t;return}if(e=e.sibling,e!==null){di=e;return}di=e=n}while(e!==null);Ei===0&&(Ei=5)}function Su(n,e,t){var i=pn,r=Ds.transition;try{Ds.transition=null,pn=1,iO(n,e,t,i)}finally{Ds.transition=r,pn=i}return null}function iO(n,e,t,i){do yf();while(gl!==null);if(rn&6)throw Error(et(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(et(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(zD(n,s),n===Oi&&(di=Oi=null,Xi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Um||(Um=!0,B3(mv,function(){return yf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ds.transition,Ds.transition=null;var o=pn;pn=1;var a=rn;rn|=4,Vw.current=null,JN(n,t),R3(t,n),MN(_x),vv=!!yx,_x=yx=null,n.current=t,QN(t),CD(),rn=a,pn=o,Ds.transition=s}else n.current=t;if(Um&&(Um=!1,gl=n,Iv=r),s=n.pendingLanes,s===0&&(El=null),RD(t.stateNode),Jr(n,ti()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(kv)throw kv=!1,n=Ux,Ux=null,n;return Iv&1&&n.tag!==0&&yf(),s=n.pendingLanes,s&1?n===Bx?od++:(od=0,Bx=n):od=0,Ul(),null}function yf(){if(gl!==null){var n=vC(Iv),e=Ds.transition,t=pn;try{if(Ds.transition=null,pn=16>n?16:n,gl===null)var i=!1;else{if(n=gl,gl=null,Iv=0,rn&6)throw Error(et(331));var r=rn;for(rn|=4,dt=n.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(dt=c;dt!==null;){var f=dt;switch(f.tag){case 0:case 11:case 15:rd(8,f,s)}var p=f.child;if(p!==null)p.return=f,dt=p;else for(;dt!==null;){f=dt;var m=f.sibling,v=f.return;if(C3(f),f===c){dt=null;break}if(m!==null){m.return=v,dt=m;break}dt=v}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rd(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,dt=T;break e}dt=s.return}}var M=n.current;for(dt=M;dt!==null;){o=dt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,dt=b;else e:for(o=M;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:l0(9,a)}}catch(k){Xn(a,a.return,k)}if(a===o){dt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,dt=C;break e}dt=a.return}}if(rn=r,Ul(),ko&&typeof ko.onPostCommitFiberRoot=="function")try{ko.onPostCommitFiberRoot(e0,n)}catch{}i=!0}return i}finally{pn=t,Ds.transition=e}}return!1}function f2(n,e,t){e=Cf(t,e),e=v3(n,e,1),n=Tl(n,e,1),e=Dr(),n!==null&&(cp(n,1,e),Jr(n,e))}function Xn(n,e,t){if(n.tag===3)f2(n,n,t);else for(;e!==null;){if(e.tag===3){f2(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(El===null||!El.has(i))){n=Cf(t,n),n=y3(e,n,1),e=Tl(e,n,1),n=Dr(),e!==null&&(cp(e,1,n),Jr(e,n));break}}e=e.return}}function rO(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Dr(),n.pingedLanes|=n.suspendedLanes&t,Oi===n&&(Xi&t)===t&&(Ei===4||Ei===3&&(Xi&130023424)===Xi&&500>ti()-Hw?zu(n,0):Gw|=t),Jr(n,e)}function F3(n,e){e===0&&(n.mode&1?(e=Am,Am<<=1,!(Am&130023424)&&(Am=4194304)):e=1);var t=Dr();n=wa(n,e),n!==null&&(cp(n,e,t),Jr(n,t))}function sO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),F3(n,t)}function oO(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(et(314))}i!==null&&i.delete(e),F3(n,t)}var U3;U3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qr.current)Yr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Yr=!1,XN(n,e,t);Yr=!!(n.flags&131072)}else Yr=!1,Dn&&e.flags&1048576&&HC(e,bv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Xg(n,e),n=e.pendingProps;var r=bf(e,hr.current);vf(e,t),r=Ow(null,e,i,n,r,t);var s=zw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(i)?(s=!0,Sv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Rw(e),r.updater=a0,e.stateNode=r,r._reactInternals=e,Cx(e,i,n,t),e=Rx(null,e,i,!0,s,t)):(e.tag=0,Dn&&s&&bw(e),Ir(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Xg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=lO(i),n=no(i,n),r){case 0:e=Lx(null,e,i,n,t);break e;case 1:e=t2(null,e,i,n,t);break e;case 11:e=$b(null,e,i,n,t);break e;case 14:e=e2(null,e,i,no(i.type,n),t);break e}throw Error(et(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:no(i,r),Lx(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:no(i,r),t2(n,e,i,r,t);case 3:e:{if(S3(e),n===null)throw Error(et(387));i=e.pendingProps,s=e.memoizedState,r=s.element,qC(n,e),Pv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Cf(Error(et(423)),e),e=n2(n,e,i,t,r);break e}else if(i!==r){r=Cf(Error(et(424)),e),e=n2(n,e,i,t,r);break e}else for(us=bl(e.stateNode.containerInfo.firstChild),cs=e,Dn=!0,oo=null,t=XC(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tf(),i===r){e=Sa(n,e,t);break e}Ir(n,e,i,t)}e=e.child}return e;case 5:return KC(e),n===null&&Tx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,xx(i,r)?o=null:s!==null&&xx(i,s)&&(e.flags|=32),w3(n,e),Ir(n,e,o,t),e.child;case 6:return n===null&&Tx(e),null;case 13:return M3(n,e,t);case 4:return kw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Ef(e,null,i,t):Ir(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:no(i,r),$b(n,e,i,r,t);case 7:return Ir(n,e,e.pendingProps,t),e.child;case 8:return Ir(n,e,e.pendingProps.children,t),e.child;case 12:return Ir(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Pn(Tv,i._currentValue),i._currentValue=o,s!==null)if(go(s.value,o)){if(s.children===r.children&&!qr.current){e=Sa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ga(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Ex(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Ex(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ir(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,vf(e,t),r=Ns(r),i=i(r),e.flags|=1,Ir(n,e,i,t),e.child;case 14:return i=e.type,r=no(i,e.pendingProps),r=no(i.type,r),e2(n,e,i,r,t);case 15:return _3(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:no(i,r),Xg(n,e),e.tag=1,Kr(i)?(n=!0,Sv(e)):n=!1,vf(e,t),g3(e,i,r),Cx(e,i,r,t),Rx(null,e,i,!0,n,t);case 19:return b3(n,e,t);case 22:return x3(n,e,t)}throw Error(et(156,e.tag))};function B3(n,e){return dC(n,e)}function aO(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(n,e,t,i){return new aO(n,e,t,i)}function Xw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lO(n){if(typeof n=="function")return Xw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hw)return 11;if(n===dw)return 14}return 2}function Cl(n,e){var t=n.alternate;return t===null?(t=Is(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Kg(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Xw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Xc:return Fu(t.children,r,s,e);case fw:o=8,r|=8;break;case Q_:return n=Is(12,t,e,r|2),n.elementType=Q_,n.lanes=s,n;case $_:return n=Is(13,t,e,r),n.elementType=$_,n.lanes=s,n;case ex:return n=Is(19,t,e,r),n.elementType=ex,n.lanes=s,n;case KP:return c0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YP:o=10;break e;case qP:o=9;break e;case hw:o=11;break e;case dw:o=14;break e;case cl:o=16,i=null;break e}throw Error(et(130,n==null?n:typeof n,""))}return e=Is(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Fu(n,e,t,i){return n=Is(7,n,i,e),n.lanes=t,n}function c0(n,e,t,i){return n=Is(22,n,i,e),n.elementType=KP,n.lanes=t,n.stateNode={isHidden:!1},n}function Hy(n,e,t){return n=Is(6,n,null,e),n.lanes=t,n}function Wy(n,e,t){return e=Is(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uO(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=by(0),this.expirationTimes=by(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=by(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yw(n,e,t,i,r,s,o,a,l){return n=new uO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Is(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rw(s),n}function cO(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function V3(n){if(!n)return kl;n=n._reactInternals;e:{if(ic(n)!==n||n.tag!==1)throw Error(et(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(n.tag===1){var t=n.type;if(Kr(t))return VC(n,t,e)}return e}function G3(n,e,t,i,r,s,o,a,l){return n=Yw(t,i,!0,n,r,s,o,a,l),n.context=V3(null),t=n.current,i=Dr(),r=Pl(t),s=ga(i,r),s.callback=e??null,Tl(t,s,r),n.current.lanes=r,cp(n,r,i),Jr(n,i),n}function f0(n,e,t,i){var r=e.current,s=Dr(),o=Pl(r);return t=V3(t),e.context===null?e.context=t:e.pendingContext=t,e=ga(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Tl(r,e,o),n!==null&&(fo(n,r,o,s),Wg(n,r,o)),o}function Nv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function h2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function qw(n,e){h2(n,e),(n=n.alternate)&&h2(n,e)}function fO(){return null}var H3=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kw(n){this._internalRoot=n}h0.prototype.render=Kw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(et(409));f0(n,e,null,null)};h0.prototype.unmount=Kw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ku(function(){f0(null,n,null,null)}),e[xa]=null}};function h0(n){this._internalRoot=n}h0.prototype.unstable_scheduleHydration=function(n){if(n){var e=xC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<dl.length&&e!==0&&e<dl[t].priority;t++);dl.splice(t,0,n),t===0&&SC(n)}};function Jw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function d2(){}function hO(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Nv(o);s.call(c)}}var o=G3(e,i,n,0,null,!1,!1,"",d2);return n._reactRootContainer=o,n[xa]=o.current,Ad(n.nodeType===8?n.parentNode:n),Ku(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Nv(l);a.call(c)}}var l=Yw(n,0,!1,null,null,!1,!1,"",d2);return n._reactRootContainer=l,n[xa]=l.current,Ad(n.nodeType===8?n.parentNode:n),Ku(function(){f0(e,l,t,i)}),l}function p0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Nv(o);a.call(l)}}f0(e,o,n,r)}else o=hO(t,e,n,r,i);return Nv(o)}yC=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Yh(e.pendingLanes);t!==0&&(gw(e,t|1),Jr(e,ti()),!(rn&6)&&(Af=ti()+500,Ul()))}break;case 13:Ku(function(){var i=wa(n,1);if(i!==null){var r=Dr();fo(i,n,1,r)}}),qw(n,1)}};vw=function(n){if(n.tag===13){var e=wa(n,134217728);if(e!==null){var t=Dr();fo(e,n,134217728,t)}qw(n,134217728)}};_C=function(n){if(n.tag===13){var e=Pl(n),t=wa(n,e);if(t!==null){var i=Dr();fo(t,n,e,i)}qw(n,e)}};xC=function(){return pn};wC=function(n,e){var t=pn;try{return pn=n,e()}finally{pn=t}};cx=function(n,e,t){switch(e){case"input":if(ix(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=r0(i);if(!r)throw Error(et(90));QP(i),ix(i,r)}}}break;case"textarea":eC(n,t);break;case"select":e=t.value,e!=null&&df(n,!!t.multiple,e,!1)}};aC=Ww;lC=Ku;var dO={usingClientEntryPoint:!1,Events:[hp,Jc,r0,sC,oC,Ww]},Eh={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pO={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:La.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fC(n),n===null?null:n.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||fO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{e0=Bm.inject(pO),ko=Bm}catch{}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dO;ds.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jw(e))throw Error(et(200));return cO(n,e,null,t)};ds.createRoot=function(n,e){if(!Jw(n))throw Error(et(299));var t=!1,i="",r=H3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Yw(n,1,!1,null,null,t,!1,i,r),n[xa]=e.current,Ad(n.nodeType===8?n.parentNode:n),new Kw(e)};ds.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(et(188)):(n=Object.keys(n).join(","),Error(et(268,n)));return n=fC(e),n=n===null?null:n.stateNode,n};ds.flushSync=function(n){return Ku(n)};ds.hydrate=function(n,e,t){if(!d0(e))throw Error(et(200));return p0(null,n,e,!0,t)};ds.hydrateRoot=function(n,e,t){if(!Jw(n))throw Error(et(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=H3;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=G3(e,null,n,1,t??null,r,!1,s,o),n[xa]=e.current,Ad(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new h0(e)};ds.render=function(n,e,t){if(!d0(e))throw Error(et(200));return p0(null,n,e,!1,t)};ds.unmountComponentAtNode=function(n){if(!d0(n))throw Error(et(40));return n._reactRootContainer?(Ku(function(){p0(null,null,n,!1,function(){n._reactRootContainer=null,n[xa]=null})}),!0):!1};ds.unstable_batchedUpdates=Ww;ds.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!d0(t))throw Error(et(200));if(n==null||n._reactInternals===void 0)throw Error(et(38));return p0(n,e,t,!1,i)};ds.version="18.3.1-next-f1338f8080-20240426";function W3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W3)}catch(n){console.error(n)}}W3(),WP.exports=ds;var j3=WP.exports,Z3,p2=j3;Z3=p2.createRoot,p2.hydrateRoot;const mO="modulepreload",gO=function(n){return"/"+n},m2={},X3=function(e,t,i){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=gO(s),s in m2)return;m2[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let f=r.length-1;f>=0;f--){const p=r[f];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":mO,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((f,p)=>{c.addEventListener("load",f),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var g2="popstate";function vO(n={}){function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Hx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Fd(r)}return _O(e,t,null,n)}function Vn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Oo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yO(){return Math.random().toString(36).substring(2,10)}function v2(n,e){return{usr:n.state,key:n.key,idx:e}}function Hx(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Bf(e):e,state:t,key:e&&e.key||i||yO()}}function Fd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Bf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function _O(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",l=null,c=f();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function f(){return(o.state||{idx:null}).idx}function p(){a="POP";let S=f(),T=S==null?null:S-c;c=S,l&&l({action:a,location:_.location,delta:T})}function m(S,T){a="PUSH";let M=Hx(_.location,S,T);t&&t(M,S),c=f()+1;let b=v2(M,c),C=_.createHref(M);try{o.pushState(b,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(C)}s&&l&&l({action:a,location:_.location,delta:1})}function v(S,T){a="REPLACE";let M=Hx(_.location,S,T);t&&t(M,S),c=f();let b=v2(M,c),C=_.createHref(M);o.replaceState(b,"",C),s&&l&&l({action:a,location:_.location,delta:0})}function y(S){return xO(S)}let _={get action(){return a},get location(){return n(r,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g2,p),l=S,()=>{r.removeEventListener(g2,p),l=null}},createHref(S){return e(r,S)},createURL:y,encodeLocation(S){let T=y(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:v,go(S){return o.go(S)}};return _}function xO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Vn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Fd(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Y3(n,e,t="/"){return wO(n,e,t,!1)}function wO(n,e,t,i){let r=typeof e=="string"?Bf(e):e,s=Ma(r.pathname||"/",t);if(s==null)return null;let o=q3(n);SO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=IO(s);a=RO(o[l],c,i)}return a}function q3(n,e=[],t=[],i="",r=!1){let s=(o,a,l=r,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&l)return;Vn(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let p=va([i,f.relativePath]),m=t.concat(f);o.children&&o.children.length>0&&(Vn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),q3(o.children,e,m,p,l)),!(o.path==null&&!o.index)&&e.push({path:p,score:AO(p,o.index),routesMeta:m})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of K3(o.path))s(o,a,!0,c)}),e}function K3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=K3(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function SO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LO(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var MO=/^:[\w-]+$/,bO=3,TO=2,EO=1,PO=10,CO=-2,y2=n=>n==="*";function AO(n,e){let t=n.split("/"),i=t.length;return t.some(y2)&&(i+=CO),e&&(i+=TO),t.filter(r=>!y2(r)).reduce((r,s)=>r+(MO.test(s)?bO:s===""?EO:PO),i)}function LO(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function RO(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=Ov({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!p&&c&&t&&!i[i.length-1].route.index&&(p=Ov({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:va([s,p.pathname]),pathnameBase:zO(va([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=va([s,p.pathnameBase]))}return o}function Ov(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=kO(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,{paramName:f,isOptional:p},m)=>{if(f==="*"){let y=a[m]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[m];return p&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function kO(n,e=!1,t=!0){Oo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function IO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Oo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ma(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function DO(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Bf(n):n;return{pathname:t?t.startsWith("/")?t:NO(t,e):e,search:FO(i),hash:UO(r)}}function NO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function jy(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function J3(n){let e=OO(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Q3(n,e,t,i=!1){let r;typeof n=="string"?r=Bf(n):(r={...n},Vn(!r.pathname||!r.pathname.includes("?"),jy("?","pathname","search",r)),Vn(!r.pathname||!r.pathname.includes("#"),jy("#","pathname","hash",r)),Vn(!r.search||!r.search.includes("#"),jy("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=DO(r,a),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var va=n=>n.join("/").replace(/\/\/+/g,"/"),zO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $3=["POST","PUT","PATCH","DELETE"];new Set($3);var VO=["GET",...$3];new Set(VO);var Vf=K.createContext(null);Vf.displayName="DataRouter";var m0=K.createContext(null);m0.displayName="DataRouterState";K.createContext(!1);var eA=K.createContext({isTransitioning:!1});eA.displayName="ViewTransition";var GO=K.createContext(new Map);GO.displayName="Fetchers";var HO=K.createContext(null);HO.displayName="Await";var Uo=K.createContext(null);Uo.displayName="Navigation";var pp=K.createContext(null);pp.displayName="Location";var Ra=K.createContext({outlet:null,matches:[],isDataRoute:!1});Ra.displayName="Route";var Qw=K.createContext(null);Qw.displayName="RouteError";function WO(n,{relative:e}={}){Vn(mp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=K.useContext(Uo),{hash:r,pathname:s,search:o}=gp(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:va([t,s])),i.createHref({pathname:a,search:o,hash:r})}function mp(){return K.useContext(pp)!=null}function Bl(){return Vn(mp(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(pp).location}var tA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nA(n){K.useContext(Uo).static||K.useLayoutEffect(n)}function jO(){let{isDataRoute:n}=K.useContext(Ra);return n?r4():ZO()}function ZO(){Vn(mp(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Vf),{basename:e,navigator:t}=K.useContext(Uo),{matches:i}=K.useContext(Ra),{pathname:r}=Bl(),s=JSON.stringify(J3(i)),o=K.useRef(!1);return nA(()=>{o.current=!0}),K.useCallback((l,c={})=>{if(Oo(o.current,tA),!o.current)return;if(typeof l=="number"){t.go(l);return}let f=Q3(l,JSON.parse(s),r,c.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:va([e,f.pathname])),(c.replace?t.replace:t.push)(f,c.state,c)},[e,t,s,r,n])}K.createContext(null);function gp(n,{relative:e}={}){let{matches:t}=K.useContext(Ra),{pathname:i}=Bl(),r=JSON.stringify(J3(t));return K.useMemo(()=>Q3(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function XO(n,e){return iA(n,e)}function iA(n,e,t,i,r){var M;Vn(mp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=K.useContext(Uo),{matches:o}=K.useContext(Ra),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",f=a?a.pathnameBase:"/",p=a&&a.route;{let b=p&&p.path||"";rA(c,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=Bl(),v;if(e){let b=typeof e=="string"?Bf(e):e;Vn(f==="/"||((M=b.pathname)==null?void 0:M.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${b.pathname}" was given in the \`location\` prop.`),v=b}else v=m;let y=v.pathname||"/",_=y;if(f!=="/"){let b=f.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let S=Y3(n,{pathname:_});Oo(p||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Oo(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=QO(S&&S.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:va([f,s.encodeLocation?s.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:va([f,s.encodeLocation?s.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,t,i,r);return e&&T?K.createElement(pp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function YO(){let n=i4(),e=BO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:s},"ErrorBoundary")," or"," ",K.createElement("code",{style:s},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,o)}var qO=K.createElement(YO,null),KO=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?K.createElement(Ra.Provider,{value:this.props.routeContext},K.createElement(Qw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JO({routeContext:n,match:e,children:t}){let i=K.useContext(Vf);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Ra.Provider,{value:n},t)}function QO(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let c=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Vn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(t)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,f,p)=>{let m,v=!1,y=null,_=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||qO,a&&(l<0&&p===0?(rA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):l===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,p+1)),T=()=>{let M;return m?M=y:v?M=_:f.route.Component?M=K.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=c,K.createElement(JO,{match:f,routeContext:{outlet:c,matches:S,isDataRoute:t!=null},children:M})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?K.createElement(KO,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:i}):T()},null)}function $w(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $O(n){let e=K.useContext(Vf);return Vn(e,$w(n)),e}function e4(n){let e=K.useContext(m0);return Vn(e,$w(n)),e}function t4(n){let e=K.useContext(Ra);return Vn(e,$w(n)),e}function eS(n){let e=t4(n),t=e.matches[e.matches.length-1];return Vn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function n4(){return eS("useRouteId")}function i4(){var i;let n=K.useContext(Qw),e=e4("useRouteError"),t=eS("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function r4(){let{router:n}=$O("useNavigate"),e=eS("useNavigate"),t=K.useRef(!1);return nA(()=>{t.current=!0}),K.useCallback(async(r,s={})=>{Oo(t.current,tA),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var _2={};function rA(n,e,t){!e&&!_2[n]&&(_2[n]=!0,Oo(!1,t))}K.memo(s4);function s4({routes:n,future:e,state:t,unstable_onError:i}){return iA(n,void 0,t,i,e)}function Kh(n){Vn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o4({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1}){Vn(!mp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=K.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=Bf(t));let{pathname:l="/",search:c="",hash:f="",state:p=null,key:m="default"}=t,v=K.useMemo(()=>{let y=Ma(l,o);return y==null?null:{location:{pathname:y,search:c,hash:f,state:p,key:m},navigationType:i}},[o,l,c,f,p,m,i]);return Oo(v!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:K.createElement(Uo.Provider,{value:a},K.createElement(pp.Provider,{children:e,value:v}))}function a4({children:n,location:e}){return XO(Wx(n),e)}function Wx(n,e=[]){let t=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let s=[...e,r];if(i.type===K.Fragment){t.push.apply(t,Wx(i.props.children,s));return}Vn(i.type===Kh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Wx(i.props.children,s)),t.push(o)}),t}var Jg="get",Qg="application/x-www-form-urlencoded";function g0(n){return n!=null&&typeof n.tagName=="string"}function l4(n){return g0(n)&&n.tagName.toLowerCase()==="button"}function u4(n){return g0(n)&&n.tagName.toLowerCase()==="form"}function c4(n){return g0(n)&&n.tagName.toLowerCase()==="input"}function f4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function h4(n,e){return n.button===0&&(!e||e==="_self")&&!f4(n)}var Vm=null;function d4(){if(Vm===null)try{new FormData(document.createElement("form"),0),Vm=!1}catch{Vm=!0}return Vm}var p4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zy(n){return n!=null&&!p4.has(n)?(Oo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qg}"`),null):n}function m4(n,e){let t,i,r,s,o;if(u4(n)){let a=n.getAttribute("action");i=a?Ma(a,e):null,t=n.getAttribute("method")||Jg,r=Zy(n.getAttribute("enctype"))||Qg,s=new FormData(n)}else if(l4(n)||c4(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(i=l?Ma(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Jg,r=Zy(n.getAttribute("formenctype"))||Zy(a.getAttribute("enctype"))||Qg,s=new FormData(a,n),!d4()){let{name:c,type:f,value:p}=n;if(f==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(g0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jg,i=null,r=Qg,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function g4(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ma(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function v4(n,e){if(n.id in e)return e[n.id];try{let t=await X3(()=>import(n.module),[]);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y4(n){return n!=null&&typeof n.page=="string"}function _4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function x4(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await v4(s,t);return o.links?o.links():[]}return[]}));return b4(i.flat(1).filter(_4).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function x2(n,e,t,i,r,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var f;return t[c].pathname!==l.pathname||((f=t[c].route.path)==null?void 0:f.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var p;let f=i.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function w4(n,e,{includeHydrateFallback:t}={}){return S4(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function S4(n){return[...new Set(n)]}function M4(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function b4(n,e){let t=new Set,i=new Set(e);return n.reduce((r,s)=>{if(e&&!y4(s)&&s.as==="script"&&s.href&&i.has(s.href))return r;let a=JSON.stringify(M4(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function sA(){let n=K.useContext(Vf);return tS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function T4(){let n=K.useContext(m0);return tS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var nS=K.createContext(void 0);nS.displayName="FrameworkContext";function oA(){let n=K.useContext(nS);return tS(n,"You must render this element inside a <HydratedRouter> element"),n}function E4(n,e){let t=K.useContext(nS),[i,r]=K.useState(!1),[s,o]=K.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:p}=e,m=K.useRef(null);K.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=T=>{T.forEach(M=>{o(M.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),K.useEffect(()=>{if(i){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[i]);let v=()=>{r(!0)},y=()=>{r(!1),o(!1)};return t?n!=="intent"?[s,m,{}]:[s,m,{onFocus:Ph(a,v),onBlur:Ph(l,y),onMouseEnter:Ph(c,v),onMouseLeave:Ph(f,y),onTouchStart:Ph(p,v)}]:[!1,m,{}]}function Ph(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function P4({page:n,...e}){let{router:t}=sA(),i=K.useMemo(()=>Y3(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?K.createElement(A4,{page:n,matches:i,...e}):null}function C4(n){let{manifest:e,routeModules:t}=oA(),[i,r]=K.useState([]);return K.useEffect(()=>{let s=!1;return x4(n,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[n,e,t]),i}function A4({page:n,matches:e,...t}){let i=Bl(),{manifest:r,routeModules:s}=oA(),{basename:o}=sA(),{loaderData:a,matches:l}=T4(),c=K.useMemo(()=>x2(n,e,l,r,i,"data"),[n,e,l,r,i]),f=K.useMemo(()=>x2(n,e,l,r,i,"assets"),[n,e,l,r,i]),p=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let y=new Set,_=!1;if(e.forEach(T=>{var b;let M=r.routes[T.route.id];!M||!M.hasLoader||(!c.some(C=>C.route.id===T.route.id)&&T.route.id in a&&((b=s[T.route.id])!=null&&b.shouldRevalidate)||M.hasClientLoader?_=!0:y.add(T.route.id))}),y.size===0)return[];let S=g4(n,o,"data");return _&&y.size>0&&S.searchParams.set("_routes",e.filter(T=>y.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,a,i,r,c,e,n,s]),m=K.useMemo(()=>w4(f,r),[f,r]),v=C4(f);return K.createElement(K.Fragment,null,p.map(y=>K.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),m.map(y=>K.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),v.map(({key:y,link:_})=>K.createElement("link",{key:y,nonce:t.nonce,..._})))}function L4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aA&&(window.__reactRouterVersion="7.9.5")}catch{}function R4({basename:n,children:e,window:t}){let i=K.useRef();i.current==null&&(i.current=vO({window:t,v5Compat:!0}));let r=i.current,[s,o]=K.useState({action:r.action,location:r.location}),a=K.useCallback(l=>{K.startTransition(()=>o(l))},[o]);return K.useLayoutEffect(()=>r.listen(a),[r,a]),K.createElement(o4,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:r})}var lA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lo=K.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:f,viewTransition:p,...m},v){let{basename:y}=K.useContext(Uo),_=typeof c=="string"&&lA.test(c),S,T=!1;if(typeof c=="string"&&_&&(S=c,aA))try{let O=new URL(window.location.href),U=c.startsWith("//")?new URL(O.protocol+c):new URL(c),$=Ma(U.pathname,y);U.origin===O.origin&&$!=null?c=$+U.search+U.hash:T=!0}catch{Oo(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=WO(c,{relative:r}),[b,C,k]=E4(i,m),I=N4(c,{replace:o,state:a,target:l,preventScrollReset:f,relative:r,viewTransition:p});function z(O){e&&e(O),O.defaultPrevented||I(O)}let A=K.createElement("a",{...m,...k,href:S||M,onClick:T||s?e:z,ref:L4(v,C),target:l,"data-discover":!_&&t==="render"?"true":void 0});return b&&!_?K.createElement(K.Fragment,null,A,K.createElement(P4,{page:M})):A});lo.displayName="Link";var k4=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:a,children:l,...c},f){let p=gp(o,{relative:c.relative}),m=Bl(),v=K.useContext(m0),{navigator:y,basename:_}=K.useContext(Uo),S=v!=null&&B4(p)&&a===!0,T=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,M=m.pathname,b=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(M=M.toLowerCase(),b=b?b.toLowerCase():null,T=T.toLowerCase()),b&&_&&(b=Ma(b,_)||b);const C=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let k=M===T||!r&&M.startsWith(T)&&M.charAt(C)==="/",I=b!=null&&(b===T||!r&&b.startsWith(T)&&b.charAt(T.length)==="/"),z={isActive:k,isPending:I,isTransitioning:S},A=k?e:void 0,O;typeof i=="function"?O=i(z):O=[i,k?"active":null,I?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof s=="function"?s(z):s;return K.createElement(lo,{...c,"aria-current":A,className:O,ref:f,style:U,to:o,viewTransition:a},typeof l=="function"?l(z):l)});k4.displayName="NavLink";var I4=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:o=Jg,action:a,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:p,...m},v)=>{let y=F4(),_=U4(a,{relative:c}),S=o.toLowerCase()==="get"?"get":"post",T=typeof a=="string"&&lA.test(a),M=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let C=b.nativeEvent.submitter,k=(C==null?void 0:C.getAttribute("formmethod"))||o;y(C||b.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:r,state:s,relative:c,preventScrollReset:f,viewTransition:p})};return K.createElement("form",{ref:v,method:S,action:_,onSubmit:i?l:M,...m,"data-discover":!T&&n==="render"?"true":void 0})});I4.displayName="Form";function D4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uA(n){let e=K.useContext(Vf);return Vn(e,D4(n)),e}function N4(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:o}={}){let a=jO(),l=Bl(),c=gp(n,{relative:s});return K.useCallback(f=>{if(h4(f,e)){f.preventDefault();let p=t!==void 0?t:Fd(l)===Fd(c);a(n,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:o})}},[l,a,c,t,i,e,n,r,s,o])}var O4=0,z4=()=>`__${String(++O4)}__`;function F4(){let{router:n}=uA("useSubmit"),{basename:e}=K.useContext(Uo),t=n4();return K.useCallback(async(i,r={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=m4(i,e);if(r.navigate===!1){let f=r.fetcherKey||z4();await n.fetch(f,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function U4(n,{relative:e}={}){let{basename:t}=K.useContext(Uo),i=K.useContext(Ra);Vn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...gp(n||".",{relative:e})},o=Bl();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(f=>f==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let f=a.toString();s.search=f?`?${f}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:va([t,s.pathname])),Fd(s)}function B4(n,{relative:e}={}){let t=K.useContext(eA);Vn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=uA("useViewTransitionState"),r=gp(n,{relative:e});if(!t.isTransitioning)return!1;let s=Ma(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Ma(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ov(r.pathname,o)!=null||Ov(r.pathname,s)!=null}var jx=function(n,e){return jx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},jx(n,e)};function cA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var it=function(){return it=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},it.apply(this,arguments)};function zs(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function V4(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qn(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function ho(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var G4="production",iS=typeof process>"u"||process.env===void 0?G4:"production",ea=function(n){return{isEnabled:function(e){return n.some(function(t){return!!e[t]})}}},Ud={measureLayout:ea(["layout","layoutId","drag"]),animation:ea(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:ea(["exit"]),drag:ea(["drag","dragControls"]),focus:ea(["whileFocus"]),hover:ea(["whileHover","onHoverStart","onHoverEnd"]),tap:ea(["whileTap","onTap","onTapStart","onTapCancel"]),pan:ea(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:ea(["whileInView","onViewportEnter","onViewportLeave"])};function H4(n){for(var e in n)n[e]!==null&&(e==="projectionNodeConstructor"?Ud.projectionNodeConstructor=n[e]:Ud[e].Component=n[e])}var W4=function(){},zv=function(){},fA=K.createContext({strict:!1}),hA=Object.keys(Ud),j4=hA.length;function Z4(n,e,t){var i=[],r=K.useContext(fA);if(!e)return null;iS!=="production"&&t&&r.strict;for(var s=0;s<j4;s++){var o=hA[s],a=Ud[o],l=a.isEnabled,c=a.Component;l(n)&&c&&i.push(K.createElement(c,it({key:o},n,{visualElement:e})))}return i}var rS=K.createContext({transformPagePoint:function(n){return n},isStatic:!1,reducedMotion:"never"}),v0=K.createContext({});function X4(){return K.useContext(v0).visualElement}var vp=K.createContext(null),Gf=typeof document<"u",Fv=Gf?K.useLayoutEffect:K.useEffect,Zx={current:null},dA=!1;function Y4(){if(dA=!0,!!Gf)if(window.matchMedia){var n=window.matchMedia("(prefers-reduced-motion)"),e=function(){return Zx.current=n.matches};n.addListener(e),e()}else Zx.current=!1}function q4(){!dA&&Y4();var n=qn(K.useState(Zx.current),1),e=n[0];return e}function K4(){var n=q4(),e=K.useContext(rS).reducedMotion;return e==="never"?!1:e==="always"?!0:n}function J4(n,e,t,i){var r=K.useContext(fA),s=X4(),o=K.useContext(vp),a=K4(),l=K.useRef(void 0);i||(i=r.renderer),!l.current&&i&&(l.current=i(n,{visualState:e,parent:s,props:t,presenceId:o==null?void 0:o.id,blockInitialAnimation:(o==null?void 0:o.initial)===!1,shouldReduceMotion:a}));var c=l.current;return Fv(function(){c==null||c.syncRender()}),K.useEffect(function(){var f;(f=c==null?void 0:c.animationState)===null||f===void 0||f.animateChanges()}),Fv(function(){return function(){return c==null?void 0:c.notifyUnmount()}},[]),c}function sf(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Q4(n,e,t){return K.useCallback(function(i){var r;i&&((r=n.mount)===null||r===void 0||r.call(n,i)),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):sf(t)&&(t.current=i))},[e])}function pA(n){return Array.isArray(n)}function ro(n){return typeof n=="string"||pA(n)}function $4(n){var e={};return n.forEachValue(function(t,i){return e[i]=t.get()}),e}function ez(n){var e={};return n.forEachValue(function(t,i){return e[i]=t.getVelocity()}),e}function mA(n,e,t,i,r){var s;return i===void 0&&(i={}),r===void 0&&(r={}),typeof e=="function"&&(e=e(t??n.custom,i,r)),typeof e=="string"&&(e=(s=n.variants)===null||s===void 0?void 0:s[e]),typeof e=="function"&&(e=e(t??n.custom,i,r)),e}function y0(n,e,t){var i=n.getProps();return mA(i,e,t??i.custom,$4(n),ez(n))}function _0(n){var e;return typeof((e=n.animate)===null||e===void 0?void 0:e.start)=="function"||ro(n.initial)||ro(n.animate)||ro(n.whileHover)||ro(n.whileDrag)||ro(n.whileTap)||ro(n.whileFocus)||ro(n.exit)}function gA(n){return!!(_0(n)||n.variants)}function tz(n,e){if(_0(n)){var t=n.initial,i=n.animate;return{initial:t===!1||ro(t)?t:void 0,animate:ro(i)?i:void 0}}return n.inherit!==!1?e:{}}function nz(n){var e=tz(n,K.useContext(v0)),t=e.initial,i=e.animate;return K.useMemo(function(){return{initial:t,animate:i}},[w2(t),w2(i)])}function w2(n){return Array.isArray(n)?n.join(" "):n}function yp(n){var e=K.useRef(null);return e.current===null&&(e.current=n()),e.current}var ad={hasAnimatedSinceResize:!0,hasEverUpdated:!1},iz=1;function rz(){return yp(function(){if(ad.hasEverUpdated)return iz++})}var sS=K.createContext({}),vA=K.createContext({});function sz(n,e,t,i){var r,s=e.layoutId,o=e.layout,a=e.drag,l=e.dragConstraints,c=e.layoutScroll,f=K.useContext(vA);!i||!t||t!=null&&t.projection||(t.projection=new i(n,t.getLatestValues(),(r=t.parent)===null||r===void 0?void 0:r.projection),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||l&&sf(l),visualElement:t,scheduleRender:function(){return t.scheduleRender()},animationType:typeof o=="string"?o:"both",initialPromotionConfig:f,layoutScroll:c}))}var oz=function(n){cA(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},e.prototype.componentDidUpdate=function(){},e.prototype.updateProps=function(){var t=this.props,i=t.visualElement,r=t.props;i&&i.setProps(r)},e.prototype.render=function(){return this.props.children},e}(ju.Component);function az(n){var e=n.preloadedFeatures,t=n.createVisualElement,i=n.projectionNodeConstructor,r=n.useRender,s=n.useVisualState,o=n.Component;e&&H4(e);function a(l,c){var f=lz(l);l=it(it({},l),{layoutId:f});var p=K.useContext(rS),m=null,v=nz(l),y=p.isStatic?void 0:rz(),_=s(l,p.isStatic);return!p.isStatic&&Gf&&(v.visualElement=J4(o,_,it(it({},p),l),t),sz(y,l,v.visualElement,i||Ud.projectionNodeConstructor),m=Z4(l,v.visualElement,e)),K.createElement(oz,{visualElement:v.visualElement,props:it(it({},p),l)},m,K.createElement(v0.Provider,{value:v},r(o,l,y,Q4(_,v.visualElement,c),_,p.isStatic,v.visualElement)))}return K.forwardRef(a)}function lz(n){var e,t=n.layoutId,i=(e=K.useContext(sS))===null||e===void 0?void 0:e.id;return i&&t!==void 0?i+"-"+t:t}function uz(n){function e(i,r){return r===void 0&&(r={}),az(n(i,r))}if(typeof Proxy>"u")return e;var t=new Map;return new Proxy(e,{get:function(i,r){return t.has(r)||t.set(r,e(r)),t.get(r)}})}var cz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function oS(n){return typeof n!="string"||n.includes("-")?!1:!!(cz.indexOf(n)>-1||/[A-Z]/.test(n))}var Uv={};function fz(n){Object.assign(Uv,n)}var Xx=["","X","Y","Z"],hz=["translate","scale","rotate","skew"],Bd=["transformPerspective","x","y","z"];hz.forEach(function(n){return Xx.forEach(function(e){return Bd.push(n+e)})});function dz(n,e){return Bd.indexOf(n)-Bd.indexOf(e)}var pz=new Set(Bd);function _p(n){return pz.has(n)}var mz=new Set(["originX","originY","originZ"]);function yA(n){return mz.has(n)}function _A(n,e){var t=e.layout,i=e.layoutId;return _p(n)||yA(n)||(t||i!==void 0)&&(!!Uv[n]||n==="opacity")}var ba=function(n){return!!(n!==null&&typeof n=="object"&&n.getVelocity)},gz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function vz(n,e,t,i){var r=n.transform,s=n.transformKeys,o=e.enableHardwareAcceleration,a=o===void 0?!0:o,l=e.allowTransformNone,c=l===void 0?!0:l,f="";s.sort(dz);for(var p=!1,m=s.length,v=0;v<m;v++){var y=s[v];f+="".concat(gz[y]||y,"(").concat(r[y],") "),y==="z"&&(p=!0)}return!p&&a?f+="translateZ(0)":f=f.trim(),i?f=i(r,t?"":f):c&&t&&(f="none"),f}function yz(n){var e=n.originX,t=e===void 0?"50%":e,i=n.originY,r=i===void 0?"50%":i,s=n.originZ,o=s===void 0?0:s;return"".concat(t," ").concat(r," ").concat(o)}function xA(n){return n.startsWith("--")}var _z=function(n,e){return e&&typeof n=="number"?e.transform(n):n};const wA=(n,e)=>t=>Math.max(Math.min(t,e),n),ld=n=>n%1?Number(n.toFixed(5)):n,Vd=/(-)?([\d]*\.?[\d])+/g,Yx=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,xz=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function xp(n){return typeof n=="string"}const rc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ud=Object.assign(Object.assign({},rc),{transform:wA(0,1)}),Gm=Object.assign(Object.assign({},rc),{default:1}),wp=n=>({test:e=>xp(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ll=wp("deg"),Do=wp("%"),Pt=wp("px"),wz=wp("vh"),Sz=wp("vw"),S2=Object.assign(Object.assign({},Do),{parse:n=>Do.parse(n)/100,transform:n=>Do.transform(n*100)}),aS=(n,e)=>t=>!!(xp(t)&&xz.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),SA=(n,e,t)=>i=>{if(!xp(i))return i;const[r,s,o,a]=i.match(Vd);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Ru={test:aS("hsl","hue"),parse:SA("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Do.transform(ld(e))+", "+Do.transform(ld(t))+", "+ld(ud.transform(i))+")"},Mz=wA(0,255),Xy=Object.assign(Object.assign({},rc),{transform:n=>Math.round(Mz(n))}),vl={test:aS("rgb","red"),parse:SA("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Xy.transform(n)+", "+Xy.transform(e)+", "+Xy.transform(t)+", "+ld(ud.transform(i))+")"};function bz(n){let e="",t="",i="",r="";return n.length>5?(e=n.substr(1,2),t=n.substr(3,2),i=n.substr(5,2),r=n.substr(7,2)):(e=n.substr(1,1),t=n.substr(2,1),i=n.substr(3,1),r=n.substr(4,1),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const qx={test:aS("#"),parse:bz,transform:vl.transform},kr={test:n=>vl.test(n)||qx.test(n)||Ru.test(n),parse:n=>vl.test(n)?vl.parse(n):Ru.test(n)?Ru.parse(n):qx.parse(n),transform:n=>xp(n)?n:n.hasOwnProperty("red")?vl.transform(n):Ru.transform(n)},MA="${c}",bA="${n}";function Tz(n){var e,t,i,r;return isNaN(n)&&xp(n)&&((t=(e=n.match(Vd))===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0)+((r=(i=n.match(Yx))===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0)>0}function TA(n){typeof n=="number"&&(n=`${n}`);const e=[];let t=0;const i=n.match(Yx);i&&(t=i.length,n=n.replace(Yx,MA),e.push(...i.map(kr.parse)));const r=n.match(Vd);return r&&(n=n.replace(Vd,bA),e.push(...r.map(rc.parse))),{values:e,numColors:t,tokenised:n}}function EA(n){return TA(n).values}function PA(n){const{values:e,numColors:t,tokenised:i}=TA(n),r=e.length;return s=>{let o=i;for(let a=0;a<r;a++)o=o.replace(a<t?MA:bA,a<t?kr.transform(s[a]):ld(s[a]));return o}}const Ez=n=>typeof n=="number"?0:n;function Pz(n){const e=EA(n);return PA(n)(e.map(Ez))}const Ta={test:Tz,parse:EA,createTransformer:PA,getAnimatableNone:Pz},Cz=new Set(["brightness","contrast","saturate","opacity"]);function Az(n){let[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Vd)||[];if(!i)return n;const r=t.replace(i,"");let s=Cz.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Lz=/([a-z-]*)\(.*?\)/g,Kx=Object.assign(Object.assign({},Ta),{getAnimatableNone:n=>{const e=n.match(Lz);return e?e.map(Az).join(" "):n}});var M2=it(it({},rc),{transform:Math.round}),CA={borderWidth:Pt,borderTopWidth:Pt,borderRightWidth:Pt,borderBottomWidth:Pt,borderLeftWidth:Pt,borderRadius:Pt,radius:Pt,borderTopLeftRadius:Pt,borderTopRightRadius:Pt,borderBottomRightRadius:Pt,borderBottomLeftRadius:Pt,width:Pt,maxWidth:Pt,height:Pt,maxHeight:Pt,size:Pt,top:Pt,right:Pt,bottom:Pt,left:Pt,padding:Pt,paddingTop:Pt,paddingRight:Pt,paddingBottom:Pt,paddingLeft:Pt,margin:Pt,marginTop:Pt,marginRight:Pt,marginBottom:Pt,marginLeft:Pt,rotate:ll,rotateX:ll,rotateY:ll,rotateZ:ll,scale:Gm,scaleX:Gm,scaleY:Gm,scaleZ:Gm,skew:ll,skewX:ll,skewY:ll,distance:Pt,translateX:Pt,translateY:Pt,translateZ:Pt,x:Pt,y:Pt,z:Pt,perspective:Pt,transformPerspective:Pt,opacity:ud,originX:S2,originY:S2,originZ:Pt,zIndex:M2,fillOpacity:ud,strokeOpacity:ud,numOctaves:M2};function lS(n,e,t,i){var r,s=n.style,o=n.vars,a=n.transform,l=n.transformKeys,c=n.transformOrigin;l.length=0;var f=!1,p=!1,m=!0;for(var v in e){var y=e[v];if(xA(v)){o[v]=y;continue}var _=CA[v],S=_z(y,_);if(_p(v)){if(f=!0,a[v]=S,l.push(v),!m)continue;y!==((r=_.default)!==null&&r!==void 0?r:0)&&(m=!1)}else yA(v)?(c[v]=S,p=!0):s[v]=S}f?s.transform=vz(n,t,m,i):i?s.transform=i({},""):!e.transform&&s.transform&&(s.transform="none"),p&&(s.transformOrigin=yz(c))}var uS=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function AA(n,e,t){for(var i in e)!ba(e[i])&&!_A(i,t)&&(n[i]=e[i])}function Rz(n,e,t){var i=n.transformTemplate;return K.useMemo(function(){var r=uS();lS(r,e,{enableHardwareAcceleration:!t},i);var s=r.vars,o=r.style;return it(it({},s),o)},[e])}function kz(n,e,t){var i=n.style||{},r={};return AA(r,i,n),Object.assign(r,Rz(n,e,t)),n.transformValues&&(r=n.transformValues(r)),r}function Iz(n,e,t){var i={},r=kz(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":"pan-".concat(n.drag==="x"?"y":"x")),i.style=r,i}var Dz=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function Bv(n){return Dz.has(n)}var LA=function(n){return!Bv(n)};function Nz(n){n&&(LA=function(e){return e.startsWith("on")?!Bv(e):n(e)})}try{Nz(require("@emotion/is-prop-valid").default)}catch{}function Oz(n,e,t){var i={};for(var r in n)(LA(r)||t===!0&&Bv(r)||!e&&!Bv(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function b2(n,e,t){return typeof n=="string"?n:Pt.transform(e+t*n)}function zz(n,e,t){var i=b2(e,n.x,n.width),r=b2(t,n.y,n.height);return"".concat(i," ").concat(r)}var Fz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uz={offset:"strokeDashoffset",array:"strokeDasharray"};function Bz(n,e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=!0),n.pathLength=1;var s=r?Fz:Uz;n[s.offset]=Pt.transform(-i);var o=Pt.transform(e),a=Pt.transform(t);n[s.array]="".concat(o," ").concat(a)}function cS(n,e,t,i){var r=e.attrX,s=e.attrY,o=e.originX,a=e.originY,l=e.pathLength,c=e.pathSpacing,f=c===void 0?1:c,p=e.pathOffset,m=p===void 0?0:p,v=zs(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]);lS(n,v,t,i),n.attrs=n.style,n.style={};var y=n.attrs,_=n.style,S=n.dimensions;y.transform&&(S&&(_.transform=y.transform),delete y.transform),S&&(o!==void 0||a!==void 0||_.transform)&&(_.transformOrigin=zz(S,o!==void 0?o:.5,a!==void 0?a:.5)),r!==void 0&&(y.x=r),s!==void 0&&(y.y=s),l!==void 0&&Bz(y,l,f,m,!1)}var RA=function(){return it(it({},uS()),{attrs:{}})};function Vz(n,e){var t=K.useMemo(function(){var r=RA();return cS(r,e,{enableHardwareAcceleration:!1},n.transformTemplate),it(it({},r.attrs),{style:it({},r.style)})},[e]);if(n.style){var i={};AA(i,n.style,n),t.style=it(it({},i),t.style)}return t}function Gz(n){n===void 0&&(n=!1);var e=function(t,i,r,s,o,a){var l=o.latestValues,c=oS(t)?Vz:Iz,f=c(i,l,a),p=Oz(i,typeof t=="string",n),m=it(it(it({},p),f),{ref:s});return r&&(m["data-projection-id"]=r),K.createElement(t,m)};return e}var Hz=/([a-z])([A-Z])/g,Wz="$1-$2",kA=function(n){return n.replace(Hz,Wz).toLowerCase()};function IA(n,e,t,i){var r=e.style,s=e.vars;Object.assign(n.style,r,i&&i.getProjectionStyles(t));for(var o in s)n.style.setProperty(o,s[o])}var DA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function NA(n,e,t,i){IA(n,e,void 0,i);for(var r in e.attrs)n.setAttribute(DA.has(r)?r:kA(r),e.attrs[r])}function fS(n){var e=n.style,t={};for(var i in e)(ba(e[i])||_A(i,n))&&(t[i]=e[i]);return t}function OA(n){var e=fS(n);for(var t in n)if(ba(n[t])){var i=t==="x"||t==="y"?"attr"+t.toUpperCase():t;e[i]=n[t]}return e}function hS(n){return typeof n=="object"&&typeof n.start=="function"}var Gd=function(n){return Array.isArray(n)},jz=function(n){return!!(n&&typeof n=="object"&&n.mix&&n.toValue)},zA=function(n){return Gd(n)?n[n.length-1]||0:n};function $g(n){var e=ba(n)?n.get():n;return jz(e)?e.toValue():e}function T2(n,e,t,i){var r=n.scrapeMotionValuesFromProps,s=n.createRenderState,o=n.onMount,a={latestValues:Zz(e,t,i,r),renderState:s()};return o&&(a.mount=function(l){return o(e,l,a)}),a}var FA=function(n){return function(e,t){var i=K.useContext(v0),r=K.useContext(vp);return t?T2(n,e,i,r):yp(function(){return T2(n,e,i,r)})}};function Zz(n,e,t,i){var r={},s=(t==null?void 0:t.initial)===!1,o=i(n);for(var a in o)r[a]=$g(o[a]);var l=n.initial,c=n.animate,f=_0(n),p=gA(n);e&&p&&!f&&n.inherit!==!1&&(l??(l=e.initial),c??(c=e.animate));var m=s||l===!1,v=m?c:l;if(v&&typeof v!="boolean"&&!hS(v)){var y=Array.isArray(v)?v:[v];y.forEach(function(_){var S=mA(n,_);if(S){var T=S.transitionEnd;S.transition;var M=zs(S,["transitionEnd","transition"]);for(var b in M){var C=M[b];if(Array.isArray(C)){var k=m?C.length-1:0;C=C[k]}C!==null&&(r[b]=C)}for(var b in T)r[b]=T[b]}})}return r}var Xz={useVisualState:FA({scrapeMotionValuesFromProps:OA,createRenderState:RA,onMount:function(n,e,t){var i=t.renderState,r=t.latestValues;try{i.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}cS(i,r,{enableHardwareAcceleration:!1},n.transformTemplate),NA(e,i)}})},Yz={useVisualState:FA({scrapeMotionValuesFromProps:fS,createRenderState:uS})};function qz(n,e,t,i,r){var s=e.forwardMotionProps,o=s===void 0?!1:s,a=oS(n)?Xz:Yz;return it(it({},a),{preloadedFeatures:t,useRender:Gz(o),createVisualElement:i,projectionNodeConstructor:r,Component:n})}var En;(function(n){n.Animate="animate",n.Hover="whileHover",n.Tap="whileTap",n.Drag="whileDrag",n.Focus="whileFocus",n.InView="whileInView",n.Exit="exit"})(En||(En={}));function x0(n,e,t,i){return i===void 0&&(i={passive:!0}),n.addEventListener(e,t,i),function(){return n.removeEventListener(e,t)}}function Jx(n,e,t,i){K.useEffect(function(){var r=n.current;if(t&&r)return x0(r,e,t,i)},[n,e,t,i])}function Kz(n){var e=n.whileFocus,t=n.visualElement,i=function(){var s;(s=t.animationState)===null||s===void 0||s.setActive(En.Focus,!0)},r=function(){var s;(s=t.animationState)===null||s===void 0||s.setActive(En.Focus,!1)};Jx(t,"focus",e?i:void 0),Jx(t,"blur",e?r:void 0)}function UA(n){return typeof PointerEvent<"u"&&n instanceof PointerEvent?n.pointerType==="mouse":n instanceof MouseEvent}function BA(n){var e=!!n.touches;return e}function Jz(n){return function(e){var t=e instanceof MouseEvent,i=!t||t&&e.button===0;i&&n(e)}}var Qz={pageX:0,pageY:0};function $z(n,e){e===void 0&&(e="page");var t=n.touches[0]||n.changedTouches[0],i=t||Qz;return{x:i[e+"X"],y:i[e+"Y"]}}function eF(n,e){return e===void 0&&(e="page"),{x:n[e+"X"],y:n[e+"Y"]}}function dS(n,e){return e===void 0&&(e="page"),{point:BA(n)?$z(n,e):eF(n,e)}}var VA=function(n,e){e===void 0&&(e=!1);var t=function(i){return n(i,dS(i))};return e?Jz(t):t},tF=function(){return Gf&&window.onpointerdown===null},nF=function(){return Gf&&window.ontouchstart===null},iF=function(){return Gf&&window.onmousedown===null},rF={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},sF={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function GA(n){return tF()?n:nF()?sF[n]:iF()?rF[n]:n}function _f(n,e,t,i){return x0(n,GA(e),VA(t,e==="pointerdown"),i)}function Vv(n,e,t,i){return Jx(n,GA(e),t&&VA(t,e==="pointerdown"),i)}function HA(n){var e=null;return function(){var t=function(){e=null};return e===null?(e=n,t):!1}}var E2=HA("dragHorizontal"),P2=HA("dragVertical");function WA(n){var e=!1;if(n==="y")e=P2();else if(n==="x")e=E2();else{var t=E2(),i=P2();t&&i?e=function(){t(),i()}:(t&&t(),i&&i())}return e}function jA(){var n=WA(!0);return n?(n(),!1):!0}function C2(n,e,t){return function(i,r){var s;!UA(i)||jA()||((s=n.animationState)===null||s===void 0||s.setActive(En.Hover,e),t==null||t(i,r))}}function oF(n){var e=n.onHoverStart,t=n.onHoverEnd,i=n.whileHover,r=n.visualElement;Vv(r,"pointerenter",e||i?C2(r,!0,e):void 0,{passive:!e}),Vv(r,"pointerleave",t||i?C2(r,!1,t):void 0,{passive:!t})}var ZA=function(n,e){return e?n===e?!0:ZA(n,e.parentElement):!1};function pS(n){return K.useEffect(function(){return function(){return n()}},[])}const Gv=(n,e,t)=>Math.min(Math.max(t,n),e),Yy=.001,aF=.01,A2=10,lF=.05,uF=1;function cF({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s;W4(n<=A2*1e3);let o=1-e;o=Gv(lF,uF,o),n=Gv(aF,A2,n/1e3),o<1?(r=c=>{const f=c*o,p=f*n,m=f-t,v=Qx(c,o),y=Math.exp(-p);return Yy-m/v*y},s=c=>{const p=c*o*n,m=p*t+t,v=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-p),_=Qx(Math.pow(c,2),o);return(-r(c)+Yy>0?-1:1)*((m-v)*y)/_}):(r=c=>{const f=Math.exp(-c*n),p=(c-t)*n+1;return-Yy+f*p},s=c=>{const f=Math.exp(-c*n),p=(t-c)*(n*n);return f*p});const a=5/n,l=hF(r,s,a);if(n=n*1e3,isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const fF=12;function hF(n,e,t){let i=t;for(let r=1;r<fF;r++)i=i-n(i)/e(i);return i}function Qx(n,e){return n*Math.sqrt(1-e*e)}const dF=["duration","bounce"],pF=["stiffness","damping","mass"];function L2(n,e){return e.some(t=>n[t]!==void 0)}function mF(n){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},n);if(!L2(n,pF)&&L2(n,dF)){const t=cF(n);e=Object.assign(Object.assign(Object.assign({},e),t),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function mS(n){var{from:e=0,to:t=1,restSpeed:i=2,restDelta:r}=n,s=zs(n,["from","to","restSpeed","restDelta"]);const o={done:!1,value:e};let{stiffness:a,damping:l,mass:c,velocity:f,duration:p,isResolvedFromDuration:m}=mF(s),v=R2,y=R2;function _(){const S=f?-(f/1e3):0,T=t-e,M=l/(2*Math.sqrt(a*c)),b=Math.sqrt(a/c)/1e3;if(r===void 0&&(r=Math.min(Math.abs(t-e)/100,.4)),M<1){const C=Qx(b,M);v=k=>{const I=Math.exp(-M*b*k);return t-I*((S+M*b*T)/C*Math.sin(C*k)+T*Math.cos(C*k))},y=k=>{const I=Math.exp(-M*b*k);return M*b*I*(Math.sin(C*k)*(S+M*b*T)/C+T*Math.cos(C*k))-I*(Math.cos(C*k)*(S+M*b*T)-C*T*Math.sin(C*k))}}else if(M===1)v=C=>t-Math.exp(-b*C)*(T+(S+b*T)*C);else{const C=b*Math.sqrt(M*M-1);v=k=>{const I=Math.exp(-M*b*k),z=Math.min(C*k,300);return t-I*((S+M*b*T)*Math.sinh(z)+C*T*Math.cosh(z))/C}}}return _(),{next:S=>{const T=v(S);if(m)o.done=S>=p;else{const M=y(S)*1e3,b=Math.abs(M)<=i,C=Math.abs(t-T)<=r;o.done=b&&C}return o.value=o.done?t:T,o},flipTarget:()=>{f=-f,[e,t]=[t,e],_()}}}mS.needsInterpolation=(n,e)=>typeof n=="string"||typeof e=="string";const R2=n=>0,Hd=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Yn=(n,e,t)=>-t*n+t*e+n;function qy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function k2({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=qy(l,a,n+1/3),s=qy(l,a,n),o=qy(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const gF=(n,e,t)=>{const i=n*n,r=e*e;return Math.sqrt(Math.max(0,t*(r-i)+i))},vF=[qx,vl,Ru],I2=n=>vF.find(e=>e.test(n)),XA=(n,e)=>{let t=I2(n),i=I2(e),r=t.parse(n),s=i.parse(e);t===Ru&&(r=k2(r),t=vl),i===Ru&&(s=k2(s),i=vl);const o=Object.assign({},r);return a=>{for(const l in o)l!=="alpha"&&(o[l]=gF(r[l],s[l],a));return o.alpha=Yn(r.alpha,s.alpha,a),t.transform(o)}},$x=n=>typeof n=="number",yF=(n,e)=>t=>e(n(t)),w0=(...n)=>n.reduce(yF);function YA(n,e){return $x(n)?t=>Yn(n,e,t):kr.test(n)?XA(n,e):KA(n,e)}const qA=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>YA(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},_F=(n,e)=>{const t=Object.assign(Object.assign({},n),e),i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=YA(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}};function D2(n){const e=Ta.parse(n),t=e.length;let i=0,r=0,s=0;for(let o=0;o<t;o++)i||typeof e[o]=="number"?i++:e[o].hue!==void 0?s++:r++;return{parsed:e,numNumbers:i,numRGB:r,numHSL:s}}const KA=(n,e)=>{const t=Ta.createTransformer(e),i=D2(n),r=D2(e);return i.numHSL===r.numHSL&&i.numRGB===r.numRGB&&i.numNumbers>=r.numNumbers?w0(qA(i.parsed,r.parsed),t):o=>`${o>0?e:n}`},xF=(n,e)=>t=>Yn(n,e,t);function wF(n){if(typeof n=="number")return xF;if(typeof n=="string")return kr.test(n)?XA:KA;if(Array.isArray(n))return qA;if(typeof n=="object")return _F}function SF(n,e,t){const i=[],r=t||wF(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]:e;a=w0(l,a)}i.push(a)}return i}function MF([n,e],[t]){return i=>t(Hd(n,e,i))}function bF(n,e){const t=n.length,i=t-1;return r=>{let s=0,o=!1;if(r<=n[0]?o=!0:r>=n[i]&&(s=i-1,o=!0),!o){let l=1;for(;l<t&&!(n[l]>r||l===i);l++);s=l-1}const a=Hd(n[s],n[s+1],r);return e[s](a)}}function JA(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;zv(s===e.length),zv(!i||!Array.isArray(i)||i.length===s-1),n[0]>n[s-1]&&(n=[].concat(n),e=[].concat(e),n.reverse(),e.reverse());const o=SF(e,i,r),a=s===2?MF(n,o):bF(n,o);return t?l=>a(Gv(n[0],n[s-1],l)):a}const S0=n=>e=>1-n(1-e),gS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,TF=n=>e=>Math.pow(e,n),QA=n=>e=>e*e*((n+1)*e-n),EF=n=>{const e=QA(n);return t=>(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))},$A=1.525,PF=4/11,CF=8/11,AF=9/10,vS=n=>n,yS=TF(2),LF=S0(yS),eL=gS(yS),tL=n=>1-Math.sin(Math.acos(n)),_S=S0(tL),RF=gS(_S),xS=QA($A),kF=S0(xS),IF=gS(xS),DF=EF($A),NF=4356/361,OF=35442/1805,zF=16061/1805,Hv=n=>{if(n===1||n===0)return n;const e=n*n;return n<PF?7.5625*e:n<CF?9.075*e-9.9*n+3.4:n<AF?NF*e-OF*n+zF:10.8*n*n-20.52*n+10.72},FF=S0(Hv),UF=n=>n<.5?.5*(1-Hv(1-n*2)):.5*Hv(n*2-1)+.5;function BF(n,e){return n.map(()=>e||eL).splice(0,n.length-1)}function VF(n){const e=n.length;return n.map((t,i)=>i!==0?i/(e-1):0)}function GF(n,e){return n.map(t=>t*e)}function ev({from:n=0,to:e=1,ease:t,offset:i,duration:r=300}){const s={done:!1,value:n},o=Array.isArray(e)?e:[n,e],a=GF(i&&i.length===o.length?i:VF(o),r);function l(){return JA(a,o,{ease:Array.isArray(t)?t:BF(o,t)})}let c=l();return{next:f=>(s.value=c(f),s.done=f>=r,s),flipTarget:()=>{o.reverse(),c=l()}}}function HF({velocity:n=0,from:e=0,power:t=.8,timeConstant:i=350,restDelta:r=.5,modifyTarget:s}){const o={done:!1,value:e};let a=t*n;const l=e+a,c=s===void 0?l:s(l);return c!==l&&(a=c-e),{next:f=>{const p=-a*Math.exp(-f/i);return o.done=!(p>r||p<-r),o.value=o.done?c:c+p,o},flipTarget:()=>{}}}const N2={keyframes:ev,spring:mS,decay:HF};function WF(n){if(Array.isArray(n.to))return ev;if(N2[n.type])return N2[n.type];const e=new Set(Object.keys(n));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?ev:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?mS:ev}const nL=1/60*1e3,jF=typeof performance<"u"?()=>performance.now():()=>Date.now(),iL=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(jF()),nL);function ZF(n){let e=[],t=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,f=!1)=>{const p=f&&r,m=p?e:t;return c&&o.add(l),m.indexOf(l)===-1&&(m.push(l),p&&r&&(i=e.length)),l},cancel:l=>{const c=t.indexOf(l);c!==-1&&t.splice(c,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.length=0,i=e.length,i)for(let c=0;c<i;c++){const f=e[c];f(l),o.has(f)&&(a.schedule(f),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const XF=40;let e1=!0,Wd=!1,t1=!1;const xf={delta:0,timestamp:0},Sp=["read","update","preRender","render","postRender"],M0=Sp.reduce((n,e)=>(n[e]=ZF(()=>Wd=!0),n),{}),po=Sp.reduce((n,e)=>{const t=M0[e];return n[e]=(i,r=!1,s=!1)=>(Wd||qF(),t.schedule(i,r,s)),n},{}),Lf=Sp.reduce((n,e)=>(n[e]=M0[e].cancel,n),{}),Ky=Sp.reduce((n,e)=>(n[e]=()=>M0[e].process(xf),n),{}),YF=n=>M0[n].process(xf),rL=n=>{Wd=!1,xf.delta=e1?nL:Math.max(Math.min(n-xf.timestamp,XF),1),xf.timestamp=n,t1=!0,Sp.forEach(YF),t1=!1,Wd&&(e1=!1,iL(rL))},qF=()=>{Wd=!0,e1=!0,t1||iL(rL)},Wv=()=>xf;function sL(n,e,t=0){return n-e-t}function KF(n,e,t=0,i=!0){return i?sL(e+-n,e,t):e-(n-e)+t}function JF(n,e,t,i){return i?n>=e+t:n<=-t}const QF=n=>{const e=({delta:t})=>n(t);return{start:()=>po.update(e,!0),stop:()=>Lf.update(e)}};function oL(n){var e,t,{from:i,autoplay:r=!0,driver:s=QF,elapsed:o=0,repeat:a=0,repeatType:l="loop",repeatDelay:c=0,onPlay:f,onStop:p,onComplete:m,onRepeat:v,onUpdate:y}=n,_=zs(n,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:S}=_,T,M=0,b=_.duration,C,k=!1,I=!0,z;const A=WF(_);!((t=(e=A).needsInterpolation)===null||t===void 0)&&t.call(e,i,S)&&(z=JA([0,100],[i,S],{clamp:!1}),i=0,S=100);const O=A(Object.assign(Object.assign({},_),{from:i,to:S}));function U(){M++,l==="reverse"?(I=M%2===0,o=KF(o,b,c,I)):(o=sL(o,b,c),l==="mirror"&&O.flipTarget()),k=!1,v&&v()}function $(){T.stop(),m&&m()}function Y(J){if(I||(J=-J),o+=J,!k){const ae=O.next(Math.max(0,o));C=ae.value,z&&(C=z(C)),k=I?ae.done:o<=0}y==null||y(C),k&&(M===0&&(b??(b=o)),M<a?JF(o,b,c,I)&&U():$())}function te(){f==null||f(),T=s(Y),T.start()}return r&&te(),{stop:()=>{p==null||p(),T.stop()}}}function aL(n,e){return e?n*(1e3/e):0}function $F({from:n=0,velocity:e=0,min:t,max:i,power:r=.8,timeConstant:s=750,bounceStiffness:o=500,bounceDamping:a=10,restDelta:l=1,modifyTarget:c,driver:f,onUpdate:p,onComplete:m,onStop:v}){let y;function _(b){return t!==void 0&&b<t||i!==void 0&&b>i}function S(b){return t===void 0?i:i===void 0||Math.abs(t-b)<Math.abs(i-b)?t:i}function T(b){y==null||y.stop(),y=oL(Object.assign(Object.assign({},b),{driver:f,onUpdate:C=>{var k;p==null||p(C),(k=b.onUpdate)===null||k===void 0||k.call(b,C)},onComplete:m,onStop:v}))}function M(b){T(Object.assign({type:"spring",stiffness:o,damping:a,restDelta:l},b))}if(_(n))M({from:n,velocity:e,to:S(n)});else{let b=r*e+n;typeof c<"u"&&(b=c(b));const C=S(b),k=C===t?-1:1;let I,z;const A=O=>{I=z,z=O,e=aL(O-I,Wv().delta),(k===1&&O>C||k===-1&&O<C)&&M({from:O,to:C,velocity:e})};T({type:"decay",from:n,velocity:e,timeConstant:s,power:r,restDelta:l,modifyTarget:c,onUpdate:_(b)?A:void 0})}return{stop:()=>y==null?void 0:y.stop()}}const n1=n=>n.hasOwnProperty("x")&&n.hasOwnProperty("y"),O2=n=>n1(n)&&n.hasOwnProperty("z"),Hm=(n,e)=>Math.abs(n-e);function lL(n,e){if($x(n)&&$x(e))return Hm(n,e);if(n1(n)&&n1(e)){const t=Hm(n.x,e.x),i=Hm(n.y,e.y),r=O2(n)&&O2(e)?Hm(n.z,e.z):0;return Math.sqrt(Math.pow(t,2)+Math.pow(i,2)+Math.pow(r,2))}}const uL=(n,e)=>1-3*e+3*n,cL=(n,e)=>3*e-6*n,fL=n=>3*n,jv=(n,e,t)=>((uL(e,t)*n+cL(e,t))*n+fL(e))*n,hL=(n,e,t)=>3*uL(e,t)*n*n+2*cL(e,t)*n+fL(e),e5=1e-7,t5=10;function n5(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=jv(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>e5&&++a<t5);return o}const i5=8,r5=.001;function s5(n,e,t,i){for(let r=0;r<i5;++r){const s=hL(e,t,i);if(s===0)return e;const o=jv(e,t,i)-n;e-=o/s}return e}const tv=11,Wm=1/(tv-1);function o5(n,e,t,i){if(n===e&&t===i)return vS;const r=new Float32Array(tv);for(let o=0;o<tv;++o)r[o]=jv(o*Wm,n,t);function s(o){let a=0,l=1;const c=tv-1;for(;l!==c&&r[l]<=o;++l)a+=Wm;--l;const f=(o-r[l])/(r[l+1]-r[l]),p=a+f*Wm,m=hL(p,n,t);return m>=r5?s5(o,p,n,t):m===0?p:n5(o,a,a+Wm,n,t)}return o=>o===0||o===1?o:jv(s(o),e,i)}function a5(n){var e=n.onTap,t=n.onTapStart,i=n.onTapCancel,r=n.whileTap,s=n.visualElement,o=e||t||i||r,a=K.useRef(!1),l=K.useRef(null),c={passive:!(t||e||i||y)};function f(){var _;(_=l.current)===null||_===void 0||_.call(l),l.current=null}function p(){var _;return f(),a.current=!1,(_=s.animationState)===null||_===void 0||_.setActive(En.Tap,!1),!jA()}function m(_,S){p()&&(ZA(s.getInstance(),_.target)?e==null||e(_,S):i==null||i(_,S))}function v(_,S){p()&&(i==null||i(_,S))}function y(_,S){var T;f(),!a.current&&(a.current=!0,l.current=w0(_f(window,"pointerup",m,c),_f(window,"pointercancel",v,c)),(T=s.animationState)===null||T===void 0||T.setActive(En.Tap,!0),t==null||t(_,S))}Vv(s,"pointerdown",o?y:void 0,c),pS(f)}var z2=new Set;function l5(n,e,t){n||z2.has(e)||(console.warn(e),t&&console.warn(t),z2.add(e))}var i1=new WeakMap,Jy=new WeakMap,u5=function(n){var e;(e=i1.get(n.target))===null||e===void 0||e(n)},c5=function(n){n.forEach(u5)};function f5(n){var e=n.root,t=zs(n,["root"]),i=e||document;Jy.has(i)||Jy.set(i,{});var r=Jy.get(i),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(c5,it({root:e},t))),r[s]}function h5(n,e,t){var i=f5(e);return i1.set(n,t),i.observe(n),function(){i1.delete(n),i.unobserve(n)}}function d5(n){var e=n.visualElement,t=n.whileInView,i=n.onViewportEnter,r=n.onViewportLeave,s=n.viewport,o=s===void 0?{}:s,a=K.useRef({hasEnteredView:!1,isInView:!1}),l=!!(t||i||r);o.once&&a.current.hasEnteredView&&(l=!1);var c=typeof IntersectionObserver>"u"?g5:m5;c(l,a.current,e,o)}var p5={some:0,all:1};function m5(n,e,t,i){var r=i.root,s=i.margin,o=i.amount,a=o===void 0?"some":o,l=i.once;K.useEffect(function(){if(n){var c={root:r==null?void 0:r.current,rootMargin:s,threshold:typeof a=="number"?a:p5[a]},f=function(p){var m,v=p.isIntersecting;if(e.isInView!==v&&(e.isInView=v,!(l&&!v&&e.hasEnteredView))){v&&(e.hasEnteredView=!0),(m=t.animationState)===null||m===void 0||m.setActive(En.InView,v);var y=t.getProps(),_=v?y.onViewportEnter:y.onViewportLeave;_==null||_(p)}};return h5(t.getInstance(),c,f)}},[n,r,s,a])}function g5(n,e,t,i){var r=i.fallback,s=r===void 0?!0:r;K.useEffect(function(){!n||!s||(iS!=="production"&&l5(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame(function(){var o;e.hasEnteredView=!0;var a=t.getProps().onViewportEnter;a==null||a(null),(o=t.animationState)===null||o===void 0||o.setActive(En.InView,!0)}))},[n])}var yl=function(n){return function(e){return n(e),null}},v5={inView:yl(d5),tap:yl(a5),focus:yl(Kz),hover:yl(oF)},y5=0,_5=function(){return y5++},dL=function(){return yp(_5)};function pL(){var n=K.useContext(vp);if(n===null)return[!0,null];var e=n.isPresent,t=n.onExitComplete,i=n.register,r=dL();K.useEffect(function(){return i(r)},[]);var s=function(){return t==null?void 0:t(r)};return!e&&t?[!1,s]:[!0]}function mL(n,e){if(!Array.isArray(e))return!1;var t=e.length;if(t!==n.length)return!1;for(var i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}var Zv=function(n){return n*1e3},x5={linear:vS,easeIn:yS,easeInOut:eL,easeOut:LF,circIn:tL,circInOut:RF,circOut:_S,backIn:xS,backInOut:IF,backOut:kF,anticipate:DF,bounceIn:FF,bounceInOut:UF,bounceOut:Hv},F2=function(n){if(Array.isArray(n)){zv(n.length===4);var e=qn(n,4),t=e[0],i=e[1],r=e[2],s=e[3];return o5(t,i,r,s)}else if(typeof n=="string")return x5[n];return n},w5=function(n){return Array.isArray(n)&&typeof n[0]!="number"},U2=function(n,e){return n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&Ta.test(e)&&!e.startsWith("url("))},cu=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},jm=function(n){return{type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}},Qy=function(){return{type:"keyframes",ease:"linear",duration:.3}},S5=function(n){return{type:"keyframes",duration:.8,values:n}},B2={x:cu,y:cu,z:cu,rotate:cu,rotateX:cu,rotateY:cu,rotateZ:cu,scaleX:jm,scaleY:jm,scale:jm,opacity:Qy,backgroundColor:Qy,color:Qy,default:jm},M5=function(n,e){var t;return Gd(e)?t=S5:t=B2[n]||B2.default,it({to:e},t(e))},b5=it(it({},CA),{color:kr,backgroundColor:kr,outlineColor:kr,fill:kr,stroke:kr,borderColor:kr,borderTopColor:kr,borderRightColor:kr,borderBottomColor:kr,borderLeftColor:kr,filter:Kx,WebkitFilter:Kx}),wS=function(n){return b5[n]};function SS(n,e){var t,i=wS(n);return i!==Kx&&(i=Ta),(t=i.getAnimatableNone)===null||t===void 0?void 0:t.call(i,e)}function T5(n){n.when,n.delay,n.delayChildren,n.staggerChildren,n.staggerDirection,n.repeat,n.repeatType,n.repeatDelay,n.from;var e=zs(n,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(e).length}function E5(n){var e=n.ease,t=n.times,i=n.yoyo,r=n.flip,s=n.loop,o=zs(n,["ease","times","yoyo","flip","loop"]),a=it({},o);return t&&(a.offset=t),o.duration&&(a.duration=Zv(o.duration)),o.repeatDelay&&(a.repeatDelay=Zv(o.repeatDelay)),e&&(a.ease=w5(e)?e.map(F2):F2(e)),o.type==="tween"&&(a.type="keyframes"),(i||s||r)&&(i?a.repeatType="reverse":s?a.repeatType="loop":r&&(a.repeatType="mirror"),a.repeat=s||i||r||o.repeat),o.type!=="spring"&&(a.type="keyframes"),a}function P5(n,e){var t,i,r=MS(n,e)||{};return(i=(t=r.delay)!==null&&t!==void 0?t:n.delay)!==null&&i!==void 0?i:0}function C5(n){return Array.isArray(n.to)&&n.to[0]===null&&(n.to=ho([],qn(n.to),!1),n.to[0]=n.from),n}function A5(n,e,t){var i;return Array.isArray(e.to)&&((i=n.duration)!==null&&i!==void 0||(n.duration=.8)),C5(e),T5(n)||(n=it(it({},n),M5(t,e.to))),it(it({},e),E5(n))}function L5(n,e,t,i,r){var s,o=MS(i,n),a=(s=o.from)!==null&&s!==void 0?s:e.get(),l=U2(n,t);a==="none"&&l&&typeof t=="string"?a=SS(n,t):V2(a)&&typeof t=="string"?a=G2(t):!Array.isArray(t)&&V2(t)&&typeof a=="string"&&(t=G2(a));var c=U2(n,a);function f(){var m={from:a,to:t,velocity:e.getVelocity(),onComplete:r,onUpdate:function(v){return e.set(v)}};return o.type==="inertia"||o.type==="decay"?$F(it(it({},m),o)):oL(it(it({},A5(o,m,n)),{onUpdate:function(v){var y;m.onUpdate(v),(y=o.onUpdate)===null||y===void 0||y.call(o,v)},onComplete:function(){var v;m.onComplete(),(v=o.onComplete)===null||v===void 0||v.call(o)}}))}function p(){var m,v,y=zA(t);return e.set(y),r(),(m=o==null?void 0:o.onUpdate)===null||m===void 0||m.call(o,y),(v=o==null?void 0:o.onComplete)===null||v===void 0||v.call(o),{stop:function(){}}}return!c||!l||o.type===!1?p:f}function V2(n){return n===0||typeof n=="string"&&parseFloat(n)===0&&n.indexOf(" ")===-1}function G2(n){return typeof n=="number"?0:SS("",n)}function MS(n,e){return n[e]||n.default||n}function bS(n,e,t,i){return i===void 0&&(i={}),e.start(function(r){var s,o,a=L5(n,e,t,i,r),l=P5(i,n),c=function(){return o=a()};return l?s=window.setTimeout(c,Zv(l)):c(),function(){clearTimeout(s),o==null||o.stop()}})}var R5=function(n){return/^\-?\d*\.?\d+$/.test(n)},k5=function(n){return/^0[^.\s]+$/.test(n)};function TS(n,e){n.indexOf(e)===-1&&n.push(e)}function ES(n,e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}var cd=function(){function n(){this.subscriptions=[]}return n.prototype.add=function(e){var t=this;return TS(this.subscriptions,e),function(){return ES(t.subscriptions,e)}},n.prototype.notify=function(e,t,i){var r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(var s=0;s<r;s++){var o=this.subscriptions[s];o&&o(e,t,i)}},n.prototype.getSize=function(){return this.subscriptions.length},n.prototype.clear=function(){this.subscriptions.length=0},n}(),I5=function(n){return!isNaN(parseFloat(n))},D5=function(){function n(e){var t=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new cd,this.velocityUpdateSubscribers=new cd,this.renderSubscribers=new cd,this.canTrackVelocity=!1,this.updateAndNotify=function(i,r){r===void 0&&(r=!0),t.prev=t.current,t.current=i;var s=Wv(),o=s.delta,a=s.timestamp;t.lastUpdated!==a&&(t.timeDelta=o,t.lastUpdated=a,po.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.updateSubscribers.notify(t.current),t.velocityUpdateSubscribers.getSize()&&t.velocityUpdateSubscribers.notify(t.getVelocity()),r&&t.renderSubscribers.notify(t.current)},this.scheduleVelocityCheck=function(){return po.postRender(t.velocityCheck)},this.velocityCheck=function(i){var r=i.timestamp;r!==t.lastUpdated&&(t.prev=t.current,t.velocityUpdateSubscribers.notify(t.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=I5(this.current)}return n.prototype.onChange=function(e){return this.updateSubscribers.add(e)},n.prototype.clearListeners=function(){this.updateSubscribers.clear()},n.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},n.prototype.attach=function(e){this.passiveEffect=e},n.prototype.set=function(e,t){t===void 0&&(t=!0),!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)},n.prototype.get=function(){return this.current},n.prototype.getPrevious=function(){return this.prev},n.prototype.getVelocity=function(){return this.canTrackVelocity?aL(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},n.prototype.start=function(e){var t=this;return this.stop(),new Promise(function(i){t.hasAnimated=!0,t.stopAnimation=e(i)}).then(function(){return t.clearAnimation()})},n.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},n.prototype.isAnimating=function(){return!!this.stopAnimation},n.prototype.clearAnimation=function(){this.stopAnimation=null},n.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},n}();function Rf(n){return new D5(n)}var gL=function(n){return function(e){return e.test(n)}},N5={test:function(n){return n==="auto"},parse:function(n){return n}},vL=[rc,Pt,Do,ll,Sz,wz,N5],Ch=function(n){return vL.find(gL(n))},O5=ho(ho([],qn(vL),!1),[kr,Ta],!1),z5=function(n){return O5.find(gL(n))};function F5(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Rf(t))}function U5(n,e){var t=y0(n,e),i=t?n.makeTargetAnimatable(t,!1):{},r=i.transitionEnd,s=r===void 0?{}:r;i.transition;var o=zs(i,["transitionEnd","transition"]);o=it(it({},o),s);for(var a in o){var l=zA(o[a]);F5(n,a,l)}}function B5(n,e,t){var i,r,s,o,a=Object.keys(e).filter(function(v){return!n.hasValue(v)}),l=a.length;if(l)for(var c=0;c<l;c++){var f=a[c],p=e[f],m=null;Array.isArray(p)&&(m=p[0]),m===null&&(m=(r=(i=t[f])!==null&&i!==void 0?i:n.readValue(f))!==null&&r!==void 0?r:e[f]),m!=null&&(typeof m=="string"&&(R5(m)||k5(m))?m=parseFloat(m):!z5(m)&&Ta.test(p)&&(m=SS(f,p)),n.addValue(f,Rf(m)),(s=(o=t)[f])!==null&&s!==void 0||(o[f]=m),n.setBaseTarget(f,m))}}function V5(n,e){if(e){var t=e[n]||e.default||e;return t.from}}function G5(n,e,t){var i,r,s={};for(var o in n)s[o]=(i=V5(o,e))!==null&&i!==void 0?i:(r=t.getValue(o))===null||r===void 0?void 0:r.get();return s}function H5(n,e,t){t===void 0&&(t={}),n.notifyAnimationStart(e);var i;if(Array.isArray(e)){var r=e.map(function(o){return r1(n,o,t)});i=Promise.all(r)}else if(typeof e=="string")i=r1(n,e,t);else{var s=typeof e=="function"?y0(n,e,t.custom):e;i=yL(n,s,t)}return i.then(function(){return n.notifyAnimationComplete(e)})}function r1(n,e,t){var i;t===void 0&&(t={});var r=y0(n,e,t.custom),s=(r||{}).transition,o=s===void 0?n.getDefaultTransition()||{}:s;t.transitionOverride&&(o=t.transitionOverride);var a=r?function(){return yL(n,r,t)}:function(){return Promise.resolve()},l=!((i=n.variantChildren)===null||i===void 0)&&i.size?function(v){v===void 0&&(v=0);var y=o.delayChildren,_=y===void 0?0:y,S=o.staggerChildren,T=o.staggerDirection;return W5(n,e,_+v,S,T,t)}:function(){return Promise.resolve()},c=o.when;if(c){var f=qn(c==="beforeChildren"?[a,l]:[l,a],2),p=f[0],m=f[1];return p().then(m)}else return Promise.all([a(),l(t.delay)])}function yL(n,e,t){var i,r=t===void 0?{}:t,s=r.delay,o=s===void 0?0:s,a=r.transitionOverride,l=r.type,c=n.makeTargetAnimatable(e),f=c.transition,p=f===void 0?n.getDefaultTransition():f,m=c.transitionEnd,v=zs(c,["transition","transitionEnd"]);a&&(p=a);var y=[],_=l&&((i=n.animationState)===null||i===void 0?void 0:i.getState()[l]);for(var S in v){var T=n.getValue(S),M=v[S];if(!(!T||M===void 0||_&&Z5(_,S))){var b=it({delay:o},p);n.shouldReduceMotion&&_p(S)&&(b=it(it({},b),{type:!1,delay:0}));var C=bS(S,T,M,b);y.push(C)}}return Promise.all(y).then(function(){m&&U5(n,m)})}function W5(n,e,t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=1);var o=[],a=(n.variantChildren.size-1)*i,l=r===1?function(c){return c===void 0&&(c=0),c*i}:function(c){return c===void 0&&(c=0),a-c*i};return Array.from(n.variantChildren).sort(j5).forEach(function(c,f){o.push(r1(c,e,it(it({},s),{delay:t+l(f)})).then(function(){return c.notifyAnimationComplete(e)}))}),Promise.all(o)}function j5(n,e){return n.sortNodePosition(e)}function Z5(n,e){var t=n.protectedKeys,i=n.needsAnimating,r=t.hasOwnProperty(e)&&i[e]!==!0;return i[e]=!1,r}var PS=[En.Animate,En.InView,En.Focus,En.Hover,En.Tap,En.Drag,En.Exit],X5=ho([],qn(PS),!1).reverse(),Y5=PS.length;function q5(n){return function(e){return Promise.all(e.map(function(t){var i=t.animation,r=t.options;return H5(n,i,r)}))}}function K5(n){var e=q5(n),t=Q5(),i={},r=!0,s=function(f,p){var m=y0(n,p);if(m){m.transition;var v=m.transitionEnd,y=zs(m,["transition","transitionEnd"]);f=it(it(it({},f),y),v)}return f};function o(f){return i[f]!==void 0}function a(f){e=f(n)}function l(f,p){for(var m,v=n.getProps(),y=n.getVariantContext(!0)||{},_=[],S=new Set,T={},M=1/0,b=function(z){var A=X5[z],O=t[A],U=(m=v[A])!==null&&m!==void 0?m:y[A],$=ro(U),Y=A===p?O.isActive:null;Y===!1&&(M=z);var te=U===y[A]&&U!==v[A]&&$;if(te&&r&&n.manuallyAnimateOnMount&&(te=!1),O.protectedKeys=it({},T),!O.isActive&&Y===null||!U&&!O.prevProp||hS(U)||typeof U=="boolean")return"continue";var J=J5(O.prevProp,U),ae=J||A===p&&O.isActive&&!te&&$||z>M&&$,ce=Array.isArray(U)?U:[U],ye=ce.reduce(s,{});Y===!1&&(ye={});var F=O.prevResolvedValues,X=F===void 0?{}:F,H=it(it({},X),ye),W=function(Z){ae=!0,S.delete(Z),O.needsAnimating[Z]=!0};for(var j in H){var se=ye[j],ee=X[j];T.hasOwnProperty(j)||(se!==ee?Gd(se)&&Gd(ee)?!mL(se,ee)||J?W(j):O.protectedKeys[j]=!0:se!==void 0?W(j):S.add(j):se!==void 0&&S.has(j)?W(j):O.protectedKeys[j]=!0)}O.prevProp=U,O.prevResolvedValues=ye,O.isActive&&(T=it(it({},T),ye)),r&&n.blockInitialAnimation&&(ae=!1),ae&&!te&&_.push.apply(_,ho([],qn(ce.map(function(Z){return{animation:Z,options:it({type:A},f)}})),!1))},C=0;C<Y5;C++)b(C);if(i=it({},T),S.size){var k={};S.forEach(function(z){var A=n.getBaseTarget(z);A!==void 0&&(k[z]=A)}),_.push({animation:k})}var I=!!_.length;return r&&v.initial===!1&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(_):Promise.resolve()}function c(f,p,m){var v;if(t[f].isActive===p)return Promise.resolve();(v=n.variantChildren)===null||v===void 0||v.forEach(function(S){var T;return(T=S.animationState)===null||T===void 0?void 0:T.setActive(f,p)}),t[f].isActive=p;var y=l(m,f);for(var _ in t)t[_].protectedKeys={};return y}return{isAnimated:o,animateChanges:l,setActive:c,setAnimateFunction:a,getState:function(){return t}}}function J5(n,e){return typeof e=="string"?e!==n:pA(e)?!mL(e,n):!1}function fu(n){return n===void 0&&(n=!1),{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q5(){var n;return n={},n[En.Animate]=fu(!0),n[En.InView]=fu(),n[En.Hover]=fu(),n[En.Tap]=fu(),n[En.Drag]=fu(),n[En.Focus]=fu(),n[En.Exit]=fu(),n}var $5={animation:yl(function(n){var e=n.visualElement,t=n.animate;e.animationState||(e.animationState=K5(e)),hS(t)&&K.useEffect(function(){return t.subscribe(e)},[t])}),exit:yl(function(n){var e=n.custom,t=n.visualElement,i=qn(pL(),2),r=i[0],s=i[1],o=K.useContext(vp);K.useEffect(function(){var a,l;t.isPresent=r;var c=(a=t.animationState)===null||a===void 0?void 0:a.setActive(En.Exit,!r,{custom:(l=o==null?void 0:o.custom)!==null&&l!==void 0?l:e});!r&&(c==null||c.then(s))},[r])})},_L=function(){function n(e,t,i){var r=this,s=i===void 0?{}:i,o=s.transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var m=e_(r.lastMoveEventInfo,r.history),v=r.startEvent!==null,y=lL(m.offset,{x:0,y:0})>=3;if(!(!v&&!y)){var _=m.point,S=Wv().timestamp;r.history.push(it(it({},_),{timestamp:S}));var T=r.handlers,M=T.onStart,b=T.onMove;v||(M&&M(r.lastMoveEvent,m),r.startEvent=r.lastMoveEvent),b&&b(r.lastMoveEvent,m)}}},this.handlePointerMove=function(m,v){if(r.lastMoveEvent=m,r.lastMoveEventInfo=$y(v,r.transformPagePoint),UA(m)&&m.buttons===0){r.handlePointerUp(m,v);return}po.update(r.updatePoint,!0)},this.handlePointerUp=function(m,v){r.end();var y=r.handlers,_=y.onEnd,S=y.onSessionEnd,T=e_($y(v,r.transformPagePoint),r.history);r.startEvent&&_&&_(m,T),S&&S(m,T)},!(BA(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=o;var a=dS(e),l=$y(a,this.transformPagePoint),c=l.point,f=Wv().timestamp;this.history=[it(it({},c),{timestamp:f})];var p=t.onSessionStart;p&&p(e,e_(l,this.history)),this.removeListeners=w0(_f(window,"pointermove",this.handlePointerMove),_f(window,"pointerup",this.handlePointerUp),_f(window,"pointercancel",this.handlePointerUp))}}return n.prototype.updateHandlers=function(e){this.handlers=e},n.prototype.end=function(){this.removeListeners&&this.removeListeners(),Lf.update(this.updatePoint)},n}();function $y(n,e){return e?{point:e(n.point)}:n}function H2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function e_(n,e){var t=n.point;return{point:t,delta:H2(t,xL(e)),offset:H2(t,eU(e)),velocity:tU(e,.1)}}function eU(n){return n[0]}function xL(n){return n[n.length-1]}function tU(n,e){if(n.length<2)return{x:0,y:0};for(var t=n.length-1,i=null,r=xL(n);t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Zv(e)));)t--;if(!i)return{x:0,y:0};var s=(r.timestamp-i.timestamp)/1e3;if(s===0)return{x:0,y:0};var o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ea(n){return n.max-n.min}function W2(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=.01),lL(n,e)<t}function j2(n,e,t,i){i===void 0&&(i=.5),n.origin=i,n.originPoint=Yn(e.min,e.max,n.origin),n.scale=Ea(t)/Ea(e),(W2(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Yn(t.min,t.max,n.origin)-n.originPoint,(W2(n.translate)||isNaN(n.translate))&&(n.translate=0)}function fd(n,e,t,i){j2(n.x,e.x,t.x,i==null?void 0:i.originX),j2(n.y,e.y,t.y,i==null?void 0:i.originY)}function Z2(n,e,t){n.min=t.min+e.min,n.max=n.min+Ea(e)}function nU(n,e,t){Z2(n.x,e.x,t.x),Z2(n.y,e.y,t.y)}function X2(n,e,t){n.min=e.min-t.min,n.max=n.min+Ea(e)}function hd(n,e,t){X2(n.x,e.x,t.x),X2(n.y,e.y,t.y)}function iU(n,e,t){var i=e.min,r=e.max;return i!==void 0&&n<i?n=t?Yn(i,n,t.min):Math.max(n,i):r!==void 0&&n>r&&(n=t?Yn(r,n,t.max):Math.min(n,r)),n}function Y2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function rU(n,e){var t=e.top,i=e.left,r=e.bottom,s=e.right;return{x:Y2(n.x,i,s),y:Y2(n.y,t,r)}}function q2(n,e){var t,i=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&(t=qn([r,i],2),i=t[0],r=t[1]),{min:i,max:r}}function sU(n,e){return{x:q2(n.x,e.x),y:q2(n.y,e.y)}}function oU(n,e){var t=.5,i=Ea(n),r=Ea(e);return r>i?t=Hd(e.min,e.max-i,n.min):i>r&&(t=Hd(n.min,n.max-r,e.min)),Gv(0,1,t)}function aU(n,e){var t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}var s1=.35;function lU(n){return n===void 0&&(n=s1),n===!1?n=0:n===!0&&(n=s1),{x:K2(n,"left","right"),y:K2(n,"top","bottom")}}function K2(n,e,t){return{min:J2(n,e),max:J2(n,t)}}function J2(n,e){var t;return typeof n=="number"?n:(t=n[e])!==null&&t!==void 0?t:0}var Q2=function(){return{translate:0,scale:1,origin:0,originPoint:0}},dd=function(){return{x:Q2(),y:Q2()}},$2=function(){return{min:0,max:0}},lr=function(){return{x:$2(),y:$2()}};function Lo(n){return[n("x"),n("y")]}function wL(n){var e=n.top,t=n.left,i=n.right,r=n.bottom;return{x:{min:t,max:i},y:{min:e,max:r}}}function uU(n){var e=n.x,t=n.y;return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cU(n,e){if(!e)return n;var t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function t_(n){return n===void 0||n===1}function SL(n){var e=n.scale,t=n.scaleX,i=n.scaleY;return!t_(e)||!t_(t)||!t_(i)}function ul(n){return SL(n)||eT(n.x)||eT(n.y)||n.z||n.rotate||n.rotateX||n.rotateY}function eT(n){return n&&n!=="0%"}function Xv(n,e,t){var i=n-t,r=e*i;return t+r}function tT(n,e,t,i,r){return r!==void 0&&(n=Xv(n,r,i)),Xv(n,t,i)+e}function o1(n,e,t,i,r){e===void 0&&(e=0),t===void 0&&(t=1),n.min=tT(n.min,e,t,i,r),n.max=tT(n.max,e,t,i,r)}function ML(n,e){var t=e.x,i=e.y;o1(n.x,t.translate,t.scale,t.originPoint),o1(n.y,i.translate,i.scale,i.originPoint)}function fU(n,e,t,i){var r,s;i===void 0&&(i=!1);var o=t.length;if(o){e.x=e.y=1;for(var a,l,c=0;c<o;c++)a=t[c],l=a.projectionDelta,((s=(r=a.instance)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.display)!=="contents"&&(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&of(n,{x:-a.scroll.x,y:-a.scroll.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ML(n,l)),i&&ul(a.latestValues)&&of(n,a.latestValues))}}function hl(n,e){n.min=n.min+e,n.max=n.max+e}function nT(n,e,t){var i=qn(t,3),r=i[0],s=i[1],o=i[2],a=e[o]!==void 0?e[o]:.5,l=Yn(n.min,n.max,a);o1(n,e[r],e[s],l,e.scale)}var hU=["x","scaleX","originX"],dU=["y","scaleY","originY"];function of(n,e){nT(n.x,e,hU),nT(n.y,e,dU)}function bL(n,e){return wL(cU(n.getBoundingClientRect(),e))}function pU(n,e,t){var i=bL(n,t),r=e.scroll;return r&&(hl(i.x,r.x),hl(i.y,r.y)),i}var mU=new WeakMap,gU=function(){function n(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lr(),this.visualElement=e}return n.prototype.start=function(e,t){var i=this,r=t===void 0?{}:t,s=r.snapToCursor,o=s===void 0?!1:s;if(this.visualElement.isPresent!==!1){var a=function(p){i.stopAnimation(),o&&i.snapToCursor(dS(p,"page").point)},l=function(p,m){var v,y=i.getProps(),_=y.drag,S=y.dragPropagation,T=y.onDragStart;_&&!S&&(i.openGlobalLock&&i.openGlobalLock(),i.openGlobalLock=WA(_),!i.openGlobalLock)||(i.isDragging=!0,i.currentDirection=null,i.resolveConstraints(),i.visualElement.projection&&(i.visualElement.projection.isAnimationBlocked=!0,i.visualElement.projection.target=void 0),Lo(function(M){var b,C,k=i.getAxisMotionValue(M).get()||0;if(Do.test(k)){var I=(C=(b=i.visualElement.projection)===null||b===void 0?void 0:b.layout)===null||C===void 0?void 0:C.actual[M];if(I){var z=Ea(I);k=z*(parseFloat(k)/100)}}i.originPoint[M]=k}),T==null||T(p,m),(v=i.visualElement.animationState)===null||v===void 0||v.setActive(En.Drag,!0))},c=function(p,m){var v=i.getProps(),y=v.dragPropagation,_=v.dragDirectionLock,S=v.onDirectionLock,T=v.onDrag;if(!(!y&&!i.openGlobalLock)){var M=m.offset;if(_&&i.currentDirection===null){i.currentDirection=vU(M),i.currentDirection!==null&&(S==null||S(i.currentDirection));return}i.updateAxis("x",m.point,M),i.updateAxis("y",m.point,M),i.visualElement.syncRender(),T==null||T(p,m)}},f=function(p,m){return i.stop(p,m)};this.panSession=new _L(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:f},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},n.prototype.stop=function(e,t){var i=this.isDragging;if(this.cancel(),!!i){var r=t.velocity;this.startAnimation(r);var s=this.getProps().onDragEnd;s==null||s(e,t)}},n.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),(e=this.panSession)===null||e===void 0||e.end(),this.panSession=void 0;var i=this.getProps().dragPropagation;!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),(t=this.visualElement.animationState)===null||t===void 0||t.setActive(En.Drag,!1)},n.prototype.updateAxis=function(e,t,i){var r=this.getProps().drag;if(!(!i||!Zm(e,r,this.currentDirection))){var s=this.getAxisMotionValue(e),o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=iU(o,this.constraints[e],this.elastic[e])),s.set(o)}},n.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),i=t.dragConstraints,r=t.dragElastic,s=(this.visualElement.projection||{}).layout,o=this.constraints;i&&sf(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&s?this.constraints=rU(s.actual,i):this.constraints=!1,this.elastic=lU(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Lo(function(a){e.getAxisMotionValue(a)&&(e.constraints[a]=aU(s.actual[a],e.constraints[a]))})},n.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,i=e.onMeasureDragConstraints;if(!t||!sf(t))return!1;var r=t.current,s=this.visualElement.projection;if(!s||!s.layout)return!1;var o=pU(r,s.root,this.visualElement.getTransformPagePoint()),a=sU(s.layout.actual,o);if(i){var l=i(uU(a));this.hasMutatedConstraints=!!l,l&&(a=wL(l))}return a},n.prototype.startAnimation=function(e){var t=this,i=this.getProps(),r=i.drag,s=i.dragMomentum,o=i.dragElastic,a=i.dragTransition,l=i.dragSnapToOrigin,c=i.onDragTransitionEnd,f=this.constraints||{},p=Lo(function(m){var v;if(Zm(m,r,t.currentDirection)){var y=(v=f==null?void 0:f[m])!==null&&v!==void 0?v:{};l&&(y={min:0,max:0});var _=o?200:1e6,S=o?40:1e7,T=it(it({type:"inertia",velocity:s?e[m]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10},a),y);return t.startAxisValueAnimation(m,T)}});return Promise.all(p).then(c)},n.prototype.startAxisValueAnimation=function(e,t){var i=this.getAxisMotionValue(e);return bS(e,i,0,t)},n.prototype.stopAnimation=function(){var e=this;Lo(function(t){return e.getAxisMotionValue(t).stop()})},n.prototype.getAxisMotionValue=function(e){var t,i,r="_drag"+e.toUpperCase(),s=this.visualElement.getProps()[r];return s||this.visualElement.getValue(e,(i=(t=this.visualElement.getProps().initial)===null||t===void 0?void 0:t[e])!==null&&i!==void 0?i:0)},n.prototype.snapToCursor=function(e){var t=this;Lo(function(i){var r=t.getProps().drag;if(Zm(i,r,t.currentDirection)){var s=t.visualElement.projection,o=t.getAxisMotionValue(i);if(s&&s.layout){var a=s.layout.actual[i],l=a.min,c=a.max;o.set(e[i]-Yn(l,c,.5))}}})},n.prototype.scalePositionWithinConstraints=function(){var e=this,t,i=this.getProps(),r=i.drag,s=i.dragConstraints,o=this.visualElement.projection;if(!(!sf(s)||!o||!this.constraints)){this.stopAnimation();var a={x:0,y:0};Lo(function(c){var f=e.getAxisMotionValue(c);if(f){var p=f.get();a[c]=oU({min:p,max:p},e.constraints[c])}});var l=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=l?l({},""):"none",(t=o.root)===null||t===void 0||t.updateScroll(),o.updateLayout(),this.resolveConstraints(),Lo(function(c){if(Zm(c,r,null)){var f=e.getAxisMotionValue(c),p=e.constraints[c],m=p.min,v=p.max;f.set(Yn(m,v,a[c]))}})}},n.prototype.addListeners=function(){var e=this,t;mU.set(this.visualElement,this);var i=this.visualElement.getInstance(),r=_f(i,"pointerdown",function(c){var f=e.getProps(),p=f.drag,m=f.dragListener,v=m===void 0?!0:m;p&&v&&e.start(c)}),s=function(){var c=e.getProps().dragConstraints;sf(c)&&(e.constraints=e.resolveRefConstraints())},o=this.visualElement.projection,a=o.addEventListener("measure",s);o&&!o.layout&&((t=o.root)===null||t===void 0||t.updateScroll(),o.updateLayout()),s();var l=x0(window,"resize",function(){return e.scalePositionWithinConstraints()});return o.addEventListener("didUpdate",function(c){var f=c.delta,p=c.hasLayoutChanged;e.isDragging&&p&&(Lo(function(m){var v=e.getAxisMotionValue(m);v&&(e.originPoint[m]+=f[m].translate,v.set(v.get()+f[m].translate))}),e.visualElement.syncRender())}),function(){l(),r(),a()}},n.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,i=t===void 0?!1:t,r=e.dragDirectionLock,s=r===void 0?!1:r,o=e.dragPropagation,a=o===void 0?!1:o,l=e.dragConstraints,c=l===void 0?!1:l,f=e.dragElastic,p=f===void 0?s1:f,m=e.dragMomentum,v=m===void 0?!0:m;return it(it({},e),{drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:c,dragElastic:p,dragMomentum:v})},n}();function Zm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function vU(n,e){e===void 0&&(e=10);var t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}function yU(n){var e=n.dragControls,t=n.visualElement,i=yp(function(){return new gU(t)});K.useEffect(function(){return e&&e.subscribe(i)},[i,e]),K.useEffect(function(){return i.addListeners()},[i])}function _U(n){var e=n.onPan,t=n.onPanStart,i=n.onPanEnd,r=n.onPanSessionStart,s=n.visualElement,o=e||t||i||r,a=K.useRef(null),l=K.useContext(rS).transformPagePoint,c={onSessionStart:r,onStart:t,onMove:e,onEnd:function(p,m){a.current=null,i&&i(p,m)}};K.useEffect(function(){a.current!==null&&a.current.updateHandlers(c)});function f(p){a.current=new _L(p,c,{transformPagePoint:l})}Vv(s,"pointerdown",o&&f),pS(function(){return a.current&&a.current.end()})}var xU={pan:yl(_U),drag:yl(yU)},Xm=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];function wU(){var n=Xm.map(function(){return new cd}),e={},t={clearAllListeners:function(){return n.forEach(function(i){return i.clear()})},updatePropListeners:function(i){Xm.forEach(function(r){var s,o="on"+r,a=i[o];(s=e[r])===null||s===void 0||s.call(e),a&&(e[r]=t[o](a))})}};return n.forEach(function(i,r){t["on"+Xm[r]]=function(s){return i.add(s)},t["notify"+Xm[r]]=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return i.notify.apply(i,ho([],qn(s),!1))}}),t}function SU(n,e,t){var i;for(var r in e){var s=e[r],o=t[r];if(ba(s))n.addValue(r,s);else if(ba(o))n.addValue(r,Rf(s));else if(o!==s)if(n.hasValue(r)){var a=n.getValue(r);!a.hasAnimated&&a.set(s)}else n.addValue(r,Rf((i=n.getStaticValue(r))!==null&&i!==void 0?i:s))}for(var r in t)e[r]===void 0&&n.removeValue(r);return e}var TL=function(n){var e=n.treeType,t=e===void 0?"":e,i=n.build,r=n.getBaseTarget,s=n.makeTargetAnimatable,o=n.measureViewportBox,a=n.render,l=n.readValueFromInstance,c=n.removeValueFromRenderState,f=n.sortNodePosition,p=n.scrapeMotionValuesFromProps;return function(m,v){var y=m.parent,_=m.props,S=m.presenceId,T=m.blockInitialAnimation,M=m.visualState,b=m.shouldReduceMotion;v===void 0&&(v={});var C=!1,k=M.latestValues,I=M.renderState,z,A=wU(),O=new Map,U=new Map,$={},Y=it({},k),te;function J(){!z||!C||(ae(),a(z,I,_.style,se.projection))}function ae(){i(se,I,k,v,_)}function ce(){A.notifyUpdate(k)}function ye(ee,Z){var ue=Z.onChange(function(_e){k[ee]=_e,_.onUpdate&&po.update(ce,!1,!0)}),de=Z.onRenderRequest(se.scheduleRender);U.set(ee,function(){ue(),de()})}var F=p(_);for(var X in F){var H=F[X];k[X]!==void 0&&ba(H)&&H.set(k[X],!1)}var W=_0(_),j=gA(_),se=it(it({treeType:t,current:null,depth:y?y.depth+1:0,parent:y,children:new Set,presenceId:S,shouldReduceMotion:b,variantChildren:j?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:!!(y!=null&&y.isMounted()),blockInitialAnimation:T,isMounted:function(){return!!z},mount:function(ee){C=!0,z=se.current=ee,se.projection&&se.projection.mount(ee),j&&y&&!W&&(te=y==null?void 0:y.addVariantChild(se)),O.forEach(function(Z,ue){return ye(ue,Z)}),y==null||y.children.add(se),se.setProps(_)},unmount:function(){var ee;(ee=se.projection)===null||ee===void 0||ee.unmount(),Lf.update(ce),Lf.render(J),U.forEach(function(Z){return Z()}),te==null||te(),y==null||y.children.delete(se),A.clearAllListeners(),z=void 0,C=!1},addVariantChild:function(ee){var Z,ue=se.getClosestVariantNode();if(ue)return(Z=ue.variantChildren)===null||Z===void 0||Z.add(ee),function(){return ue.variantChildren.delete(ee)}},sortNodePosition:function(ee){return!f||t!==ee.treeType?0:f(se.getInstance(),ee.getInstance())},getClosestVariantNode:function(){return j?se:y==null?void 0:y.getClosestVariantNode()},getLayoutId:function(){return _.layoutId},getInstance:function(){return z},getStaticValue:function(ee){return k[ee]},setStaticValue:function(ee,Z){return k[ee]=Z},getLatestValues:function(){return k},setVisibility:function(ee){se.isVisible!==ee&&(se.isVisible=ee,se.scheduleRender())},makeTargetAnimatable:function(ee,Z){return Z===void 0&&(Z=!0),s(se,ee,_,Z)},measureViewportBox:function(){return o(z,_)},addValue:function(ee,Z){se.hasValue(ee)&&se.removeValue(ee),O.set(ee,Z),k[ee]=Z.get(),ye(ee,Z)},removeValue:function(ee){var Z;O.delete(ee),(Z=U.get(ee))===null||Z===void 0||Z(),U.delete(ee),delete k[ee],c(ee,I)},hasValue:function(ee){return O.has(ee)},getValue:function(ee,Z){var ue=O.get(ee);return ue===void 0&&Z!==void 0&&(ue=Rf(Z),se.addValue(ee,ue)),ue},forEachValue:function(ee){return O.forEach(ee)},readValue:function(ee){var Z;return(Z=k[ee])!==null&&Z!==void 0?Z:l(z,ee,v)},setBaseTarget:function(ee,Z){Y[ee]=Z},getBaseTarget:function(ee){if(r){var Z=r(_,ee);if(Z!==void 0&&!ba(Z))return Z}return Y[ee]}},A),{build:function(){return ae(),I},scheduleRender:function(){po.render(J,!1,!0)},syncRender:J,setProps:function(ee){(ee.transformTemplate||_.transformTemplate)&&se.scheduleRender(),_=ee,A.updatePropListeners(ee),$=SU(se,p(_),$)},getProps:function(){return _},getVariant:function(ee){var Z;return(Z=_.variants)===null||Z===void 0?void 0:Z[ee]},getDefaultTransition:function(){return _.transition},getTransformPagePoint:function(){return _.transformPagePoint},getVariantContext:function(ee){if(ee===void 0&&(ee=!1),ee)return y==null?void 0:y.getVariantContext();if(!W){var Z=(y==null?void 0:y.getVariantContext())||{};return _.initial!==void 0&&(Z.initial=_.initial),Z}for(var ue={},de=0;de<MU;de++){var _e=EL[de],Ae=_[_e];(ro(Ae)||Ae===!1)&&(ue[_e]=Ae)}return ue}});return se}},EL=ho(["initial"],qn(PS),!1),MU=EL.length;function a1(n){return typeof n=="string"&&n.startsWith("var(--")}var PL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function bU(n){var e=PL.exec(n);if(!e)return[,];var t=qn(e,3),i=t[1],r=t[2];return[i,r]}function l1(n,e,t){var i=qn(bU(n),2),r=i[0],s=i[1];if(r){var o=window.getComputedStyle(e).getPropertyValue(r);return o?o.trim():a1(s)?l1(s,e):s}}function TU(n,e,t){var i,r=zs(e,[]),s=n.getInstance();if(!(s instanceof Element))return{target:r,transitionEnd:t};t&&(t=it({},t)),n.forEachValue(function(c){var f=c.get();if(a1(f)){var p=l1(f,s);p&&c.set(p)}});for(var o in r){var a=r[o];if(a1(a)){var l=l1(a,s);l&&(r[o]=l,t&&((i=t[o])!==null&&i!==void 0||(t[o]=a)))}}return{target:r,transitionEnd:t}}var EU=new Set(["width","height","top","left","right","bottom","x","y"]),CL=function(n){return EU.has(n)},PU=function(n){return Object.keys(n).some(CL)},AL=function(n,e){n.set(e,!1),n.set(e)},iT=function(n){return n===rc||n===Pt},rT;(function(n){n.width="width",n.height="height",n.left="left",n.right="right",n.top="top",n.bottom="bottom"})(rT||(rT={}));var sT=function(n,e){return parseFloat(n.split(", ")[e])},oT=function(n,e){return function(t,i){var r=i.transform;if(r==="none"||!r)return 0;var s=r.match(/^matrix3d\((.+)\)$/);if(s)return sT(s[1],e);var o=r.match(/^matrix\((.+)\)$/);return o?sT(o[1],n):0}},CU=new Set(["x","y","z"]),AU=Bd.filter(function(n){return!CU.has(n)});function LU(n){var e=[];return AU.forEach(function(t){var i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.syncRender(),e}var aT={width:function(n,e){var t=n.x,i=e.paddingLeft,r=i===void 0?"0":i,s=e.paddingRight,o=s===void 0?"0":s;return t.max-t.min-parseFloat(r)-parseFloat(o)},height:function(n,e){var t=n.y,i=e.paddingTop,r=i===void 0?"0":i,s=e.paddingBottom,o=s===void 0?"0":s;return t.max-t.min-parseFloat(r)-parseFloat(o)},top:function(n,e){var t=e.top;return parseFloat(t)},left:function(n,e){var t=e.left;return parseFloat(t)},bottom:function(n,e){var t=n.y,i=e.top;return parseFloat(i)+(t.max-t.min)},right:function(n,e){var t=n.x,i=e.left;return parseFloat(i)+(t.max-t.min)},x:oT(4,13),y:oT(5,14)},RU=function(n,e,t){var i=e.measureViewportBox(),r=e.getInstance(),s=getComputedStyle(r),o=s.display,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(function(c){a[c]=aT[c](i,s)}),e.syncRender();var l=e.measureViewportBox();return t.forEach(function(c){var f=e.getValue(c);AL(f,a[c]),n[c]=aT[c](l,s)}),n},kU=function(n,e,t,i){t===void 0&&(t={}),i===void 0&&(i={}),e=it({},e),i=it({},i);var r=Object.keys(e).filter(CL),s=[],o=!1,a=[];if(r.forEach(function(f){var p=n.getValue(f);if(n.hasValue(f)){var m=t[f],v=Ch(m),y=e[f],_;if(Gd(y)){var S=y.length,T=y[0]===null?1:0;m=y[T],v=Ch(m);for(var M=T;M<S;M++)_?zv(Ch(y[M])===_):_=Ch(y[M])}else _=Ch(y);if(v!==_)if(iT(v)&&iT(_)){var b=p.get();typeof b=="string"&&p.set(parseFloat(b)),typeof y=="string"?e[f]=parseFloat(y):Array.isArray(y)&&_===Pt&&(e[f]=y.map(parseFloat))}else v!=null&&v.transform&&(_!=null&&_.transform)&&(m===0||y===0)?m===0?p.set(_.transform(m)):e[f]=v.transform(y):(o||(s=LU(n),o=!0),a.push(f),i[f]=i[f]!==void 0?i[f]:e[f],AL(p,y))}}),a.length){var l=a.indexOf("height")>=0?window.pageYOffset:null,c=RU(e,n,a);return s.length&&s.forEach(function(f){var p=qn(f,2),m=p[0],v=p[1];n.getValue(m).set(v)}),n.syncRender(),l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function IU(n,e,t,i){return PU(e)?kU(n,e,t,i):{target:e,transitionEnd:i}}var DU=function(n,e,t,i){var r=TU(n,e,i);return e=r.target,i=r.transitionEnd,IU(n,e,t,i)};function NU(n){return window.getComputedStyle(n)}var LL={treeType:"dom",readValueFromInstance:function(n,e){if(_p(e)){var t=wS(e);return t&&t.default||0}else{var i=NU(n);return(xA(e)?i.getPropertyValue(e):i[e])||0}},sortNodePosition:function(n,e){return n.compareDocumentPosition(e)&2?1:-1},getBaseTarget:function(n,e){var t;return(t=n.style)===null||t===void 0?void 0:t[e]},measureViewportBox:function(n,e){var t=e.transformPagePoint;return bL(n,t)},resetTransform:function(n,e,t){var i=t.transformTemplate;e.style.transform=i?i({},""):"none",n.scheduleRender()},restoreTransform:function(n,e){n.style.transform=e.style.transform},removeValueFromRenderState:function(n,e){var t=e.vars,i=e.style;delete t[n],delete i[n]},makeTargetAnimatable:function(n,e,t,i){var r=t.transformValues;i===void 0&&(i=!0);var s=e.transition,o=e.transitionEnd,a=zs(e,["transition","transitionEnd"]),l=G5(a,s||{},n);if(r&&(o&&(o=r(o)),a&&(a=r(a)),l&&(l=r(l))),i){B5(n,a,l);var c=DU(n,a,l,o);o=c.transitionEnd,a=c.target}return it({transition:s,transitionEnd:o},a)},scrapeMotionValuesFromProps:fS,build:function(n,e,t,i,r){n.isVisible!==void 0&&(e.style.visibility=n.isVisible?"visible":"hidden"),lS(e,t,i,r.transformTemplate)},render:IA},OU=TL(LL),zU=TL(it(it({},LL),{getBaseTarget:function(n,e){return n[e]},readValueFromInstance:function(n,e){var t;return _p(e)?((t=wS(e))===null||t===void 0?void 0:t.default)||0:(e=DA.has(e)?e:kA(e),n.getAttribute(e))},scrapeMotionValuesFromProps:OA,build:function(n,e,t,i,r){cS(e,t,i,r.transformTemplate)},render:NA})),FU=function(n,e){return oS(n)?zU(e,{enableHardwareAcceleration:!1}):OU(e,{enableHardwareAcceleration:!0})};function lT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}var Ah={correct:function(n,e){if(!e.target)return n;if(typeof n=="string")if(Pt.test(n))n=parseFloat(n);else return n;var t=lT(n,e.target.x),i=lT(n,e.target.y);return"".concat(t,"% ").concat(i,"%")}},uT="_$css",UU={correct:function(n,e){var t=e.treeScale,i=e.projectionDelta,r=n,s=n.includes("var("),o=[];s&&(n=n.replace(PL,function(_){return o.push(_),uT}));var a=Ta.parse(n);if(a.length>5)return r;var l=Ta.createTransformer(n),c=typeof a[0]!="number"?1:0,f=i.x.scale*t.x,p=i.y.scale*t.y;a[0+c]/=f,a[1+c]/=p;var m=Yn(f,p,.5);typeof a[2+c]=="number"&&(a[2+c]/=m),typeof a[3+c]=="number"&&(a[3+c]/=m);var v=l(a);if(s){var y=0;v=v.replace(uT,function(){var _=o[y];return y++,_})}return v}},BU=function(n){cA(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){var t=this,i=this.props,r=i.visualElement,s=i.layoutGroup,o=i.switchLayoutGroup,a=i.layoutId,l=r.projection;fz(GU),l&&(s!=null&&s.group&&s.group.add(l),o!=null&&o.register&&a&&o.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",function(){t.safeToRemove()}),l.setOptions(it(it({},l.options),{onExitComplete:function(){return t.safeToRemove()}}))),ad.hasEverUpdated=!0},e.prototype.getSnapshotBeforeUpdate=function(t){var i=this,r=this.props,s=r.layoutDependency,o=r.visualElement,a=r.drag,l=r.isPresent,c=o.projection;return c&&(c.isPresent=l,a||t.layoutDependency!==s||s===void 0?c.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?c.promote():c.relegate()||po.postRender(function(){var f;!((f=c.getStack())===null||f===void 0)&&f.members.length||i.safeToRemove()}))),null},e.prototype.componentDidUpdate=function(){var t=this.props.visualElement.projection;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())},e.prototype.componentWillUnmount=function(){var t=this.props,i=t.visualElement,r=t.layoutGroup,s=t.switchLayoutGroup,o=i.projection;o&&(o.scheduleCheckAfterUnmount(),r!=null&&r.group&&r.group.remove(o),s!=null&&s.deregister&&s.deregister(o))},e.prototype.safeToRemove=function(){var t=this.props.safeToRemove;t==null||t()},e.prototype.render=function(){return null},e}(ju.Component);function VU(n){var e=qn(pL(),2),t=e[0],i=e[1],r=K.useContext(sS);return ju.createElement(BU,it({},n,{layoutGroup:r,switchLayoutGroup:K.useContext(vA),isPresent:t,safeToRemove:i}))}var GU={borderRadius:it(it({},Ah),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ah,borderTopRightRadius:Ah,borderBottomLeftRadius:Ah,borderBottomRightRadius:Ah,boxShadow:UU},HU={measureLayout:VU};function WU(n,e,t){t===void 0&&(t={});var i=ba(n)?n:Rf(n);return bS("",i,e,t),{stop:function(){return i.stop()},isAnimating:function(){return i.isAnimating()}}}var RL=["TopLeft","TopRight","BottomLeft","BottomRight"],jU=RL.length,cT=function(n){return typeof n=="string"?parseFloat(n):n},fT=function(n){return typeof n=="number"||Pt.test(n)};function ZU(n,e,t,i,r,s){var o,a,l,c;r?(n.opacity=Yn(0,(o=t.opacity)!==null&&o!==void 0?o:1,XU(i)),n.opacityExit=Yn((a=e.opacity)!==null&&a!==void 0?a:1,0,YU(i))):s&&(n.opacity=Yn((l=e.opacity)!==null&&l!==void 0?l:1,(c=t.opacity)!==null&&c!==void 0?c:1,i));for(var f=0;f<jU;f++){var p="border".concat(RL[f],"Radius"),m=hT(e,p),v=hT(t,p);if(!(m===void 0&&v===void 0)){m||(m=0),v||(v=0);var y=m===0||v===0||fT(m)===fT(v);y?(n[p]=Math.max(Yn(cT(m),cT(v),i),0),(Do.test(v)||Do.test(m))&&(n[p]+="%")):n[p]=v}}(e.rotate||t.rotate)&&(n.rotate=Yn(e.rotate||0,t.rotate||0,i))}function hT(n,e){var t;return(t=n[e])!==null&&t!==void 0?t:n.borderRadius}var XU=kL(0,.5,_S),YU=kL(.5,.95,vS);function kL(n,e,t){return function(i){return i<n?0:i>e?1:t(Hd(n,e,i))}}function dT(n,e){n.min=e.min,n.max=e.max}function Qs(n,e){dT(n.x,e.x),dT(n.y,e.y)}function pT(n,e,t,i,r){return n-=e,n=Xv(n,1/t,i),r!==void 0&&(n=Xv(n,1/r,i)),n}function qU(n,e,t,i,r,s,o){if(e===void 0&&(e=0),t===void 0&&(t=1),i===void 0&&(i=.5),s===void 0&&(s=n),o===void 0&&(o=n),Do.test(e)){e=parseFloat(e);var a=Yn(o.min,o.max,e/100);e=a-o.min}if(typeof e=="number"){var l=Yn(s.min,s.max,i);n===s&&(l-=e),n.min=pT(n.min,e,t,l,r),n.max=pT(n.max,e,t,l,r)}}function mT(n,e,t,i,r){var s=qn(t,3),o=s[0],a=s[1],l=s[2];qU(n,e[o],e[a],e[l],e.scale,i,r)}var KU=["x","scaleX","originX"],JU=["y","scaleY","originY"];function gT(n,e,t,i){mT(n.x,e,KU,t==null?void 0:t.x,i==null?void 0:i.x),mT(n.y,e,JU,t==null?void 0:t.y,i==null?void 0:i.y)}function vT(n){return n.translate===0&&n.scale===1}function IL(n){return vT(n.x)&&vT(n.y)}function DL(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}var QU=function(){function n(){this.members=[]}return n.prototype.add=function(e){TS(this.members,e),e.scheduleRender()},n.prototype.remove=function(e){if(ES(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},n.prototype.relegate=function(e){var t=this.members.findIndex(function(o){return e===o});if(t===0)return!1;for(var i,r=t;r>=0;r--){var s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1},n.prototype.promote=function(e,t){var i,r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),!((i=e.root)===null||i===void 0)&&i.isUpdating&&(e.isLayoutDirty=!0);var s=e.options.crossfade;s===!1&&r.hide()}},n.prototype.exitAnimationComplete=function(){this.members.forEach(function(e){var t,i,r,s,o;(i=(t=e.options).onExitComplete)===null||i===void 0||i.call(t),(o=(r=e.resumingFrom)===null||r===void 0?void 0:(s=r.options).onExitComplete)===null||o===void 0||o.call(s)})},n.prototype.scheduleRender=function(){this.members.forEach(function(e){e.instance&&e.scheduleRender(!1)})},n.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},n}(),$U="translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)";function yT(n,e,t){var i=n.x.translate/e.x,r=n.y.translate/e.y,s="translate3d(".concat(i,"px, ").concat(r,"px, 0) ");if(s+="scale(".concat(1/e.x,", ").concat(1/e.y,") "),t){var o=t.rotate,a=t.rotateX,l=t.rotateY;o&&(s+="rotate(".concat(o,"deg) ")),a&&(s+="rotateX(".concat(a,"deg) ")),l&&(s+="rotateY(".concat(l,"deg) "))}var c=n.x.scale*e.x,f=n.y.scale*e.y;return s+="scale(".concat(c,", ").concat(f,")"),s===$U?"none":s}var eB=function(n,e){return n.depth-e.depth},tB=function(){function n(){this.children=[],this.isDirty=!1}return n.prototype.add=function(e){TS(this.children,e),this.isDirty=!0},n.prototype.remove=function(e){ES(this.children,e),this.isDirty=!0},n.prototype.forEach=function(e){this.isDirty&&this.children.sort(eB),this.isDirty=!1,this.children.forEach(e)},n}(),_T=1e3;function NL(n){var e=n.attachResizeListener,t=n.defaultParent,i=n.measureScroll,r=n.checkIsScrollRoot,s=n.resetTransform;return function(){function o(a,l,c){var f=this;l===void 0&&(l={}),c===void 0&&(c=t==null?void 0:t()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){f.isUpdating&&(f.isUpdating=!1,f.clearAllSnapshots())},this.updateProjection=function(){f.nodes.forEach(aB),f.nodes.forEach(lB)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=a,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?ho(ho([],qn(c.path),!1),[c],!1):[],this.parent=c,this.depth=c?c.depth+1:0,a&&this.root.registerPotentialNode(a,this);for(var p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new tB)}return o.prototype.addEventListener=function(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cd),this.eventHandlers.get(a).add(l)},o.prototype.notifyListeners=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var f=this.eventHandlers.get(a);f==null||f.notify.apply(f,ho([],qn(l),!1))},o.prototype.hasListeners=function(a){return this.eventHandlers.has(a)},o.prototype.registerPotentialNode=function(a,l){this.potentialNodes.set(a,l)},o.prototype.mount=function(a,l){var c=this,f;if(l===void 0&&(l=!1),!this.instance){this.isSVG=a instanceof SVGElement&&a.tagName!=="svg",this.instance=a;var p=this.options,m=p.layoutId,v=p.layout,y=p.visualElement;if(y&&!y.getInstance()&&y.mount(a),this.root.nodes.add(this),(f=this.parent)===null||f===void 0||f.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),l&&(v||m)&&(this.isLayoutDirty=!0),e){var _,S=function(){return c.root.updateBlockedByResize=!1};e(a,function(){c.root.updateBlockedByResize=!0,clearTimeout(_),_=window.setTimeout(S,250),ad.hasAnimatedSinceResize&&(ad.hasAnimatedSinceResize=!1,c.nodes.forEach(oB))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&y&&(m||v)&&this.addEventListener("didUpdate",function(T){var M,b,C,k,I,z=T.delta,A=T.hasLayoutChanged,O=T.hasRelativeTargetChanged,U=T.layout;if(c.isTreeAnimationBlocked()){c.target=void 0,c.relativeTarget=void 0;return}var $=(b=(M=c.options.transition)!==null&&M!==void 0?M:y.getDefaultTransition())!==null&&b!==void 0?b:dB,Y=y.getProps(),te=Y.onLayoutAnimationStart,J=Y.onLayoutAnimationComplete,ae=!c.targetLayout||!DL(c.targetLayout,U)||O,ce=!A&&O;if(!((C=c.resumeFrom)===null||C===void 0)&&C.instance||ce||A&&(ae||!c.currentAnimation)){c.resumeFrom&&(c.resumingFrom=c.resumeFrom,c.resumingFrom.resumingFrom=void 0),c.setAnimationOrigin(z,ce);var ye=it(it({},MS($,"layout")),{onPlay:te,onComplete:J});y.shouldReduceMotion&&(ye.delay=0,ye.type=!1),c.startAnimation(ye)}else!A&&c.animationProgress===0&&c.finishAnimation(),c.isLead()&&((I=(k=c.options).onExitComplete)===null||I===void 0||I.call(k));c.targetLayout=U})}},o.prototype.unmount=function(){var a,l;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),(a=this.getStack())===null||a===void 0||a.remove(this),(l=this.parent)===null||l===void 0||l.children.delete(this),this.instance=void 0,Lf.preRender(this.updateProjection)},o.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},o.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},o.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},o.prototype.isTreeAnimationBlocked=function(){var a;return this.isAnimationBlocked||((a=this.parent)===null||a===void 0?void 0:a.isTreeAnimationBlocked())||!1},o.prototype.startUpdate=function(){var a;this.isUpdateBlocked()||(this.isUpdating=!0,(a=this.nodes)===null||a===void 0||a.forEach(uB))},o.prototype.willUpdate=function(a){var l,c,f;if(a===void 0&&(a=!0),this.root.isUpdateBlocked()){(c=(l=this.options).onExitComplete)===null||c===void 0||c.call(l);return}if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var p=0;p<this.path.length;p++){var m=this.path[p];m.shouldResetTransform=!0,m.updateScroll()}var v=this.options,y=v.layoutId,_=v.layout;if(!(y===void 0&&!_)){var S=(f=this.options.visualElement)===null||f===void 0?void 0:f.getProps().transformTemplate;this.prevTransformTemplateValue=S==null?void 0:S(this.latestValues,""),this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}}},o.prototype.didUpdate=function(){var a=this.isUpdateBlocked();if(a){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xT);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(pB),this.potentialNodes.clear()),this.nodes.forEach(sB),this.nodes.forEach(nB),this.nodes.forEach(iB),this.clearAllSnapshots(),Ky.update(),Ky.preRender(),Ky.render())},o.prototype.clearAllSnapshots=function(){this.nodes.forEach(rB),this.sharedNodes.forEach(cB)},o.prototype.scheduleUpdateProjection=function(){po.preRender(this.updateProjection,!1,!0)},o.prototype.scheduleCheckAfterUnmount=function(){var a=this;po.postRender(function(){a.isLayoutDirty?a.root.didUpdate():a.root.checkUpdateFailed()})},o.prototype.updateSnapshot=function(){if(!(this.snapshot||!this.instance)){var a=this.measure(),l=this.removeTransform(this.removeElementScroll(a));bT(l),this.snapshot={measured:a,layout:l,latestValues:{}}}},o.prototype.updateLayout=function(){var a;if(this.instance&&(this.updateScroll(),!(!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))){if(this.resumeFrom&&!this.resumeFrom.instance)for(var l=0;l<this.path.length;l++){var c=this.path[l];c.updateScroll()}var f=this.measure();bT(f);var p=this.layout;this.layout={measured:f,actual:this.removeElementScroll(f)},this.layoutCorrected=lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),(a=this.options.visualElement)===null||a===void 0||a.notifyLayoutMeasure(this.layout.actual,p==null?void 0:p.actual)}},o.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=r(this.instance),this.scroll=i(this.instance))},o.prototype.resetTransform=function(){var a;if(s){var l=this.isLayoutDirty||this.shouldResetTransform,c=this.projectionDelta&&!IL(this.projectionDelta),f=(a=this.options.visualElement)===null||a===void 0?void 0:a.getProps().transformTemplate,p=f==null?void 0:f(this.latestValues,""),m=p!==this.prevTransformTemplateValue;l&&(c||ul(this.latestValues)||m)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}},o.prototype.measure=function(){var a=this.options.visualElement;if(!a)return lr();var l=a.measureViewportBox(),c=this.root.scroll;return c&&(hl(l.x,c.x),hl(l.y,c.y)),l},o.prototype.removeElementScroll=function(a){var l=lr();Qs(l,a);for(var c=0;c<this.path.length;c++){var f=this.path[c],p=f.scroll,m=f.options,v=f.isScrollRoot;if(f!==this.root&&p&&m.layoutScroll){if(v){Qs(l,a);var y=this.root.scroll;y&&(hl(l.x,-y.x),hl(l.y,-y.y))}hl(l.x,p.x),hl(l.y,p.y)}}return l},o.prototype.applyTransform=function(a,l){l===void 0&&(l=!1);var c=lr();Qs(c,a);for(var f=0;f<this.path.length;f++){var p=this.path[f];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&of(c,{x:-p.scroll.x,y:-p.scroll.y}),ul(p.latestValues)&&of(c,p.latestValues)}return ul(this.latestValues)&&of(c,this.latestValues),c},o.prototype.removeTransform=function(a){var l,c=lr();Qs(c,a);for(var f=0;f<this.path.length;f++){var p=this.path[f];if(p.instance&&ul(p.latestValues)){SL(p.latestValues)&&p.updateSnapshot();var m=lr(),v=p.measure();Qs(m,v),gT(c,p.latestValues,(l=p.snapshot)===null||l===void 0?void 0:l.layout,m)}}return ul(this.latestValues)&&gT(c,this.latestValues),c},o.prototype.setTargetDelta=function(a){this.targetDelta=a,this.root.scheduleUpdateProjection()},o.prototype.setOptions=function(a){var l;this.options=it(it(it({},this.options),a),{crossfade:(l=a.crossfade)!==null&&l!==void 0?l:!0})},o.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},o.prototype.resolveTargetDelta=function(){var a,l=this.options,c=l.layout,f=l.layoutId;!this.layout||!(c||f)||(!this.targetDelta&&!this.relativeTarget&&(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),hd(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),Qs(this.relativeTarget,this.relativeTargetOrigin))),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=lr(),this.targetWithTransforms=lr()),this.relativeTarget&&this.relativeTargetOrigin&&(!((a=this.relativeParent)===null||a===void 0)&&a.target)?nU(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.actual):Qs(this.target,this.layout.actual),ML(this.target,this.targetDelta)):Qs(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&!!this.relativeParent.resumingFrom==!!this.resumingFrom&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),hd(this.relativeTargetOrigin,this.target,this.relativeParent.target),Qs(this.relativeTarget,this.relativeTargetOrigin)))))},o.prototype.getClosestProjectingParent=function(){if(!(!this.parent||ul(this.parent.latestValues)))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},o.prototype.calcProjection=function(){var a,l=this.options,c=l.layout,f=l.layoutId;if(this.isTreeAnimating=!!(!((a=this.parent)===null||a===void 0)&&a.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!(!this.layout||!(c||f))){var p=this.getLead();Qs(this.layoutCorrected,this.layout.actual),fU(this.layoutCorrected,this.treeScale,this.path,!!this.resumingFrom||this!==p);var m=p.target;if(m){this.projectionDelta||(this.projectionDelta=dd(),this.projectionDeltaWithTransform=dd());var v=this.treeScale.x,y=this.treeScale.y,_=this.projectionTransform;fd(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=yT(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==v||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}}},o.prototype.hide=function(){this.isVisible=!1},o.prototype.show=function(){this.isVisible=!0},o.prototype.scheduleRender=function(a){var l,c,f;a===void 0&&(a=!0),(c=(l=this.options).scheduleRender)===null||c===void 0||c.call(l),a&&((f=this.getStack())===null||f===void 0||f.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},o.prototype.setAnimationOrigin=function(a,l){var c=this,f;l===void 0&&(l=!1);var p=this.snapshot,m=(p==null?void 0:p.latestValues)||{},v=it({},this.latestValues),y=dd();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!l;var _=lr(),S=p==null?void 0:p.isShared,T=(((f=this.getStack())===null||f===void 0?void 0:f.members.length)||0)<=1,M=!!(S&&!T&&this.options.crossfade===!0&&!this.path.some(hB));this.animationProgress=0,this.mixTargetDelta=function(b){var C,k=b/1e3;wT(y.x,a.x,k),wT(y.y,a.y,k),c.setTargetDelta(y),c.relativeTarget&&c.relativeTargetOrigin&&c.layout&&(!((C=c.relativeParent)===null||C===void 0)&&C.layout)&&(hd(_,c.layout.actual,c.relativeParent.layout.actual),fB(c.relativeTarget,c.relativeTargetOrigin,_,k)),S&&(c.animationValues=v,ZU(v,m,c.latestValues,k,M,T)),c.root.scheduleUpdateProjection(),c.scheduleRender(),c.animationProgress=k},this.mixTargetDelta(0)},o.prototype.startAnimation=function(a){var l=this,c,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)===null||c===void 0||c.stop(),this.resumingFrom&&((f=this.resumingFrom.currentAnimation)===null||f===void 0||f.stop()),this.pendingAnimation&&(Lf.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=po.update(function(){ad.hasAnimatedSinceResize=!0,l.currentAnimation=WU(0,_T,it(it({},a),{onUpdate:function(p){var m;l.mixTargetDelta(p),(m=a.onUpdate)===null||m===void 0||m.call(a,p)},onComplete:function(){var p;(p=a.onComplete)===null||p===void 0||p.call(a),l.completeAnimation()}})),l.resumingFrom&&(l.resumingFrom.currentAnimation=l.currentAnimation),l.pendingAnimation=void 0})},o.prototype.completeAnimation=function(){var a;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),(a=this.getStack())===null||a===void 0||a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},o.prototype.finishAnimation=function(){var a;this.currentAnimation&&((a=this.mixTargetDelta)===null||a===void 0||a.call(this,_T),this.currentAnimation.stop()),this.completeAnimation()},o.prototype.applyTransformsToTarget=function(){var a=this.getLead(),l=a.targetWithTransforms,c=a.target,f=a.layout,p=a.latestValues;!l||!c||!f||(Qs(l,c),of(l,p),fd(this.projectionDeltaWithTransform,this.layoutCorrected,l,p))},o.prototype.registerSharedNode=function(a,l){var c,f,p;this.sharedNodes.has(a)||this.sharedNodes.set(a,new QU);var m=this.sharedNodes.get(a);m.add(l),l.promote({transition:(c=l.options.initialPromotionConfig)===null||c===void 0?void 0:c.transition,preserveFollowOpacity:(p=(f=l.options.initialPromotionConfig)===null||f===void 0?void 0:f.shouldPreserveFollowOpacity)===null||p===void 0?void 0:p.call(f,l)})},o.prototype.isLead=function(){var a=this.getStack();return a?a.lead===this:!0},o.prototype.getLead=function(){var a,l=this.options.layoutId;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this},o.prototype.getPrevLead=function(){var a,l=this.options.layoutId;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0},o.prototype.getStack=function(){var a=this.options.layoutId;if(a)return this.root.sharedNodes.get(a)},o.prototype.promote=function(a){var l=a===void 0?{}:a,c=l.needsReset,f=l.transition,p=l.preserveFollowOpacity,m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})},o.prototype.relegate=function(){var a=this.getStack();return a?a.relegate(this):!1},o.prototype.resetRotation=function(){var a=this.options.visualElement;if(a){for(var l=!1,c={},f=0;f<Xx.length;f++){var p=Xx[f],m="rotate"+p;a.getStaticValue(m)&&(l=!0,c[m]=a.getStaticValue(m),a.setStaticValue(m,0))}if(l){a==null||a.syncRender();for(var m in c)a.setStaticValue(m,c[m]);a.scheduleRender()}}},o.prototype.getProjectionStyles=function(a){var l,c,f,p,m,v;a===void 0&&(a={});var y={};if(!this.instance||this.isSVG)return y;if(this.isVisible)y.visibility="";else return{visibility:"hidden"};var _=(l=this.options.visualElement)===null||l===void 0?void 0:l.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=$g(a.pointerEvents)||"",y.transform=_?_(this.latestValues,""):"none",y;var S=this.getLead();if(!this.projectionDelta||!this.layout||!S.target){var T={};return this.options.layoutId&&(T.opacity=(c=this.latestValues.opacity)!==null&&c!==void 0?c:1,T.pointerEvents=$g(a.pointerEvents)||""),this.hasProjected&&!ul(this.latestValues)&&(T.transform=_?_({},""):"none",this.hasProjected=!1),T}var M=S.animationValues||S.latestValues;this.applyTransformsToTarget(),y.transform=yT(this.projectionDeltaWithTransform,this.treeScale,M),_&&(y.transform=_(M,y.transform));var b=this.projectionDelta,C=b.x,k=b.y;y.transformOrigin="".concat(C.origin*100,"% ").concat(k.origin*100,"% 0"),S.animationValues?y.opacity=S===this?(p=(f=M.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:y.opacity=S===this?(m=M.opacity)!==null&&m!==void 0?m:"":(v=M.opacityExit)!==null&&v!==void 0?v:0;for(var I in Uv)if(M[I]!==void 0){var z=Uv[I],A=z.correct,O=z.applyTo,U=A(M[I],S);if(O)for(var $=O.length,Y=0;Y<$;Y++)y[O[Y]]=U;else y[I]=U}return this.options.layoutId&&(y.pointerEvents=S===this?$g(a.pointerEvents)||"":"none"),y},o.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},o.prototype.resetTree=function(){this.root.nodes.forEach(function(a){var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(xT),this.root.sharedNodes.clear()},o}()}function nB(n){n.updateLayout()}function iB(n){var e,t,i,r,s=(t=(e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)!==null&&t!==void 0?t:n.snapshot;if(n.isLead()&&n.layout&&s&&n.hasListeners("didUpdate")){var o=n.layout,a=o.actual,l=o.measured;n.options.animationType==="size"?Lo(function(M){var b=s.isShared?s.measured[M]:s.layout[M],C=Ea(b);b.min=a[M].min,b.max=b.min+C}):n.options.animationType==="position"&&Lo(function(M){var b=s.isShared?s.measured[M]:s.layout[M],C=Ea(a[M]);b.max=b.min+C});var c=dd();fd(c,a,s.layout);var f=dd();s.isShared?fd(f,n.applyTransform(l,!0),s.measured):fd(f,a,s.layout);var p=!IL(c),m=!1;if(!n.resumeFrom&&(n.relativeParent=n.getClosestProjectingParent(),n.relativeParent&&!n.relativeParent.resumeFrom)){var v=n.relativeParent,y=v.snapshot,_=v.layout;if(y&&_){var S=lr();hd(S,s.layout,y.layout);var T=lr();hd(T,a,_.actual),DL(S,T)||(m=!0)}}n.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:f,layoutDelta:c,hasLayoutChanged:p,hasRelativeTargetChanged:m})}else n.isLead()&&((r=(i=n.options).onExitComplete)===null||r===void 0||r.call(i));n.options.transition=void 0}function rB(n){n.clearSnapshot()}function xT(n){n.clearMeasurements()}function sB(n){var e=n.options.visualElement;e!=null&&e.getProps().onBeforeLayoutMeasure&&e.notifyBeforeLayoutMeasure(),n.resetTransform()}function oB(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0}function aB(n){n.resolveTargetDelta()}function lB(n){n.calcProjection()}function uB(n){n.resetRotation()}function cB(n){n.removeLeadSnapshot()}function wT(n,e,t){n.translate=Yn(e.translate,0,t),n.scale=Yn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ST(n,e,t,i){n.min=Yn(e.min,t.min,i),n.max=Yn(e.max,t.max,i)}function fB(n,e,t,i){ST(n.x,e.x,t.x,i),ST(n.y,e.y,t.y,i)}function hB(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}var dB={duration:.45,ease:[.4,0,.1,1]};function pB(n,e){for(var t=n.root,i=n.path.length-1;i>=0;i--)if(n.path[i].instance){t=n.path[i];break}var r=t&&t!==n.root?t.instance:document,s=r.querySelector('[data-projection-id="'.concat(e,'"]'));s&&n.mount(s,!0)}function MT(n){n.min=Math.round(n.min),n.max=Math.round(n.max)}function bT(n){MT(n.x),MT(n.y)}var mB=NL({attachResizeListener:function(n,e){return x0(n,"resize",e)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),n_={current:void 0},gB=NL({measureScroll:function(n){return{x:n.scrollLeft,y:n.scrollTop}},defaultParent:function(){if(!n_.current){var n=new mB(0,{});n.mount(window),n.setOptions({layoutScroll:!0}),n_.current=n}return n_.current},resetTransform:function(n,e){n.style.transform=e??"none"},checkIsScrollRoot:function(n){return window.getComputedStyle(n).position==="fixed"}}),vB=it(it(it(it({},$5),v5),xU),HU),tn=uz(function(n,e){return qz(n,e,vB,FU,gB)});function OL(){var n=K.useRef(!1);return Fv(function(){return n.current=!0,function(){n.current=!1}},[]),n}function yB(){var n=OL(),e=qn(K.useState(0),2),t=e[0],i=e[1],r=K.useCallback(function(){n.current&&i(t+1)},[t]),s=K.useCallback(function(){return po.postRender(r)},[r]);return[s,t]}var i_=function(n){var e=n.children,t=n.initial,i=n.isPresent,r=n.onExitComplete,s=n.custom,o=n.presenceAffectsLayout,a=yp(_B),l=dL(),c=K.useMemo(function(){return{id:l,initial:t,isPresent:i,custom:s,onExitComplete:function(f){var p,m;a.set(f,!0);try{for(var v=V4(a.values()),y=v.next();!y.done;y=v.next()){var _=y.value;if(!_)return}}catch(S){p={error:S}}finally{try{y&&!y.done&&(m=v.return)&&m.call(v)}finally{if(p)throw p.error}}r==null||r()},register:function(f){return a.set(f,!1),function(){return a.delete(f)}}}},o?void 0:[i]);return K.useMemo(function(){a.forEach(function(f,p){return a.set(p,!1)})},[i]),K.useEffect(function(){!i&&!a.size&&(r==null||r())},[i]),K.createElement(vp.Provider,{value:c},e)};function _B(){return new Map}var Hc=function(n){return n.key||""};function xB(n,e){n.forEach(function(t){var i=Hc(t);e.set(i,t)})}function wB(n){var e=[];return K.Children.forEach(n,function(t){K.isValidElement(t)&&e.push(t)}),e}var TT=function(n){var e=n.children,t=n.custom,i=n.initial,r=i===void 0?!0:i,s=n.onExitComplete,o=n.exitBeforeEnter,a=n.presenceAffectsLayout,l=a===void 0?!0:a,c=qn(yB(),1),f=c[0],p=K.useContext(sS).forceRender;p&&(f=p);var m=OL(),v=wB(e),y=v,_=new Set,S=K.useRef(y),T=K.useRef(new Map).current,M=K.useRef(!0);if(Fv(function(){M.current=!1,xB(v,T),S.current=y}),pS(function(){M.current=!0,T.clear(),_.clear()}),M.current)return K.createElement(K.Fragment,null,y.map(function(A){return K.createElement(i_,{key:Hc(A),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:l},A)}));y=ho([],qn(y),!1);for(var b=S.current.map(Hc),C=v.map(Hc),k=b.length,I=0;I<k;I++){var z=b[I];C.indexOf(z)===-1&&_.add(z)}return o&&_.size&&(y=[]),_.forEach(function(A){if(C.indexOf(A)===-1){var O=T.get(A);if(O){var U=b.indexOf(A),$=function(){T.delete(A),_.delete(A);var Y=S.current.findIndex(function(te){return te.key===A});if(S.current.splice(Y,1),!_.size){if(S.current=v,m.current===!1)return;f(),s&&s()}};y.splice(U,0,K.createElement(i_,{key:Hc(O),isPresent:!1,onExitComplete:$,custom:t,presenceAffectsLayout:l},O))}}}),y=y.map(function(A){var O=A.key;return _.has(O)?A:K.createElement(i_,{key:Hc(A),isPresent:!0,presenceAffectsLayout:l},A)}),iS!=="production"&&o&&y.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),K.createElement(K.Fragment,null,_.size?y:y.map(function(A){return K.cloneElement(A)}))};function SB(){return G.jsxs("div",{className:"min-h-screen",children:[G.jsxs("header",{className:"relative h-[72vh] flex items-center bg-blue-600",children:[G.jsx("div",{className:"absolute inset-0 bg-[url('/src/images/baiterek.webp')] bg-cover bg-center opacity-100 mix-blend-normal"}),G.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-700/60 via-blue-600/40 to-white/10"}),G.jsxs("div",{className:"max-w-6xl mx-auto px-6 relative z-10 text-white",children:[G.jsxs(tn.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"heading-font text-4xl md:text-6xl font-extrabold leading-tight",children:["Explore Astana with AI-curated",G.jsx("br",{}),G.jsx("span",{className:"text-cyan-300",children:"smart routes & local tips"})]}),G.jsx(tn.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-4 max-w-2xl text-slate-200",children:"Discover walking tours, transit routes, and drive experiences tailored to your preferences. Fast, local-aware, and designed for unforgettable photos."}),G.jsxs("div",{className:"mt-8 flex flex-wrap gap-4",children:[G.jsx(lo,{to:"/videos",children:G.jsx(tn.button,{whileHover:{scale:1.03},className:"px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold shadow-lg",children:"Browse Video Guides"})}),G.jsx(lo,{to:"/",children:G.jsx(tn.button,{whileHover:{scale:1.03},className:"px-6 py-3 rounded-lg bg-white/10 text-white font-medium border border-white/10",children:"Learn More"})})]})]})]}),G.jsx("main",{className:"max-w-6xl mx-auto px-6 py-12",children:G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[G.jsxs(tn.div,{whileHover:{y:-6},className:"p-6 rounded-2xl bg-white/5 backdrop-blur-md border border-white/5",children:[G.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Video Guides"}),G.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Short, actionable video routes for the city's best photo spots and transit tips."}),G.jsx(lo,{to:"/videos",className:"text-sm font-semibold text-cyan-300",children:"Open Video Guides "})]}),G.jsxs(tn.div,{whileHover:{y:-6},className:"p-6 rounded-2xl bg-white/5 backdrop-blur-md border border-white/5",children:[G.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Itineraries"}),G.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Generate half-day or full-day plans tuned to budget and interests (coming soon)."}),G.jsx("span",{className:"text-sm font-semibold text-slate-400",children:"Planned"})]}),G.jsxs(tn.div,{whileHover:{y:-6},className:"p-6 rounded-2xl bg-white/5 backdrop-blur-md border border-white/5",children:[G.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"City Insights"}),G.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Local tips, transit maps, and the best times to visit top sights."}),G.jsx("span",{className:"text-sm font-semibold text-slate-400",children:"Info"})]})]})})]})}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bB=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),ET=n=>{const e=bB(n);return e.charAt(0).toUpperCase()+e.slice(1)},zL=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),TB=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>K.createElement("svg",{ref:l,...EB,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:zL("lucide",r),...!s&&!TB(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,f])=>K.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=(n,e)=>{const t=K.forwardRef(({className:i,...r},s)=>K.createElement(PB,{ref:s,iconNode:e,className:zL(`lucide-${MB(ET(n))}`,`lucide-${n}`,i),...r}));return t.displayName=ET(n),t};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],AB=ka("bus",CB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],PT=ka("car",LB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CT=ka("clock",RB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],IB=ka("footprints",kB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],AT=ka("map-pin",DB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],OB=ka("navigation",NB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],r_=ka("play",zB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],LT=ka("smartphone",FB);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],RT=ka("tram-front",UB);function BB(){const[n,e]=K.useState("all"),[t,i]=K.useState(null),[r,s]=K.useState(!1),o=[{id:"all",name:"All Guides",icon:"",color:"from-blue-400 to-cyan-400"},{id:"public",name:"Public Transport",icon:"",color:"from-green-400 to-emerald-400"},{id:"walking",name:"Walking Routes",icon:"",color:"from-purple-400 to-pink-400"},{id:"driving",name:"Driving",icon:"",color:"from-orange-400 to-red-400"},{id:"culture",name:"Culture",icon:"",color:"from-amber-400 to-orange-400"}],a=[{id:1,title:"Abu Dhabi Plaza Route",description:"Smart navigation to the city's tallest building with shopping and dining",category:"public",duration:"0:38",transport:["bus","walking"],landmarks:["Abu Dhabi Plaza","Observation Deck","Luxury Mall"],difficulty:"Easy",aiTip:"Visit the observation deck at sunset for panoramic city views",estimatedTime:"30 min",cost:"110",videoPublicId:"AbuDhaby_tfvpi9"},{id:2,title:"Atyrau Bridge - Central Park Access",description:"Scenic routes to the iconic pedestrian bridge with park connections",category:"public",duration:"0:45",transport:["bus","walking"],landmarks:["Atyrau Bridge","Central Park","Fountain Square"],difficulty:"Easy",aiTip:"Best photos from the southeast corner during golden hour - perfect for silhouette shots against the city skyline",estimatedTime:"25 min",cost:"110",videoPublicId:"AtyrauBridge_i99y9q"},{id:3,title:"Astana Opera & Philharmonic",description:"Cultural tour of Astana's premier music venues and performing arts centers",category:"culture",duration:"4:20",transport:["walking","taxi"],landmarks:["Astana Opera House","Kazakhstan National Philharmonic","Abai Square"],difficulty:"Easy",aiTip:"Check performance schedules in advance and dress smart-casual for evening shows",estimatedTime:"3-4 hours",cost:"5,000-15,000 (depending on show tickets)",videoPublicId:"__gv4pyu"},{id:4,title:"Traditional Kazakh Baursak",description:"Try Kazakh baursak - delicious fried dough pastry",category:"culture",duration:"3:45",landmarks:["Traditional Kitchen","Local Market","Cooking Workshop"],aiTip:"Serve baursak warm with kaymak (clotted cream) and homemade jam for the authentic Kazakh tea experience",cost:"2,000-5,000 (ingredients)",videoPublicId:"__uo5kbu",transport:["walking"],difficulty:"Easy",estimatedTime:"1-2 hours"},{id:5,title:"Traditional Kazakh Kurt",description:"Discover kurt - traditional dried cheese balls, a staple of nomadic cuisine",category:"culture",duration:"4:20",transport:["walking","taxi"],landmarks:["Traditional Yurt","Dairy Workshop","Nomadic Heritage Site"],difficulty:"Easy",aiTip:"Kurt is perfect for long journeys - it's lightweight, nutritious and doesn't spoil. Crumble it into soups or enjoy as a snack with tea",estimatedTime:"1-2 hours",cost:"1,000-3,000",videoPublicId:"__xa1miu"},{id:6,title:"Traditional Kazakh Kokpar",description:"Experience kokpar - exciting traditional horseback game with deep nomadic roots",category:"culture",duration:"5:15",transport:["car","taxi"],landmarks:["Equestrian Center","Traditional Arena","Horse Stables"],difficulty:"Medium",aiTip:"Best viewed during national holidays and festivals. Arrive early to get good seating and watch the pre-game ceremonies",estimatedTime:"2-3 hours",cost:"Free to watch (tournaments may have ticket fees)",videoPublicId:"Kokpar_tart9k"},{id:7,title:"Traditional Kazakh Asyk Game",description:"Play asyk - ancient bone throwing game popular among Kazakh nomads",category:"culture",duration:"2:30",transport:["walking"],landmarks:["Traditional Playground","Cultural Center","Outdoor Game Area"],difficulty:"Easy",aiTip:"Perfect for family gatherings and celebrations. The game improves hand-eye coordination and is enjoyed by all ages",estimatedTime:"30-60 minutes",cost:"500-2,000 (asyk set)",videoPublicId:"Asyk_game_crtokp"},{id:8,title:"AULA Cafe & Historic Center",description:"Charming cafe experience combined with historic landmarks walk",category:"cafe",duration:"3:45",transport:["walking"],landmarks:["AULA Cafe","Bayterek Tower","Presidential Park","Kazakhstan History Museum"],difficulty:"Easy",aiTip:"Visit AULA Cafe in the afternoon for the best coffee and pastries, then enjoy sunset views from Bayterek",estimatedTime:"2-3 hours",cost:"4,000-8,000",videoPublicId:"Aula_cafe_dawcgs"},{id:9,title:"Astana Light Rail Transit Tour",description:"Efficient city exploration using Astana's modern light rail system",category:"transit",duration:"5:30",transport:["light-rail","walking"],landmarks:["Light Rail Stations","Nurly Zhol Station","Bayterek Tower Station","EXPO Station"],difficulty:"Easy",aiTip:"Use the LRT during off-peak hours (10AM-4PM) for the most comfortable ride and best photo opportunities",estimatedTime:"4-5 hours",cost:"500 (LRT day pass)",videoPublicId:"tutorial_q0crmk"},{id:10,title:"Astana Circus & Entertainment District",description:"Family-friendly entertainment featuring the stunning Astana Circus building and surrounding attractions",category:"entertainment",duration:"4:15",transport:["walking","taxi","bus"],landmarks:["Astana Circus","Circus Fountain Square","Entertainment District","Family Park"],difficulty:"Easy",aiTip:"Check the circus schedule for matinee shows - perfect for families with children and better pricing",estimatedTime:"3-4 hours",cost:"2,000-5,000 (show tickets)",videoPublicId:"tutorialDilnaz_hsxqky"},{id:11,title:"National Museum of Kazakhstan",description:"Explore Kazakhstan's rich history and cultural heritage in the magnificent National Museum",category:"public",duration:"4:15",transport:["walking","metro"],landmarks:["National Museum","Bayterek Tower","Independence Square"],difficulty:"Easy",aiTip:"Visit on weekdays to avoid crowds and take advantage of free guided tours at 11AM and 3PM. Don't miss the Hall of Gold on the 3rd floor",estimatedTime:"2-3 hours",cost:"1,500 (adult ticket)",videoPublicId:"1763065230261842_bfpmue"},{id:12,title:"Ailand Astana",description:"Visit Ailand - exciting indoor entertainment and amusement center in Astana",category:"culture",duration:"3:50",transport:["bus","taxi","walking"],landmarks:["Ailand Entertainment Center","Indoor Rides","Game Zones","Food Court"],difficulty:"Easy",aiTip:"Perfect for families with children. Visit during weekdays for shorter queues and check their website for special family package deals",estimatedTime:"3-4 hours",cost:"5,000-15,000 (depending on activities)",videoPublicId:"Ailand_fp5jkk"}],l=n==="all"?a:a.filter(m=>m.category===n),c=m=>({metro:G.jsx(RT,{className:"w-4 h-4"}),bus:G.jsx(AB,{className:"w-4 h-4"}),car:G.jsx(PT,{className:"w-4 h-4"}),walking:G.jsx(IB,{className:"w-4 h-4"}),"light-rail":G.jsx(RT,{className:"w-4 h-4"}),taxi:G.jsx(PT,{className:"w-4 h-4"})})[m]||G.jsx(OB,{className:"w-4 h-4"}),f=()=>{s(!0)},p=()=>{s(!1)};return G.jsxs("div",{className:"min-h-screen bg-white",children:[G.jsxs("div",{className:"relative overflow-hidden bg-white py-20",children:[G.jsx(tn.div,{className:"absolute inset-0 max-w-5xl mx-auto px-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:G.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-blue-500 rounded-3xl border border-blue-400/40 shadow-lg"})}),G.jsx(tn.div,{className:"absolute top-10 -right-20 w-64 h-64 rounded-full blur-3xl opacity-20",style:{background:"linear-gradient(135deg, #06b6d4, #3b82f6)"},animate:{x:[0,30,0],y:[0,-20,0]},transition:{duration:10,repeat:1/0}}),G.jsx(tn.div,{className:"absolute -bottom-20 -left-20 w-80 h-80 rounded-full blur-3xl opacity-15",style:{background:"linear-gradient(135deg, #a78bfa, #f472b6)"},animate:{x:[0,-30,0],y:[0,20,0]},transition:{duration:12,repeat:1/0}}),G.jsxs("div",{className:"relative px-6 text-center max-w-5xl mx-auto z-10",children:[G.jsxs(tn.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"heading-font text-5xl md:text-6xl font-extrabold leading-tight mb-4 text-white",children:["Smart"," ",G.jsx("span",{className:"text-cyan-200",children:"Navigation"}),G.jsx("br",{}),G.jsx("span",{className:"text-blue-100",children:"Guides for Astana"})]}),G.jsx(tn.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-lg text-blue-50 max-w-2xl mx-auto",children:"AI-powered route planning with real-time insights, optimal paths, and local tips to make your journey seamless"})]})]}),G.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:G.jsx(tn.div,{layout:!0,className:"flex flex-wrap justify-center gap-4",children:o.map(m=>G.jsxs(tn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(m.id),className:`px-6 py-3 rounded-full font-semibold transition-all duration-300 ${n===m.id?`bg-gradient-to-r ${m.color} text-white shadow-lg`:"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[G.jsx("span",{className:"text-lg mr-2",children:m.icon}),m.name]},m.id))})}),G.jsx("div",{className:"max-w-6xl mx-auto px-6 pb-20",children:G.jsx(tn.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-max",children:G.jsx(TT,{children:l.map((m,v)=>G.jsx(tn.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:v*.08},whileHover:{y:-6,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},className:"group cursor-pointer h-full",onClick:()=>i(m),children:G.jsxs("div",{className:"glass rounded-2xl overflow-hidden h-full flex flex-col bg-white/80 border border-slate-200/50 hover:border-blue-200 transition-all duration-300",children:[G.jsxs("div",{className:"relative h-48 bg-slate-100 flex items-center justify-center overflow-hidden rounded-t-2xl",children:[m.videoPublicId?G.jsxs(G.Fragment,{children:[G.jsx("img",{src:`https://res.cloudinary.com/djwoojdrl/video/upload/c_thumb,w_400,h_225,g_auto/${m.videoPublicId}.jpg`,alt:m.title,className:"w-full h-full object-cover"}),G.jsx(tn.div,{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",whileHover:{scale:1.05},children:G.jsx("div",{className:"bg-white/90 rounded-full p-4 shadow-lg transform group-hover:scale-110 transition-transform",children:G.jsx(r_,{className:"w-6 h-6 text-blue-600 fill-blue-600"})})})]}):G.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center",children:G.jsxs("div",{className:"text-center text-slate-400",children:[G.jsx(r_,{className:"w-8 h-8 mx-auto mb-2"}),G.jsx("div",{className:"text-xs font-medium",children:"Video Coming Soon"})]})}),G.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 px-3 py-1 bg-black/70 rounded-full text-xs font-semibold text-white shadow-sm",children:[G.jsx(CT,{className:"w-3 h-3"}),m.duration]})]}),G.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[G.jsx("h3",{className:"text-sm font-bold text-slate-800 group-hover:text-blue-600 transition-colors mb-2 line-clamp-2",children:m.title}),G.jsx("p",{className:"text-xs text-slate-600 mb-3 line-clamp-2",children:m.description}),G.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:m.transport.map(y=>G.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-slate-100 rounded-full text-xs text-slate-700",children:[c(y),G.jsx("span",{className:"capitalize",children:y})]},y))}),G.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:m.landmarks.map((y,_)=>G.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-medium border border-blue-200",children:[G.jsx(AT,{className:"w-3 h-3"}),y]},_))}),G.jsx("div",{className:"p-2.5 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-200 mb-3 flex-grow",children:G.jsxs("div",{className:"flex items-start gap-2",children:[G.jsx(LT,{className:"w-3 h-3 text-cyan-600 mt-0.5 flex-shrink-0"}),G.jsxs("div",{className:"text-xs text-cyan-700",children:[G.jsx("div",{className:"font-semibold mb-0.5",children:"AI TIP"}),G.jsx("div",{children:m.aiTip})]})]})}),G.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100",children:[G.jsxs("div",{className:"flex gap-2 flex-wrap",children:[G.jsx("div",{className:"text-xs text-slate-600",children:G.jsx("div",{className:"font-semibold text-slate-800",children:m.estimatedTime})}),G.jsx("div",{className:"text-xs text-slate-600",children:G.jsx("div",{className:"font-semibold text-slate-800",children:m.cost})})]}),G.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${m.difficulty==="Easy"?"bg-green-100 text-green-700":m.difficulty==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:m.difficulty})]})]})]})},m.id))})})}),G.jsx(TT,{children:t&&G.jsx(tn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-md z-50 flex items-center justify-center p-4",onClick:()=>{i(null),s(!1)},children:G.jsxs(tn.div,{initial:{scale:.85,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:20},transition:{type:"spring",damping:20,stiffness:300},className:"rounded-3xl max-w-2xl w-full max-h-[85vh] overflow-y-auto shadow-2xl bg-gradient-to-br from-blue-50 via-white to-cyan-50/30 border border-blue-200/50",onClick:m=>m.stopPropagation(),children:[G.jsxs("div",{className:"relative w-full h-64 bg-black rounded-t-3xl overflow-hidden",children:[r?G.jsxs("video",{className:"w-full h-full object-cover",controls:!0,autoPlay:!0,onEnded:p,onPause:()=>s(!1),children:[G.jsx("source",{src:`https://res.cloudinary.com/djwoojdrl/video/upload/q_auto:best/${t.videoPublicId}.mp4`,type:"video/mp4"}),"Your browser does not support the video tag."]}):G.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer bg-cover bg-center",style:{backgroundImage:`url(https://res.cloudinary.com/djwoojdrl/video/upload/c_thumb,w_800,h_450,g_auto/${t.videoPublicId}.jpg)`},onClick:f,children:[G.jsx("div",{className:"absolute inset-0 bg-black/40"}),G.jsxs("div",{className:"relative text-center z-10",children:[G.jsx(tn.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"bg-white/20 backdrop-blur-md rounded-full p-6 w-fit mx-auto mb-4 border border-white/30",children:G.jsx(r_,{className:"w-16 h-16 text-white fill-white mx-auto"})}),G.jsx("div",{className:"text-sm font-semibold text-white drop-shadow-lg",children:"Click to Play Video Guide"})]})]}),G.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 px-3 py-1 bg-black/70 rounded-full text-xs font-semibold text-white shadow-lg",children:[G.jsx(CT,{className:"w-3 h-3"}),t.duration]})]}),G.jsxs("div",{className:"p-6",children:[G.jsxs("div",{className:"flex items-start justify-between mb-4",children:[G.jsxs("div",{children:[G.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-700 to-cyan-600 bg-clip-text text-transparent mb-2",children:t.title}),G.jsx("p",{className:"text-slate-600",children:t.description})]}),G.jsx("button",{className:"text-slate-400 hover:text-blue-600 transition-colors text-2xl flex-shrink-0",onClick:()=>{i(null),s(!1)},children:""})]}),G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[G.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-lg border border-blue-200/30",children:[G.jsx("div",{className:"text-xs text-blue-600 mb-1 font-semibold",children:"Time"}),G.jsx("div",{className:"font-semibold text-slate-800",children:t.estimatedTime})]}),G.jsxs("div",{className:"p-3 bg-gradient-to-br from-cyan-50 to-cyan-100/50 rounded-lg border border-cyan-200/30",children:[G.jsx("div",{className:"text-xs text-cyan-600 mb-1 font-semibold",children:"Cost"}),G.jsx("div",{className:"font-semibold text-slate-800",children:t.cost})]}),G.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-lg border border-blue-200/30",children:[G.jsx("div",{className:"text-xs text-blue-600 mb-1 font-semibold",children:"Difficulty"}),G.jsx("div",{className:"font-semibold text-slate-800",children:t.difficulty})]})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Transport Options"}),G.jsx("div",{className:"flex gap-2 flex-wrap",children:t.transport.map(m=>G.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-full text-blue-700 text-sm font-medium border border-blue-200/50",children:[c(m),G.jsx("span",{className:"capitalize",children:m})]},m))})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Landmarks"}),G.jsx("div",{className:"flex gap-2 flex-wrap",children:t.landmarks.map((m,v)=>G.jsxs("span",{className:"flex items-center gap-1 px-3 py-2 bg-gradient-to-r from-blue-100 to-blue-50 text-blue-700 rounded-full text-sm font-medium border border-blue-300/50",children:[G.jsx(AT,{className:"w-4 h-4"}),m]},v))})]}),G.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-100 via-cyan-50 to-blue-50 rounded-lg border border-blue-300/50 shadow-sm",children:G.jsxs("div",{className:"flex items-start gap-3",children:[G.jsx(LT,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),G.jsxs("div",{children:[G.jsx("div",{className:"font-semibold text-blue-700 mb-1",children:" AI INSIGHT"}),G.jsx("div",{className:"text-blue-700 text-sm",children:t.aiTip})]})]})})]})]})]})})})]})}function VB(){const n=Bl();return G.jsx("nav",{className:"w-full bg-white/5 backdrop-blur-sm border-b border-white/5",children:G.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[G.jsxs(lo,{to:"/",className:"flex items-center gap-3",children:[G.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center text-white font-bold shadow",children:"AI"}),G.jsxs("div",{className:"hidden md:block",children:[G.jsx("div",{className:"text-sm font-bold",children:"Astana AI Trips"}),G.jsx("div",{className:"text-xs text-slate-300",children:"Smart guides & itineraries"})]})]}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx(lo,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium ${n.pathname==="/"?"bg-blue-600 text-white":"text-slate-200 hover:bg-white/5"}`,children:"Home"}),G.jsx(lo,{to:"/videos",className:`px-3 py-2 rounded-md text-sm font-medium ${n.pathname==="/videos"?"bg-blue-600 text-white":"text-slate-200 hover:bg-white/5"}`,children:"Video Guides"}),G.jsx(lo,{to:"/itineraries",className:`px-3 py-2 rounded-md text-sm font-medium ${n.pathname==="/itineraries"?"bg-blue-600 text-white":"text-slate-200 hover:bg-white/5"}`,children:"Itineraries"}),G.jsx(lo,{to:"/insights",className:`px-3 py-2 rounded-md text-sm font-medium ${n.pathname==="/insights"?"bg-blue-600 text-white":"text-slate-200 hover:bg-white/5"}`,children:"City Insights"})]})]})})}async function GB(n=""){try{const e="http://localhost:3001/api/free-ai";console.log("Sending request to backend...");const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n})});if(console.log("Backend Response status:",t.status),!t.ok)throw new Error(`Backend error: ${t.status}`);const i=await t.json();if(console.log("Backend Response data:",i),!i.success)throw new Error(i.error||"Backend request failed");const s=i.response.match(/\{[\s\S]*\}/);if(!s)throw new Error("No JSON found in AI response");const o=JSON.parse(s[0]);if(o.title&&o.items&&Array.isArray(o.items)){const a=o.items.reduce((l,c)=>{const f=parseInt(String(c.cost).replace(/[^0-9]/g,""))||0;return l+f},0);return{title:o.title,items:o.items,total:`${a.toLocaleString()}`,source:"ai"}}else throw new Error("Invalid itinerary format from AI")}catch(e){throw console.error("Backend API failed:",e),new Error(`AI service error: ${e.message}`)}}function HB(n){X3(()=>import("./html2pdf-400d4778.js").then(e=>e.h),[]).then(e=>{const t=`
      <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
        <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #00bcd4; padding-bottom: 20px;">
          <h1 style="font-size: 28px; font-weight: bold; color: #333; margin: 0 0 10px 0;">${n.title}</h1>
          <div style="font-size: 18px; color: #666; margin: 10px 0;">Total Estimated Cost: ${n.total}</div>
          <div style="color: #888; font-size: 14px;">Generated by Astana AI Trips</div>
        </div>
        
        ${n.items.map((s,o)=>`
          <div style="margin: 20px 0; padding: 15px; border-left: 4px solid #00bcd4; background: #f9f9f9;">
            <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 8px;">
              <span style="font-weight: bold; color: #0288d1; font-size: 16px; min-width: 60px;">${s.time}</span>
              <div style="flex: 1;">
                <div style="font-size: 18px; font-weight: bold; color: #333; margin-bottom: 5px;">${s.place}</div>
                ${s.description?`<div style="font-size: 14px; color: #555; line-height: 1.4;">${s.description}</div>`:""}
              </div>
              <span style="font-weight: bold; color: #d32f2f; font-size: 16px; margin-left: 15px;">${s.cost}</span>
            </div>
          </div>
        `).join("")}
        
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #888; font-size: 14px;">
          <p>Enjoy your day in Astana! </p>
          <p>Generated on ${new Date().toLocaleDateString()}</p>
        </div>
      </div>
    `,i=document.createElement("div");i.innerHTML=t,document.body.appendChild(i);const r={margin:10,filename:`Astana-Itinerary-${new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};e.default().set(r).from(i).save().then(()=>{document.body.removeChild(i)})}).catch(e=>{console.error("Error loading html2pdf:",e),WB(n)})}function WB(n){const e=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${n.title}</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #00bcd4; padding-bottom: 20px; }
        .title { font-size: 28px; font-weight: bold; color: #333; margin-bottom: 10px; }
        .total { font-size: 18px; color: #666; margin: 10px 0; }
        .item { margin: 20px 0; padding: 15px; border-left: 4px solid #00bcd4; background: #f9f9f9; }
        .time { font-weight: bold; color: #0288d1; font-size: 16px; }
        .place { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 5px; }
        .cost { color: #d32f2f; font-weight: bold; font-size: 16px; }
        .description { color: #555; font-size: 14px; line-height: 1.4; }
        .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #888; }
      </style>
    </head>
    <body>
      <div class="header">
        <div class="title">${n.title}</div>
        <div class="total">Total Estimated Cost: ${n.total}</div>
        <div>Generated by Astana AI Trips</div>
      </div>
      
      ${n.items.map(s=>`
        <div class="item">
          <div style="display: flex; justify-content: space-between; align-items: start;">
            <span class="time">${s.time}</span>
            <div style="flex: 1; margin: 0 15px;">
              <div class="place">${s.place}</div>
              ${s.description?`<div class="description">${s.description}</div>`:""}
            </div>
            <span class="cost">${s.cost}</span>
          </div>
        </div>
      `).join("")}
      
      <div class="footer">
        <p>Enjoy your day in Astana! </p>
        <p>Generated on ${new Date().toLocaleDateString()}</p>
      </div>
    </body>
    </html>
  `,t=new Blob([e],{type:"text/html"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=`Astana-Itinerary-${new Date().getTime()}.html`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}function jB(){const[n,e]=K.useState(""),[t,i]=K.useState(null),[r,s]=K.useState(!1),[o,a]=K.useState(""),[l,c]=K.useState({rotateX:0,rotateY:0,scale:1});async function f(){if(n.trim()){s(!0),a("");try{const m=await GB(n);i(m)}catch(m){console.error("Error generating itinerary:",m),a(m.message)}finally{s(!1)}}}function p(){t&&HB(t)}return G.jsxs("main",{className:"min-h-screen text-white antialiased",children:[G.jsxs("div",{className:"pointer-events-none fixed inset-0 -z-10 overflow-hidden",children:[G.jsxs("svg",{className:"absolute left-0 top-0 w-[1400px] opacity-10 -translate-y-1/4",viewBox:"0 0 1000 500",preserveAspectRatio:"none",children:[G.jsx("defs",{children:G.jsxs("linearGradient",{id:"g1",x1:"0",x2:"1",children:[G.jsx("stop",{offset:"0%",stopColor:"#00ffff",stopOpacity:"0.35"}),G.jsx("stop",{offset:"100%",stopColor:"#9b5cff",stopOpacity:"0.12"})]})}),G.jsx("path",{d:"M0,100 C200,0 400,200 600,100 C800,0 1000,200 1200,100 L1200 0 L0 0 Z",fill:"url(#g1)"})]}),G.jsx(tn.div,{className:"absolute -left-60 top-1/4 w-[520px] h-[520px] rounded-full blur-3xl opacity-30",style:{background:"linear-gradient(135deg,#6ee7b7,#60a5fa)"},animate:{x:[0,20,0],y:[0,-10,0]},transition:{duration:12,repeat:1/0}}),G.jsx(tn.div,{className:"absolute right-[-120px] bottom-[-80px] w-[420px] h-[420px] rounded-full blur-3xl opacity-25",style:{background:"linear-gradient(135deg,#c084fc,#fb7185)"},animate:{x:[0,-20,0],y:[0,10,0]},transition:{duration:15,repeat:1/0}})]}),G.jsxs("header",{className:"max-w-7xl mx-auto px-6 py-6 flex items-center justify-between",children:[G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-cyan-400 to-purple-500 shadow-lg flex items-center justify-center text-black font-bold",children:"AI"}),G.jsxs("div",{children:[G.jsx("div",{className:"text-lg font-semibold tracking-wide",children:"Astana AI Trips"}),G.jsx("div",{className:"text-xs text-slate-300",children:"Future-ready travel planning"})]})]}),G.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm text-slate-300",children:[G.jsx("a",{href:"#features",className:"hover:text-white transition",children:"Features"}),G.jsx("a",{href:"#experiences",className:"hover:text-white transition",children:"Experiences"}),G.jsx("a",{href:"#testimonials",className:"hover:text-white transition",children:"Testimonials"}),G.jsx(lo,{to:"/videos",className:"hover:text-white transition",children:"Video Guides"}),G.jsx("a",{href:"#start",className:"px-4 py-2 rounded bg-gradient-to-r from-cyan-400 to-violet-500 text-black font-medium",children:"Get Started"})]})]}),G.jsxs("section",{id:"hero",className:"max-w-6xl mx-auto px-6 pt-10 pb-20 grid grid-cols-1 md:grid-cols-12 gap-8 items-center",children:[G.jsxs("div",{className:"md:col-span-7",children:[G.jsxs(tn.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08},className:"text-4xl md:text-6xl font-extrabold leading-tight heading-font",children:["Explore ",G.jsx("span",{className:"animated-gradient heading-font",children:"Astana"}),G.jsx("br",{})," ",G.jsx("span",{className:"text-slate-300",children:"the AI-curated way."})]}),G.jsx(tn.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.18},className:"mt-4 text-slate-300 max-w-xl",children:"Intelligent day plans, local insights, cost-aware suggestions  all generated by AI in seconds."}),G.jsxs(tn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},className:"mt-8 flex gap-3 flex-col sm:flex-row",children:[G.jsx("input",{value:n,onChange:m=>e(m.target.value),placeholder:"Describe your perfect day: 'Romantic day under 25k' or 'Family with kids, cultural sights'",className:"flex-1 rounded-lg py-3 px-4 bg-white/5 placeholder:text-slate-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 text-white"}),G.jsx("button",{onClick:f,disabled:r||!n.trim(),className:"rounded-lg px-6 py-3 bg-gradient-to-r from-cyan-400 to-violet-500 text-black font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:r?" AI Planning...":"Generate My Day"})]}),o&&G.jsx("div",{className:"mt-4 p-3 rounded-lg bg-red-500/20 border border-red-500/30",children:G.jsx("div",{className:"text-red-300 text-sm",children:o})}),G.jsxs("div",{className:"mt-6 flex items-center gap-4 text-sm text-slate-400",children:[G.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-white/3",children:[G.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:G.jsx("path",{d:"M12 2v10l3 3",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})}),"AI-Powered Plans"]}),G.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-white/3",children:[G.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[G.jsx("path",{d:"M21 10v6a2 2 0 0 1-2 2H5",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),G.jsx("path",{d:"M7 10V6a5 5 0 0 1 10 0v4",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Real Astana Places"]}),G.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-white/3",children:[G.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[G.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"white",strokeWidth:"1.2"}),G.jsx("path",{d:"M14 2v6h6",stroke:"white",strokeWidth:"1.2"})]}),"Download PDF"]})]})]}),G.jsx("div",{className:"md:col-span-5",children:G.jsx("div",{style:{perspective:1200},children:G.jsxs(tn.div,{initial:{scale:.98,opacity:0},animate:{rotateX:l.rotateX,rotateY:l.rotateY,scale:l.scale,opacity:1},transition:{type:"spring",stiffness:140,damping:20},onMouseMove:m=>{const v=m.currentTarget.getBoundingClientRect(),y=m.clientX-v.left,_=m.clientY-v.top,S=v.width/2,T=v.height/2,M=(y-S)/S*8,b=-((_-T)/T)*6;c({rotateX:b,rotateY:M,scale:1.03})},onMouseLeave:()=>c({rotateX:0,rotateY:0,scale:1}),className:"glass card-tilt rounded-2xl p-5 shadow-2xl border border-white/5",children:[G.jsxs("div",{className:"flex items-start justify-between",children:[G.jsxs("div",{children:[G.jsx("div",{className:"text-sm text-slate-300",children:"AI Itinerary"}),G.jsx("div",{className:"text-xl font-semibold mt-2",children:t?t.title:"Enter your preferences to start"})]}),t&&G.jsxs("div",{className:"text-right text-slate-400",children:["Total ",G.jsx("div",{className:"text-white font-bold",children:t.total})]})]}),G.jsx("div",{className:"mt-4 space-y-3",children:(t?t.items:new Array(3).fill(0)).map((m,v)=>G.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-white/2",children:[G.jsxs("div",{className:"flex-1",children:[G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"font-mono text-cyan-300 text-xs",children:m?m.time:"--:--"}),G.jsx("div",{className:"font-semibold text-sm",children:m?m.place:"Enter preferences to generate"})]}),m&&m.description&&G.jsx("div",{className:"text-xs text-slate-300 mt-1",children:m.description})]}),G.jsx("div",{className:"text-sm font-medium ml-2",children:m?m.cost:""})]},v))}),t&&G.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[G.jsx("div",{className:"text-xs text-slate-300",children:" AI Generated"}),G.jsx("button",{onClick:p,className:"px-3 py-2 rounded bg-gradient-to-r from-cyan-400 to-violet-500 text-black font-semibold text-sm shadow-lg hover:opacity-90 transition-opacity",children:"Download PDF"})]})]})})})]}),G.jsxs("footer",{className:"max-w-6xl mx-auto px-6 mt-14 py-8 text-sm text-slate-400 flex items-center justify-between",children:[G.jsxs("div",{children:[" ",new Date().getFullYear()," Astana AI Trips"]}),G.jsxs("div",{className:"flex gap-4",children:[G.jsx("a",{href:"#",children:"Privacy"}),G.jsx("a",{href:"#",children:"Terms"}),G.jsx("a",{href:"#",children:"Contact"})]})]})]})}function ZB(){return G.jsx(jB,{})}function FL(n,e){const t=K.useRef(e);K.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const XB=1;function YB(n){return Object.freeze({__version:XB,map:n})}function qB(n,e){return Object.freeze({...n,...e})}const UL=K.createContext(null),BL=UL.Provider;function VL(){const n=K.useContext(UL);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function KB(n){function e(t,i){const{instance:r,context:s}=n(t).current;return K.useImperativeHandle(i,()=>r),t.children==null?null:ju.createElement(BL,{value:s},t.children)}return K.forwardRef(e)}function JB(n){function e(t,i){const[r,s]=K.useState(!1),{instance:o}=n(t,s).current;K.useImperativeHandle(i,()=>o),K.useEffect(function(){r&&o.update()},[o,r,t.children]);const a=o._contentNode;return a?j3.createPortal(t.children,a):null}return K.forwardRef(e)}function QB(n){function e(t,i){const{instance:r}=n(t).current;return K.useImperativeHandle(i,()=>r),null}return K.forwardRef(e)}function GL(n,e){const t=K.useRef();K.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function CS(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function $B(n,e){return function(i,r){const s=VL(),o=n(CS(i,s),s);return FL(s.map,i.attribution),GL(o.current,i.eventHandlers),e(o.current,s,i,r),o}}var u1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,i){i(e)})(HI,function(t){var i="1.9.4";function r(u){var g,x,P,D;for(x=1,P=arguments.length;x<P;x++){D=arguments[x];for(g in D)u[g]=D[g]}return u}var s=Object.create||function(){function u(){}return function(g){return u.prototype=g,new u}}();function o(u,g){var x=Array.prototype.slice;if(u.bind)return u.bind.apply(u,x.call(arguments,1));var P=x.call(arguments,2);return function(){return u.apply(g,P.length?P.concat(x.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,g,x){var P,D,V,le;return le=function(){P=!1,D&&(V.apply(x,D),D=!1)},V=function(){P?D=arguments:(u.apply(x,arguments),setTimeout(le,g),P=!0)},V}function f(u,g,x){var P=g[1],D=g[0],V=P-D;return u===P&&x?u:((u-D)%V+V)%V+D}function p(){return!1}function m(u,g){if(g===!1)return u;var x=Math.pow(10,g===void 0?6:g);return Math.round(u*x)/x}function v(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function y(u){return v(u).split(/\s+/)}function _(u,g){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var x in g)u.options[x]=g[x];return u.options}function S(u,g,x){var P=[];for(var D in u)P.push(encodeURIComponent(x?D.toUpperCase():D)+"="+encodeURIComponent(u[D]));return(!g||g.indexOf("?")===-1?"?":"&")+P.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function M(u,g){return u.replace(T,function(x,P){var D=g[P];if(D===void 0)throw new Error("No value provided for variable "+x);return typeof D=="function"&&(D=D(g)),D})}var b=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function C(u,g){for(var x=0;x<u.length;x++)if(u[x]===g)return x;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var z=0;function A(u){var g=+new Date,x=Math.max(0,16-(g-z));return z=g+x,window.setTimeout(u,x)}var O=window.requestAnimationFrame||I("RequestAnimationFrame")||A,U=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function $(u,g,x){if(x&&O===A)u.call(g);else return O.call(window,o(u,g))}function Y(u){u&&U.call(window,u)}var te={__proto__:null,extend:r,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:f,falseFn:p,formatNum:m,trim:v,splitWords:y,setOptions:_,getParamString:S,template:M,isArray:b,indexOf:C,emptyImageUrl:k,requestFn:O,cancelFn:U,requestAnimFrame:$,cancelAnimFrame:Y};function J(){}J.extend=function(u){var g=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=g.__super__=this.prototype,P=s(x);P.constructor=g,g.prototype=P;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(g[D]=this[D]);return u.statics&&r(g,u.statics),u.includes&&(ae(u.includes),r.apply(null,[P].concat(u.includes))),r(P,u),delete P.statics,delete P.includes,P.options&&(P.options=x.options?s(x.options):{},r(P.options,u.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,le=P._initHooks.length;V<le;V++)P._initHooks[V].call(this)}},g},J.include=function(u){var g=this.prototype.options;return r(this.prototype,u),u.options&&(this.prototype.options=g,this.mergeOptions(u.options)),this},J.mergeOptions=function(u){return r(this.prototype.options,u),this},J.addInitHook=function(u){var g=Array.prototype.slice.call(arguments,1),x=typeof u=="function"?u:function(){this[u].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function ae(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=b(u)?u:[u];for(var g=0;g<u.length;g++)u[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ce={on:function(u,g,x){if(typeof u=="object")for(var P in u)this._on(P,u[P],g);else{u=y(u);for(var D=0,V=u.length;D<V;D++)this._on(u[D],g,x)}return this},off:function(u,g,x){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var P in u)this._off(P,u[P],g);else{u=y(u);for(var D=arguments.length===1,V=0,le=u.length;V<le;V++)D?this._off(u[V]):this._off(u[V],g,x)}return this},_on:function(u,g,x,P){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(u,g,x)===!1){x===this&&(x=void 0);var D={fn:g,ctx:x};P&&(D.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(D)}},_off:function(u,g,x){var P,D,V;if(this._events&&(P=this._events[u],!!P)){if(arguments.length===1){if(this._firingCount)for(D=0,V=P.length;D<V;D++)P[D].fn=p;delete this._events[u];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var le=this._listens(u,g,x);if(le!==!1){var we=P[le];this._firingCount&&(we.fn=p,this._events[u]=P=P.slice()),P.splice(le,1)}}},fire:function(u,g,x){if(!this.listens(u,x))return this;var P=r({},g,{type:u,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var D=this._events[u];if(D){this._firingCount=this._firingCount+1||1;for(var V=0,le=D.length;V<le;V++){var we=D[V],Ce=we.fn;we.once&&this.off(u,Ce,we.ctx),Ce.call(we.ctx||this,P)}this._firingCount--}}return x&&this._propagateEvent(P),this},listens:function(u,g,x,P){typeof u!="string"&&console.warn('"string" type argument expected');var D=g;typeof g!="function"&&(P=!!g,D=void 0,x=void 0);var V=this._events&&this._events[u];if(V&&V.length&&this._listens(u,D,x)!==!1)return!0;if(P){for(var le in this._eventParents)if(this._eventParents[le].listens(u,g,x,P))return!0}return!1},_listens:function(u,g,x){if(!this._events)return!1;var P=this._events[u]||[];if(!g)return!!P.length;x===this&&(x=void 0);for(var D=0,V=P.length;D<V;D++)if(P[D].fn===g&&P[D].ctx===x)return D;return!1},once:function(u,g,x){if(typeof u=="object")for(var P in u)this._on(P,u[P],g,!0);else{u=y(u);for(var D=0,V=u.length;D<V;D++)this._on(u[D],g,x,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var g in this._eventParents)this._eventParents[g].fire(u.type,r({layer:u.target,propagatedFrom:u.target},u),!0)}};ce.addEventListener=ce.on,ce.removeEventListener=ce.clearAllEventListeners=ce.off,ce.addOneTimeEventListener=ce.once,ce.fireEvent=ce.fire,ce.hasEventListeners=ce.listens;var ye=J.extend(ce);function F(u,g,x){this.x=x?Math.round(u):u,this.y=x?Math.round(g):g}var X=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(u){return this.clone()._add(H(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(H(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new F(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new F(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(u){u=H(u);var g=u.x-this.x,x=u.y-this.y;return Math.sqrt(g*g+x*x)},equals:function(u){return u=H(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=H(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function H(u,g,x){return u instanceof F?u:b(u)?new F(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new F(u.x,u.y):new F(u,g,x)}function W(u,g){if(u)for(var x=g?[u,g]:u,P=0,D=x.length;P<D;P++)this.extend(x[P])}W.prototype={extend:function(u){var g,x;if(!u)return this;if(u instanceof F||typeof u[0]=="number"||"x"in u)g=x=H(u);else if(u=j(u),g=u.min,x=u.max,!g||!x)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=x.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(u){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var g,x;return typeof u[0]=="number"||u instanceof F?u=H(u):u=j(u),u instanceof W?(g=u.min,x=u.max):g=x=u,g.x>=this.min.x&&x.x<=this.max.x&&g.y>=this.min.y&&x.y<=this.max.y},intersects:function(u){u=j(u);var g=this.min,x=this.max,P=u.min,D=u.max,V=D.x>=g.x&&P.x<=x.x,le=D.y>=g.y&&P.y<=x.y;return V&&le},overlaps:function(u){u=j(u);var g=this.min,x=this.max,P=u.min,D=u.max,V=D.x>g.x&&P.x<x.x,le=D.y>g.y&&P.y<x.y;return V&&le},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var g=this.min,x=this.max,P=Math.abs(g.x-x.x)*u,D=Math.abs(g.y-x.y)*u;return j(H(g.x-P,g.y-D),H(x.x+P,x.y+D))},equals:function(u){return u?(u=j(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function j(u,g){return!u||u instanceof W?u:new W(u,g)}function se(u,g){if(u)for(var x=g?[u,g]:u,P=0,D=x.length;P<D;P++)this.extend(x[P])}se.prototype={extend:function(u){var g=this._southWest,x=this._northEast,P,D;if(u instanceof Z)P=u,D=u;else if(u instanceof se){if(P=u._southWest,D=u._northEast,!P||!D)return this}else return u?this.extend(ue(u)||ee(u)):this;return!g&&!x?(this._southWest=new Z(P.lat,P.lng),this._northEast=new Z(D.lat,D.lng)):(g.lat=Math.min(P.lat,g.lat),g.lng=Math.min(P.lng,g.lng),x.lat=Math.max(D.lat,x.lat),x.lng=Math.max(D.lng,x.lng)),this},pad:function(u){var g=this._southWest,x=this._northEast,P=Math.abs(g.lat-x.lat)*u,D=Math.abs(g.lng-x.lng)*u;return new se(new Z(g.lat-P,g.lng-D),new Z(x.lat+P,x.lng+D))},getCenter:function(){return new Z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Z(this.getNorth(),this.getWest())},getSouthEast:function(){return new Z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof Z||"lat"in u?u=ue(u):u=ee(u);var g=this._southWest,x=this._northEast,P,D;return u instanceof se?(P=u.getSouthWest(),D=u.getNorthEast()):P=D=u,P.lat>=g.lat&&D.lat<=x.lat&&P.lng>=g.lng&&D.lng<=x.lng},intersects:function(u){u=ee(u);var g=this._southWest,x=this._northEast,P=u.getSouthWest(),D=u.getNorthEast(),V=D.lat>=g.lat&&P.lat<=x.lat,le=D.lng>=g.lng&&P.lng<=x.lng;return V&&le},overlaps:function(u){u=ee(u);var g=this._southWest,x=this._northEast,P=u.getSouthWest(),D=u.getNorthEast(),V=D.lat>g.lat&&P.lat<x.lat,le=D.lng>g.lng&&P.lng<x.lng;return V&&le},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,g){return u?(u=ee(u),this._southWest.equals(u.getSouthWest(),g)&&this._northEast.equals(u.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(u,g){return u instanceof se?u:new se(u,g)}function Z(u,g,x){if(isNaN(u)||isNaN(g))throw new Error("Invalid LatLng object: ("+u+", "+g+")");this.lat=+u,this.lng=+g,x!==void 0&&(this.alt=+x)}Z.prototype={equals:function(u,g){if(!u)return!1;u=ue(u);var x=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return x<=(g===void 0?1e-9:g)},toString:function(u){return"LatLng("+m(this.lat,u)+", "+m(this.lng,u)+")"},distanceTo:function(u){return _e.distance(this,ue(u))},wrap:function(){return _e.wrapLatLng(this)},toBounds:function(u){var g=180*u/40075017,x=g/Math.cos(Math.PI/180*this.lat);return ee([this.lat-g,this.lng-x],[this.lat+g,this.lng+x])},clone:function(){return new Z(this.lat,this.lng,this.alt)}};function ue(u,g,x){return u instanceof Z?u:b(u)&&typeof u[0]!="object"?u.length===3?new Z(u[0],u[1],u[2]):u.length===2?new Z(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new Z(u.lat,"lng"in u?u.lng:u.lon,u.alt):g===void 0?null:new Z(u,g,x)}var de={latLngToPoint:function(u,g){var x=this.projection.project(u),P=this.scale(g);return this.transformation._transform(x,P)},pointToLatLng:function(u,g){var x=this.scale(g),P=this.transformation.untransform(u,x);return this.projection.unproject(P)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var g=this.projection.bounds,x=this.scale(u),P=this.transformation.transform(g.min,x),D=this.transformation.transform(g.max,x);return new W(P,D)},infinite:!1,wrapLatLng:function(u){var g=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,x=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,P=u.alt;return new Z(x,g,P)},wrapLatLngBounds:function(u){var g=u.getCenter(),x=this.wrapLatLng(g),P=g.lat-x.lat,D=g.lng-x.lng;if(P===0&&D===0)return u;var V=u.getSouthWest(),le=u.getNorthEast(),we=new Z(V.lat-P,V.lng-D),Ce=new Z(le.lat-P,le.lng-D);return new se(we,Ce)}},_e=r({},de,{wrapLng:[-180,180],R:6371e3,distance:function(u,g){var x=Math.PI/180,P=u.lat*x,D=g.lat*x,V=Math.sin((g.lat-u.lat)*x/2),le=Math.sin((g.lng-u.lng)*x/2),we=V*V+Math.cos(P)*Math.cos(D)*le*le,Ce=2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we));return this.R*Ce}}),Ae=6378137,Ue={R:Ae,MAX_LATITUDE:85.0511287798,project:function(u){var g=Math.PI/180,x=this.MAX_LATITUDE,P=Math.max(Math.min(x,u.lat),-x),D=Math.sin(P*g);return new F(this.R*u.lng*g,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(u){var g=180/Math.PI;return new Z((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*g,u.x*g/this.R)},bounds:function(){var u=Ae*Math.PI;return new W([-u,-u],[u,u])}()};function ke(u,g,x,P){if(b(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=g,this._c=x,this._d=P}ke.prototype={transform:function(u,g){return this._transform(u.clone(),g)},_transform:function(u,g){return g=g||1,u.x=g*(this._a*u.x+this._b),u.y=g*(this._c*u.y+this._d),u},untransform:function(u,g){return g=g||1,new F((u.x/g-this._b)/this._a,(u.y/g-this._d)/this._c)}};function he(u,g,x,P){return new ke(u,g,x,P)}var Se=r({},_e,{code:"EPSG:3857",projection:Ue,transformation:function(){var u=.5/(Math.PI*Ue.R);return he(u,.5,-u,.5)}()}),Fe=r({},Se,{code:"EPSG:900913"});function Ne(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function De(u,g){var x="",P,D,V,le,we,Ce;for(P=0,V=u.length;P<V;P++){for(we=u[P],D=0,le=we.length;D<le;D++)Ce=we[D],x+=(D?"L":"M")+Ce.x+" "+Ce.y;x+=g?fe.svg?"z":"x":""}return x||"M0 0"}var Ke=document.documentElement.style,Pe="ActiveXObject"in window,Xe=Pe&&!document.addEventListener,Je="msLaunchUri"in navigator&&!("documentMode"in document),Oe=Q("webkit"),q=Q("android"),B=Q("android 2")||Q("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Me=q&&Q("Google")&&pe<537&&!("AudioNode"in window),Ve=!!window.opera,je=!Je&&Q("chrome"),He=Q("gecko")&&!Oe&&!Ve&&!Pe,We=!je&&Q("safari"),Te=Q("phantom"),st="OTransition"in Ke,qe=navigator.platform.indexOf("Win")===0,ot=Pe&&"transition"in Ke,Qe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!B,Ze="MozPerspective"in Ke,oe=!window.L_DISABLE_3D&&(ot||Qe||Ze)&&!st&&!Te,Le=typeof orientation<"u"||Q("mobile"),tt=Le&&Oe,re=Le&&Qe,xe=!window.PointerEvent&&window.MSPointerEvent,Be=!!(window.PointerEvent||xe),nt="ontouchstart"in window||!!window.TouchEvent,ct=!window.L_NO_TOUCH&&(nt||Be),Ft=Le&&Ve,Rt=Le&&He,Dt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,kt=function(){var u=!1;try{var g=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,g),window.removeEventListener("testPassiveEventSupport",p,g)}catch{}return u}(),Jt=function(){return!!document.createElement("canvas").getContext}(),At=!!(document.createElementNS&&Ne("svg").createSVGRect),Ut=!!At&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zi=!At&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var g=u.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),mi=navigator.platform.indexOf("Mac")===0,$t=navigator.platform.indexOf("Linux")===0;function Q(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var fe={ie:Pe,ielt9:Xe,edge:Je,webkit:Oe,android:q,android23:B,androidStock:Me,opera:Ve,chrome:je,gecko:He,safari:We,phantom:Te,opera12:st,win:qe,ie3d:ot,webkit3d:Qe,gecko3d:Ze,any3d:oe,mobile:Le,mobileWebkit:tt,mobileWebkit3d:re,msPointer:xe,pointer:Be,touch:ct,touchNative:nt,mobileOpera:Ft,mobileGecko:Rt,retina:Dt,passiveEvents:kt,canvas:Jt,svg:At,vml:zi,inlineSvg:Ut,mac:mi,linux:$t},Ee=fe.msPointer?"MSPointerDown":"pointerdown",ge=fe.msPointer?"MSPointerMove":"pointermove",Re=fe.msPointer?"MSPointerUp":"pointerup",pt=fe.msPointer?"MSPointerCancel":"pointercancel",vt={touchstart:Ee,touchmove:ge,touchend:Re,touchcancel:pt},bt={touchstart:$e,touchmove:cn,touchend:cn,touchcancel:cn},Ct={},Zt=!1;function It(u,g,x){return g==="touchstart"&&dr(),bt[g]?(x=bt[g].bind(this,x),u.addEventListener(vt[g],x,!1),x):(console.warn("wrong event specified:",g),p)}function Bt(u,g,x){if(!vt[g]){console.warn("wrong event specified:",g);return}u.removeEventListener(vt[g],x,!1)}function wn(u){Ct[u.pointerId]=u}function ri(u){Ct[u.pointerId]&&(Ct[u.pointerId]=u)}function gi(u){delete Ct[u.pointerId]}function dr(){Zt||(document.addEventListener(Ee,wn,!0),document.addEventListener(ge,ri,!0),document.addEventListener(Re,gi,!0),document.addEventListener(pt,gi,!0),Zt=!0)}function cn(u,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var x in Ct)g.touches.push(Ct[x]);g.changedTouches=[g],u(g)}}function $e(u,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&Nn(g),cn(u,g)}function Fi(u){var g={},x,P;for(P in u)x=u[P],g[P]=x&&x.bind?x.bind(u):x;return u=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var Sn=200;function si(u,g){u.addEventListener("dblclick",g);var x=0,P;function D(V){if(V.detail!==1){P=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var le=Qi(V);if(!(le.some(function(Ce){return Ce instanceof HTMLLabelElement&&Ce.attributes.for})&&!le.some(function(Ce){return Ce instanceof HTMLInputElement||Ce instanceof HTMLSelectElement}))){var we=Date.now();we-x<=Sn?(P++,P===2&&g(Fi(V))):P=1,x=we}}}return u.addEventListener("click",D),{dblclick:g,simDblclick:D}}function Fs(u,g){u.removeEventListener("dblclick",g.dblclick),u.removeEventListener("click",g.simDblclick)}var Ki=Us(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oi=Us(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),sn=oi==="webkitTransition"||oi==="OTransition"?oi+"End":"transitionend";function Gt(u){return typeof u=="string"?document.getElementById(u):u}function qt(u,g){var x=u.style[g]||u.currentStyle&&u.currentStyle[g];if((!x||x==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(u,null);x=P?P[g]:null}return x==="auto"?null:x}function yt(u,g,x){var P=document.createElement(u);return P.className=g||"",x&&x.appendChild(P),P}function Lt(u){var g=u.parentNode;g&&g.removeChild(u)}function Cn(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function ai(u){var g=u.parentNode;g&&g.lastChild!==u&&g.appendChild(u)}function vi(u){var g=u.parentNode;g&&g.firstChild!==u&&g.insertBefore(u,g.firstChild)}function Wn(u,g){if(u.classList!==void 0)return u.classList.contains(g);var x=Qr(u);return x.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(x)}function wt(u,g){if(u.classList!==void 0)for(var x=y(g),P=0,D=x.length;P<D;P++)u.classList.add(x[P]);else if(!Wn(u,g)){var V=Qr(u);xo(u,(V?V+" ":"")+g)}}function mn(u,g){u.classList!==void 0?u.classList.remove(g):xo(u,v((" "+Qr(u)+" ").replace(" "+g+" "," ")))}function xo(u,g){u.className.baseVal===void 0?u.className=g:u.className.baseVal=g}function Qr(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Mn(u,g){"opacity"in u.style?u.style.opacity=g:"filter"in u.style&&pr(u,g)}function pr(u,g){var x=!1,P="DXImageTransform.Microsoft.Alpha";try{x=u.filters.item(P)}catch{if(g===1)return}g=Math.round(g*100),x?(x.Enabled=g!==100,x.Opacity=g):u.style.filter+=" progid:"+P+"(opacity="+g+")"}function Us(u){for(var g=document.documentElement.style,x=0;x<u.length;x++)if(u[x]in g)return u[x];return!1}function mr(u,g,x){var P=g||new F(0,0);u.style[Ki]=(fe.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(x?" scale("+x+")":"")}function An(u,g){u._leaflet_pos=g,fe.any3d?mr(u,g):(u.style.left=g.x+"px",u.style.top=g.y+"px")}function Ui(u){return u._leaflet_pos||new F(0,0)}var gr,vr,Bs;if("onselectstart"in document)gr=function(){Et(window,"selectstart",Nn)},vr=function(){fn(window,"selectstart",Nn)};else{var wo=Us(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);gr=function(){if(wo){var u=document.documentElement.style;Bs=u[wo],u[wo]="none"}},vr=function(){wo&&(document.documentElement.style[wo]=Bs,Bs=void 0)}}function Vo(){Et(window,"dragstart",Nn)}function $r(){fn(window,"dragstart",Nn)}var Vs,Ur;function gs(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(yr(),Vs=u,Ur=u.style.outlineStyle,u.style.outlineStyle="none",Et(window,"keydown",yr))}function yr(){Vs&&(Vs.style.outlineStyle=Ur,Vs=void 0,Ur=void 0,fn(window,"keydown",yr))}function Ht(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Go(u){var g=u.getBoundingClientRect();return{x:g.width/u.offsetWidth||1,y:g.height/u.offsetHeight||1,boundingClientRect:g}}var Gs={__proto__:null,TRANSFORM:Ki,TRANSITION:oi,TRANSITION_END:sn,get:Gt,getStyle:qt,create:yt,remove:Lt,empty:Cn,toFront:ai,toBack:vi,hasClass:Wn,addClass:wt,removeClass:mn,setClass:xo,getClass:Qr,setOpacity:Mn,testProp:Us,setTransform:mr,setPosition:An,getPosition:Ui,get disableTextSelection(){return gr},get enableTextSelection(){return vr},disableImageDrag:Vo,enableImageDrag:$r,preventOutline:gs,restoreOutline:yr,getSizedParentNode:Ht,getScale:Go};function Et(u,g,x,P){if(g&&typeof g=="object")for(var D in g)za(u,D,g[D],x);else{g=y(g);for(var V=0,le=g.length;V<le;V++)za(u,g[V],x,P)}return this}var Ji="_leaflet_events";function fn(u,g,x,P){if(arguments.length===1)bn(u),delete u[Ji];else if(g&&typeof g=="object")for(var D in g)yi(u,D,g[D],x);else if(g=y(g),arguments.length===2)bn(u,function(we){return C(g,we)!==-1});else for(var V=0,le=g.length;V<le;V++)yi(u,g[V],x,P);return this}function bn(u,g){for(var x in u[Ji]){var P=x.split(/\d/)[0];(!g||g(P))&&yi(u,P,null,null,x)}}var Hs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function za(u,g,x,P){var D=g+l(x)+(P?"_"+l(P):"");if(u[Ji]&&u[Ji][D])return this;var V=function(we){return x.call(P||u,we||window.event)},le=V;!fe.touchNative&&fe.pointer&&g.indexOf("touch")===0?V=It(u,g,V):fe.touch&&g==="dblclick"?V=si(u,V):"addEventListener"in u?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?u.addEventListener(Hs[g]||g,V,fe.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(V=function(we){we=we||window.event,Ho(u,we)&&le(we)},u.addEventListener(Hs[g],V,!1)):u.addEventListener(g,le,!1):u.attachEvent("on"+g,V),u[Ji]=u[Ji]||{},u[Ji][D]=V}function yi(u,g,x,P,D){D=D||g+l(x)+(P?"_"+l(P):"");var V=u[Ji]&&u[Ji][D];if(!V)return this;!fe.touchNative&&fe.pointer&&g.indexOf("touch")===0?Bt(u,g,V):fe.touch&&g==="dblclick"?Fs(u,V):"removeEventListener"in u?u.removeEventListener(Hs[g]||g,V,!1):u.detachEvent("on"+g,V),u[Ji][D]=null}function es(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ws(u){return za(u,"wheel",es),this}function _i(u){return Et(u,"mousedown touchstart dblclick contextmenu",es),u._leaflet_disable_click=!0,this}function Nn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function vs(u){return Nn(u),es(u),this}function Qi(u){if(u.composedPath)return u.composedPath();for(var g=[],x=u.target;x;)g.push(x),x=x.parentNode;return g}function Ai(u,g){if(!g)return new F(u.clientX,u.clientY);var x=Go(g),P=x.boundingClientRect;return new F((u.clientX-P.left)/x.x-g.clientLeft,(u.clientY-P.top)/x.y-g.clientTop)}var ys=fe.linux&&fe.chrome?window.devicePixelRatio:fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _r(u){return fe.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ys:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Ho(u,g){var x=g.relatedTarget;if(!x)return!0;try{for(;x&&x!==u;)x=x.parentNode}catch{return!1}return x!==u}var Zl={__proto__:null,on:Et,off:fn,stopPropagation:es,disableScrollPropagation:Ws,disableClickPropagation:_i,preventDefault:Nn,stop:vs,getPropagationPath:Qi,getMousePosition:Ai,getWheelDelta:_r,isExternalTarget:Ho,addListener:Et,removeListener:fn},Bi=ye.extend({run:function(u,g,x,P){this.stop(),this._el=u,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Ui(u),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(u){var g=+new Date-this._startTime,x=this._duration*1e3;g<x?this._runFrame(this._easeOut(g/x),u):(this._runFrame(1),this._complete())},_runFrame:function(u,g){var x=this._startPos.add(this._offset.multiplyBy(u));g&&x._round(),An(this._el,x),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Vt=ye.extend({options:{crs:Se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,g){g=_(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(ue(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oi&&fe.any3d&&!fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Et(this._proxy,sn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,g,x){if(g=g===void 0?this._zoom:this._limitZoom(g),u=this._limitCenter(ue(u),g,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=r({animate:x.animate},x.zoom),x.pan=r({animate:x.animate,duration:x.duration},x.pan));var P=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,g,x.zoom):this._tryAnimatedPan(u,x.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(u,g,x.pan&&x.pan.noMoveStart),this},setZoom:function(u,g){return this._loaded?this.setView(this.getCenter(),u,{zoom:g}):(this._zoom=u,this)},zoomIn:function(u,g){return u=u||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,g)},zoomOut:function(u,g){return u=u||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,g)},setZoomAround:function(u,g,x){var P=this.getZoomScale(g),D=this.getSize().divideBy(2),V=u instanceof F?u:this.latLngToContainerPoint(u),le=V.subtract(D).multiplyBy(1-1/P),we=this.containerPointToLatLng(D.add(le));return this.setView(we,g,{zoom:x})},_getBoundsCenterZoom:function(u,g){g=g||{},u=u.getBounds?u.getBounds():ee(u);var x=H(g.paddingTopLeft||g.padding||[0,0]),P=H(g.paddingBottomRight||g.padding||[0,0]),D=this.getBoundsZoom(u,!1,x.add(P));if(D=typeof g.maxZoom=="number"?Math.min(g.maxZoom,D):D,D===1/0)return{center:u.getCenter(),zoom:D};var V=P.subtract(x).divideBy(2),le=this.project(u.getSouthWest(),D),we=this.project(u.getNorthEast(),D),Ce=this.unproject(le.add(we).divideBy(2).add(V),D);return{center:Ce,zoom:D}},fitBounds:function(u,g){if(u=ee(u),!u.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(u,g);return this.setView(x.center,x.zoom,g)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,g){return this.setView(u,this._zoom,{pan:g})},panBy:function(u,g){if(u=H(u).round(),g=g||{},!u.x&&!u.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){wt(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,x,g.duration||.25,g.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,g,x){if(x=x||{},x.animate===!1||!fe.any3d)return this.setView(u,g,x);this._stop();var P=this.project(this.getCenter()),D=this.project(u),V=this.getSize(),le=this._zoom;u=ue(u),g=g===void 0?le:g;var we=Math.max(V.x,V.y),Ce=we*this.getZoomScale(le,g),Ye=D.distanceTo(P)||1,lt=1.42,Tt=lt*lt;function Xt(Tn){var Eo=Tn?-1:1,yc=Tn?Ce:we,_c=Ce*Ce-we*we+Eo*Tt*Tt*Ye*Ye,tm=2*yc*Tt*Ye,Qo=_c/tm,Mi=Math.sqrt(Qo*Qo+1)-Qo,j0=Mi<1e-9?-18:Math.log(Mi);return j0}function Hi(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function jn(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function er(Tn){return Hi(Tn)/jn(Tn)}var tr=Xt(0);function Jo(Tn){return we*(jn(tr)/jn(tr+lt*Tn))}function Qp(Tn){return we*(jn(tr)*er(tr+lt*Tn)-Hi(tr))/Tt}function $p(Tn){return 1-Math.pow(1-Tn,1.5)}var em=Date.now(),hh=(Xt(1)-tr)/lt,bs=x.duration?1e3*x.duration:1e3*hh*.8;function dh(){var Tn=(Date.now()-em)/bs,Eo=$p(Tn)*hh;Tn<=1?(this._flyToFrame=$(dh,this),this._move(this.unproject(P.add(D.subtract(P).multiplyBy(Qp(Eo)/Ye)),le),this.getScaleZoom(we/Jo(Eo),le),{flyTo:!0})):this._move(u,g)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),dh.call(this),this},flyToBounds:function(u,g){var x=this._getBoundsCenterZoom(u,g);return this.flyTo(x.center,x.zoom,g)},setMaxBounds:function(u){return u=ee(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var g=this.options.minZoom;return this.options.minZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var g=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,g){this._enforcingBounds=!0;var x=this.getCenter(),P=this._limitCenter(x,this._zoom,ee(u));return x.equals(P)||this.panTo(P,g),this._enforcingBounds=!1,this},panInside:function(u,g){g=g||{};var x=H(g.paddingTopLeft||g.padding||[0,0]),P=H(g.paddingBottomRight||g.padding||[0,0]),D=this.project(this.getCenter()),V=this.project(u),le=this.getPixelBounds(),we=j([le.min.add(x),le.max.subtract(P)]),Ce=we.getSize();if(!we.contains(V)){this._enforcingBounds=!0;var Ye=V.subtract(we.getCenter()),lt=we.extend(V).getSize().subtract(Ce);D.x+=Ye.x<0?-lt.x:lt.x,D.y+=Ye.y<0?-lt.y:lt.y,this.panTo(this.unproject(D),g),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=r({animate:!1,pan:!0},u===!0?{animate:!0}:u);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),P=g.divideBy(2).round(),D=x.divideBy(2).round(),V=P.subtract(D);return!V.x&&!V.y?this:(u.animate&&u.pan?this.panBy(V):(u.pan&&this._rawPanBy(V),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=r({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),x=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,x,u):navigator.geolocation.getCurrentPosition(g,x,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var g=u.code,x=u.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var g=u.coords.latitude,x=u.coords.longitude,P=new Z(g,x),D=P.toBounds(u.coords.accuracy*2),V=this._locateOptions;if(V.setView){var le=this.getBoundsZoom(D);this.setView(P,V.maxZoom?Math.min(le,V.maxZoom):le)}var we={latlng:P,bounds:D,timestamp:u.timestamp};for(var Ce in u.coords)typeof u.coords[Ce]=="number"&&(we[Ce]=u.coords[Ce]);this.fire("locationfound",we)}},addHandler:function(u,g){if(!g)return this;var x=this[u]=new g(this);return this._handlers.push(x),this.options[u]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Lt(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,g){var x="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),P=yt("div",x,g||this._mapPane);return u&&(this._panes[u]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),g=this.unproject(u.getBottomLeft()),x=this.unproject(u.getTopRight());return new se(g,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,g,x){u=ee(u),x=H(x||[0,0]);var P=this.getZoom()||0,D=this.getMinZoom(),V=this.getMaxZoom(),le=u.getNorthWest(),we=u.getSouthEast(),Ce=this.getSize().subtract(x),Ye=j(this.project(we,P),this.project(le,P)).getSize(),lt=fe.any3d?this.options.zoomSnap:1,Tt=Ce.x/Ye.x,Xt=Ce.y/Ye.y,Hi=g?Math.max(Tt,Xt):Math.min(Tt,Xt);return P=this.getScaleZoom(Hi,P),lt&&(P=Math.round(P/(lt/100))*(lt/100),P=g?Math.ceil(P/lt)*lt:Math.floor(P/lt)*lt),Math.max(D,Math.min(V,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,g){var x=this._getTopLeftPoint(u,g);return new W(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,g){var x=this.options.crs;return g=g===void 0?this._zoom:g,x.scale(u)/x.scale(g)},getScaleZoom:function(u,g){var x=this.options.crs;g=g===void 0?this._zoom:g;var P=x.zoom(u*x.scale(g));return isNaN(P)?1/0:P},project:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(ue(u),g)},unproject:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(H(u),g)},layerPointToLatLng:function(u){var g=H(u).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(u){var g=this.project(ue(u))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ue(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ee(u))},distance:function(u,g){return this.options.crs.distance(ue(u),ue(g))},containerPointToLayerPoint:function(u){return H(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return H(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var g=this.containerPointToLayerPoint(H(u));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(u)))},mouseEventToContainerPoint:function(u){return Ai(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var g=this._container=Gt(u);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Et(g,"scroll",this._onScroll,this),this._containerId=l(g)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&fe.any3d,wt(u,"leaflet-container"+(fe.touch?" leaflet-touch":"")+(fe.retina?" leaflet-retina":"")+(fe.ielt9?" leaflet-oldie":"")+(fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=qt(u,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),An(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(wt(u.markerPane,"leaflet-zoom-hide"),wt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,g,x){An(this._mapPane,new F(0,0));var P=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var D=this._zoom!==g;this._moveStart(D,x)._move(u,g)._moveEnd(D),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(u,g){return u&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(u,g,x,P){g===void 0&&(g=this._zoom);var D=this._zoom!==g;return this._zoom=g,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),P?x&&x.pinch&&this.fire("zoom",x):((D||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){An(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var g=u?fn:Et;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),fe.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,g){for(var x=[],P,D=g==="mouseout"||g==="mouseover",V=u.target||u.srcElement,le=!1;V;){if(P=this._targets[l(V)],P&&(g==="click"||g==="preclick")&&this._draggableMoved(P)){le=!0;break}if(P&&P.listens(g,!0)&&(D&&!Ho(V,u)||(x.push(P),D))||V===this._container)break;V=V.parentNode}return!x.length&&!le&&!D&&this.listens(g,!0)&&(x=[this]),x},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var g=u.target||u.srcElement;if(!(!this._loaded||g._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(g))){var x=u.type;x==="mousedown"&&gs(g),this._fireDOMEvent(u,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,g,x){if(u.type==="click"){var P=r({},u);P.type="preclick",this._fireDOMEvent(P,P.type,x)}var D=this._findEventTargets(u,g);if(x){for(var V=[],le=0;le<x.length;le++)x[le].listens(g,!0)&&V.push(x[le]);D=V.concat(D)}if(D.length){g==="contextmenu"&&Nn(u);var we=D[0],Ce={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Ye=we.getLatLng&&(!we._radius||we._radius<=10);Ce.containerPoint=Ye?this.latLngToContainerPoint(we.getLatLng()):this.mouseEventToContainerPoint(u),Ce.layerPoint=this.containerPointToLayerPoint(Ce.containerPoint),Ce.latlng=Ye?we.getLatLng():this.layerPointToLatLng(Ce.layerPoint)}for(le=0;le<D.length;le++)if(D[le].fire(g,Ce,!0),Ce.originalEvent._stopped||D[le].options.bubblingMouseEvents===!1&&C(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,g=this._handlers.length;u<g;u++)this._handlers[u].disable()},whenReady:function(u,g){return this._loaded?u.call(g||this,{target:this}):this.on("load",u,g),this},_getMapPanePos:function(){return Ui(this._mapPane)||new F(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,g){var x=u&&g!==void 0?this._getNewPixelOrigin(u,g):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,g){var x=this.getSize()._divideBy(2);return this.project(u,g)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,g,x){var P=this._getNewPixelOrigin(x,g);return this.project(u,g)._subtract(P)},_latLngBoundsToNewLayerBounds:function(u,g,x){var P=this._getNewPixelOrigin(x,g);return j([this.project(u.getSouthWest(),g)._subtract(P),this.project(u.getNorthWest(),g)._subtract(P),this.project(u.getSouthEast(),g)._subtract(P),this.project(u.getNorthEast(),g)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,g,x){if(!x)return u;var P=this.project(u,g),D=this.getSize().divideBy(2),V=new W(P.subtract(D),P.add(D)),le=this._getBoundsOffset(V,x,g);return Math.abs(le.x)<=1&&Math.abs(le.y)<=1?u:this.unproject(P.add(le),g)},_limitOffset:function(u,g){if(!g)return u;var x=this.getPixelBounds(),P=new W(x.min.add(u),x.max.add(u));return u.add(this._getBoundsOffset(P,g))},_getBoundsOffset:function(u,g,x){var P=j(this.project(g.getNorthEast(),x),this.project(g.getSouthWest(),x)),D=P.min.subtract(u.min),V=P.max.subtract(u.max),le=this._rebound(D.x,-V.x),we=this._rebound(D.y,-V.y);return new F(le,we)},_rebound:function(u,g){return u+g>0?Math.round(u-g)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(g))},_limitZoom:function(u){var g=this.getMinZoom(),x=this.getMaxZoom(),P=fe.any3d?this.options.zoomSnap:1;return P&&(u=Math.round(u/P)*P),Math.max(g,Math.min(x,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,g){var x=this._getCenterOffset(u)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,g),!0)},_createAnimProxy:function(){var u=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(g){var x=Ki,P=this._proxy.style[x];mr(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),P===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),g=this.getZoom();mr(this._proxy,this.project(u,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,g,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(g),D=this._getCenterOffset(u)._divideBy(1-1/P);return x.animate!==!0&&!this.getSize().contains(D)?!1:($(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(u,g,!0)},this),!0)},_animateZoom:function(u,g,x,P){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=g,wt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:g,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wo(u,g){return new Vt(u,g)}var xi=J.extend({options:{position:"topright"},initialize:function(u){_(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var g=this._map;return g&&g.removeControl(this),this.options.position=u,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var g=this._container=this.onAdd(u),x=this.getPosition(),P=u._controlCorners[x];return wt(g,"leaflet-control"),x.indexOf("bottom")!==-1?P.insertBefore(g,P.firstChild):P.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),Kn=function(u){return new xi(u)};Vt.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},g="leaflet-",x=this._controlContainer=yt("div",g+"control-container",this._container);function P(D,V){var le=g+D+" "+g+V;u[D+V]=yt("div",le,x)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Lt(this._controlCorners[u]);Lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Jn=xi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,g,x,P){return x<P?-1:P<x?1:0}},initialize:function(u,g,x){_(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in u)this._addLayer(u[P],P);for(P in g)this._addLayer(g[P],P,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return xi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,g){return this._addLayer(u,g),this._map?this._update():this},addOverlay:function(u,g){return this._addLayer(u,g,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var g=this._getLayer(l(u));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){wt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(wt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",g=this._container=yt("div",u),x=this.options.collapsed;g.setAttribute("aria-haspopup",!0),_i(g),Ws(g);var P=this._section=yt("section",u+"-list");x&&(this._map.on("click",this.collapse,this),Et(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var D=this._layersLink=yt("a",u+"-toggle",g);D.href="#",D.title="Layers",D.setAttribute("role","button"),Et(D,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Nn(V),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=yt("div",u+"-base",P),this._separator=yt("div",u+"-separator",P),this._overlaysList=yt("div",u+"-overlays",P),g.appendChild(P)},_getLayer:function(u){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&l(this._layers[g].layer)===u)return this._layers[g]},_addLayer:function(u,g,x){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:g,overlay:x}),this.options.sortLayers&&this._layers.sort(o(function(P,D){return this.options.sortFunction(P.layer,D.layer,P.name,D.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cn(this._baseLayersList),Cn(this._overlaysList),this._layerControlInputs=[];var u,g,x,P,D=0;for(x=0;x<this._layers.length;x++)P=this._layers[x],this._addItem(P),g=g||P.overlay,u=u||!P.overlay,D+=P.overlay?0:1;return this.options.hideSingleBase&&(u=u&&D>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=g&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var g=this._getLayer(l(u.target)),x=g.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;x&&this._map.fire(x,g)},_createRadioElement:function(u,g){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(g?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=x,P.firstChild},_addItem:function(u){var g=document.createElement("label"),x=this._map.hasLayer(u.layer),P;u.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=x):P=this._createRadioElement("leaflet-base-layers_"+l(this),x),this._layerControlInputs.push(P),P.layerId=l(u.layer),Et(P,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+u.name;var V=document.createElement("span");g.appendChild(V),V.appendChild(P),V.appendChild(D);var le=u.overlay?this._overlaysList:this._baseLayersList;return le.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,g,x,P=[],D=[];this._handlingClick=!0;for(var V=u.length-1;V>=0;V--)g=u[V],x=this._getLayer(g.layerId).layer,g.checked?P.push(x):g.checked||D.push(x);for(V=0;V<D.length;V++)this._map.hasLayer(D[V])&&this._map.removeLayer(D[V]);for(V=0;V<P.length;V++)this._map.hasLayer(P[V])||this._map.addLayer(P[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,g,x,P=this._map.getZoom(),D=u.length-1;D>=0;D--)g=u[D],x=this._getLayer(g.layerId).layer,g.disabled=x.options.minZoom!==void 0&&P<x.options.minZoom||x.options.maxZoom!==void 0&&P>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Et(u,"click",Nn),this.expand();var g=this;setTimeout(function(){fn(u,"click",Nn),g._preventClick=!1})}}),Fa=function(u,g,x){return new Jn(u,g,x)},xr=xi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var g="leaflet-control-zoom",x=yt("div",g+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,g+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,g+"-out",x,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,g,x,P,D){var V=yt("a",x,P);return V.innerHTML=u,V.href="#",V.title=g,V.setAttribute("role","button"),V.setAttribute("aria-label",g),_i(V),Et(V,"click",vs),Et(V,"click",D,this),Et(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var u=this._map,g="leaflet-disabled";mn(this._zoomInButton,g),mn(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(wt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(wt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vt.mergeOptions({zoomControl:!0}),Vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xr,this.addControl(this.zoomControl))});var So=function(u){return new xr(u)},jo=xi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var g="leaflet-control-scale",x=yt("div",g),P=this.options;return this._addScales(P,g+"-line",x),u.on(P.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),x},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,g,x){u.metric&&(this._mScale=yt("div",g,x)),u.imperial&&(this._iScale=yt("div",g,x))},_update:function(){var u=this._map,g=u.getSize().y/2,x=u.distance(u.containerPointToLatLng([0,g]),u.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(x)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var g=this._getRoundNum(u),x=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,x,g/u)},_updateImperial:function(u){var g=u*3.2808399,x,P,D;g>5280?(x=g/5280,P=this._getRoundNum(x),this._updateScale(this._iScale,P+" mi",P/x)):(D=this._getRoundNum(g),this._updateScale(this._iScale,D+" ft",D/g))},_updateScale:function(u,g,x){u.style.width=Math.round(this.options.maxWidth*x)+"px",u.innerHTML=g},_getRoundNum:function(u){var g=Math.pow(10,(Math.floor(u)+"").length-1),x=u/g;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,g*x}}),uc=function(u){return new jo(u)},li='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wi=xi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(fe.inlineSvg?li+" ":"")+"Leaflet</a>"},initialize:function(u){_(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),_i(this._container);for(var g in u._layers)u._layers[g].getAttribution&&this.addAttribution(u._layers[g].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var g in this._attributions)this._attributions[g]&&u.push(g);var x=[];this.options.prefix&&x.push(this.options.prefix),u.length&&x.push(u.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});Vt.mergeOptions({attributionControl:!0}),Vt.addInitHook(function(){this.options.attributionControl&&new wi().addTo(this)});var On=function(u){return new wi(u)};xi.Layers=Jn,xi.Zoom=xr,xi.Scale=jo,xi.Attribution=wi,Kn.layers=Fa,Kn.zoom=So,Kn.scale=uc,Kn.attribution=On;var on=J.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});on.addTo=function(u,g){return u.addHandler(g,this),this};var wr={Events:ce},js=fe.touch?"touchstart mousedown":"mousedown",_s=ye.extend({options:{clickTolerance:3},initialize:function(u,g,x,P){_(this,P),this._element=u,this._dragStartTarget=g||u,this._preventOutline=x},enable:function(){this._enabled||(Et(this._dragStartTarget,js,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_s._dragging===this&&this.finishDrag(!0),fn(this._dragStartTarget,js,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Wn(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){_s._dragging===this&&this.finishDrag();return}if(!(_s._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(_s._dragging=this,this._preventOutline&&gs(this._element),Vo(),gr(),!this._moving)){this.fire("down");var g=u.touches?u.touches[0]:u,x=Ht(this._element);this._startPoint=new F(g.clientX,g.clientY),this._startPos=Ui(this._element),this._parentScale=Go(x);var P=u.type==="mousedown";Et(document,P?"mousemove":"touchmove",this._onMove,this),Et(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var g=u.touches&&u.touches.length===1?u.touches[0]:u,x=new F(g.clientX,g.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Nn(u),this._moved||(this.fire("dragstart"),this._moved=!0,wt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),wt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),An(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),fn(document,"mousemove touchmove",this._onMove,this),fn(document,"mouseup touchend touchcancel",this._onUp,this),$r(),vr();var g=this._moved&&this._moving;this._moving=!1,_s._dragging=!1,g&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Kf(u,g,x){var P,D=[1,4,2,8],V,le,we,Ce,Ye,lt,Tt,Xt;for(V=0,lt=u.length;V<lt;V++)u[V]._code=Zs(u[V],g);for(we=0;we<4;we++){for(Tt=D[we],P=[],V=0,lt=u.length,le=lt-1;V<lt;le=V++)Ce=u[V],Ye=u[le],Ce._code&Tt?Ye._code&Tt||(Xt=ql(Ye,Ce,Tt,g,x),Xt._code=Zs(Xt,g),P.push(Xt)):(Ye._code&Tt&&(Xt=ql(Ye,Ce,Tt,g,x),Xt._code=Zs(Xt,g),P.push(Xt)),P.push(Ce));u=P}return u}function xs(u,g){var x,P,D,V,le,we,Ce,Ye,lt;if(!u||u.length===0)throw new Error("latlngs not passed");Vi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Tt=ue([0,0]),Xt=ee(u),Hi=Xt.getNorthWest().distanceTo(Xt.getSouthWest())*Xt.getNorthEast().distanceTo(Xt.getNorthWest());Hi<1700&&(Tt=ws(u));var jn=u.length,er=[];for(x=0;x<jn;x++){var tr=ue(u[x]);er.push(g.project(ue([tr.lat-Tt.lat,tr.lng-Tt.lng])))}for(we=Ce=Ye=0,x=0,P=jn-1;x<jn;P=x++)D=er[x],V=er[P],le=D.y*V.x-V.y*D.x,Ce+=(D.x+V.x)*le,Ye+=(D.y+V.y)*le,we+=le*3;we===0?lt=er[0]:lt=[Ce/we,Ye/we];var Jo=g.unproject(H(lt));return ue([Jo.lat+Tt.lat,Jo.lng+Tt.lng])}function ws(u){for(var g=0,x=0,P=0,D=0;D<u.length;D++){var V=ue(u[D]);g+=V.lat,x+=V.lng,P++}return ue([g/P,x/P])}var cc={__proto__:null,clipPolygon:Kf,polygonCenter:xs,centroid:ws};function Jf(u,g){if(!g||!u.length)return u.slice();var x=g*g;return u=fc(u,x),u=Wp(u,x),u}function Xl(u,g,x){return Math.sqrt(Ss(u,g,x,!0))}function Hp(u,g,x){return Ss(u,g,x)}function Wp(u,g){var x=u.length,P=typeof Uint8Array!=void 0+""?Uint8Array:Array,D=new P(x);D[0]=D[x-1]=1,Yl(u,D,g,0,x-1);var V,le=[];for(V=0;V<x;V++)D[V]&&le.push(u[V]);return le}function Yl(u,g,x,P,D){var V=0,le,we,Ce;for(we=P+1;we<=D-1;we++)Ce=Ss(u[we],u[P],u[D],!0),Ce>V&&(le=we,V=Ce);V>x&&(g[le]=1,Yl(u,g,x,P,le),Yl(u,g,x,le,D))}function fc(u,g){for(var x=[u[0]],P=1,D=0,V=u.length;P<V;P++)Ua(u[P],u[D])>g&&(x.push(u[P]),D=P);return D<V-1&&x.push(u[V-1]),x}var Qf;function $f(u,g,x,P,D){var V=P?Qf:Zs(u,x),le=Zs(g,x),we,Ce,Ye;for(Qf=le;;){if(!(V|le))return[u,g];if(V&le)return!1;we=V||le,Ce=ql(u,g,we,x,D),Ye=Zs(Ce,x),we===V?(u=Ce,V=Ye):(g=Ce,le=Ye)}}function ql(u,g,x,P,D){var V=g.x-u.x,le=g.y-u.y,we=P.min,Ce=P.max,Ye,lt;return x&8?(Ye=u.x+V*(Ce.y-u.y)/le,lt=Ce.y):x&4?(Ye=u.x+V*(we.y-u.y)/le,lt=we.y):x&2?(Ye=Ce.x,lt=u.y+le*(Ce.x-u.x)/V):x&1&&(Ye=we.x,lt=u.y+le*(we.x-u.x)/V),new F(Ye,lt,D)}function Zs(u,g){var x=0;return u.x<g.min.x?x|=1:u.x>g.max.x&&(x|=2),u.y<g.min.y?x|=4:u.y>g.max.y&&(x|=8),x}function Ua(u,g){var x=g.x-u.x,P=g.y-u.y;return x*x+P*P}function Ss(u,g,x,P){var D=g.x,V=g.y,le=x.x-D,we=x.y-V,Ce=le*le+we*we,Ye;return Ce>0&&(Ye=((u.x-D)*le+(u.y-V)*we)/Ce,Ye>1?(D=x.x,V=x.y):Ye>0&&(D+=le*Ye,V+=we*Ye)),le=u.x-D,we=u.y-V,P?le*le+we*we:new F(D,V)}function Vi(u){return!b(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Kl(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Vi(u)}function Sr(u,g){var x,P,D,V,le,we,Ce,Ye;if(!u||u.length===0)throw new Error("latlngs not passed");Vi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var lt=ue([0,0]),Tt=ee(u),Xt=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());Xt<1700&&(lt=ws(u));var Hi=u.length,jn=[];for(x=0;x<Hi;x++){var er=ue(u[x]);jn.push(g.project(ue([er.lat-lt.lat,er.lng-lt.lng])))}for(x=0,P=0;x<Hi-1;x++)P+=jn[x].distanceTo(jn[x+1])/2;if(P===0)Ye=jn[0];else for(x=0,V=0;x<Hi-1;x++)if(le=jn[x],we=jn[x+1],D=le.distanceTo(we),V+=D,V>P){Ce=(V-P)/D,Ye=[we.x-Ce*(we.x-le.x),we.y-Ce*(we.y-le.y)];break}var tr=g.unproject(H(Ye));return ue([tr.lat+lt.lat,tr.lng+lt.lng])}var Br={__proto__:null,simplify:Jf,pointToSegmentDistance:Xl,closestPointOnSegment:Hp,clipSegment:$f,_getEdgeIntersection:ql,_getBitCode:Zs,_sqClosestPointOnSegment:Ss,isFlat:Vi,_flat:Kl,polylineCenter:Sr},Xs={project:function(u){return new F(u.lng,u.lat)},unproject:function(u){return new Z(u.y,u.x)},bounds:new W([-180,-90],[180,90])},ts={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var g=Math.PI/180,x=this.R,P=u.lat*g,D=this.R_MINOR/x,V=Math.sqrt(1-D*D),le=V*Math.sin(P),we=Math.tan(Math.PI/4-P/2)/Math.pow((1-le)/(1+le),V/2);return P=-x*Math.log(Math.max(we,1e-10)),new F(u.lng*g*x,P)},unproject:function(u){for(var g=180/Math.PI,x=this.R,P=this.R_MINOR/x,D=Math.sqrt(1-P*P),V=Math.exp(-u.y/x),le=Math.PI/2-2*Math.atan(V),we=0,Ce=.1,Ye;we<15&&Math.abs(Ce)>1e-7;we++)Ye=D*Math.sin(le),Ye=Math.pow((1-Ye)/(1+Ye),D/2),Ce=Math.PI/2-2*Math.atan(V*Ye)-le,le+=Ce;return new Z(le*g,u.x*g/x)}},Ys={__proto__:null,LonLat:Xs,Mercator:ts,SphericalMercator:Ue},Zo=r({},_e,{code:"EPSG:3395",projection:ts,transformation:function(){var u=.5/(Math.PI*ts.R);return he(u,.5,-u,.5)}()}),eh=r({},_e,{code:"EPSG:4326",projection:Xs,transformation:he(1/180,1,-1/180,.5)}),th=r({},de,{projection:Xs,transformation:he(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,g){var x=g.lng-u.lng,P=g.lat-u.lat;return Math.sqrt(x*x+P*P)},infinite:!0});de.Earth=_e,de.EPSG3395=Zo,de.EPSG3857=Se,de.EPSG900913=Fe,de.EPSG4326=eh,de.Simple=th;var Mr=ye.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var g=u.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var x=this.getEvents();g.on(x,this),this.once("remove",function(){g.off(x,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Vt.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var g=l(u);return this._layers[g]?this:(this._layers[g]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var g=l(u);return this._layers[g]?(this._loaded&&u.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,g){for(var x in this._layers)u.call(g,this._layers[x]);return this},_addLayers:function(u){u=u?b(u)?u:[u]:[];for(var g=0,x=u.length;g<x;g++)this.addLayer(u[g])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var g=l(u);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,g=-1/0,x=this._getZoomSpan();for(var P in this._zoomBoundLayers){var D=this._zoomBoundLayers[P].options;u=D.minZoom===void 0?u:Math.min(u,D.minZoom),g=D.maxZoom===void 0?g:Math.max(g,D.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=u===1/0?void 0:u,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ui=Mr.extend({initialize:function(u,g){_(this,g),this._layers={};var x,P;if(u)for(x=0,P=u.length;x<P;x++)this.addLayer(u[x])},addLayer:function(u){var g=this.getLayerId(u);return this._layers[g]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var g=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(u){var g=typeof u=="number"?u:this.getLayerId(u);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var g=Array.prototype.slice.call(arguments,1),x,P;for(x in this._layers)P=this._layers[x],P[u]&&P[u].apply(P,g);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,g){for(var x in this._layers)u.call(g,this._layers[x]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),br=function(u,g){return new ui(u,g)},en=ui.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),ui.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),ui.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new se;for(var g in this._layers){var x=this._layers[g];u.extend(x.getBounds?x.getBounds():x.getLatLng())}return u}}),Jl=function(u,g){return new en(u,g)},Li=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){_(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,g){var x=this._getIconUrl(u);if(!x){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(x,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(P,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(u,g){var x=this.options,P=x[g+"Size"];typeof P=="number"&&(P=[P,P]);var D=H(P),V=H(g==="shadow"&&x.shadowAnchor||x.iconAnchor||D&&D.divideBy(2,!0));u.className="leaflet-marker-"+g+" "+(x.className||""),V&&(u.style.marginLeft=-V.x+"px",u.style.marginTop=-V.y+"px"),D&&(u.style.width=D.x+"px",u.style.height=D.y+"px")},_createImg:function(u,g){return g=g||document.createElement("img"),g.src=u,g},_getIconUrl:function(u){return fe.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function jp(u){return new Li(u)}var Ba=Li.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Ba.imagePath!="string"&&(Ba.imagePath=this._detectIconPath()),(this.options.imagePath||Ba.imagePath)+Li.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var g=function(x,P,D){var V=P.exec(x);return V&&V[D]};return u=g(u,/^url\((['"])?(.+)\1\)$/,2),u&&g(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=yt("div","leaflet-default-icon-path",document.body),g=qt(u,"background-image")||qt(u,"backgroundImage");if(document.body.removeChild(u),g=this._stripUrl(g),g)return g;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),hc=on.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new _s(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),wt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var g=this._marker,x=g._map,P=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,V=Ui(g._icon),le=x.getPixelBounds(),we=x.getPixelOrigin(),Ce=j(le.min._subtract(we).add(D),le.max._subtract(we).subtract(D));if(!Ce.contains(V)){var Ye=H((Math.max(Ce.max.x,V.x)-Ce.max.x)/(le.max.x-Ce.max.x)-(Math.min(Ce.min.x,V.x)-Ce.min.x)/(le.min.x-Ce.min.x),(Math.max(Ce.max.y,V.y)-Ce.max.y)/(le.max.y-Ce.max.y)-(Math.min(Ce.min.y,V.y)-Ce.min.y)/(le.min.y-Ce.min.y)).multiplyBy(P);x.panBy(Ye,{animate:!1}),this._draggable._newPos._add(Ye),this._draggable._startPos._add(Ye),An(g._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=$(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,u)))},_onDrag:function(u){var g=this._marker,x=g._shadow,P=Ui(g._icon),D=g._map.layerPointToLatLng(P);x&&An(x,P),g._latlng=D,u.latlng=D,u.oldLatLng=this._oldLatLng,g.fire("move",u).fire("drag",u)},_onDragEnd:function(u){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Va=Mr.extend({options:{icon:new Ba,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,g){_(this,g),this._latlng=ue(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var g=this._latlng;return this._latlng=ue(u),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=u.icon.createIcon(this._icon),P=!1;x!==this._icon&&(this._icon&&this._removeIcon(),P=!0,u.title&&(x.title=u.title),x.tagName==="IMG"&&(x.alt=u.alt||"")),wt(x,g),u.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Et(x,"focus",this._panOnFocus,this);var D=u.icon.createShadow(this._shadow),V=!1;D!==this._shadow&&(this._removeShadow(),V=!0),D&&(wt(D,g),D.alt=""),this._shadow=D,u.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&V&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fn(this._icon,"focus",this._panOnFocus,this),Lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Lt(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&An(this._icon,u),this._shadow&&An(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(wt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hc)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hc(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Mn(this._icon,u),this._shadow&&Mn(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var g=this.options.icon.options,x=g.iconSize?H(g.iconSize):H(0,0),P=g.iconAnchor?H(g.iconAnchor):H(0,0);u.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:x.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zp(u,g){return new Va(u,g)}var Vr=Mr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return _(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qs=Vr.extend({options:{fill:!0,radius:10},initialize:function(u,g){_(this,g),this._latlng=ue(u),this._radius=this.options.radius},setLatLng:function(u){var g=this._latlng;return this._latlng=ue(u),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var g=u&&u.radius||this._radius;return Vr.prototype.setStyle.call(this,u),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,g=this._radiusY||u,x=this._clickTolerance(),P=[u+x,g+x];this._pxBounds=new W(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nh(u,g){return new qs(u,g)}var Xo=qs.extend({initialize:function(u,g,x){if(typeof g=="number"&&(g=r({},x,{radius:g})),_(this,g),this._latlng=ue(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Vr.prototype.setStyle,_project:function(){var u=this._latlng.lng,g=this._latlng.lat,x=this._map,P=x.options.crs;if(P.distance===_e.distance){var D=Math.PI/180,V=this._mRadius/_e.R/D,le=x.project([g+V,u]),we=x.project([g-V,u]),Ce=le.add(we).divideBy(2),Ye=x.unproject(Ce).lat,lt=Math.acos((Math.cos(V*D)-Math.sin(g*D)*Math.sin(Ye*D))/(Math.cos(g*D)*Math.cos(Ye*D)))/D;(isNaN(lt)||lt===0)&&(lt=V/Math.cos(Math.PI/180*g)),this._point=Ce.subtract(x.getPixelOrigin()),this._radius=isNaN(lt)?0:Ce.x-x.project([Ye,u-lt]).x,this._radiusY=Ce.y-le.y}else{var Tt=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(Tt).x}this._updateBounds()}});function dc(u,g,x){return new Xo(u,g,x)}var Ms=Vr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,g){_(this,g),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var g=1/0,x=null,P=Ss,D,V,le=0,we=this._parts.length;le<we;le++)for(var Ce=this._parts[le],Ye=1,lt=Ce.length;Ye<lt;Ye++){D=Ce[Ye-1],V=Ce[Ye];var Tt=P(u,D,V,!0);Tt<g&&(g=Tt,x=P(u,D,V))}return x&&(x.distance=Math.sqrt(g)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,g){return g=g||this._defaultShape(),u=ue(u),g.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new se,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var g=[],x=Vi(u),P=0,D=u.length;P<D;P++)x?(g[P]=ue(u[P]),this._bounds.extend(g[P])):g[P]=this._convertLatLngs(u[P]);return g},_project:function(){var u=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),g=new F(u,u);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(u,g,x){var P=u[0]instanceof Z,D=u.length,V,le;if(P){for(le=[],V=0;V<D;V++)le[V]=this._map.latLngToLayerPoint(u[V]),x.extend(le[V]);g.push(le)}else for(V=0;V<D;V++)this._projectLatlngs(u[V],g,x)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,x,P,D,V,le,we,Ce;for(x=0,D=0,V=this._rings.length;x<V;x++)for(Ce=this._rings[x],P=0,le=Ce.length;P<le-1;P++)we=$f(Ce[P],Ce[P+1],u,P,!0),we&&(g[D]=g[D]||[],g[D].push(we[0]),(we[1]!==Ce[P+1]||P===le-2)&&(g[D].push(we[1]),D++))}},_simplifyPoints:function(){for(var u=this._parts,g=this.options.smoothFactor,x=0,P=u.length;x<P;x++)u[x]=Jf(u[x],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,g){var x,P,D,V,le,we,Ce=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(x=0,V=this._parts.length;x<V;x++)for(we=this._parts[x],P=0,le=we.length,D=le-1;P<le;D=P++)if(!(!g&&P===0)&&Xl(u,we[D],we[P])<=Ce)return!0;return!1}});function Xp(u,g){return new Ms(u,g)}Ms._flat=Kl;var ns=Ms.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var g=Ms.prototype._convertLatLngs.call(this,u),x=g.length;return x>=2&&g[0]instanceof Z&&g[0].equals(g[x-1])&&g.pop(),g},_setLatLngs:function(u){Ms.prototype._setLatLngs.call(this,u),Vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,g=this.options.weight,x=new F(g,g);if(u=new W(u.min.subtract(x),u.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,D=this._rings.length,V;P<D;P++)V=Kf(this._rings[P],u,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var g=!1,x,P,D,V,le,we,Ce,Ye;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(V=0,Ce=this._parts.length;V<Ce;V++)for(x=this._parts[V],le=0,Ye=x.length,we=Ye-1;le<Ye;we=le++)P=x[le],D=x[we],P.y>u.y!=D.y>u.y&&u.x<(D.x-P.x)*(u.y-P.y)/(D.y-P.y)+P.x&&(g=!g);return g||Ms.prototype._containsPoint.call(this,u,!0)}});function Yp(u,g){return new ns(u,g)}var Tr=en.extend({initialize:function(u,g){_(this,g),this._layers={},u&&this.addData(u)},addData:function(u){var g=b(u)?u:u.features,x,P,D;if(g){for(x=0,P=g.length;x<P;x++)D=g[x],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var V=this.options;if(V.filter&&!V.filter(u))return this;var le=Gi(u,V);return le?(le.feature=Ha(u),le.defaultOptions=le.options,this.resetStyle(le),V.onEachFeature&&V.onEachFeature(u,le),this.addLayer(le)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=r({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(g){this._setLayerStyle(g,u)},this)},_setLayerStyle:function(u,g){u.setStyle&&(typeof g=="function"&&(g=g(u.feature)),u.setStyle(g))}});function Gi(u,g){var x=u.type==="Feature"?u.geometry:u,P=x?x.coordinates:null,D=[],V=g&&g.pointToLayer,le=g&&g.coordsToLatLng||Mo,we,Ce,Ye,lt;if(!P&&!x)return null;switch(x.type){case"Point":return we=le(P),Ga(V,u,we,g);case"MultiPoint":for(Ye=0,lt=P.length;Ye<lt;Ye++)we=le(P[Ye]),D.push(Ga(V,u,we,g));return new en(D);case"LineString":case"MultiLineString":return Ce=Er(P,x.type==="LineString"?0:1,le),new Ms(Ce,g);case"Polygon":case"MultiPolygon":return Ce=Er(P,x.type==="Polygon"?1:2,le),new ns(Ce,g);case"GeometryCollection":for(Ye=0,lt=x.geometries.length;Ye<lt;Ye++){var Tt=Gi({geometry:x.geometries[Ye],type:"Feature",properties:u.properties},g);Tt&&D.push(Tt)}return new en(D);case"FeatureCollection":for(Ye=0,lt=x.features.length;Ye<lt;Ye++){var Xt=Gi(x.features[Ye],g);Xt&&D.push(Xt)}return new en(D);default:throw new Error("Invalid GeoJSON object.")}}function Ga(u,g,x,P){return u?u(g,x):new Va(x,P&&P.markersInheritOptions&&P)}function Mo(u){return new Z(u[1],u[0],u[2])}function Er(u,g,x){for(var P=[],D=0,V=u.length,le;D<V;D++)le=g?Er(u[D],g-1,x):(x||Mo)(u[D]),P.push(le);return P}function Ql(u,g){return u=ue(u),u.alt!==void 0?[m(u.lng,g),m(u.lat,g),m(u.alt,g)]:[m(u.lng,g),m(u.lat,g)]}function Ks(u,g,x,P){for(var D=[],V=0,le=u.length;V<le;V++)D.push(g?Ks(u[V],Vi(u[V])?0:g-1,x,P):Ql(u[V],P));return!g&&x&&D.length>0&&D.push(D[0].slice()),D}function Yo(u,g){return u.feature?r({},u.feature,{geometry:g}):Ha(g)}function Ha(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var vn={toGeoJSON:function(u){return Yo(this,{type:"Point",coordinates:Ql(this.getLatLng(),u)})}};Va.include(vn),Xo.include(vn),qs.include(vn),Ms.include({toGeoJSON:function(u){var g=!Vi(this._latlngs),x=Ks(this._latlngs,g?1:0,!1,u);return Yo(this,{type:(g?"Multi":"")+"LineString",coordinates:x})}}),ns.include({toGeoJSON:function(u){var g=!Vi(this._latlngs),x=g&&!Vi(this._latlngs[0]),P=Ks(this._latlngs,x?2:g?1:0,!0,u);return g||(P=[P]),Yo(this,{type:(x?"Multi":"")+"Polygon",coordinates:P})}}),ui.include({toMultiPoint:function(u){var g=[];return this.eachLayer(function(x){g.push(x.toGeoJSON(u).geometry.coordinates)}),Yo(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(u){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(u);var x=g==="GeometryCollection",P=[];return this.eachLayer(function(D){if(D.toGeoJSON){var V=D.toGeoJSON(u);if(x)P.push(V.geometry);else{var le=Ha(V);le.type==="FeatureCollection"?P.push.apply(P,le.features):P.push(le)}}}),x?Yo(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function $l(u,g){return new Tr(u,g)}var ih=$l,Wa=Mr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,g,x){this._url=u,this._bounds=ee(g),_(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(wt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&ai(this._image),this},bringToBack:function(){return this._map&&vi(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ee(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",g=this._image=u?this._url:yt("img");if(wt(g,"leaflet-image-layer"),this._zoomAnimated&&wt(g,"leaflet-zoom-animated"),this.options.className&&wt(g,this.options.className),g.onselectstart=p,g.onmousemove=p,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(u){var g=this._map.getZoomScale(u.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;mr(this._image,x,g)},_reset:function(){var u=this._image,g=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=g.getSize();An(u,g.min),u.style.width=x.x+"px",u.style.height=x.y+"px"},_updateOpacity:function(){Mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),pc=function(u,g,x){return new Wa(u,g,x)},Pr=Wa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",g=this._image=u?this._url:yt("video");if(wt(g,"leaflet-image-layer"),this._zoomAnimated&&wt(g,"leaflet-zoom-animated"),this.options.className&&wt(g,this.options.className),g.onselectstart=p,g.onmousemove=p,g.onloadeddata=o(this.fire,this,"load"),u){for(var x=g.getElementsByTagName("source"),P=[],D=0;D<x.length;D++)P.push(x[D].src);this._url=x.length>0?P:[g.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var le=yt("source");le.src=this._url[V],g.appendChild(le)}}});function ja(u,g,x){return new Pr(u,g,x)}var Ln=Wa.extend({_initImage:function(){var u=this._image=this._url;wt(u,"leaflet-image-layer"),this._zoomAnimated&&wt(u,"leaflet-zoom-animated"),this.options.className&&wt(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function Ri(u,g,x){return new Ln(u,g,x)}var dn=Mr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,g){u&&(u instanceof Z||b(u))?(this._latlng=ue(u),_(this,g)):(_(this,u),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Mn(this._container,1),this.bringToFront(),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Mn(this._container,0),this._removeTimeout=setTimeout(o(Lt,void 0,this._container),200)):Lt(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ue(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ai(this._container),this},bringToBack:function(){return this._map&&vi(this._container),this},_prepareOpen:function(u){var g=this._source;if(!g._map)return!1;if(g instanceof en){g=null;var x=this._source._layers;for(var P in x)if(x[P]._map){g=x[P];break}if(!g)return!1;this._source=g}if(!u)if(g.getCenter)u=g.getCenter();else if(g.getLatLng)u=g.getLatLng();else if(g.getBounds)u=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")u.innerHTML=g;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),g=H(this.options.offset),x=this._getAnchor();this._zoomAnimated?An(this._container,u.add(x)):g=g.add(u).add(x);var P=this._containerBottom=-g.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=P+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});Vt.include({_initOverlay:function(u,g,x,P){var D=g;return D instanceof u||(D=new u(P).setContent(g)),x&&D.setLatLng(x),D}}),Mr.include({_initOverlay:function(u,g,x,P){var D=x;return D instanceof u?(_(D,P),D._source=this):(D=g&&!P?g:new u(P,this),D.setContent(x)),D}});var qo=dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,dn.prototype.openOn.call(this,u)},onAdd:function(u){dn.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vr||this._source.on("preclick",es))},onRemove:function(u){dn.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vr||this._source.off("preclick",es))},getEvents:function(){var u=dn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",g=this._container=yt("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=yt("div",u+"-content-wrapper",g);if(this._contentNode=yt("div",u+"-content",x),_i(g),Ws(this._contentNode),Et(g,"contextmenu",es),this._tipContainer=yt("div",u+"-tip-container",g),this._tip=yt("div",u+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=yt("a",u+"-close-button",g);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',Et(P,"click",function(D){Nn(D),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,g=u.style;g.width="",g.whiteSpace="nowrap";var x=u.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),g.width=x+1+"px",g.whiteSpace="",g.height="";var P=u.offsetHeight,D=this.options.maxHeight,V="leaflet-popup-scrolled";D&&P>D?(g.height=D+"px",wt(u,V)):mn(u,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),x=this._getAnchor();An(this._container,g.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,g=parseInt(qt(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+g,P=this._containerWidth,D=new F(this._containerLeft,-x-this._containerBottom);D._add(Ui(this._container));var V=u.layerPointToContainerPoint(D),le=H(this.options.autoPanPadding),we=H(this.options.autoPanPaddingTopLeft||le),Ce=H(this.options.autoPanPaddingBottomRight||le),Ye=u.getSize(),lt=0,Tt=0;V.x+P+Ce.x>Ye.x&&(lt=V.x+P-Ye.x+Ce.x),V.x-lt-we.x<0&&(lt=V.x-we.x),V.y+x+Ce.y>Ye.y&&(Tt=V.y+x-Ye.y+Ce.y),V.y-Tt-we.y<0&&(Tt=V.y-we.y),(lt||Tt)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([lt,Tt]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),eu=function(u,g){return new qo(u,g)};Vt.mergeOptions({closePopupOnClick:!0}),Vt.include({openPopup:function(u,g,x){return this._initOverlay(qo,u,g,x).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Mr.include({bindPopup:function(u,g){return this._popup=this._initOverlay(qo,this._popup,u,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof en||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){vs(u);var g=u.layer||u.target;if(this._popup._source===g&&!(g instanceof Vr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=g,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var bo=dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){dn.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){dn.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=dn.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",g=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var g,x,P=this._map,D=this._container,V=P.latLngToContainerPoint(P.getCenter()),le=P.layerPointToContainerPoint(u),we=this.options.direction,Ce=D.offsetWidth,Ye=D.offsetHeight,lt=H(this.options.offset),Tt=this._getAnchor();we==="top"?(g=Ce/2,x=Ye):we==="bottom"?(g=Ce/2,x=0):we==="center"?(g=Ce/2,x=Ye/2):we==="right"?(g=0,x=Ye/2):we==="left"?(g=Ce,x=Ye/2):le.x<V.x?(we="right",g=0,x=Ye/2):(we="left",g=Ce+(lt.x+Tt.x)*2,x=Ye/2),u=u.subtract(H(g,x,!0)).add(lt).add(Tt),mn(D,"leaflet-tooltip-right"),mn(D,"leaflet-tooltip-left"),mn(D,"leaflet-tooltip-top"),mn(D,"leaflet-tooltip-bottom"),wt(D,"leaflet-tooltip-"+we),An(D,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Mn(this._container,u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(g)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),W0=function(u,g){return new bo(u,g)};Vt.include({openTooltip:function(u,g,x){return this._initOverlay(bo,u,g,x).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Mr.include({bindTooltip:function(u,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bo,this._tooltip,u,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var g=u?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[g](x),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof en||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&(Et(g,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Et(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var g=u.latlng,x,P;this._tooltip.options.sticky&&u.originalEvent&&(x=this._map.mouseEventToContainerPoint(u.originalEvent),P=this._map.containerPointToLayerPoint(x),g=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(g)}});var Si=Li.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var g=u&&u.tagName==="DIV"?u:document.createElement("div"),x=this.options;if(x.html instanceof Element?(Cn(g),g.appendChild(x.html)):g.innerHTML=x.html!==!1?x.html:"",x.bgPos){var P=H(x.bgPos);g.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function rh(u){return new Si(u)}Li.Default=Ba;var Ko=Mr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){_(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Lt(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ai(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof F?u:new F(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var g=this.getPane().children,x=-u(-1/0,1/0),P=0,D=g.length,V;P<D;P++)V=g[P].style.zIndex,g[P]!==this._container&&V&&(x=u(x,+V));isFinite(x)&&(this.options.zIndex=x+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe.ielt9){Mn(this._container,this.options.opacity);var u=+new Date,g=!1,x=!1;for(var P in this._tiles){var D=this._tiles[P];if(!(!D.current||!D.loaded)){var V=Math.min(1,(u-D.loaded)/200);Mn(D.el,V),V<1?g=!0:(D.active?x=!0:this._onOpaqueTile(D),D.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),g&&(Y(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,g=this.options.maxZoom;if(u!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===u?(this._levels[x].el.style.zIndex=g-Math.abs(u-x),this._onUpdateLevel(x)):(Lt(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var P=this._levels[u],D=this._map;return P||(P=this._levels[u]={},P.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=g,P.origin=D.project(D.unproject(D.getPixelOrigin()),u).round(),P.zoom=u,this._setZoomTransform(P,D.getCenter(),D.getZoom()),p(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,g,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)g=this._tiles[u],g.retain=g.current;for(u in this._tiles)if(g=this._tiles[u],g.current&&!g.active){var P=g.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var g in this._tiles)this._tiles[g].coords.z===u&&this._removeTile(g)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Lt(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,g,x,P){var D=Math.floor(u/2),V=Math.floor(g/2),le=x-1,we=new F(+D,+V);we.z=+le;var Ce=this._tileCoordsToKey(we),Ye=this._tiles[Ce];return Ye&&Ye.active?(Ye.retain=!0,!0):(Ye&&Ye.loaded&&(Ye.retain=!0),le>P?this._retainParent(D,V,le,P):!1)},_retainChildren:function(u,g,x,P){for(var D=2*u;D<2*u+2;D++)for(var V=2*g;V<2*g+2;V++){var le=new F(D,V);le.z=x+1;var we=this._tileCoordsToKey(le),Ce=this._tiles[we];if(Ce&&Ce.active){Ce.retain=!0;continue}else Ce&&Ce.loaded&&(Ce.retain=!0);x+1<P&&this._retainChildren(D,V,x+1,P)}},_resetView:function(u){var g=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var g=this.options;return g.minNativeZoom!==void 0&&u<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<u?g.maxNativeZoom:u},_setView:function(u,g,x,P){var D=Math.round(g);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var V=this.options.updateWhenZooming&&D!==this._tileZoom;(!P||V)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(u),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(u,g)},_setZoomTransforms:function(u,g){for(var x in this._levels)this._setZoomTransform(this._levels[x],u,g)},_setZoomTransform:function(u,g,x){var P=this._map.getZoomScale(x,u.zoom),D=u.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(g,x)).round();fe.any3d?mr(u.el,D,P):An(u.el,D)},_resetGrid:function(){var u=this._map,g=u.options.crs,x=this._tileSize=this.getTileSize(),P=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,g.wrapLng[0]],P).x/x.x),Math.ceil(u.project([0,g.wrapLng[1]],P).x/x.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([g.wrapLat[0],0],P).y/x.x),Math.ceil(u.project([g.wrapLat[1],0],P).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var g=this._map,x=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),P=g.getZoomScale(x,this._tileZoom),D=g.project(u,this._tileZoom).floor(),V=g.getSize().divideBy(P*2);return new W(D.subtract(V),D.add(V))},_update:function(u){var g=this._map;if(g){var x=this._clampZoom(g.getZoom());if(u===void 0&&(u=g.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(u),D=this._pxBoundsToTileRange(P),V=D.getCenter(),le=[],we=this.options.keepBuffer,Ce=new W(D.getBottomLeft().subtract([we,-we]),D.getTopRight().add([we,-we]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ye in this._tiles){var lt=this._tiles[Ye].coords;(lt.z!==this._tileZoom||!Ce.contains(new F(lt.x,lt.y)))&&(this._tiles[Ye].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(u,x);return}for(var Tt=D.min.y;Tt<=D.max.y;Tt++)for(var Xt=D.min.x;Xt<=D.max.x;Xt++){var Hi=new F(Xt,Tt);if(Hi.z=this._tileZoom,!!this._isValidTile(Hi)){var jn=this._tiles[this._tileCoordsToKey(Hi)];jn?jn.current=!0:le.push(Hi)}}if(le.sort(function(tr,Jo){return tr.distanceTo(V)-Jo.distanceTo(V)}),le.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var er=document.createDocumentFragment();for(Xt=0;Xt<le.length;Xt++)this._addTile(le[Xt],er);this._level.el.appendChild(er)}}}},_isValidTile:function(u){var g=this._map.options.crs;if(!g.infinite){var x=this._globalTileRange;if(!g.wrapLng&&(u.x<x.min.x||u.x>x.max.x)||!g.wrapLat&&(u.y<x.min.y||u.y>x.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(u);return ee(this.options.bounds).overlaps(P)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var g=this._map,x=this.getTileSize(),P=u.scaleBy(x),D=P.add(x),V=g.unproject(P,u.z),le=g.unproject(D,u.z);return[V,le]},_tileCoordsToBounds:function(u){var g=this._tileCoordsToNwSe(u),x=new se(g[0],g[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var g=u.split(":"),x=new F(+g[0],+g[1]);return x.z=+g[2],x},_removeTile:function(u){var g=this._tiles[u];g&&(Lt(g.el),delete this._tiles[u],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){wt(u,"leaflet-tile");var g=this.getTileSize();u.style.width=g.x+"px",u.style.height=g.y+"px",u.onselectstart=p,u.onmousemove=p,fe.ielt9&&this.options.opacity<1&&Mn(u,this.options.opacity)},_addTile:function(u,g){var x=this._getTilePos(u),P=this._tileCoordsToKey(u),D=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(D),this.createTile.length<2&&$(o(this._tileReady,this,u,null,D)),An(D,x),this._tiles[P]={el:D,coords:u,current:!0},g.appendChild(D),this.fire("tileloadstart",{tile:D,coords:u})},_tileReady:function(u,g,x){g&&this.fire("tileerror",{error:g,tile:x,coords:u});var P=this._tileCoordsToKey(u);x=this._tiles[P],x&&(x.loaded=+new Date,this._map._fadeAnimated?(Mn(x.el,0),Y(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),g||(wt(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var g=new F(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return g.z=u.z,g},_pxBoundsToTileRange:function(u){var g=this.getTileSize();return new W(u.min.unscaleBy(g).floor(),u.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function sh(u){return new Ko(u)}var $i=Ko.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,g){this._url=u,g=_(this,g),g.detectRetina&&fe.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,g){return this._url===u&&g===void 0&&(g=!0),this._url=u,g||this.redraw(),this},createTile:function(u,g){var x=document.createElement("img");return Et(x,"load",o(this._tileOnLoad,this,g,x)),Et(x,"error",o(this._tileOnError,this,g,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(u),x},getTileUrl:function(u){var g={r:fe.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-u.y;this.options.tms&&(g.y=x),g["-y"]=x}return M(this._url,r(g,this.options))},_tileOnLoad:function(u,g){fe.ielt9?setTimeout(o(u,this,null,g),0):u(null,g)},_tileOnError:function(u,g,x){var P=this.options.errorTileUrl;P&&g.getAttribute("src")!==P&&(g.src=P),u(x,g)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,g=this.options.maxZoom,x=this.options.zoomReverse,P=this.options.zoomOffset;return x&&(u=g-u),u+P},_getSubdomain:function(u){var g=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var u,g;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(g=this._tiles[u].el,g.onload=p,g.onerror=p,!g.complete)){g.src=k;var x=this._tiles[u].coords;Lt(g),delete this._tiles[u],this.fire("tileabort",{tile:g,coords:x})}},_removeTile:function(u){var g=this._tiles[u];if(g)return g.el.setAttribute("src",k),Ko.prototype._removeTile.call(this,u)},_tileReady:function(u,g,x){if(!(!this._map||x&&x.getAttribute("src")===k))return Ko.prototype._tileReady.call(this,u,g,x)}});function is(u,g){return new $i(u,g)}var To=$i.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,g){this._url=u;var x=r({},this.defaultWmsParams);for(var P in g)P in this.options||(x[P]=g[P]);g=_(this,g);var D=g.detectRetina&&fe.retina?2:1,V=this.getTileSize();x.width=V.x*D,x.height=V.y*D,this.wmsParams=x},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,$i.prototype.onAdd.call(this,u)},getTileUrl:function(u){var g=this._tileCoordsToNwSe(u),x=this._crs,P=j(x.project(g[0]),x.project(g[1])),D=P.min,V=P.max,le=(this._wmsVersion>=1.3&&this._crs===eh?[D.y,D.x,V.y,V.x]:[D.x,D.y,V.x,V.y]).join(","),we=$i.prototype.getTileUrl.call(this,u);return we+S(this.wmsParams,we,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+le},setParams:function(u,g){return r(this.wmsParams,u),g||this.redraw(),this}});function mc(u,g){return new To(u,g)}$i.WMS=To,is.wms=mc;var Gr=Mr.extend({options:{padding:.1},initialize:function(u){_(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),wt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,g){var x=this._map.getZoomScale(g,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,g),V=P.multiplyBy(-x).add(D).subtract(this._map._getNewPixelOrigin(u,g));fe.any3d?mr(this._container,V,x):An(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,g=this._map.getSize(),x=this._map.containerPointToLayerPoint(g.multiplyBy(-u)).round();this._bounds=new W(x,x.add(g.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),oh=Gr.extend({options:{tolerance:0},getEvents:function(){var u=Gr.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Et(u,"mousemove",this._onMouseMove,this),Et(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Et(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,Lt(this._container),fn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var g in this._layers)u=this._layers[g],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gr.prototype._update.call(this);var u=this._bounds,g=this._container,x=u.getSize(),P=fe.retina?2:1;An(g,u.min),g.width=P*x.x,g.height=P*x.y,g.style.width=x.x+"px",g.style.height=x.y+"px",fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var g=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var g=u._order,x=g.next,P=g.prev;x?x.prev=P:this._drawLast=P,P?P.next=x:this._drawFirst=x,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var g=u.options.dashArray.split(/[, ]+/),x=[],P,D;for(D=0;D<g.length;D++){if(P=Number(g[D]),isNaN(P))return;x.push(P)}u.options._dashArray=x}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var g=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(u._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(u._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var g=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,g=this._redrawBounds;if(this._ctx.save(),g){var x=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)u=P.layer,(!g||u._pxBounds&&u._pxBounds.intersects(g))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,g){if(this._drawing){var x,P,D,V,le=u._parts,we=le.length,Ce=this._ctx;if(we){for(Ce.beginPath(),x=0;x<we;x++){for(P=0,D=le[x].length;P<D;P++)V=le[x][P],Ce[P?"lineTo":"moveTo"](V.x,V.y);g&&Ce.closePath()}this._fillStroke(Ce,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var g=u._point,x=this._ctx,P=Math.max(Math.round(u._radius),1),D=(Math.max(Math.round(u._radiusY),1)||P)/P;D!==1&&(x.save(),x.scale(1,D)),x.beginPath(),x.arc(g.x,g.y/D,P,0,Math.PI*2,!1),D!==1&&x.restore(),this._fillStroke(x,u)}},_fillStroke:function(u,g){var x=g.options;x.fill&&(u.globalAlpha=x.fillOpacity,u.fillStyle=x.fillColor||x.color,u.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(u.setLineDash&&u.setLineDash(g.options&&g.options._dashArray||[]),u.globalAlpha=x.opacity,u.lineWidth=x.weight,u.strokeStyle=x.color,u.lineCap=x.lineCap,u.lineJoin=x.lineJoin,u.stroke())},_onClick:function(u){for(var g=this._map.mouseEventToLayerPoint(u),x,P,D=this._drawFirst;D;D=D.next)x=D.layer,x.options.interactive&&x._containsPoint(g)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(x))&&(P=x);this._fireEvent(P?[P]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,g)}},_handleMouseOut:function(u){var g=this._hoveredLayer;g&&(mn(this._container,"leaflet-interactive"),this._fireEvent([g],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,g){if(!this._mouseHoverThrottled){for(var x,P,D=this._drawFirst;D;D=D.next)x=D.layer,x.options.interactive&&x._containsPoint(g)&&(P=x);P!==this._hoveredLayer&&(this._handleMouseOut(u),P&&(wt(this._container,"leaflet-interactive"),this._fireEvent([P],u,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,g,x){this._map._fireDOMEvent(g,x||g.type,u)},_bringToFront:function(u){var g=u._order;if(g){var x=g.next,P=g.prev;if(x)x.prev=P;else return;P?P.next=x:x&&(this._drawFirst=x),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(u)}},_bringToBack:function(u){var g=u._order;if(g){var x=g.next,P=g.prev;if(P)P.next=x;else return;x?x.prev=P:P&&(this._drawLast=P),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(u)}}});function ah(u){return fe.canvas?new oh(u):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qp={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gr.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var g=u._container=Za("shape");wt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",u._path=Za("path"),g.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var g=u._container;this._container.appendChild(g),u.options.interactive&&u.addInteractiveTarget(g)},_removePath:function(u){var g=u._container;Lt(g),u.removeInteractiveTarget(g),delete this._layers[l(u)]},_updateStyle:function(u){var g=u._stroke,x=u._fill,P=u.options,D=u._container;D.stroked=!!P.stroke,D.filled=!!P.fill,P.stroke?(g||(g=u._stroke=Za("stroke")),D.appendChild(g),g.weight=P.weight+"px",g.color=P.color,g.opacity=P.opacity,P.dashArray?g.dashStyle=b(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=P.lineCap.replace("butt","flat"),g.joinstyle=P.lineJoin):g&&(D.removeChild(g),u._stroke=null),P.fill?(x||(x=u._fill=Za("fill")),D.appendChild(x),x.color=P.fillColor||P.color,x.opacity=P.fillOpacity):x&&(D.removeChild(x),u._fill=null)},_updateCircle:function(u){var g=u._point.round(),x=Math.round(u._radius),P=Math.round(u._radiusY||x);this._setPath(u,u._empty()?"M0 0":"AL "+g.x+","+g.y+" "+x+","+P+" 0,"+65535*360)},_setPath:function(u,g){u._path.v=g},_bringToFront:function(u){ai(u._container)},_bringToBack:function(u){vi(u._container)}},tu=fe.vml?Za:Ne,Xa=Gr.extend({_initContainer:function(){this._container=tu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Lt(this._container),fn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gr.prototype._update.call(this);var u=this._bounds,g=u.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,x.setAttribute("width",g.x),x.setAttribute("height",g.y)),An(x,u.min),x.setAttribute("viewBox",[u.min.x,u.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(u){var g=u._path=tu("path");u.options.className&&wt(g,u.options.className),u.options.interactive&&wt(g,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Lt(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var g=u._path,x=u.options;g&&(x.stroke?(g.setAttribute("stroke",x.color),g.setAttribute("stroke-opacity",x.opacity),g.setAttribute("stroke-width",x.weight),g.setAttribute("stroke-linecap",x.lineCap),g.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?g.setAttribute("stroke-dasharray",x.dashArray):g.removeAttribute("stroke-dasharray"),x.dashOffset?g.setAttribute("stroke-dashoffset",x.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),x.fill?(g.setAttribute("fill",x.fillColor||x.color),g.setAttribute("fill-opacity",x.fillOpacity),g.setAttribute("fill-rule",x.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(u,g){this._setPath(u,De(u._parts,g))},_updateCircle:function(u){var g=u._point,x=Math.max(Math.round(u._radius),1),P=Math.max(Math.round(u._radiusY),1)||x,D="a"+x+","+P+" 0 1,0 ",V=u._empty()?"M0 0":"M"+(g.x-x)+","+g.y+D+x*2+",0 "+D+-x*2+",0 ";this._setPath(u,V)},_setPath:function(u,g){u._path.setAttribute("d",g)},_bringToFront:function(u){ai(u._path)},_bringToBack:function(u){vi(u._path)}});fe.vml&&Xa.include(qp);function gc(u){return fe.svg||fe.vml?new Xa(u):null}Vt.include({getRenderer:function(u){var g=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var g=this._paneRenderers[u];return g===void 0&&(g=this._createRenderer({pane:u}),this._paneRenderers[u]=g),g},_createRenderer:function(u){return this.options.preferCanvas&&ah(u)||gc(u)}});var Ya=ns.extend({initialize:function(u,g){ns.prototype.initialize.call(this,this._boundsToLatLngs(u),g)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ee(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Kp(u,g){return new Ya(u,g)}Xa.create=tu,Xa.pointsToPath=De,Tr.geometryToLayer=Gi,Tr.coordsToLatLng=Mo,Tr.coordsToLatLngs=Er,Tr.latLngToCoords=Ql,Tr.latLngsToCoords=Ks,Tr.getFeature=Yo,Tr.asFeature=Ha,Vt.mergeOptions({boxZoom:!0});var nu=on.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){fn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),gr(),Vo(),this._startPoint=this._map.mouseEventToContainerPoint(u),Et(document,{contextmenu:vs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),wt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var g=new W(this._point,this._startPoint),x=g.getSize();An(this._box,g.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(Lt(this._box),mn(this._container,"leaflet-crosshair")),vr(),$r(),fn(document,{contextmenu:vs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vt.addInitHook("addHandler","boxZoom",nu),Vt.mergeOptions({doubleClickZoom:!0});var iu=on.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var g=this._map,x=g.getZoom(),P=g.options.zoomDelta,D=u.originalEvent.shiftKey?x-P:x+P;g.options.doubleClickZoom==="center"?g.setZoom(D):g.setZoomAround(u.containerPoint,D)}});Vt.addInitHook("addHandler","doubleClickZoom",iu),Vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vc=on.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new _s(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}wt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=ee(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var g=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(g),this._prunePositions(g)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,g){return u-(u-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;u.x<g.min.x&&(u.x=this._viscousLimit(u.x,g.min.x)),u.y<g.min.y&&(u.y=this._viscousLimit(u.y,g.min.y)),u.x>g.max.x&&(u.x=this._viscousLimit(u.x,g.max.x)),u.y>g.max.y&&(u.y=this._viscousLimit(u.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,g=Math.round(u/2),x=this._initialWorldOffset,P=this._draggable._newPos.x,D=(P-g+x)%u+g-x,V=(P+g+x)%u-g-x,le=Math.abs(D+x)<Math.abs(V+x)?D:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=le},_onDragEnd:function(u){var g=this._map,x=g.options,P=!x.inertia||u.noInertia||this._times.length<2;if(g.fire("dragend",u),P)g.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,le=x.easeLinearity,we=D.multiplyBy(le/V),Ce=we.distanceTo([0,0]),Ye=Math.min(x.inertiaMaxSpeed,Ce),lt=we.multiplyBy(Ye/Ce),Tt=Ye/(x.inertiaDeceleration*le),Xt=lt.multiplyBy(-Tt/2).round();!Xt.x&&!Xt.y?g.fire("moveend"):(Xt=g._limitOffset(Xt,g.options.maxBounds),$(function(){g.panBy(Xt,{duration:Tt,easeLinearity:le,noMoveStart:!0,animate:!0})}))}}});Vt.addInitHook("addHandler","dragging",vc),Vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qa=on.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Et(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),fn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,g=document.documentElement,x=u.scrollTop||g.scrollTop,P=u.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(P,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var g=this._panKeys={},x=this.keyCodes,P,D;for(P=0,D=x.left.length;P<D;P++)g[x.left[P]]=[-1*u,0];for(P=0,D=x.right.length;P<D;P++)g[x.right[P]]=[u,0];for(P=0,D=x.down.length;P<D;P++)g[x.down[P]]=[0,u];for(P=0,D=x.up.length;P<D;P++)g[x.up[P]]=[0,-1*u]},_setZoomDelta:function(u){var g=this._zoomKeys={},x=this.keyCodes,P,D;for(P=0,D=x.zoomIn.length;P<D;P++)g[x.zoomIn[P]]=u;for(P=0,D=x.zoomOut.length;P<D;P++)g[x.zoomOut[P]]=-u},_addHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){fn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var g=u.keyCode,x=this._map,P;if(g in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(P=this._panKeys[g],u.shiftKey&&(P=H(P).multiplyBy(3)),x.options.maxBounds&&(P=x._limitOffset(H(P),x.options.maxBounds)),x.options.worldCopyJump){var D=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(P)));x.panTo(D)}else x.panBy(P)}else if(g in this._zoomKeys)x.setZoom(x.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;vs(u)}}});Vt.addInitHook("addHandler","keyboard",qa),Vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var lh=on.extend({addHooks:function(){Et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){fn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var g=_r(u),x=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var P=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),P),vs(u)},_performZoom:function(){var u=this._map,g=u.getZoom(),x=this._map.options.zoomSnap||0;u._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,V=x?Math.ceil(D/x)*x:D,le=u._limitZoom(g+(this._delta>0?V:-V))-g;this._delta=0,this._startTime=null,le&&(u.options.scrollWheelZoom==="center"?u.setZoom(g+le):u.setZoomAround(this._lastMousePos,g+le))}});Vt.addInitHook("addHandler","scrollWheelZoom",lh);var Jp=600;Vt.mergeOptions({tapHold:fe.touchNative&&fe.safari&&fe.mobile,tapTolerance:15});var uh=on.extend({addHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){fn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var g=u.touches[0];this._startPos=this._newPos=new F(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Et(document,"touchend",Nn),Et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),Jp),Et(document,"touchend touchcancel contextmenu",this._cancel,this),Et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){fn(document,"touchend",Nn),fn(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),fn(document,"touchend touchcancel contextmenu",this._cancel,this),fn(document,"touchmove",this._onMove,this)},_onMove:function(u){var g=u.touches[0];this._newPos=new F(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,g){var x=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});x._simulated=!0,g.target.dispatchEvent(x)}});Vt.addInitHook("addHandler","tapHold",uh),Vt.mergeOptions({touchZoom:fe.touch,bounceAtZoomLimits:!0});var ch=on.extend({addHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),fn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var g=this._map;if(!(!u.touches||u.touches.length!==2||g._animatingZoom||this._zooming)){var x=g.mouseEventToContainerPoint(u.touches[0]),P=g.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(x.add(P)._divideBy(2))),this._startDist=x.distanceTo(P),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend touchcancel",this._onTouchEnd,this),Nn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var g=this._map,x=g.mouseEventToContainerPoint(u.touches[0]),P=g.mouseEventToContainerPoint(u.touches[1]),D=x.distanceTo(P)/this._startDist;if(this._zoom=g.getScaleZoom(D,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&D<1||this._zoom>g.getMaxZoom()&&D>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var V=x._add(P)._divideBy(2)._subtract(this._centerPoint);if(D===1&&V.x===0&&V.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var le=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(le,this,!0),Nn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),fn(document,"touchmove",this._onTouchMove,this),fn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vt.addInitHook("addHandler","touchZoom",ch),Vt.BoxZoom=nu,Vt.DoubleClickZoom=iu,Vt.Drag=vc,Vt.Keyboard=qa,Vt.ScrollWheelZoom=lh,Vt.TapHold=uh,Vt.TouchZoom=ch,t.Bounds=W,t.Browser=fe,t.CRS=de,t.Canvas=oh,t.Circle=Xo,t.CircleMarker=qs,t.Class=J,t.Control=xi,t.DivIcon=Si,t.DivOverlay=dn,t.DomEvent=Zl,t.DomUtil=Gs,t.Draggable=_s,t.Evented=ye,t.FeatureGroup=en,t.GeoJSON=Tr,t.GridLayer=Ko,t.Handler=on,t.Icon=Li,t.ImageOverlay=Wa,t.LatLng=Z,t.LatLngBounds=se,t.Layer=Mr,t.LayerGroup=ui,t.LineUtil=Br,t.Map=Vt,t.Marker=Va,t.Mixin=wr,t.Path=Vr,t.Point=F,t.PolyUtil=cc,t.Polygon=ns,t.Polyline=Ms,t.Popup=qo,t.PosAnimation=Bi,t.Projection=Ys,t.Rectangle=Ya,t.Renderer=Gr,t.SVG=Xa,t.SVGOverlay=Ln,t.TileLayer=$i,t.Tooltip=bo,t.Transformation=ke,t.Util=te,t.VideoOverlay=Pr,t.bind=o,t.bounds=j,t.canvas=ah,t.circle=dc,t.circleMarker=nh,t.control=Kn,t.divIcon=rh,t.extend=r,t.featureGroup=Jl,t.geoJSON=$l,t.geoJson=ih,t.gridLayer=sh,t.icon=jp,t.imageOverlay=pc,t.latLng=ue,t.latLngBounds=ee,t.layerGroup=br,t.map=Wo,t.marker=Zp,t.point=H,t.polygon=Yp,t.polyline=Xp,t.popup=eu,t.rectangle=Kp,t.setOptions=_,t.stamp=l,t.svg=gc,t.svgOverlay=Ri,t.tileLayer=is,t.tooltip=W0,t.transformation=he,t.version=i,t.videoOverlay=ja;var fh=window.L;t.noConflict=function(){return window.L=fh,this},window.L=t})})(u1,u1.exports);var Mp=u1.exports;const AS=iw(Mp);function LS(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function RS(n,e){return e==null?function(i,r){const s=K.useRef();return s.current||(s.current=n(i,r)),s}:function(i,r){const s=K.useRef();s.current||(s.current=n(i,r));const o=K.useRef(i),{instance:a}=s.current;return K.useEffect(function(){o.current!==i&&(e(a,i,o.current),o.current=i)},[a,i,r]),s}}function e6(n,e){K.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function HL(n){return function(t){const i=VL(),r=n(CS(t,i),i);return FL(i.map,t.attribution),GL(r.current,t.eventHandlers),e6(r.current,i),r}}function t6(n,e){const t=RS(n,e),i=HL(t);return KB(i)}function n6(n,e){const t=RS(n),i=$B(t,e);return JB(i)}function i6(n,e){const t=RS(n,e),i=HL(t);return QB(i)}function r6(n,e,t){const{opacity:i,zIndex:r}=e;i!=null&&i!==t.opacity&&n.setOpacity(i),r!=null&&r!==t.zIndex&&n.setZIndex(r)}function c1(){return c1=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},c1.apply(this,arguments)}function s6({bounds:n,boundsOptions:e,center:t,children:i,className:r,id:s,placeholder:o,style:a,whenReady:l,zoom:c,...f},p){const[m]=K.useState({className:r,id:s,style:a}),[v,y]=K.useState(null);K.useImperativeHandle(p,()=>(v==null?void 0:v.map)??null,[v]);const _=K.useCallback(T=>{if(T!==null&&v===null){const M=new Mp.Map(T,f);t!=null&&c!=null?M.setView(t,c):n!=null&&M.fitBounds(n,e),l!=null&&M.whenReady(l),y(YB(M))}},[]);K.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const S=v?ju.createElement(BL,{value:v},i):o??null;return ju.createElement("div",c1({},m,{ref:_}),S)}const o6=K.forwardRef(s6),a6=t6(function({position:e,...t},i){const r=new Mp.Marker(e,t);return LS(r,qB(i,{overlayContainer:r}))},function(e,t,i){t.position!==i.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==i.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==i.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==i.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),l6=n6(function(e,t){const i=new Mp.Popup(e,t.overlayContainer);return LS(i,t)},function(e,t,{position:i},r){K.useEffect(function(){const{instance:o}=e;function a(c){c.popup===o&&(o.update(),r(!0))}function l(c){c.popup===o&&r(!1)}return t.map.on({popupopen:a,popupclose:l}),t.overlayContainer==null?(i!=null&&o.setLatLng(i),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){var f;t.map.off({popupopen:a,popupclose:l}),(f=t.overlayContainer)==null||f.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,i])}),u6=i6(function({url:e,...t},i){const r=new Mp.TileLayer(e,CS(t,i));return LS(r,i)},function(e,t,i){r6(e,t,i);const{url:r}=t;r!=null&&r!==i.url&&e.setUrl(r)});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const b0="150",Mu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},WL=0,f1=1,jL=2,c6=3,ZL=0,T0=1,pd=2,ku=3,zo=0,Nr=1,uo=2,f6=2,ya=0,Uu=1,h1=2,d1=3,p1=4,XL=5,Eu=100,YL=101,qL=102,m1=103,g1=104,KL=200,JL=201,QL=202,$L=203,kS=204,IS=205,eR=206,tR=207,nR=208,iR=209,rR=210,sR=0,oR=1,aR=2,Yv=3,lR=4,uR=5,cR=6,fR=7,bp=0,hR=1,dR=2,mo=0,pR=1,mR=2,gR=3,DS=4,vR=5,E0=300,Il=301,Dl=302,jd=303,Zd=304,Hf=306,Xd=1e3,cr=1001,Yd=1002,ei=1003,qv=1004,h6=1004,md=1005,d6=1005,Fn=1006,NS=1007,p6=1007,Nl=1008,m6=1008,Pa=1009,yR=1010,_R=1011,OS=1012,xR=1013,_l=1014,pa=1015,kf=1016,wR=1017,SR=1018,Bu=1020,MR=1021,Xr=1023,bR=1024,TR=1025,Al=1026,Ju=1027,ER=1028,PR=1029,CR=1030,AR=1031,LR=1033,nv=33776,iv=33777,rv=33778,sv=33779,v1=35840,y1=35841,_1=35842,x1=35843,RR=36196,w1=37492,S1=37496,M1=37808,b1=37809,T1=37810,E1=37811,P1=37812,C1=37813,A1=37814,L1=37815,R1=37816,k1=37817,I1=37818,D1=37819,N1=37820,O1=37821,ov=36492,kR=36283,z1=36284,F1=36285,U1=36286,IR=2200,DR=2201,NR=2202,qd=2300,Kd=2301,av=2302,Iu=2400,Du=2401,Jd=2402,P0=2500,zS=2501,g6=0,v6=1,y6=2,Ca=3e3,gn=3001,OR=3200,FS=3201,Vl=0,zR=1,_6="",so="srgb",If="srgb-linear",US="display-p3",x6=0,lv=7680,w6=7681,S6=7682,M6=7683,b6=34055,T6=34056,E6=5386,P6=512,C6=513,A6=514,L6=515,R6=516,k6=517,I6=518,FR=519,Qd=35044,D6=35048,N6=35040,O6=35045,z6=35049,F6=35041,U6=35046,B6=35050,V6=35042,G6="100",B1="300 es",Kv=1035;let Ia=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kT=1234567;const Vu=Math.PI/180,$d=180/Math.PI;function fs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(sr[n&255]+sr[n>>8&255]+sr[n>>16&255]+sr[n>>24&255]+"-"+sr[e&255]+sr[e>>8&255]+"-"+sr[e>>16&15|64]+sr[e>>24&255]+"-"+sr[t&63|128]+sr[t>>8&255]+"-"+sr[t>>16&255]+sr[t>>24&255]+sr[i&255]+sr[i>>8&255]+sr[i>>16&255]+sr[i>>24&255]).toLowerCase()}function ni(n,e,t){return Math.max(e,Math.min(t,n))}function BS(n,e){return(n%e+e)%e}function H6(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function W6(n,e,t){return n!==e?(t-n)/(e-n):0}function gd(n,e,t){return(1-t)*n+t*e}function j6(n,e,t,i){return gd(n,e,1-Math.exp(-t*i))}function Z6(n,e=1){return e-Math.abs(BS(n,e*2)-e)}function X6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Y6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function q6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function K6(n,e){return n+Math.random()*(e-n)}function J6(n){return n*(.5-Math.random())}function Q6(n){n!==void 0&&(kT=n);let e=kT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $6(n){return n*Vu}function eV(n){return n*$d}function V1(n){return(n&n-1)===0&&n!==0}function UR(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function BR(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function tV(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),f=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),v=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*p,l*m,a*c);break;case"YZY":n.set(l*m,a*f,l*p,a*c);break;case"ZXZ":n.set(l*p,l*m,a*f,a*c);break;case"XZX":n.set(a*f,l*y,l*v,a*c);break;case"YXY":n.set(l*v,a*f,l*y,a*c);break;case"ZYZ":n.set(l*y,l*v,a*f,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ma(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _n(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const nV={DEG2RAD:Vu,RAD2DEG:$d,generateUUID:fs,clamp:ni,euclideanModulo:BS,mapLinear:H6,inverseLerp:W6,lerp:gd,damp:j6,pingpong:Z6,smoothstep:X6,smootherstep:Y6,randInt:q6,randFloat:K6,randFloatSpread:J6,seededRandom:Q6,degToRad:$6,radToDeg:eV,isPowerOfTwo:V1,ceilPowerOfTwo:UR,floorPowerOfTwo:BR,setQuaternionFromProperEuler:tV,normalize:_n,denormalize:ma};class Ge{constructor(e=0,t=0){Ge.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ni{constructor(){Ni.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,c){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],f=i[4],p=i[7],m=i[2],v=i[5],y=i[8],_=r[0],S=r[3],T=r[6],M=r[1],b=r[4],C=r[7],k=r[2],I=r[5],z=r[8];return s[0]=o*_+a*M+l*k,s[3]=o*S+a*b+l*I,s[6]=o*T+a*C+l*z,s[1]=c*_+f*M+p*k,s[4]=c*S+f*b+p*I,s[7]=c*T+f*C+p*z,s[2]=m*_+v*M+y*k,s[5]=m*S+v*b+y*I,s[8]=m*T+v*C+y*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8];return t*o*f-t*a*c-i*s*f+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],p=f*o-a*c,m=a*l-f*s,v=c*s-o*l,y=t*p+i*m+r*v;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=p*_,e[1]=(r*c-f*i)*_,e[2]=(a*i-r*o)*_,e[3]=m*_,e[4]=(f*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=v*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(s_.makeScale(e,t)),this}rotate(e){return this.premultiply(s_.makeRotation(-e)),this}translate(e,t){return this.premultiply(s_.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const s_=new Ni;function VR(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const iV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function af(n,e){return new iV[n](e)}function ep(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class fr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],f=i[r+2],p=i[r+3];const m=s[o+0],v=s[o+1],y=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p;return}if(a===1){e[t+0]=m,e[t+1]=v,e[t+2]=y,e[t+3]=_;return}if(p!==_||l!==m||c!==v||f!==y){let S=1-a;const T=l*m+c*v+f*y+p*_,M=T>=0?1:-1,b=1-T*T;if(b>Number.EPSILON){const k=Math.sqrt(b),I=Math.atan2(k,T*M);S=Math.sin(S*I)/k,a=Math.sin(a*I)/k}const C=a*M;if(l=l*S+m*C,c=c*S+v*C,f=f*S+y*C,p=p*S+_*C,S===1-a){const k=1/Math.sqrt(l*l+c*c+f*f+p*p);l*=k,c*=k,f*=k,p*=k}}e[t]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],f=i[r+3],p=s[o],m=s[o+1],v=s[o+2],y=s[o+3];return e[t]=a*y+f*p+l*v-c*m,e[t+1]=l*y+f*m+c*p-a*v,e[t+2]=c*y+f*v+a*m-l*p,e[t+3]=f*y-a*p-l*m-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),f=a(r/2),p=a(s/2),m=l(i/2),v=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=m*f*p+c*v*y,this._y=c*v*p-m*f*y,this._z=c*f*y+m*v*p,this._w=c*f*p-m*v*y;break;case"YXZ":this._x=m*f*p+c*v*y,this._y=c*v*p-m*f*y,this._z=c*f*y-m*v*p,this._w=c*f*p+m*v*y;break;case"ZXY":this._x=m*f*p-c*v*y,this._y=c*v*p+m*f*y,this._z=c*f*y+m*v*p,this._w=c*f*p-m*v*y;break;case"ZYX":this._x=m*f*p-c*v*y,this._y=c*v*p+m*f*y,this._z=c*f*y-m*v*p,this._w=c*f*p+m*v*y;break;case"YZX":this._x=m*f*p+c*v*y,this._y=c*v*p+m*f*y,this._z=c*f*y-m*v*p,this._w=c*f*p-m*v*y;break;case"XZY":this._x=m*f*p-c*v*y,this._y=c*v*p-m*f*y,this._z=c*f*y+m*v*p,this._w=c*f*p+m*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],f=t[6],p=t[10],m=i+a+p;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(f-l)*v,this._y=(s-c)*v,this._z=(o-r)*v}else if(i>a&&i>p){const v=2*Math.sqrt(1+i-a-p);this._w=(f-l)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+c)/v}else if(a>p){const v=2*Math.sqrt(1+a-i-p);this._w=(s-c)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(l+f)/v}else{const v=2*Math.sqrt(1+p-i-a);this._w=(o-r)/v,this._x=(s+c)/v,this._y=(l+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ni(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,f=t._w;return this._x=i*f+o*a+r*c-s*l,this._y=r*f+o*l+s*a-i*c,this._z=s*f+o*c+i*l-r*a,this._w=o*f-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),f=Math.atan2(c,a),p=Math.sin((1-t)*f)/c,m=Math.sin(t*f)/c;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,t=0,i=0){ne.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(IT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(IT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,f=l*i+a*t-s*r,p=l*r+s*i-o*t,m=-s*t-o*i-a*r;return this.x=c*l+m*-s+f*-a-p*-o,this.y=f*l+m*-o+p*-s-c*-a,this.z=p*l+m*-a+c*-o-f*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return o_.copy(this).projectOnVector(e),this.sub(o_)}reflect(e){return this.sub(o_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const o_=new ne,IT=new fr;function wf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function a_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const rV=new Ni().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),sV=new Ni().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),xl=new ne;function oV(n){return n.convertSRGBToLinear(),xl.set(n.r,n.g,n.b).applyMatrix3(sV),n.setRGB(xl.x,xl.y,xl.z)}function aV(n){return xl.set(n.r,n.g,n.b).applyMatrix3(rV),n.setRGB(xl.x,xl.y,xl.z).convertLinearToSRGB()}const lV={[If]:n=>n,[so]:n=>n.convertSRGBToLinear(),[US]:oV},uV={[If]:n=>n,[so]:n=>n.convertLinearToSRGB(),[US]:aV},ar={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return If},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=lV[e],r=uV[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let bc;class VS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bc===void 0&&(bc=ep("canvas")),bc.width=e.width,bc.height=e.height;const i=bc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=bc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ep("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=wf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(wf(t[i]/255)*255):t[i]=wf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Nu{constructor(e=null){this.isSource=!0,this.uuid=fs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(l_(r[o].image)):s.push(l_(r[o]))}else s=l_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function l_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?VS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cV=0;class Gn extends Ia{constructor(e=Gn.DEFAULT_IMAGE,t=Gn.DEFAULT_MAPPING,i=cr,r=cr,s=Fn,o=Nl,a=Xr,l=Pa,c=Gn.DEFAULT_ANISOTROPY,f=Ca){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cV++}),this.uuid=fs(),this.name="",this.source=new Nu(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ni,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==E0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xd:e.x=e.x-Math.floor(e.x);break;case cr:e.x=e.x<0?0:1;break;case Yd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xd:e.y=e.y-Math.floor(e.y);break;case cr:e.y=e.y<0?0:1;break;case Yd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Gn.DEFAULT_IMAGE=null;Gn.DEFAULT_MAPPING=E0;Gn.DEFAULT_ANISOTROPY=1;class hn{constructor(e=0,t=0,i=0,r=1){hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],f=l[4],p=l[8],m=l[1],v=l[5],y=l[9],_=l[2],S=l[6],T=l[10];if(Math.abs(f-m)<.01&&Math.abs(p-_)<.01&&Math.abs(y-S)<.01){if(Math.abs(f+m)<.1&&Math.abs(p+_)<.1&&Math.abs(y+S)<.1&&Math.abs(c+v+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,C=(v+1)/2,k=(T+1)/2,I=(f+m)/4,z=(p+_)/4,A=(y+S)/4;return b>C&&b>k?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=I/i,s=z/i):C>k?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=I/r,s=A/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=z/s,r=A/s),this.set(i,r,s,t),this}let M=Math.sqrt((S-y)*(S-y)+(p-_)*(p-_)+(m-f)*(m-f));return Math.abs(M)<.001&&(M=1),this.x=(S-y)/M,this.y=(p-_)/M,this.z=(m-f)/M,this.w=Math.acos((c+v+T-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vo extends Ia{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hn(0,0,e,t),this.scissorTest=!1,this.viewport=new hn(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Gn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Fn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Nu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class C0 extends Gn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fV extends vo{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new C0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class GS extends Gn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hV extends vo{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new GS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class dV extends vo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Gl{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const f=e[l],p=e[l+1],m=e[l+2];f<t&&(t=f),p<i&&(i=p),m<r&&(r=m),f>s&&(s=f),p>o&&(o=p),m>a&&(a=m)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const f=e.getX(l),p=e.getY(l),m=e.getZ(l);f<t&&(t=f),p<i&&(i=p),m<r&&(r=m),f>s&&(s=f),p>o&&(o=p),m>a&&(a=m)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=hu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)hu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(hu)}else i.boundingBox===null&&i.computeBoundingBox(),u_.copy(i.boundingBox),u_.applyMatrix4(e.matrixWorld),this.union(u_);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hu),hu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lh),Ym.subVectors(this.max,Lh),Tc.subVectors(e.a,Lh),Ec.subVectors(e.b,Lh),Pc.subVectors(e.c,Lh),il.subVectors(Ec,Tc),rl.subVectors(Pc,Ec),du.subVectors(Tc,Pc);let t=[0,-il.z,il.y,0,-rl.z,rl.y,0,-du.z,du.y,il.z,0,-il.x,rl.z,0,-rl.x,du.z,0,-du.x,-il.y,il.x,0,-rl.y,rl.x,0,-du.y,du.x,0];return!c_(t,Tc,Ec,Pc,Ym)||(t=[1,0,0,0,1,0,0,0,1],!c_(t,Tc,Ec,Pc,Ym))?!1:(qm.crossVectors(il,rl),t=[qm.x,qm.y,qm.z],c_(t,Tc,Ec,Pc,Ym))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ta[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ta[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ta[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ta[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ta[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ta[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ta[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ta[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ta),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ta=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],hu=new ne,u_=new Gl,Tc=new ne,Ec=new ne,Pc=new ne,il=new ne,rl=new ne,du=new ne,Lh=new ne,Ym=new ne,qm=new ne,pu=new ne;function c_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){pu.fromArray(n,s);const a=r.x*Math.abs(pu.x)+r.y*Math.abs(pu.y)+r.z*Math.abs(pu.z),l=e.dot(pu),c=t.dot(pu),f=i.dot(pu);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>a)return!1}return!0}const pV=new Gl,Rh=new ne,f_=new ne;class Hl{constructor(e=new ne,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):pV.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rh.subVectors(e,this.center);const t=Rh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Rh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(f_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rh.copy(e.center).add(f_)),this.expandByPoint(Rh.copy(e.center).sub(f_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const na=new ne,h_=new ne,Km=new ne,sl=new ne,d_=new ne,Jm=new ne,p_=new ne;class Wf{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,na)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=na.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(na.copy(this.origin).addScaledVector(this.direction,t),na.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){h_.copy(e).add(t).multiplyScalar(.5),Km.copy(t).sub(e).normalize(),sl.copy(this.origin).sub(h_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Km),a=sl.dot(this.direction),l=-sl.dot(Km),c=sl.lengthSq(),f=Math.abs(1-o*o);let p,m,v,y;if(f>0)if(p=o*l-a,m=o*a-l,y=s*f,p>=0)if(m>=-y)if(m<=y){const _=1/f;p*=_,m*=_,v=p*(p+o*m+2*a)+m*(o*p+m+2*l)+c}else m=s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+c;else m=-s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+c;else m<=-y?(p=Math.max(0,-(-o*s+a)),m=p>0?-s:Math.min(Math.max(-s,-l),s),v=-p*p+m*(m+2*l)+c):m<=y?(p=0,m=Math.min(Math.max(-s,-l),s),v=m*(m+2*l)+c):(p=Math.max(0,-(o*s+a)),m=p>0?s:Math.min(Math.max(-s,-l),s),v=-p*p+m*(m+2*l)+c);else m=o>0?-s:s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(h_).addScaledVector(Km,m),v}intersectSphere(e,t){na.subVectors(e.center,this.origin);const i=na.dot(this.direction),r=na.dot(na)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),f>=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(a=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,na)!==null}intersectTriangle(e,t,i,r,s){d_.subVectors(t,e),Jm.subVectors(i,e),p_.crossVectors(d_,Jm);let o=this.direction.dot(p_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;sl.subVectors(this.origin,e);const l=a*this.direction.dot(Jm.crossVectors(sl,Jm));if(l<0)return null;const c=a*this.direction.dot(d_.cross(sl));if(c<0||l+c>o)return null;const f=-a*sl.dot(p_);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,c,f,p,m,v,y,_,S){const T=this.elements;return T[0]=e,T[4]=t,T[8]=i,T[12]=r,T[1]=s,T[5]=o,T[9]=a,T[13]=l,T[2]=c,T[6]=f,T[10]=p,T[14]=m,T[3]=v,T[7]=y,T[11]=_,T[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Cc.setFromMatrixColumn(e,0).length(),s=1/Cc.setFromMatrixColumn(e,1).length(),o=1/Cc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*f,v=o*p,y=a*f,_=a*p;t[0]=l*f,t[4]=-l*p,t[8]=c,t[1]=v+y*c,t[5]=m-_*c,t[9]=-a*l,t[2]=_-m*c,t[6]=y+v*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*f,v=l*p,y=c*f,_=c*p;t[0]=m+_*a,t[4]=y*a-v,t[8]=o*c,t[1]=o*p,t[5]=o*f,t[9]=-a,t[2]=v*a-y,t[6]=_+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*f,v=l*p,y=c*f,_=c*p;t[0]=m-_*a,t[4]=-o*p,t[8]=y+v*a,t[1]=v+y*a,t[5]=o*f,t[9]=_-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*f,v=o*p,y=a*f,_=a*p;t[0]=l*f,t[4]=y*c-v,t[8]=m*c+_,t[1]=l*p,t[5]=_*c+m,t[9]=v*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,v=o*c,y=a*l,_=a*c;t[0]=l*f,t[4]=_-m*p,t[8]=y*p+v,t[1]=p,t[5]=o*f,t[9]=-a*f,t[2]=-c*f,t[6]=v*p+y,t[10]=m-_*p}else if(e.order==="XZY"){const m=o*l,v=o*c,y=a*l,_=a*c;t[0]=l*f,t[4]=-p,t[8]=c*f,t[1]=m*p+_,t[5]=o*f,t[9]=v*p-y,t[2]=y*p-v,t[6]=a*f,t[10]=_*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mV,e,gV)}lookAt(e,t,i){const r=this.elements;return os.subVectors(e,t),os.lengthSq()===0&&(os.z=1),os.normalize(),ol.crossVectors(i,os),ol.lengthSq()===0&&(Math.abs(i.z)===1?os.x+=1e-4:os.z+=1e-4,os.normalize(),ol.crossVectors(i,os)),ol.normalize(),Qm.crossVectors(os,ol),r[0]=ol.x,r[4]=Qm.x,r[8]=os.x,r[1]=ol.y,r[5]=Qm.y,r[9]=os.y,r[2]=ol.z,r[6]=Qm.z,r[10]=os.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],f=i[1],p=i[5],m=i[9],v=i[13],y=i[2],_=i[6],S=i[10],T=i[14],M=i[3],b=i[7],C=i[11],k=i[15],I=r[0],z=r[4],A=r[8],O=r[12],U=r[1],$=r[5],Y=r[9],te=r[13],J=r[2],ae=r[6],ce=r[10],ye=r[14],F=r[3],X=r[7],H=r[11],W=r[15];return s[0]=o*I+a*U+l*J+c*F,s[4]=o*z+a*$+l*ae+c*X,s[8]=o*A+a*Y+l*ce+c*H,s[12]=o*O+a*te+l*ye+c*W,s[1]=f*I+p*U+m*J+v*F,s[5]=f*z+p*$+m*ae+v*X,s[9]=f*A+p*Y+m*ce+v*H,s[13]=f*O+p*te+m*ye+v*W,s[2]=y*I+_*U+S*J+T*F,s[6]=y*z+_*$+S*ae+T*X,s[10]=y*A+_*Y+S*ce+T*H,s[14]=y*O+_*te+S*ye+T*W,s[3]=M*I+b*U+C*J+k*F,s[7]=M*z+b*$+C*ae+k*X,s[11]=M*A+b*Y+C*ce+k*H,s[15]=M*O+b*te+C*ye+k*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],f=e[2],p=e[6],m=e[10],v=e[14],y=e[3],_=e[7],S=e[11],T=e[15];return y*(+s*l*p-r*c*p-s*a*m+i*c*m+r*a*v-i*l*v)+_*(+t*l*v-t*c*m+s*o*m-r*o*v+r*c*f-s*l*f)+S*(+t*c*p-t*a*v-s*o*p+i*o*v+s*a*f-i*c*f)+T*(-r*a*f-t*l*p+t*a*m+r*o*p-i*o*m+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],p=e[9],m=e[10],v=e[11],y=e[12],_=e[13],S=e[14],T=e[15],M=p*S*c-_*m*c+_*l*v-a*S*v-p*l*T+a*m*T,b=y*m*c-f*S*c-y*l*v+o*S*v+f*l*T-o*m*T,C=f*_*c-y*p*c+y*a*v-o*_*v-f*a*T+o*p*T,k=y*p*l-f*_*l-y*a*m+o*_*m+f*a*S-o*p*S,I=t*M+i*b+r*C+s*k;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/I;return e[0]=M*z,e[1]=(_*m*s-p*S*s-_*r*v+i*S*v+p*r*T-i*m*T)*z,e[2]=(a*S*s-_*l*s+_*r*c-i*S*c-a*r*T+i*l*T)*z,e[3]=(p*l*s-a*m*s-p*r*c+i*m*c+a*r*v-i*l*v)*z,e[4]=b*z,e[5]=(f*S*s-y*m*s+y*r*v-t*S*v-f*r*T+t*m*T)*z,e[6]=(y*l*s-o*S*s-y*r*c+t*S*c+o*r*T-t*l*T)*z,e[7]=(o*m*s-f*l*s+f*r*c-t*m*c-o*r*v+t*l*v)*z,e[8]=C*z,e[9]=(y*p*s-f*_*s-y*i*v+t*_*v+f*i*T-t*p*T)*z,e[10]=(o*_*s-y*a*s+y*i*c-t*_*c-o*i*T+t*a*T)*z,e[11]=(f*a*s-o*p*s-f*i*c+t*p*c+o*i*v-t*a*v)*z,e[12]=k*z,e[13]=(f*_*r-y*p*r+y*i*m-t*_*m-f*i*S+t*p*S)*z,e[14]=(y*a*r-o*_*r-y*i*l+t*_*l+o*i*S-t*a*S)*z,e[15]=(o*p*r-f*a*r+f*i*l-t*p*l-o*i*m+t*a*m)*z,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,f=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,f*a+i,f*l-r*o,0,c*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,f=o+o,p=a+a,m=s*c,v=s*f,y=s*p,_=o*f,S=o*p,T=a*p,M=l*c,b=l*f,C=l*p,k=i.x,I=i.y,z=i.z;return r[0]=(1-(_+T))*k,r[1]=(v+C)*k,r[2]=(y-b)*k,r[3]=0,r[4]=(v-C)*I,r[5]=(1-(m+T))*I,r[6]=(S+M)*I,r[7]=0,r[8]=(y+b)*z,r[9]=(S-M)*z,r[10]=(1-(m+_))*z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Cc.set(r[0],r[1],r[2]).length();const o=Cc.set(r[4],r[5],r[6]).length(),a=Cc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],$s.copy(this);const c=1/s,f=1/o,p=1/a;return $s.elements[0]*=c,$s.elements[1]*=c,$s.elements[2]*=c,$s.elements[4]*=f,$s.elements[5]*=f,$s.elements[6]*=f,$s.elements[8]*=p,$s.elements[9]*=p,$s.elements[10]*=p,t.setFromRotationMatrix($s),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r),m=-(o+s)/(o-s),v=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=f,a[12]=0,a[1]=0,a[5]=c,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=v,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),f=1/(o-s),p=(t+e)*l,m=(i+r)*c,v=(o+s)*f;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*f,a[14]=-v,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Cc=new ne,$s=new zt,mV=new ne(0,0,0),gV=new ne(1,1,1),ol=new ne,Qm=new ne,os=new ne,DT=new zt,NT=new fr;class Tp{constructor(e=0,t=0,i=0,r=Tp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],f=r[9],p=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(ni(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ni(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(ni(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ni(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ni(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-ni(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return DT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(DT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return NT.setFromEuler(this),this.setFromQuaternion(NT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Tp.DEFAULT_ORDER="XYZ";class Gu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vV=0;const OT=new ne,Ac=new fr,ia=new zt,$m=new ne,kh=new ne,yV=new ne,_V=new fr,zT=new ne(1,0,0),FT=new ne(0,1,0),UT=new ne(0,0,1),xV={type:"added"},BT={type:"removed"};class un extends Ia{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vV++}),this.uuid=fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=un.DEFAULT_UP.clone();const e=new ne,t=new Tp,i=new fr,r=new ne(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zt},normalMatrix:{value:new Ni}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Gu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.multiply(Ac),this}rotateOnWorldAxis(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.premultiply(Ac),this}rotateX(e){return this.rotateOnAxis(zT,e)}rotateY(e){return this.rotateOnAxis(FT,e)}rotateZ(e){return this.rotateOnAxis(UT,e)}translateOnAxis(e,t){return OT.copy(e).applyQuaternion(this.quaternion),this.position.add(OT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zT,e)}translateY(e){return this.translateOnAxis(FT,e)}translateZ(e){return this.translateOnAxis(UT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ia.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$m.copy(e):$m.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),kh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ia.lookAt(kh,$m,this.up):ia.lookAt($m,kh,this.up),this.quaternion.setFromRotationMatrix(ia),r&&(ia.extractRotation(r.matrixWorld),Ac.setFromRotationMatrix(ia),this.quaternion.premultiply(Ac.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xV)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(BT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(BT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ia.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ia.multiply(e.parent.matrixWorld)),e.applyMatrix4(ia),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,e,yV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,_V,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const p=l[c];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),f=o(e.images),p=o(e.shapes),m=o(e.skeletons),v=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),f.length>0&&(i.images=f),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),v.length>0&&(i.animations=v),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const c in a){const f=a[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}un.DEFAULT_UP=new ne(0,1,0);un.DEFAULT_MATRIX_AUTO_UPDATE=!0;un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const eo=new ne,ra=new ne,m_=new ne,sa=new ne,Lc=new ne,Rc=new ne,VT=new ne,g_=new ne,v_=new ne,y_=new ne;class ks{constructor(e=new ne,t=new ne,i=new ne){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),eo.subVectors(e,t),r.cross(eo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){eo.subVectors(r,t),ra.subVectors(i,t),m_.subVectors(e,t);const o=eo.dot(eo),a=eo.dot(ra),l=eo.dot(m_),c=ra.dot(ra),f=ra.dot(m_),p=o*c-a*a;if(p===0)return s.set(-2,-1,-1);const m=1/p,v=(c*l-a*f)*m,y=(o*f-a*l)*m;return s.set(1-v-y,y,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,sa),sa.x>=0&&sa.y>=0&&sa.x+sa.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,sa),l.set(0,0),l.addScaledVector(s,sa.x),l.addScaledVector(o,sa.y),l.addScaledVector(a,sa.z),l}static isFrontFacing(e,t,i,r){return eo.subVectors(i,t),ra.subVectors(e,t),eo.cross(ra).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return eo.subVectors(this.c,this.b),ra.subVectors(this.a,this.b),eo.cross(ra).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ks.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ks.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Lc.subVectors(r,i),Rc.subVectors(s,i),g_.subVectors(e,i);const l=Lc.dot(g_),c=Rc.dot(g_);if(l<=0&&c<=0)return t.copy(i);v_.subVectors(e,r);const f=Lc.dot(v_),p=Rc.dot(v_);if(f>=0&&p<=f)return t.copy(r);const m=l*p-f*c;if(m<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(Lc,o);y_.subVectors(e,s);const v=Lc.dot(y_),y=Rc.dot(y_);if(y>=0&&v<=y)return t.copy(s);const _=v*c-l*y;if(_<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(i).addScaledVector(Rc,a);const S=f*y-v*p;if(S<=0&&p-f>=0&&v-y>=0)return VT.subVectors(s,r),a=(p-f)/(p-f+(v-y)),t.copy(r).addScaledVector(VT,a);const T=1/(S+_+m);return o=_*T,a=m*T,t.copy(i).addScaledVector(Lc,o).addScaledVector(Rc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let wV=0;class qi extends Ia{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wV++}),this.uuid=fs(),this.name="",this.type="Material",this.blending=Uu,this.side=zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=kS,this.blendDst=IS,this.blendEquation=Eu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Yv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=FR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=lv,this.stencilZFail=lv,this.stencilZPass=lv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Uu&&(i.blending=this.blending),this.side!==zo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const GR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},to={h:0,s:0,l:0},eg={h:0,s:0,l:0};function __(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ht{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=so){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ar.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ar.workingColorSpace){return this.r=e,this.g=t,this.b=i,ar.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ar.workingColorSpace){if(e=BS(e,1),t=ni(t,0,1),i=ni(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=__(o,s,e+1/3),this.g=__(o,s,e),this.b=__(o,s,e-1/3)}return ar.toWorkingColorSpace(this,r),this}setStyle(e,t=so){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ar.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ar.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,f=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,f,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ar.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ar.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=so){const i=GR[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wf(e.r),this.g=wf(e.g),this.b=wf(e.b),this}copyLinearToSRGB(e){return this.r=a_(e.r),this.g=a_(e.g),this.b=a_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=so){return ar.fromWorkingColorSpace(or.copy(this),e),ni(or.r*255,0,255)<<16^ni(or.g*255,0,255)<<8^ni(or.b*255,0,255)<<0}getHexString(e=so){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ar.workingColorSpace){ar.fromWorkingColorSpace(or.copy(this),t);const i=or.r,r=or.g,s=or.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const f=(a+o)/2;if(a===o)l=0,c=0;else{const p=o-a;switch(c=f<=.5?p/(o+a):p/(2-o-a),o){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,t=ar.workingColorSpace){return ar.fromWorkingColorSpace(or.copy(this),t),e.r=or.r,e.g=or.g,e.b=or.b,e}getStyle(e=so){ar.fromWorkingColorSpace(or.copy(this),e);const t=or.r,i=or.g,r=or.b;return e!==so?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${t*255|0},${i*255|0},${r*255|0})`}offsetHSL(e,t,i){return this.getHSL(to),to.h+=e,to.s+=t,to.l+=i,this.setHSL(to.h,to.s,to.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(to),e.getHSL(eg);const i=gd(to.h,eg.h,t),r=gd(to.s,eg.s,t),s=gd(to.l,eg.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const or=new ht;ht.NAMES=GR;class Da extends qi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hi=new ne,tg=new Ge;class xn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Qd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)tg.fromBufferAttribute(this,t),tg.applyMatrix3(e),this.setXY(t,tg.x,tg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix3(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix4(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)hi.fromBufferAttribute(this,t),hi.applyNormalMatrix(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)hi.fromBufferAttribute(this,t),hi.transformDirection(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class SV extends xn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class MV extends xn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class bV extends xn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class TV extends xn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class HS extends xn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class EV extends xn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class WS extends xn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class PV extends xn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class gt extends xn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class CV extends xn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let AV=0;const Cs=new zt,x_=new un,kc=new ne,as=new Gl,Ih=new Gl,Ii=new ne;class jt extends Ia{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:AV++}),this.uuid=fs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(VR(e)?WS:HS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ni().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cs.makeRotationFromQuaternion(e),this.applyMatrix4(Cs),this}rotateX(e){return Cs.makeRotationX(e),this.applyMatrix4(Cs),this}rotateY(e){return Cs.makeRotationY(e),this.applyMatrix4(Cs),this}rotateZ(e){return Cs.makeRotationZ(e),this.applyMatrix4(Cs),this}translate(e,t,i){return Cs.makeTranslation(e,t,i),this.applyMatrix4(Cs),this}scale(e,t,i){return Cs.makeScale(e,t,i),this.applyMatrix4(Cs),this}lookAt(e){return x_.lookAt(e),x_.updateMatrix(),this.applyMatrix4(x_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kc).negate(),this.translate(kc.x,kc.y,kc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];as.setFromBufferAttribute(s),this.morphTargetsRelative?(Ii.addVectors(this.boundingBox.min,as.min),this.boundingBox.expandByPoint(Ii),Ii.addVectors(this.boundingBox.max,as.max),this.boundingBox.expandByPoint(Ii)):(this.boundingBox.expandByPoint(as.min),this.boundingBox.expandByPoint(as.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ne,1/0);return}if(e){const i=this.boundingSphere.center;if(as.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Ih.setFromBufferAttribute(a),this.morphTargetsRelative?(Ii.addVectors(as.min,Ih.min),as.expandByPoint(Ii),Ii.addVectors(as.max,Ih.max),as.expandByPoint(Ii)):(as.expandByPoint(Ih.min),as.expandByPoint(Ih.max))}as.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ii.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ii));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,f=a.count;c<f;c++)Ii.fromBufferAttribute(a,c),l&&(kc.fromBufferAttribute(e,c),Ii.add(kc)),r=Math.max(r,i.distanceToSquared(Ii))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],f=[];for(let U=0;U<a;U++)c[U]=new ne,f[U]=new ne;const p=new ne,m=new ne,v=new ne,y=new Ge,_=new Ge,S=new Ge,T=new ne,M=new ne;function b(U,$,Y){p.fromArray(r,U*3),m.fromArray(r,$*3),v.fromArray(r,Y*3),y.fromArray(o,U*2),_.fromArray(o,$*2),S.fromArray(o,Y*2),m.sub(p),v.sub(p),_.sub(y),S.sub(y);const te=1/(_.x*S.y-S.x*_.y);isFinite(te)&&(T.copy(m).multiplyScalar(S.y).addScaledVector(v,-_.y).multiplyScalar(te),M.copy(v).multiplyScalar(_.x).addScaledVector(m,-S.x).multiplyScalar(te),c[U].add(T),c[$].add(T),c[Y].add(T),f[U].add(M),f[$].add(M),f[Y].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:i.length}]);for(let U=0,$=C.length;U<$;++U){const Y=C[U],te=Y.start,J=Y.count;for(let ae=te,ce=te+J;ae<ce;ae+=3)b(i[ae+0],i[ae+1],i[ae+2])}const k=new ne,I=new ne,z=new ne,A=new ne;function O(U){z.fromArray(s,U*3),A.copy(z);const $=c[U];k.copy($),k.sub(z.multiplyScalar(z.dot($))).normalize(),I.crossVectors(A,$);const te=I.dot(f[U])<0?-1:1;l[U*4]=k.x,l[U*4+1]=k.y,l[U*4+2]=k.z,l[U*4+3]=te}for(let U=0,$=C.length;U<$;++U){const Y=C[U],te=Y.start,J=Y.count;for(let ae=te,ce=te+J;ae<ce;ae+=3)O(i[ae+0]),O(i[ae+1]),O(i[ae+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,v=i.count;m<v;m++)i.setXYZ(m,0,0,0);const r=new ne,s=new ne,o=new ne,a=new ne,l=new ne,c=new ne,f=new ne,p=new ne;if(e)for(let m=0,v=e.count;m<v;m+=3){const y=e.getX(m+0),_=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,S),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,S),a.add(f),l.add(f),c.add(f),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(S,c.x,c.y,c.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ii.fromBufferAttribute(e,t),Ii.normalize(),e.setXYZ(t,Ii.x,Ii.y,Ii.z)}toNonIndexed(){function e(a,l){const c=a.array,f=a.itemSize,p=a.normalized,m=new c.constructor(l.length*f);let v=0,y=0;for(let _=0,S=l.length;_<S;_++){a.isInterleavedBufferAttribute?v=l[_]*a.data.stride+a.offset:v=l[_]*f;for(let T=0;T<f;T++)m[y++]=c[v++]}return new xn(m,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=e(m,i);l.push(v)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let p=0,m=c.length;p<m;p++){const v=c[p];f.push(v.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const f=r[c];this.setAttribute(c,f.clone(t))}const s=e.morphAttributes;for(const c in s){const f=[],p=s[c];for(let m=0,v=p.length;m<v;m++)f.push(p[m].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const p=o[c];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GT=new zt,Co=new Wf,ng=new Hl,HT=new ne,Dh=new ne,Nh=new ne,Oh=new ne,w_=new ne,ig=new ne,rg=new Ge,sg=new Ge,og=new Ge,S_=new ne,ag=new ne;class pi extends un{constructor(e=new jt,t=new Da){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){ig.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const f=a[l],p=s[l];f!==0&&(w_.fromBufferAttribute(p,e),o?ig.addScaledVector(w_,f):ig.addScaledVector(w_.sub(t),f))}t.add(ig)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),ng.copy(i.boundingSphere),ng.applyMatrix4(s),Co.copy(e.ray).recast(e.near),ng.containsPoint(Co.origin)===!1&&(Co.intersectSphere(ng,HT)===null||Co.origin.distanceToSquared(HT)>(e.far-e.near)**2))||(GT.copy(s).invert(),Co.copy(e.ray).applyMatrix4(GT),i.boundingBox!==null&&Co.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.attributes.uv,f=i.attributes.uv2,p=i.groups,m=i.drawRange;if(a!==null)if(Array.isArray(r))for(let v=0,y=p.length;v<y;v++){const _=p[v],S=r[_.materialIndex],T=Math.max(_.start,m.start),M=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let b=T,C=M;b<C;b+=3){const k=a.getX(b),I=a.getX(b+1),z=a.getX(b+2);o=lg(this,S,e,Co,c,f,k,I,z),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let _=v,S=y;_<S;_+=3){const T=a.getX(_),M=a.getX(_+1),b=a.getX(_+2);o=lg(this,r,e,Co,c,f,T,M,b),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let v=0,y=p.length;v<y;v++){const _=p[v],S=r[_.materialIndex],T=Math.max(_.start,m.start),M=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let b=T,C=M;b<C;b+=3){const k=b,I=b+1,z=b+2;o=lg(this,S,e,Co,c,f,k,I,z),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let _=v,S=y;_<S;_+=3){const T=_,M=_+1,b=_+2;o=lg(this,r,e,Co,c,f,T,M,b),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}}}function LV(n,e,t,i,r,s,o,a){let l;if(e.side===Nr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===zo,a),l===null)return null;ag.copy(a),ag.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ag);return c<t.near||c>t.far?null:{distance:c,point:ag.clone(),object:n}}function lg(n,e,t,i,r,s,o,a,l){n.getVertexPosition(o,Dh),n.getVertexPosition(a,Nh),n.getVertexPosition(l,Oh);const c=LV(n,e,t,i,Dh,Nh,Oh,S_);if(c){r&&(rg.fromBufferAttribute(r,o),sg.fromBufferAttribute(r,a),og.fromBufferAttribute(r,l),c.uv=ks.getUV(S_,Dh,Nh,Oh,rg,sg,og,new Ge)),s&&(rg.fromBufferAttribute(s,o),sg.fromBufferAttribute(s,a),og.fromBufferAttribute(s,l),c.uv2=ks.getUV(S_,Dh,Nh,Oh,rg,sg,og,new Ge));const f={a:o,b:a,c:l,normal:new ne,materialIndex:0};ks.getNormal(Dh,Nh,Oh,f.normal),c.face=f}return c}class Wl extends jt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],f=[],p=[];let m=0,v=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new gt(c,3)),this.setAttribute("normal",new gt(f,3)),this.setAttribute("uv",new gt(p,2));function y(_,S,T,M,b,C,k,I,z,A,O){const U=C/z,$=k/A,Y=C/2,te=k/2,J=I/2,ae=z+1,ce=A+1;let ye=0,F=0;const X=new ne;for(let H=0;H<ce;H++){const W=H*$-te;for(let j=0;j<ae;j++){const se=j*U-Y;X[_]=se*M,X[S]=W*b,X[T]=J,c.push(X.x,X.y,X.z),X[_]=0,X[S]=0,X[T]=I>0?1:-1,f.push(X.x,X.y,X.z),p.push(j/z),p.push(1-H/A),ye+=1}}for(let H=0;H<A;H++)for(let W=0;W<z;W++){const j=m+W+ae*H,se=m+W+ae*(H+1),ee=m+(W+1)+ae*(H+1),Z=m+(W+1)+ae*H;l.push(j,se,Z),l.push(se,ee,Z),F+=6}a.addGroup(v,F,O),v+=F,m+=ye}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Df(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Rr(n){const e={};for(let t=0;t<n.length;t++){const i=Df(n[t]);for(const r in i)e[r]=i[r]}return e}function RV(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function HR(n){return n.getRenderTarget()===null&&n.outputEncoding===gn?so:If}const jS={clone:Df,merge:Rr};var kV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,IV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fo extends qi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kV,this.fragmentShader=IV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Df(e.uniforms),this.uniformsGroups=RV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Ep extends un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ii extends Ep{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$d*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $d*2*Math.atan(Math.tan(Vu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ic=-90,Dc=1;class WR extends un{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new ii(Ic,Dc,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new ii(Ic,Dc,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new ii(Ic,Dc,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new ii(Ic,Dc,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new ii(Ic,Dc,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new ii(Ic,Dc,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,f=e.getRenderTarget(),p=e.toneMapping,m=e.xr.enabled;e.toneMapping=mo,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(f),e.toneMapping=p,e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class Pp extends Gn{constructor(e,t,i,r,s,o,a,l,c,f){e=e!==void 0?e:[],t=t!==void 0?t:Il,super(e,t,i,r,s,o,a,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jR extends vo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Pp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Wl(5,5,5),s=new Fo({name:"CubemapFromEquirect",uniforms:Df(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Nr,blending:ya});s.uniforms.tEquirect.value=t;const o=new pi(r,s),a=t.minFilter;return t.minFilter===Nl&&(t.minFilter=Fn),new WR(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const M_=new ne,DV=new ne,NV=new Ni;class ca{constructor(e=new ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=M_.subVectors(i,t).cross(DV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(M_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||NV.getNormalMatrix(e),r=this.coplanarPoint(M_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Nc=new Hl,ug=new ne;class A0{constructor(e=new ca,t=new ca,i=new ca,r=new ca,s=new ca,o=new ca){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],f=i[6],p=i[7],m=i[8],v=i[9],y=i[10],_=i[11],S=i[12],T=i[13],M=i[14],b=i[15];return t[0].setComponents(a-r,p-l,_-m,b-S).normalize(),t[1].setComponents(a+r,p+l,_+m,b+S).normalize(),t[2].setComponents(a+s,p+c,_+v,b+T).normalize(),t[3].setComponents(a-s,p-c,_-v,b-T).normalize(),t[4].setComponents(a-o,p-f,_-y,b-M).normalize(),t[5].setComponents(a+o,p+f,_+y,b+M).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSprite(e){return Nc.center.set(0,0,0),Nc.radius=.7071067811865476,Nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ug.x=r.normal.x>0?e.max.x:e.min.x,ug.y=r.normal.y>0?e.max.y:e.min.y,ug.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ug)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ZR(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function OV(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,f){const p=c.array,m=c.usage,v=n.createBuffer();n.bindBuffer(f,v),n.bufferData(f,p,m),c.onUploadCallback();let y;if(p instanceof Float32Array)y=5126;else if(p instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)y=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=5123;else if(p instanceof Int16Array)y=5122;else if(p instanceof Uint32Array)y=5125;else if(p instanceof Int32Array)y=5124;else if(p instanceof Int8Array)y=5120;else if(p instanceof Uint8Array)y=5121;else if(p instanceof Uint8ClampedArray)y=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:v,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version}}function s(c,f,p){const m=f.array,v=f.updateRange;n.bindBuffer(p,c),v.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):n.bufferSubData(p,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1),f.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f&&(n.deleteBuffer(f.buffer),i.delete(c))}function l(c,f){if(c.isGLBufferAttribute){const m=i.get(c);(!m||m.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const p=i.get(c);p===void 0?i.set(c,r(c,f)):p.version<c.version&&(s(p.buffer,c,f),p.version=c.version)}return{get:o,remove:a,update:l}}class Na extends jt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,f=l+1,p=e/a,m=t/l,v=[],y=[],_=[],S=[];for(let T=0;T<f;T++){const M=T*m-o;for(let b=0;b<c;b++){const C=b*p-s;y.push(C,-M,0),_.push(0,0,1),S.push(b/a),S.push(1-T/l)}}for(let T=0;T<l;T++)for(let M=0;M<a;M++){const b=M+c*T,C=M+c*(T+1),k=M+1+c*(T+1),I=M+1+c*T;v.push(b,C,I),v.push(C,k,I)}this.setIndex(v),this.setAttribute("position",new gt(y,3)),this.setAttribute("normal",new gt(_,3)),this.setAttribute("uv",new gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Na(e.width,e.height,e.widthSegments,e.heightSegments)}}var zV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,FV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UV=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,BV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,GV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HV="vec3 transformed = vec3( position );",WV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jV=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,ZV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,XV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,YV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,qV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,KV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,JV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,QV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$V=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,t8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,n8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
float w0( float a ) {
	return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
}
float w1( float a ) {
	return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
}
float w2( float a ){
    return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
}
float w3( float a ) {
	return ( 1.0 / 6.0 ) * ( a * a * a );
}
float g0( float a ) {
	return w0( a ) + w1( a );
}
float g1( float a ) {
	return w2( a ) + w3( a );
}
float h0( float a ) {
	return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
}
float h1( float a ) {
    return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
}
vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
	uv = uv * texelSize.zw + 0.5;
	vec2 iuv = floor( uv );
    vec2 fuv = fract( uv );
    float g0x = g0( fuv.x );
    float g1x = g1( fuv.x );
    float h0x = h0( fuv.x );
    float h1x = h1( fuv.x );
    float h0y = h0( fuv.y );
    float h1y = h1( fuv.y );
    vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
    vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
    vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
    vec2 lodFudge = pow( 1.95, lod ) / fullSize;
	return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
		   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
}
vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
	vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
	vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
	vec2 fLodSizeInv = 1.0 / fLodSize;
	vec2 cLodSizeInv = 1.0 / cLodSize;
	vec2 fullSize = vec2( textureSize( sampler, 0 ) );
	vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
	vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
	return mix( fSample, cSample, fract( lod ) );
}`,i8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,r8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,s8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,o8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,a8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,u8="gl_FragColor = linearToOutputTexel( gl_FragColor );",c8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,f8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,v8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,x8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,w8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,S8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,b8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,T8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,E8=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,P8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,C8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,A8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,L8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,R8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,k8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,I8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,D8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,N8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,O8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,z8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,F8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,U8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,B8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,V8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,G8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,H8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,W8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,j8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Z8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,X8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Y8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,q8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,K8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,J8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Q8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,nG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,iG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,rG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,sG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,oG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,lG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,uG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pG=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mG=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gG=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_G=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,xG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,SG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,bG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,EG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,PG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,CG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,AG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,LG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,RG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,kG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,IG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,DG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const NG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,OG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,UG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,BG=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,VG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,GG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,HG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,WG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,jG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qG=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,KG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$G=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,eH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,nH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,iH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,oH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fH=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,dH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Wt={alphamap_fragment:zV,alphamap_pars_fragment:FV,alphatest_fragment:UV,alphatest_pars_fragment:BV,aomap_fragment:VV,aomap_pars_fragment:GV,begin_vertex:HV,beginnormal_vertex:WV,bsdfs:jV,iridescence_fragment:ZV,bumpmap_pars_fragment:XV,clipping_planes_fragment:YV,clipping_planes_pars_fragment:qV,clipping_planes_pars_vertex:KV,clipping_planes_vertex:JV,color_fragment:QV,color_pars_fragment:$V,color_pars_vertex:e8,color_vertex:t8,common:n8,cube_uv_reflection_fragment:i8,defaultnormal_vertex:r8,displacementmap_pars_vertex:s8,displacementmap_vertex:o8,emissivemap_fragment:a8,emissivemap_pars_fragment:l8,encodings_fragment:u8,encodings_pars_fragment:c8,envmap_fragment:f8,envmap_common_pars_fragment:h8,envmap_pars_fragment:d8,envmap_pars_vertex:p8,envmap_physical_pars_fragment:E8,envmap_vertex:m8,fog_vertex:g8,fog_pars_vertex:v8,fog_fragment:y8,fog_pars_fragment:_8,gradientmap_pars_fragment:x8,lightmap_fragment:w8,lightmap_pars_fragment:S8,lights_lambert_fragment:M8,lights_lambert_pars_fragment:b8,lights_pars_begin:T8,lights_toon_fragment:P8,lights_toon_pars_fragment:C8,lights_phong_fragment:A8,lights_phong_pars_fragment:L8,lights_physical_fragment:R8,lights_physical_pars_fragment:k8,lights_fragment_begin:I8,lights_fragment_maps:D8,lights_fragment_end:N8,logdepthbuf_fragment:O8,logdepthbuf_pars_fragment:z8,logdepthbuf_pars_vertex:F8,logdepthbuf_vertex:U8,map_fragment:B8,map_pars_fragment:V8,map_particle_fragment:G8,map_particle_pars_fragment:H8,metalnessmap_fragment:W8,metalnessmap_pars_fragment:j8,morphcolor_vertex:Z8,morphnormal_vertex:X8,morphtarget_pars_vertex:Y8,morphtarget_vertex:q8,normal_fragment_begin:K8,normal_fragment_maps:J8,normal_pars_fragment:Q8,normal_pars_vertex:$8,normal_vertex:eG,normalmap_pars_fragment:tG,clearcoat_normal_fragment_begin:nG,clearcoat_normal_fragment_maps:iG,clearcoat_pars_fragment:rG,iridescence_pars_fragment:sG,output_fragment:oG,packing:aG,premultiplied_alpha_fragment:lG,project_vertex:uG,dithering_fragment:cG,dithering_pars_fragment:fG,roughnessmap_fragment:hG,roughnessmap_pars_fragment:dG,shadowmap_pars_fragment:pG,shadowmap_pars_vertex:mG,shadowmap_vertex:gG,shadowmask_pars_fragment:vG,skinbase_vertex:yG,skinning_pars_vertex:_G,skinning_vertex:xG,skinnormal_vertex:wG,specularmap_fragment:SG,specularmap_pars_fragment:MG,tonemapping_fragment:bG,tonemapping_pars_fragment:TG,transmission_fragment:EG,transmission_pars_fragment:PG,uv_pars_fragment:CG,uv_pars_vertex:AG,uv_vertex:LG,uv2_pars_fragment:RG,uv2_pars_vertex:kG,uv2_vertex:IG,worldpos_vertex:DG,background_vert:NG,background_frag:OG,backgroundCube_vert:zG,backgroundCube_frag:FG,cube_vert:UG,cube_frag:BG,depth_vert:VG,depth_frag:GG,distanceRGBA_vert:HG,distanceRGBA_frag:WG,equirect_vert:jG,equirect_frag:ZG,linedashed_vert:XG,linedashed_frag:YG,meshbasic_vert:qG,meshbasic_frag:KG,meshlambert_vert:JG,meshlambert_frag:QG,meshmatcap_vert:$G,meshmatcap_frag:eH,meshnormal_vert:tH,meshnormal_frag:nH,meshphong_vert:iH,meshphong_frag:rH,meshphysical_vert:sH,meshphysical_frag:oH,meshtoon_vert:aH,meshtoon_frag:lH,points_vert:uH,points_frag:cH,shadow_vert:fH,shadow_frag:hH,sprite_vert:dH,sprite_frag:pH},at={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ni},uv2Transform:{value:new Ni},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ni}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ni}}},ao={basic:{uniforms:Rr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:Wt.meshbasic_vert,fragmentShader:Wt.meshbasic_frag},lambert:{uniforms:Rr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new ht(0)}}]),vertexShader:Wt.meshlambert_vert,fragmentShader:Wt.meshlambert_frag},phong:{uniforms:Rr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:Wt.meshphong_vert,fragmentShader:Wt.meshphong_frag},standard:{uniforms:Rr([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag},toon:{uniforms:Rr([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new ht(0)}}]),vertexShader:Wt.meshtoon_vert,fragmentShader:Wt.meshtoon_frag},matcap:{uniforms:Rr([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:Wt.meshmatcap_vert,fragmentShader:Wt.meshmatcap_frag},points:{uniforms:Rr([at.points,at.fog]),vertexShader:Wt.points_vert,fragmentShader:Wt.points_frag},dashed:{uniforms:Rr([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wt.linedashed_vert,fragmentShader:Wt.linedashed_frag},depth:{uniforms:Rr([at.common,at.displacementmap]),vertexShader:Wt.depth_vert,fragmentShader:Wt.depth_frag},normal:{uniforms:Rr([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:Wt.meshnormal_vert,fragmentShader:Wt.meshnormal_frag},sprite:{uniforms:Rr([at.sprite,at.fog]),vertexShader:Wt.sprite_vert,fragmentShader:Wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ni},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wt.background_vert,fragmentShader:Wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Wt.backgroundCube_vert,fragmentShader:Wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wt.cube_vert,fragmentShader:Wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wt.equirect_vert,fragmentShader:Wt.equirect_frag},distanceRGBA:{uniforms:Rr([at.common,at.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wt.distanceRGBA_vert,fragmentShader:Wt.distanceRGBA_frag},shadow:{uniforms:Rr([at.lights,at.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:Wt.shadow_vert,fragmentShader:Wt.shadow_frag}};ao.physical={uniforms:Rr([ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag};const cg={r:0,b:0,g:0};function mH(n,e,t,i,r,s,o){const a=new ht(0);let l=s===!0?0:1,c,f,p=null,m=0,v=null;function y(S,T){let M=!1,b=T.isScene===!0?T.background:null;b&&b.isTexture&&(b=(T.backgroundBlurriness>0?t:e).get(b));const C=n.xr,k=C.getSession&&C.getSession();k&&k.environmentBlendMode==="additive"&&(b=null),b===null?_(a,l):b&&b.isColor&&(_(b,1),M=!0),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Hf)?(f===void 0&&(f=new pi(new Wl(1,1,1),new Fo({name:"BackgroundCubeMaterial",uniforms:Df(ao.backgroundCube.uniforms),vertexShader:ao.backgroundCube.vertexShader,fragmentShader:ao.backgroundCube.fragmentShader,side:Nr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(I,z,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=b,f.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.toneMapped=b.encoding!==gn,(p!==b||m!==b.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,p=b,m=b.version,v=n.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new pi(new Na(2,2),new Fo({name:"BackgroundMaterial",uniforms:Df(ao.background.uniforms),vertexShader:ao.background.vertexShader,fragmentShader:ao.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,c.material.toneMapped=b.encoding!==gn,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(p!==b||m!==b.version||v!==n.toneMapping)&&(c.material.needsUpdate=!0,p=b,m=b.version,v=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function _(S,T){S.getRGB(cg,HR(n)),i.buffers.color.setClear(cg.r,cg.g,cg.b,T,o)}return{getClearColor:function(){return a},setClearColor:function(S,T=1){a.set(S),l=T,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:y}}function gH(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=S(null);let c=l,f=!1;function p(J,ae,ce,ye,F){let X=!1;if(o){const H=_(ye,ce,ae);c!==H&&(c=H,v(c.object)),X=T(J,ye,ce,F),X&&M(J,ye,ce,F)}else{const H=ae.wireframe===!0;(c.geometry!==ye.id||c.program!==ce.id||c.wireframe!==H)&&(c.geometry=ye.id,c.program=ce.id,c.wireframe=H,X=!0)}F!==null&&t.update(F,34963),(X||f)&&(f=!1,A(J,ae,ce,ye),F!==null&&n.bindBuffer(34963,t.get(F).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(J){return i.isWebGL2?n.bindVertexArray(J):s.bindVertexArrayOES(J)}function y(J){return i.isWebGL2?n.deleteVertexArray(J):s.deleteVertexArrayOES(J)}function _(J,ae,ce){const ye=ce.wireframe===!0;let F=a[J.id];F===void 0&&(F={},a[J.id]=F);let X=F[ae.id];X===void 0&&(X={},F[ae.id]=X);let H=X[ye];return H===void 0&&(H=S(m()),X[ye]=H),H}function S(J){const ae=[],ce=[],ye=[];for(let F=0;F<r;F++)ae[F]=0,ce[F]=0,ye[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ae,enabledAttributes:ce,attributeDivisors:ye,object:J,attributes:{},index:null}}function T(J,ae,ce,ye){const F=c.attributes,X=ae.attributes;let H=0;const W=ce.getAttributes();for(const j in W)if(W[j].location>=0){const ee=F[j];let Z=X[j];if(Z===void 0&&(j==="instanceMatrix"&&J.instanceMatrix&&(Z=J.instanceMatrix),j==="instanceColor"&&J.instanceColor&&(Z=J.instanceColor)),ee===void 0||ee.attribute!==Z||Z&&ee.data!==Z.data)return!0;H++}return c.attributesNum!==H||c.index!==ye}function M(J,ae,ce,ye){const F={},X=ae.attributes;let H=0;const W=ce.getAttributes();for(const j in W)if(W[j].location>=0){let ee=X[j];ee===void 0&&(j==="instanceMatrix"&&J.instanceMatrix&&(ee=J.instanceMatrix),j==="instanceColor"&&J.instanceColor&&(ee=J.instanceColor));const Z={};Z.attribute=ee,ee&&ee.data&&(Z.data=ee.data),F[j]=Z,H++}c.attributes=F,c.attributesNum=H,c.index=ye}function b(){const J=c.newAttributes;for(let ae=0,ce=J.length;ae<ce;ae++)J[ae]=0}function C(J){k(J,0)}function k(J,ae){const ce=c.newAttributes,ye=c.enabledAttributes,F=c.attributeDivisors;ce[J]=1,ye[J]===0&&(n.enableVertexAttribArray(J),ye[J]=1),F[J]!==ae&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](J,ae),F[J]=ae)}function I(){const J=c.newAttributes,ae=c.enabledAttributes;for(let ce=0,ye=ae.length;ce<ye;ce++)ae[ce]!==J[ce]&&(n.disableVertexAttribArray(ce),ae[ce]=0)}function z(J,ae,ce,ye,F,X){i.isWebGL2===!0&&(ce===5124||ce===5125)?n.vertexAttribIPointer(J,ae,ce,F,X):n.vertexAttribPointer(J,ae,ce,ye,F,X)}function A(J,ae,ce,ye){if(i.isWebGL2===!1&&(J.isInstancedMesh||ye.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const F=ye.attributes,X=ce.getAttributes(),H=ae.defaultAttributeValues;for(const W in X){const j=X[W];if(j.location>=0){let se=F[W];if(se===void 0&&(W==="instanceMatrix"&&J.instanceMatrix&&(se=J.instanceMatrix),W==="instanceColor"&&J.instanceColor&&(se=J.instanceColor)),se!==void 0){const ee=se.normalized,Z=se.itemSize,ue=t.get(se);if(ue===void 0)continue;const de=ue.buffer,_e=ue.type,Ae=ue.bytesPerElement;if(se.isInterleavedBufferAttribute){const Ue=se.data,ke=Ue.stride,he=se.offset;if(Ue.isInstancedInterleavedBuffer){for(let Se=0;Se<j.locationSize;Se++)k(j.location+Se,Ue.meshPerAttribute);J.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let Se=0;Se<j.locationSize;Se++)C(j.location+Se);n.bindBuffer(34962,de);for(let Se=0;Se<j.locationSize;Se++)z(j.location+Se,Z/j.locationSize,_e,ee,ke*Ae,(he+Z/j.locationSize*Se)*Ae)}else{if(se.isInstancedBufferAttribute){for(let Ue=0;Ue<j.locationSize;Ue++)k(j.location+Ue,se.meshPerAttribute);J.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ue=0;Ue<j.locationSize;Ue++)C(j.location+Ue);n.bindBuffer(34962,de);for(let Ue=0;Ue<j.locationSize;Ue++)z(j.location+Ue,Z/j.locationSize,_e,ee,Z*Ae,Z/j.locationSize*Ue*Ae)}}else if(H!==void 0){const ee=H[W];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(j.location,ee);break;case 3:n.vertexAttrib3fv(j.location,ee);break;case 4:n.vertexAttrib4fv(j.location,ee);break;default:n.vertexAttrib1fv(j.location,ee)}}}}I()}function O(){Y();for(const J in a){const ae=a[J];for(const ce in ae){const ye=ae[ce];for(const F in ye)y(ye[F].object),delete ye[F];delete ae[ce]}delete a[J]}}function U(J){if(a[J.id]===void 0)return;const ae=a[J.id];for(const ce in ae){const ye=ae[ce];for(const F in ye)y(ye[F].object),delete ye[F];delete ae[ce]}delete a[J.id]}function $(J){for(const ae in a){const ce=a[ae];if(ce[J.id]===void 0)continue;const ye=ce[J.id];for(const F in ye)y(ye[F].object),delete ye[F];delete ce[J.id]}}function Y(){te(),f=!0,c!==l&&(c=l,v(c.object))}function te(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:Y,resetDefaultState:te,dispose:O,releaseStatesOfGeometry:U,releaseStatesOfProgram:$,initAttributes:b,enableAttribute:C,disableUnusedAttributes:I}}function vH(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,f){n.drawArrays(s,c,f),t.update(f,s,1)}function l(c,f,p){if(p===0)return;let m,v;if(r)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,c,f,p),t.update(f,s,p)}this.setMode=o,this.render=a,this.renderInstances=l}function yH(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(z){if(z==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,p=n.getParameter(34930),m=n.getParameter(35660),v=n.getParameter(3379),y=n.getParameter(34076),_=n.getParameter(34921),S=n.getParameter(36347),T=n.getParameter(36348),M=n.getParameter(36349),b=m>0,C=o||e.has("OES_texture_float"),k=b&&C,I=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:S,maxVaryings:T,maxFragmentUniforms:M,vertexTextures:b,floatFragmentTextures:C,floatVertexTextures:k,maxSamples:I}}function _H(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ca,a=new Ni,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const v=p.length!==0||m||i!==0||r;return r=m,i=p.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=f(p,m,0)},this.setState=function(p,m,v){const y=p.clippingPlanes,_=p.clipIntersection,S=p.clipShadows,T=n.get(p);if(!r||y===null||y.length===0||s&&!S)s?f(null):c();else{const M=s?0:i,b=M*4;let C=T.clippingState||null;l.value=C,C=f(y,m,b,v);for(let k=0;k!==b;++k)C[k]=t[k];T.clippingState=C,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=M}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(p,m,v,y){const _=p!==null?p.length:0;let S=null;if(_!==0){if(S=l.value,y!==!0||S===null){const T=v+_*4,M=m.matrixWorldInverse;a.getNormalMatrix(M),(S===null||S.length<T)&&(S=new Float32Array(T));for(let b=0,C=v;b!==_;++b,C+=4)o.copy(p[b]).applyMatrix4(M,a),o.normal.toArray(S,C),S[C+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,S}}function xH(n){let e=new WeakMap;function t(o,a){return a===jd?o.mapping=Il:a===Zd&&(o.mapping=Dl),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===jd||a===Zd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new jR(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ll extends Ep{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const lf=4,WT=[.125,.215,.35,.446,.526,.582],Pu=20,b_=new Ll,jT=new ht;let T_=null;const Tu=(1+Math.sqrt(5))/2,Oc=1/Tu,ZT=[new ne(1,1,1),new ne(-1,1,1),new ne(1,1,-1),new ne(-1,1,-1),new ne(0,Tu,Oc),new ne(0,Tu,-Oc),new ne(Oc,0,Tu),new ne(-Oc,0,Tu),new ne(Tu,Oc,0),new ne(-Tu,Oc,0)];class G1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){T_=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=YT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(T_),e.scissorTest=!1,fg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Il||e.mapping===Dl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),T_=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Fn,minFilter:Fn,generateMipmaps:!1,type:kf,format:Xr,encoding:Ca,depthBuffer:!1},r=XT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=XT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=wH(s)),this._blurMaterial=SH(s,e,t)}return r}_compileMaterial(e){const t=new pi(this._lodPlanes[0],e);this._renderer.compile(t,b_)}_sceneToCubeUV(e,t,i,r){const a=new ii(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,m=f.toneMapping;f.getClearColor(jT),f.toneMapping=mo,f.autoClear=!1;const v=new Da({name:"PMREM.Background",side:Nr,depthWrite:!1,depthTest:!1}),y=new pi(new Wl,v);let _=!1;const S=e.background;S?S.isColor&&(v.color.copy(S),e.background=null,_=!0):(v.color.copy(jT),_=!0);for(let T=0;T<6;T++){const M=T%3;M===0?(a.up.set(0,l[T],0),a.lookAt(c[T],0,0)):M===1?(a.up.set(0,0,l[T]),a.lookAt(0,c[T],0)):(a.up.set(0,l[T],0),a.lookAt(0,0,c[T]));const b=this._cubeSize;fg(r,M*b,T>2?b:0,b,b),f.setRenderTarget(r),_&&f.render(y,a),f.render(e,a)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=m,f.autoClear=p,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Il||e.mapping===Dl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=qT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=YT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new pi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;fg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,b_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=ZT[(r-1)%ZT.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new pi(this._lodPlanes[r],c),m=c.uniforms,v=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Pu-1),_=s/y,S=isFinite(s)?1+Math.floor(f*_):Pu;S>Pu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Pu}`);const T=[];let M=0;for(let z=0;z<Pu;++z){const A=z/_,O=Math.exp(-A*A/2);T.push(O),z===0?M+=O:z<S&&(M+=2*O)}for(let z=0;z<T.length;z++)T[z]=T[z]/M;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=T,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:b}=this;m.dTheta.value=y,m.mipInt.value=b-i;const C=this._sizeLods[r],k=3*C*(r>b-lf?r-b+lf:0),I=4*(this._cubeSize-C);fg(t,k,I,3*C,2*C),l.setRenderTarget(t),l.render(p,b_)}}function wH(n){const e=[],t=[],i=[];let r=n;const s=n-lf+1+WT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-lf?l=WT[o-n+lf-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),f=-c,p=1+c,m=[f,f,p,f,p,p,f,f,p,p,f,p],v=6,y=6,_=3,S=2,T=1,M=new Float32Array(_*y*v),b=new Float32Array(S*y*v),C=new Float32Array(T*y*v);for(let I=0;I<v;I++){const z=I%3*2/3-1,A=I>2?0:-1,O=[z,A,0,z+2/3,A,0,z+2/3,A+1,0,z,A,0,z+2/3,A+1,0,z,A+1,0];M.set(O,_*y*I),b.set(m,S*y*I);const U=[I,I,I,I,I,I];C.set(U,T*y*I)}const k=new jt;k.setAttribute("position",new xn(M,_)),k.setAttribute("uv",new xn(b,S)),k.setAttribute("faceIndex",new xn(C,T)),e.push(k),r>lf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function XT(n,e,t){const i=new vo(n,e,t);return i.texture.mapping=Hf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function fg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function SH(n,e,t){const i=new Float32Array(Pu),r=new ne(0,1,0);return new Fo({name:"SphericalGaussianBlur",defines:{n:Pu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ZS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function YT(){return new Fo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ZS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function qT(){return new Fo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ZS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function ZS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function MH(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===jd||l===Zd,f=l===Il||l===Dl;if(c||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new G1(n)),p=c?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(c&&p&&p.height>0||f&&p&&r(p)){t===null&&(t=new G1(n));const m=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",s),m.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let f=0;f<c;f++)a[f]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function bH(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function TH(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const y in m.attributes)e.remove(m.attributes[y]);m.removeEventListener("dispose",o),delete r[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(p,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const y in m)e.update(m[y],34962);const v=p.morphAttributes;for(const y in v){const _=v[y];for(let S=0,T=_.length;S<T;S++)e.update(_[S],34962)}}function c(p){const m=[],v=p.index,y=p.attributes.position;let _=0;if(v!==null){const M=v.array;_=v.version;for(let b=0,C=M.length;b<C;b+=3){const k=M[b+0],I=M[b+1],z=M[b+2];m.push(k,I,I,z,z,k)}}else{const M=y.array;_=y.version;for(let b=0,C=M.length/3-1;b<C;b+=3){const k=b+0,I=b+1,z=b+2;m.push(k,I,I,z,z,k)}}const S=new(VR(m)?WS:HS)(m,1);S.version=_;const T=s.get(p);T&&e.remove(T),s.set(p,S)}function f(p){const m=s.get(p);if(m){const v=p.index;v!==null&&m.version<v.version&&c(p)}else c(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:f}}function EH(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function f(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function p(m,v,y){if(y===0)return;let _,S;if(r)_=n,S="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[S](s,v,a,m*l,y),t.update(v,s,y)}this.setMode=o,this.setIndex=c,this.render=f,this.renderInstances=p}function PH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function CH(n,e){return n[0]-e[0]}function AH(n,e){return Math.abs(e[1])-Math.abs(n[1])}function LH(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new hn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,f,p){const m=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,y=v!==void 0?v.length:0;let _=s.get(f);if(_===void 0||_.count!==y){let J=function(){Y.dispose(),s.delete(f),f.removeEventListener("dispose",J)};_!==void 0&&_.texture.dispose();const M=f.morphAttributes.position!==void 0,b=f.morphAttributes.normal!==void 0,C=f.morphAttributes.color!==void 0,k=f.morphAttributes.position||[],I=f.morphAttributes.normal||[],z=f.morphAttributes.color||[];let A=0;M===!0&&(A=1),b===!0&&(A=2),C===!0&&(A=3);let O=f.attributes.position.count*A,U=1;O>e.maxTextureSize&&(U=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const $=new Float32Array(O*U*4*y),Y=new C0($,O,U,y);Y.type=pa,Y.needsUpdate=!0;const te=A*4;for(let ae=0;ae<y;ae++){const ce=k[ae],ye=I[ae],F=z[ae],X=O*U*4*ae;for(let H=0;H<ce.count;H++){const W=H*te;M===!0&&(o.fromBufferAttribute(ce,H),$[X+W+0]=o.x,$[X+W+1]=o.y,$[X+W+2]=o.z,$[X+W+3]=0),b===!0&&(o.fromBufferAttribute(ye,H),$[X+W+4]=o.x,$[X+W+5]=o.y,$[X+W+6]=o.z,$[X+W+7]=0),C===!0&&(o.fromBufferAttribute(F,H),$[X+W+8]=o.x,$[X+W+9]=o.y,$[X+W+10]=o.z,$[X+W+11]=F.itemSize===4?o.w:1)}}_={count:y,texture:Y,size:new Ge(O,U)},s.set(f,_),f.addEventListener("dispose",J)}let S=0;for(let M=0;M<m.length;M++)S+=m[M];const T=f.morphTargetsRelative?1:1-S;p.getUniforms().setValue(n,"morphTargetBaseInfluence",T),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=m===void 0?0:m.length;let y=i[f.id];if(y===void 0||y.length!==v){y=[];for(let b=0;b<v;b++)y[b]=[b,0];i[f.id]=y}for(let b=0;b<v;b++){const C=y[b];C[0]=b,C[1]=m[b]}y.sort(AH);for(let b=0;b<8;b++)b<v&&y[b][1]?(a[b][0]=y[b][0],a[b][1]=y[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(CH);const _=f.morphAttributes.position,S=f.morphAttributes.normal;let T=0;for(let b=0;b<8;b++){const C=a[b],k=C[0],I=C[1];k!==Number.MAX_SAFE_INTEGER&&I?(_&&f.getAttribute("morphTarget"+b)!==_[k]&&f.setAttribute("morphTarget"+b,_[k]),S&&f.getAttribute("morphNormal"+b)!==S[k]&&f.setAttribute("morphNormal"+b,S[k]),r[b]=I,T+=I):(_&&f.hasAttribute("morphTarget"+b)===!0&&f.deleteAttribute("morphTarget"+b),S&&f.hasAttribute("morphNormal"+b)===!0&&f.deleteAttribute("morphNormal"+b),r[b]=0)}const M=f.morphTargetsRelative?1:1-T;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function RH(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,f=l.geometry,p=e.get(l,f);return r.get(p)!==c&&(e.update(p),r.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),p}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const XR=new Gn,YR=new C0,qR=new GS,KR=new Pp,KT=[],JT=[],QT=new Float32Array(16),$T=new Float32Array(9),eE=new Float32Array(4);function jf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=KT[r];if(s===void 0&&(s=new Float32Array(r),KT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Pi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ci(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function L0(n,e){let t=JT[e];t===void 0&&(t=new Int32Array(e),JT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function kH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function IH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2fv(this.addr,e),Ci(t,e)}}function DH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;n.uniform3fv(this.addr,e),Ci(t,e)}}function NH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4fv(this.addr,e),Ci(t,e)}}function OH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ci(t,e)}else{if(Pi(t,i))return;eE.set(i),n.uniformMatrix2fv(this.addr,!1,eE),Ci(t,i)}}function zH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ci(t,e)}else{if(Pi(t,i))return;$T.set(i),n.uniformMatrix3fv(this.addr,!1,$T),Ci(t,i)}}function FH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ci(t,e)}else{if(Pi(t,i))return;QT.set(i),n.uniformMatrix4fv(this.addr,!1,QT),Ci(t,i)}}function UH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function BH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2iv(this.addr,e),Ci(t,e)}}function VH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3iv(this.addr,e),Ci(t,e)}}function GH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4iv(this.addr,e),Ci(t,e)}}function HH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function WH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2uiv(this.addr,e),Ci(t,e)}}function jH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3uiv(this.addr,e),Ci(t,e)}}function ZH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4uiv(this.addr,e),Ci(t,e)}}function XH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||XR,r)}function YH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||qR,r)}function qH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||KR,r)}function KH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||YR,r)}function JH(n){switch(n){case 5126:return kH;case 35664:return IH;case 35665:return DH;case 35666:return NH;case 35674:return OH;case 35675:return zH;case 35676:return FH;case 5124:case 35670:return UH;case 35667:case 35671:return BH;case 35668:case 35672:return VH;case 35669:case 35673:return GH;case 5125:return HH;case 36294:return WH;case 36295:return jH;case 36296:return ZH;case 35678:case 36198:case 36298:case 36306:case 35682:return XH;case 35679:case 36299:case 36307:return YH;case 35680:case 36300:case 36308:case 36293:return qH;case 36289:case 36303:case 36311:case 36292:return KH}}function QH(n,e){n.uniform1fv(this.addr,e)}function $H(n,e){const t=jf(e,this.size,2);n.uniform2fv(this.addr,t)}function eW(n,e){const t=jf(e,this.size,3);n.uniform3fv(this.addr,t)}function tW(n,e){const t=jf(e,this.size,4);n.uniform4fv(this.addr,t)}function nW(n,e){const t=jf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function iW(n,e){const t=jf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function rW(n,e){const t=jf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function sW(n,e){n.uniform1iv(this.addr,e)}function oW(n,e){n.uniform2iv(this.addr,e)}function aW(n,e){n.uniform3iv(this.addr,e)}function lW(n,e){n.uniform4iv(this.addr,e)}function uW(n,e){n.uniform1uiv(this.addr,e)}function cW(n,e){n.uniform2uiv(this.addr,e)}function fW(n,e){n.uniform3uiv(this.addr,e)}function hW(n,e){n.uniform4uiv(this.addr,e)}function dW(n,e,t){const i=this.cache,r=e.length,s=L0(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||XR,s[o])}function pW(n,e,t){const i=this.cache,r=e.length,s=L0(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||qR,s[o])}function mW(n,e,t){const i=this.cache,r=e.length,s=L0(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||KR,s[o])}function gW(n,e,t){const i=this.cache,r=e.length,s=L0(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||YR,s[o])}function vW(n){switch(n){case 5126:return QH;case 35664:return $H;case 35665:return eW;case 35666:return tW;case 35674:return nW;case 35675:return iW;case 35676:return rW;case 5124:case 35670:return sW;case 35667:case 35671:return oW;case 35668:case 35672:return aW;case 35669:case 35673:return lW;case 5125:return uW;case 36294:return cW;case 36295:return fW;case 36296:return hW;case 35678:case 36198:case 36298:case 36306:case 35682:return dW;case 35679:case 36299:case 36307:return pW;case 35680:case 36300:case 36308:case 36293:return mW;case 36289:case 36303:case 36311:case 36292:return gW}}class yW{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=JH(t.type)}}class _W{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=vW(t.type)}}class xW{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const E_=/(\w+)(\])?(\[|\.)?/g;function tE(n,e){n.seq.push(e),n.map[e.id]=e}function wW(n,e,t){const i=n.name,r=i.length;for(E_.lastIndex=0;;){const s=E_.exec(i),o=E_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){tE(t,c===void 0?new yW(a,n,e):new _W(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new xW(a),tE(t,p)),t=p}}}class uv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);wW(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function nE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let SW=0;function MW(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function bW(n){switch(n){case Ca:return["Linear","( value )"];case gn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function iE(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+MW(n.getShaderSource(e),o)}else return r}function TW(n,e){const t=bW(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function EW(n,e){let t;switch(e){case pR:t="Linear";break;case mR:t="Reinhard";break;case gR:t="OptimizedCineon";break;case DS:t="ACESFilmic";break;case vR:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function PW(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jh).join(`
`)}function CW(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function AW(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Jh(n){return n!==""}function rE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function sE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const LW=/^[ \t]*#include +<([\w\d./]+)>/gm;function H1(n){return n.replace(LW,RW)}function RW(n,e){const t=Wt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return H1(t)}const kW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oE(n){return n.replace(kW,IW)}function IW(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function aE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function DW(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===T0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===pd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ku&&(e="SHADOWMAP_TYPE_VSM"),e}function NW(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Il:case Dl:e="ENVMAP_TYPE_CUBE";break;case Hf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function OW(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Dl:e="ENVMAP_MODE_REFRACTION";break}return e}function zW(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bp:e="ENVMAP_BLENDING_MULTIPLY";break;case hR:e="ENVMAP_BLENDING_MIX";break;case dR:e="ENVMAP_BLENDING_ADD";break}return e}function FW(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function UW(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=DW(t),c=NW(t),f=OW(t),p=zW(t),m=FW(t),v=t.isWebGL2?"":PW(t),y=CW(s),_=r.createProgram();let S,T,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=[y].filter(Jh).join(`
`),S.length>0&&(S+=`
`),T=[v,y].filter(Jh).join(`
`),T.length>0&&(T+=`
`)):(S=[aE(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Jh).join(`
`),T=[v,aE(t),"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==mo?"#define TONE_MAPPING":"",t.toneMapping!==mo?Wt.tonemapping_pars_fragment:"",t.toneMapping!==mo?EW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Wt.encodings_pars_fragment,TW("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Jh).join(`
`)),o=H1(o),o=rE(o,t),o=sE(o,t),a=H1(a),a=rE(a,t),a=sE(a,t),o=oE(o),a=oE(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,S=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,T=["#define varying in",t.glslVersion===B1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===B1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const b=M+S+o,C=M+T+a,k=nE(r,35633,b),I=nE(r,35632,C);if(r.attachShader(_,k),r.attachShader(_,I),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const O=r.getProgramInfoLog(_).trim(),U=r.getShaderInfoLog(k).trim(),$=r.getShaderInfoLog(I).trim();let Y=!0,te=!0;if(r.getProgramParameter(_,35714)===!1){Y=!1;const J=iE(r,k,"vertex"),ae=iE(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,35715)+`

Program Info Log: `+O+`
`+J+`
`+ae)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(U===""||$==="")&&(te=!1);te&&(this.diagnostics={runnable:Y,programLog:O,vertexShader:{log:U,prefix:S},fragmentShader:{log:$,prefix:T}})}r.deleteShader(k),r.deleteShader(I);let z;this.getUniforms=function(){return z===void 0&&(z=new uv(r,_)),z};let A;return this.getAttributes=function(){return A===void 0&&(A=AW(r,_)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=SW++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=k,this.fragmentShader=I,this}let BW=0;class VW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new GW(e),t.set(e,i)),i}}class GW{constructor(e){this.id=BW++,this.code=e,this.usedTimes=0}}function HW(n,e,t,i,r,s,o){const a=new Gu,l=new VW,c=[],f=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(A,O,U,$,Y){const te=$.fog,J=Y.geometry,ae=A.isMeshStandardMaterial?$.environment:null,ce=(A.isMeshStandardMaterial?t:e).get(A.envMap||ae),ye=ce&&ce.mapping===Hf?ce.image.height:null,F=y[A.type];A.precision!==null&&(v=r.getMaxPrecision(A.precision),v!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",v,"instead."));const X=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,H=X!==void 0?X.length:0;let W=0;J.morphAttributes.position!==void 0&&(W=1),J.morphAttributes.normal!==void 0&&(W=2),J.morphAttributes.color!==void 0&&(W=3);let j,se,ee,Z;if(F){const ke=ao[F];j=ke.vertexShader,se=ke.fragmentShader}else j=A.vertexShader,se=A.fragmentShader,l.update(A),ee=l.getVertexShaderID(A),Z=l.getFragmentShaderID(A);const ue=n.getRenderTarget(),de=A.alphaTest>0,_e=A.clearcoat>0,Ae=A.iridescence>0;return{isWebGL2:f,shaderID:F,shaderName:A.type,vertexShader:j,fragmentShader:se,defines:A.defines,customVertexShaderID:ee,customFragmentShaderID:Z,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:v,instancing:Y.isInstancedMesh===!0,instancingColor:Y.isInstancedMesh===!0&&Y.instanceColor!==null,supportsVertexTextures:m,outputEncoding:ue===null?n.outputEncoding:ue.isXRRenderTarget===!0?ue.texture.encoding:Ca,map:!!A.map,matcap:!!A.matcap,envMap:!!ce,envMapMode:ce&&ce.mapping,envMapCubeUVHeight:ye,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===zR,tangentSpaceNormalMap:A.normalMapType===Vl,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===gn,clearcoat:_e,clearcoatMap:_e&&!!A.clearcoatMap,clearcoatRoughnessMap:_e&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:_e&&!!A.clearcoatNormalMap,iridescence:Ae,iridescenceMap:Ae&&!!A.iridescenceMap,iridescenceThicknessMap:Ae&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===Uu,alphaMap:!!A.alphaMap,alphaTest:de,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!J.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatNormalMap||A.iridescenceMap||A.iridescenceThicknessMap||A.transmission>0||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheen>0||A.sheenColorMap||A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!te,useFog:A.fog===!0,fogExp2:te&&te.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:p,skinning:Y.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:W,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:A.toneMapped?n.toneMapping:mo,useLegacyLights:n.useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===uo,flipSided:A.side===Nr,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function S(A){const O=[];if(A.shaderID?O.push(A.shaderID):(O.push(A.customVertexShaderID),O.push(A.customFragmentShaderID)),A.defines!==void 0)for(const U in A.defines)O.push(U),O.push(A.defines[U]);return A.isRawShaderMaterial===!1&&(T(O,A),M(O,A),O.push(n.outputEncoding)),O.push(A.customProgramCacheKey),O.join()}function T(A,O){A.push(O.precision),A.push(O.outputEncoding),A.push(O.envMapMode),A.push(O.envMapCubeUVHeight),A.push(O.combine),A.push(O.vertexUvs),A.push(O.fogExp2),A.push(O.sizeAttenuation),A.push(O.morphTargetsCount),A.push(O.morphAttributeCount),A.push(O.numDirLights),A.push(O.numPointLights),A.push(O.numSpotLights),A.push(O.numSpotLightMaps),A.push(O.numHemiLights),A.push(O.numRectAreaLights),A.push(O.numDirLightShadows),A.push(O.numPointLightShadows),A.push(O.numSpotLightShadows),A.push(O.numSpotLightShadowsWithMaps),A.push(O.shadowMapType),A.push(O.toneMapping),A.push(O.numClippingPlanes),A.push(O.numClipIntersection),A.push(O.depthPacking)}function M(A,O){a.disableAll(),O.isWebGL2&&a.enable(0),O.supportsVertexTextures&&a.enable(1),O.instancing&&a.enable(2),O.instancingColor&&a.enable(3),O.map&&a.enable(4),O.matcap&&a.enable(5),O.envMap&&a.enable(6),O.lightMap&&a.enable(7),O.aoMap&&a.enable(8),O.emissiveMap&&a.enable(9),O.bumpMap&&a.enable(10),O.normalMap&&a.enable(11),O.objectSpaceNormalMap&&a.enable(12),O.tangentSpaceNormalMap&&a.enable(13),O.clearcoat&&a.enable(14),O.clearcoatMap&&a.enable(15),O.clearcoatRoughnessMap&&a.enable(16),O.clearcoatNormalMap&&a.enable(17),O.iridescence&&a.enable(18),O.iridescenceMap&&a.enable(19),O.iridescenceThicknessMap&&a.enable(20),O.displacementMap&&a.enable(21),O.specularMap&&a.enable(22),O.roughnessMap&&a.enable(23),O.metalnessMap&&a.enable(24),O.gradientMap&&a.enable(25),O.alphaMap&&a.enable(26),O.alphaTest&&a.enable(27),O.vertexColors&&a.enable(28),O.vertexAlphas&&a.enable(29),O.vertexUvs&&a.enable(30),O.vertexTangents&&a.enable(31),O.uvsVertexOnly&&a.enable(32),A.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.skinning&&a.enable(4),O.morphTargets&&a.enable(5),O.morphNormals&&a.enable(6),O.morphColors&&a.enable(7),O.premultipliedAlpha&&a.enable(8),O.shadowMapEnabled&&a.enable(9),O.useLegacyLights&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.specularIntensityMap&&a.enable(15),O.specularColorMap&&a.enable(16),O.transmission&&a.enable(17),O.transmissionMap&&a.enable(18),O.thicknessMap&&a.enable(19),O.sheen&&a.enable(20),O.sheenColorMap&&a.enable(21),O.sheenRoughnessMap&&a.enable(22),O.decodeVideoTexture&&a.enable(23),O.opaque&&a.enable(24),A.push(a.mask)}function b(A){const O=y[A.type];let U;if(O){const $=ao[O];U=jS.clone($.uniforms)}else U=A.uniforms;return U}function C(A,O){let U;for(let $=0,Y=c.length;$<Y;$++){const te=c[$];if(te.cacheKey===O){U=te,++U.usedTimes;break}}return U===void 0&&(U=new UW(n,O,A,s),c.push(U)),U}function k(A){if(--A.usedTimes===0){const O=c.indexOf(A);c[O]=c[c.length-1],c.pop(),A.destroy()}}function I(A){l.remove(A)}function z(){l.dispose()}return{getParameters:_,getProgramCacheKey:S,getUniforms:b,acquireProgram:C,releaseProgram:k,releaseShaderCache:I,programs:c,dispose:z}}function WW(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function jW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function lE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function uE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,v,y,_,S){let T=n[e];return T===void 0?(T={id:p.id,object:p,geometry:m,material:v,groupOrder:y,renderOrder:p.renderOrder,z:_,group:S},n[e]=T):(T.id=p.id,T.object=p,T.geometry=m,T.material=v,T.groupOrder=y,T.renderOrder=p.renderOrder,T.z=_,T.group=S),e++,T}function a(p,m,v,y,_,S){const T=o(p,m,v,y,_,S);v.transmission>0?i.push(T):v.transparent===!0?r.push(T):t.push(T)}function l(p,m,v,y,_,S){const T=o(p,m,v,y,_,S);v.transmission>0?i.unshift(T):v.transparent===!0?r.unshift(T):t.unshift(T)}function c(p,m){t.length>1&&t.sort(p||jW),i.length>1&&i.sort(m||lE),r.length>1&&r.sort(m||lE)}function f(){for(let p=e,m=n.length;p<m;p++){const v=n[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:c}}function ZW(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new uE,n.set(i,[o])):r>=s.length?(o=new uE,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function XW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new ht};break;case"SpotLight":t={position:new ne,direction:new ne,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":t={color:new ht,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return n[e.id]=t,t}}}function YW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let qW=0;function KW(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JW(n,e){const t=new XW,i=YW(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)r.probe.push(new ne);const s=new ne,o=new zt,a=new zt;function l(f,p){let m=0,v=0,y=0;for(let $=0;$<9;$++)r.probe[$].set(0,0,0);let _=0,S=0,T=0,M=0,b=0,C=0,k=0,I=0,z=0,A=0;f.sort(KW);const O=p===!0?Math.PI:1;for(let $=0,Y=f.length;$<Y;$++){const te=f[$],J=te.color,ae=te.intensity,ce=te.distance,ye=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)m+=J.r*ae*O,v+=J.g*ae*O,y+=J.b*ae*O;else if(te.isLightProbe)for(let F=0;F<9;F++)r.probe[F].addScaledVector(te.sh.coefficients[F],ae);else if(te.isDirectionalLight){const F=t.get(te);if(F.color.copy(te.color).multiplyScalar(te.intensity*O),te.castShadow){const X=te.shadow,H=i.get(te);H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,r.directionalShadow[_]=H,r.directionalShadowMap[_]=ye,r.directionalShadowMatrix[_]=te.shadow.matrix,C++}r.directional[_]=F,_++}else if(te.isSpotLight){const F=t.get(te);F.position.setFromMatrixPosition(te.matrixWorld),F.color.copy(J).multiplyScalar(ae*O),F.distance=ce,F.coneCos=Math.cos(te.angle),F.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),F.decay=te.decay,r.spot[T]=F;const X=te.shadow;if(te.map&&(r.spotLightMap[z]=te.map,z++,X.updateMatrices(te),te.castShadow&&A++),r.spotLightMatrix[T]=X.matrix,te.castShadow){const H=i.get(te);H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,r.spotShadow[T]=H,r.spotShadowMap[T]=ye,I++}T++}else if(te.isRectAreaLight){const F=t.get(te);F.color.copy(J).multiplyScalar(ae),F.halfWidth.set(te.width*.5,0,0),F.halfHeight.set(0,te.height*.5,0),r.rectArea[M]=F,M++}else if(te.isPointLight){const F=t.get(te);if(F.color.copy(te.color).multiplyScalar(te.intensity*O),F.distance=te.distance,F.decay=te.decay,te.castShadow){const X=te.shadow,H=i.get(te);H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,H.shadowCameraNear=X.camera.near,H.shadowCameraFar=X.camera.far,r.pointShadow[S]=H,r.pointShadowMap[S]=ye,r.pointShadowMatrix[S]=te.shadow.matrix,k++}r.point[S]=F,S++}else if(te.isHemisphereLight){const F=t.get(te);F.skyColor.copy(te.color).multiplyScalar(ae*O),F.groundColor.copy(te.groundColor).multiplyScalar(ae*O),r.hemi[b]=F,b++}}M>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=at.LTC_FLOAT_1,r.rectAreaLTC2=at.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=at.LTC_HALF_1,r.rectAreaLTC2=at.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=v,r.ambient[2]=y;const U=r.hash;(U.directionalLength!==_||U.pointLength!==S||U.spotLength!==T||U.rectAreaLength!==M||U.hemiLength!==b||U.numDirectionalShadows!==C||U.numPointShadows!==k||U.numSpotShadows!==I||U.numSpotMaps!==z)&&(r.directional.length=_,r.spot.length=T,r.rectArea.length=M,r.point.length=S,r.hemi.length=b,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=k,r.spotLightMatrix.length=I+z-A,r.spotLightMap.length=z,r.numSpotLightShadowsWithMaps=A,U.directionalLength=_,U.pointLength=S,U.spotLength=T,U.rectAreaLength=M,U.hemiLength=b,U.numDirectionalShadows=C,U.numPointShadows=k,U.numSpotShadows=I,U.numSpotMaps=z,r.version=qW++)}function c(f,p){let m=0,v=0,y=0,_=0,S=0;const T=p.matrixWorldInverse;for(let M=0,b=f.length;M<b;M++){const C=f[M];if(C.isDirectionalLight){const k=r.directional[m];k.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(T),m++}else if(C.isSpotLight){const k=r.spot[y];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(T),k.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(T),y++}else if(C.isRectAreaLight){const k=r.rectArea[_];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(T),a.identity(),o.copy(C.matrixWorld),o.premultiply(T),a.extractRotation(o),k.halfWidth.set(C.width*.5,0,0),k.halfHeight.set(0,C.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),_++}else if(C.isPointLight){const k=r.point[v];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(T),v++}else if(C.isHemisphereLight){const k=r.hemi[S];k.direction.setFromMatrixPosition(C.matrixWorld),k.direction.transformDirection(T),S++}}}return{setup:l,setupView:c,state:r}}function cE(n,e){const t=new JW(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(p){i.push(p)}function a(p){r.push(p)}function l(p){t.setup(i,p)}function c(p){t.setupView(i,p)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function QW(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new cE(n,e),t.set(s,[l])):o>=a.length?(l=new cE(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class R0 extends qi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class k0 extends qi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ne,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $W=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ej=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tj(n,e,t){let i=new A0;const r=new Ge,s=new Ge,o=new hn,a=new R0({depthPacking:FS}),l=new k0,c={},f=t.maxTextureSize,p={[zo]:Nr,[Nr]:zo,[uo]:uo},m=new Fo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:$W,fragmentShader:ej}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const y=new jt;y.setAttribute("position",new xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new pi(y,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T0,this.render=function(C,k,I){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||C.length===0)return;const z=n.getRenderTarget(),A=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),U=n.state;U.setBlending(ya),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);for(let $=0,Y=C.length;$<Y;$++){const te=C[$],J=te.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const ae=J.getFrameExtents();if(r.multiply(ae),s.copy(J.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/ae.x),r.x=s.x*ae.x,J.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/ae.y),r.y=s.y*ae.y,J.mapSize.y=s.y)),J.map===null){const ye=this.type!==ku?{minFilter:ei,magFilter:ei}:{};J.map=new vo(r.x,r.y,ye),J.map.texture.name=te.name+".shadowMap",J.camera.updateProjectionMatrix()}n.setRenderTarget(J.map),n.clear();const ce=J.getViewportCount();for(let ye=0;ye<ce;ye++){const F=J.getViewport(ye);o.set(s.x*F.x,s.y*F.y,s.x*F.z,s.y*F.w),U.viewport(o),J.updateMatrices(te,ye),i=J.getFrustum(),b(k,I,J.camera,te,this.type)}J.isPointLightShadow!==!0&&this.type===ku&&T(J,I),J.needsUpdate=!1}S.needsUpdate=!1,n.setRenderTarget(z,A,O)};function T(C,k){const I=e.update(_);m.defines.VSM_SAMPLES!==C.blurSamples&&(m.defines.VSM_SAMPLES=C.blurSamples,v.defines.VSM_SAMPLES=C.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new vo(r.x,r.y)),m.uniforms.shadow_pass.value=C.map.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(k,null,I,m,_,null),v.uniforms.shadow_pass.value=C.mapPass.texture,v.uniforms.resolution.value=C.mapSize,v.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(k,null,I,v,_,null)}function M(C,k,I,z,A,O){let U=null;const $=I.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if($!==void 0)U=$;else if(U=I.isPointLight===!0?l:a,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const Y=U.uuid,te=k.uuid;let J=c[Y];J===void 0&&(J={},c[Y]=J);let ae=J[te];ae===void 0&&(ae=U.clone(),J[te]=ae),U=ae}return U.visible=k.visible,U.wireframe=k.wireframe,O===ku?U.side=k.shadowSide!==null?k.shadowSide:k.side:U.side=k.shadowSide!==null?k.shadowSide:p[k.side],U.alphaMap=k.alphaMap,U.alphaTest=k.alphaTest,U.map=k.map,U.clipShadows=k.clipShadows,U.clippingPlanes=k.clippingPlanes,U.clipIntersection=k.clipIntersection,U.displacementMap=k.displacementMap,U.displacementScale=k.displacementScale,U.displacementBias=k.displacementBias,U.wireframeLinewidth=k.wireframeLinewidth,U.linewidth=k.linewidth,I.isPointLight===!0&&U.isMeshDistanceMaterial===!0&&(U.referencePosition.setFromMatrixPosition(I.matrixWorld),U.nearDistance=z,U.farDistance=A),U}function b(C,k,I,z,A){if(C.visible===!1)return;if(C.layers.test(k.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&A===ku)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,C.matrixWorld);const $=e.update(C),Y=C.material;if(Array.isArray(Y)){const te=$.groups;for(let J=0,ae=te.length;J<ae;J++){const ce=te[J],ye=Y[ce.materialIndex];if(ye&&ye.visible){const F=M(C,ye,z,I.near,I.far,A);n.renderBufferDirect(I,null,$,F,C,ce)}}}else if(Y.visible){const te=M(C,Y,z,I.near,I.far,A);n.renderBufferDirect(I,null,$,te,C,null)}}const U=C.children;for(let $=0,Y=U.length;$<Y;$++)b(U[$],k,I,z,A)}}function nj(n,e,t){const i=t.isWebGL2;function r(){let re=!1;const xe=new hn;let Be=null;const nt=new hn(0,0,0,0);return{setMask:function(ct){Be!==ct&&!re&&(n.colorMask(ct,ct,ct,ct),Be=ct)},setLocked:function(ct){re=ct},setClear:function(ct,Ft,Rt,Dt,kt){kt===!0&&(ct*=Dt,Ft*=Dt,Rt*=Dt),xe.set(ct,Ft,Rt,Dt),nt.equals(xe)===!1&&(n.clearColor(ct,Ft,Rt,Dt),nt.copy(xe))},reset:function(){re=!1,Be=null,nt.set(-1,0,0,0)}}}function s(){let re=!1,xe=null,Be=null,nt=null;return{setTest:function(ct){ct?de(2929):_e(2929)},setMask:function(ct){xe!==ct&&!re&&(n.depthMask(ct),xe=ct)},setFunc:function(ct){if(Be!==ct){switch(ct){case sR:n.depthFunc(512);break;case oR:n.depthFunc(519);break;case aR:n.depthFunc(513);break;case Yv:n.depthFunc(515);break;case lR:n.depthFunc(514);break;case uR:n.depthFunc(518);break;case cR:n.depthFunc(516);break;case fR:n.depthFunc(517);break;default:n.depthFunc(515)}Be=ct}},setLocked:function(ct){re=ct},setClear:function(ct){nt!==ct&&(n.clearDepth(ct),nt=ct)},reset:function(){re=!1,xe=null,Be=null,nt=null}}}function o(){let re=!1,xe=null,Be=null,nt=null,ct=null,Ft=null,Rt=null,Dt=null,kt=null;return{setTest:function(Jt){re||(Jt?de(2960):_e(2960))},setMask:function(Jt){xe!==Jt&&!re&&(n.stencilMask(Jt),xe=Jt)},setFunc:function(Jt,At,Ut){(Be!==Jt||nt!==At||ct!==Ut)&&(n.stencilFunc(Jt,At,Ut),Be=Jt,nt=At,ct=Ut)},setOp:function(Jt,At,Ut){(Ft!==Jt||Rt!==At||Dt!==Ut)&&(n.stencilOp(Jt,At,Ut),Ft=Jt,Rt=At,Dt=Ut)},setLocked:function(Jt){re=Jt},setClear:function(Jt){kt!==Jt&&(n.clearStencil(Jt),kt=Jt)},reset:function(){re=!1,xe=null,Be=null,nt=null,ct=null,Ft=null,Rt=null,Dt=null,kt=null}}}const a=new r,l=new s,c=new o,f=new WeakMap,p=new WeakMap;let m={},v={},y=new WeakMap,_=[],S=null,T=!1,M=null,b=null,C=null,k=null,I=null,z=null,A=null,O=!1,U=null,$=null,Y=null,te=null,J=null;const ae=n.getParameter(35661);let ce=!1,ye=0;const F=n.getParameter(7938);F.indexOf("WebGL")!==-1?(ye=parseFloat(/^WebGL (\d)/.exec(F)[1]),ce=ye>=1):F.indexOf("OpenGL ES")!==-1&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),ce=ye>=2);let X=null,H={};const W=n.getParameter(3088),j=n.getParameter(2978),se=new hn().fromArray(W),ee=new hn().fromArray(j);function Z(re,xe,Be){const nt=new Uint8Array(4),ct=n.createTexture();n.bindTexture(re,ct),n.texParameteri(re,10241,9728),n.texParameteri(re,10240,9728);for(let Ft=0;Ft<Be;Ft++)n.texImage2D(xe+Ft,0,6408,1,1,0,6408,5121,nt);return ct}const ue={};ue[3553]=Z(3553,3553,1),ue[34067]=Z(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),de(2929),l.setFunc(Yv),De(!1),Ke(f1),de(2884),Fe(ya);function de(re){m[re]!==!0&&(n.enable(re),m[re]=!0)}function _e(re){m[re]!==!1&&(n.disable(re),m[re]=!1)}function Ae(re,xe){return v[re]!==xe?(n.bindFramebuffer(re,xe),v[re]=xe,i&&(re===36009&&(v[36160]=xe),re===36160&&(v[36009]=xe)),!0):!1}function Ue(re,xe){let Be=_,nt=!1;if(re)if(Be=y.get(xe),Be===void 0&&(Be=[],y.set(xe,Be)),re.isWebGLMultipleRenderTargets){const ct=re.texture;if(Be.length!==ct.length||Be[0]!==36064){for(let Ft=0,Rt=ct.length;Ft<Rt;Ft++)Be[Ft]=36064+Ft;Be.length=ct.length,nt=!0}}else Be[0]!==36064&&(Be[0]=36064,nt=!0);else Be[0]!==1029&&(Be[0]=1029,nt=!0);nt&&(t.isWebGL2?n.drawBuffers(Be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function ke(re){return S!==re?(n.useProgram(re),S=re,!0):!1}const he={[Eu]:32774,[YL]:32778,[qL]:32779};if(i)he[m1]=32775,he[g1]=32776;else{const re=e.get("EXT_blend_minmax");re!==null&&(he[m1]=re.MIN_EXT,he[g1]=re.MAX_EXT)}const Se={[KL]:0,[JL]:1,[QL]:768,[kS]:770,[rR]:776,[nR]:774,[eR]:772,[$L]:769,[IS]:771,[iR]:775,[tR]:773};function Fe(re,xe,Be,nt,ct,Ft,Rt,Dt){if(re===ya){T===!0&&(_e(3042),T=!1);return}if(T===!1&&(de(3042),T=!0),re!==XL){if(re!==M||Dt!==O){if((b!==Eu||I!==Eu)&&(n.blendEquation(32774),b=Eu,I=Eu),Dt)switch(re){case Uu:n.blendFuncSeparate(1,771,1,771);break;case h1:n.blendFunc(1,1);break;case d1:n.blendFuncSeparate(0,769,0,1);break;case p1:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Uu:n.blendFuncSeparate(770,771,1,771);break;case h1:n.blendFunc(770,1);break;case d1:n.blendFuncSeparate(0,769,0,1);break;case p1:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}C=null,k=null,z=null,A=null,M=re,O=Dt}return}ct=ct||xe,Ft=Ft||Be,Rt=Rt||nt,(xe!==b||ct!==I)&&(n.blendEquationSeparate(he[xe],he[ct]),b=xe,I=ct),(Be!==C||nt!==k||Ft!==z||Rt!==A)&&(n.blendFuncSeparate(Se[Be],Se[nt],Se[Ft],Se[Rt]),C=Be,k=nt,z=Ft,A=Rt),M=re,O=!1}function Ne(re,xe){re.side===uo?_e(2884):de(2884);let Be=re.side===Nr;xe&&(Be=!Be),De(Be),re.blending===Uu&&re.transparent===!1?Fe(ya):Fe(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.premultipliedAlpha),l.setFunc(re.depthFunc),l.setTest(re.depthTest),l.setMask(re.depthWrite),a.setMask(re.colorWrite);const nt=re.stencilWrite;c.setTest(nt),nt&&(c.setMask(re.stencilWriteMask),c.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),c.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Xe(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?de(32926):_e(32926)}function De(re){U!==re&&(re?n.frontFace(2304):n.frontFace(2305),U=re)}function Ke(re){re!==WL?(de(2884),re!==$&&(re===f1?n.cullFace(1029):re===jL?n.cullFace(1028):n.cullFace(1032))):_e(2884),$=re}function Pe(re){re!==Y&&(ce&&n.lineWidth(re),Y=re)}function Xe(re,xe,Be){re?(de(32823),(te!==xe||J!==Be)&&(n.polygonOffset(xe,Be),te=xe,J=Be)):_e(32823)}function Je(re){re?de(3089):_e(3089)}function Oe(re){re===void 0&&(re=33984+ae-1),X!==re&&(n.activeTexture(re),X=re)}function q(re,xe,Be){Be===void 0&&(X===null?Be=33984+ae-1:Be=X);let nt=H[Be];nt===void 0&&(nt={type:void 0,texture:void 0},H[Be]=nt),(nt.type!==re||nt.texture!==xe)&&(X!==Be&&(n.activeTexture(Be),X=Be),n.bindTexture(re,xe||ue[re]),nt.type=re,nt.texture=xe)}function B(){const re=H[X];re!==void 0&&re.type!==void 0&&(n.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ve(){try{n.texSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function je(){try{n.texSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function He(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function We(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Te(){try{n.texStorage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function st(){try{n.texStorage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function qe(){try{n.texImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ot(){try{n.texImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Qe(re){se.equals(re)===!1&&(n.scissor(re.x,re.y,re.z,re.w),se.copy(re))}function Ze(re){ee.equals(re)===!1&&(n.viewport(re.x,re.y,re.z,re.w),ee.copy(re))}function oe(re,xe){let Be=p.get(xe);Be===void 0&&(Be=new WeakMap,p.set(xe,Be));let nt=Be.get(re);nt===void 0&&(nt=n.getUniformBlockIndex(xe,re.name),Be.set(re,nt))}function Le(re,xe){const nt=p.get(xe).get(re);f.get(xe)!==nt&&(n.uniformBlockBinding(xe,nt,re.__bindingPointIndex),f.set(xe,nt))}function tt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},X=null,H={},v={},y=new WeakMap,_=[],S=null,T=!1,M=null,b=null,C=null,k=null,I=null,z=null,A=null,O=!1,U=null,$=null,Y=null,te=null,J=null,se.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:de,disable:_e,bindFramebuffer:Ae,drawBuffers:Ue,useProgram:ke,setBlending:Fe,setMaterial:Ne,setFlipSided:De,setCullFace:Ke,setLineWidth:Pe,setPolygonOffset:Xe,setScissorTest:Je,activeTexture:Oe,bindTexture:q,unbindTexture:B,compressedTexImage2D:pe,compressedTexImage3D:Me,texImage2D:qe,texImage3D:ot,updateUBOMapping:oe,uniformBlockBinding:Le,texStorage2D:Te,texStorage3D:st,texSubImage2D:Ve,texSubImage3D:je,compressedTexSubImage2D:He,compressedTexSubImage3D:We,scissor:Qe,viewport:Ze,reset:tt}}function ij(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,f=r.maxTextureSize,p=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let _;const S=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(q,B){return T?new OffscreenCanvas(q,B):ep("canvas")}function b(q,B,pe,Me){let Ve=1;if((q.width>Me||q.height>Me)&&(Ve=Me/Math.max(q.width,q.height)),Ve<1||B===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const je=B?BR:Math.floor,He=je(Ve*q.width),We=je(Ve*q.height);_===void 0&&(_=M(He,We));const Te=pe?M(He,We):_;return Te.width=He,Te.height=We,Te.getContext("2d").drawImage(q,0,0,He,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+He+"x"+We+")."),Te}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function C(q){return V1(q.width)&&V1(q.height)}function k(q){return a?!1:q.wrapS!==cr||q.wrapT!==cr||q.minFilter!==ei&&q.minFilter!==Fn}function I(q,B){return q.generateMipmaps&&B&&q.minFilter!==ei&&q.minFilter!==Fn}function z(q){n.generateMipmap(q)}function A(q,B,pe,Me,Ve=!1){if(a===!1)return B;if(q!==null){if(n[q]!==void 0)return n[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let je=B;return B===6403&&(pe===5126&&(je=33326),pe===5131&&(je=33325),pe===5121&&(je=33321)),B===33319&&(pe===5126&&(je=33328),pe===5131&&(je=33327),pe===5121&&(je=33323)),B===6408&&(pe===5126&&(je=34836),pe===5131&&(je=34842),pe===5121&&(je=Me===gn&&Ve===!1?35907:32856),pe===32819&&(je=32854),pe===32820&&(je=32855)),(je===33325||je===33326||je===33327||je===33328||je===34842||je===34836)&&e.get("EXT_color_buffer_float"),je}function O(q,B,pe){return I(q,pe)===!0||q.isFramebufferTexture&&q.minFilter!==ei&&q.minFilter!==Fn?Math.log2(Math.max(B.width,B.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?B.mipmaps.length:1}function U(q){return q===ei||q===qv||q===md?9728:9729}function $(q){const B=q.target;B.removeEventListener("dispose",$),te(B),B.isVideoTexture&&y.delete(B)}function Y(q){const B=q.target;B.removeEventListener("dispose",Y),ae(B)}function te(q){const B=i.get(q);if(B.__webglInit===void 0)return;const pe=q.source,Me=S.get(pe);if(Me){const Ve=Me[B.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&J(q),Object.keys(Me).length===0&&S.delete(pe)}i.remove(q)}function J(q){const B=i.get(q);n.deleteTexture(B.__webglTexture);const pe=q.source,Me=S.get(pe);delete Me[B.__cacheKey],o.memory.textures--}function ae(q){const B=q.texture,pe=i.get(q),Me=i.get(B);if(Me.__webglTexture!==void 0&&(n.deleteTexture(Me.__webglTexture),o.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++)n.deleteFramebuffer(pe.__webglFramebuffer[Ve]),pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer[Ve]);else{if(n.deleteFramebuffer(pe.__webglFramebuffer),pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer),pe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(pe.__webglMultisampledFramebuffer),pe.__webglColorRenderbuffer)for(let Ve=0;Ve<pe.__webglColorRenderbuffer.length;Ve++)pe.__webglColorRenderbuffer[Ve]&&n.deleteRenderbuffer(pe.__webglColorRenderbuffer[Ve]);pe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(pe.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let Ve=0,je=B.length;Ve<je;Ve++){const He=i.get(B[Ve]);He.__webglTexture&&(n.deleteTexture(He.__webglTexture),o.memory.textures--),i.remove(B[Ve])}i.remove(B),i.remove(q)}let ce=0;function ye(){ce=0}function F(){const q=ce;return q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+l),ce+=1,q}function X(q){const B=[];return B.push(q.wrapS),B.push(q.wrapT),B.push(q.wrapR||0),B.push(q.magFilter),B.push(q.minFilter),B.push(q.anisotropy),B.push(q.internalFormat),B.push(q.format),B.push(q.type),B.push(q.generateMipmaps),B.push(q.premultiplyAlpha),B.push(q.flipY),B.push(q.unpackAlignment),B.push(q.encoding),B.join()}function H(q,B){const pe=i.get(q);if(q.isVideoTexture&&Je(q),q.isRenderTargetTexture===!1&&q.version>0&&pe.__version!==q.version){const Me=q.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(pe,q,B);return}}t.bindTexture(3553,pe.__webglTexture,33984+B)}function W(q,B){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){_e(pe,q,B);return}t.bindTexture(35866,pe.__webglTexture,33984+B)}function j(q,B){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){_e(pe,q,B);return}t.bindTexture(32879,pe.__webglTexture,33984+B)}function se(q,B){const pe=i.get(q);if(q.version>0&&pe.__version!==q.version){Ae(pe,q,B);return}t.bindTexture(34067,pe.__webglTexture,33984+B)}const ee={[Xd]:10497,[cr]:33071,[Yd]:33648},Z={[ei]:9728,[qv]:9984,[md]:9986,[Fn]:9729,[NS]:9985,[Nl]:9987};function ue(q,B,pe){if(pe?(n.texParameteri(q,10242,ee[B.wrapS]),n.texParameteri(q,10243,ee[B.wrapT]),(q===32879||q===35866)&&n.texParameteri(q,32882,ee[B.wrapR]),n.texParameteri(q,10240,Z[B.magFilter]),n.texParameteri(q,10241,Z[B.minFilter])):(n.texParameteri(q,10242,33071),n.texParameteri(q,10243,33071),(q===32879||q===35866)&&n.texParameteri(q,32882,33071),(B.wrapS!==cr||B.wrapT!==cr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(q,10240,U(B.magFilter)),n.texParameteri(q,10241,U(B.minFilter)),B.minFilter!==ei&&B.minFilter!==Fn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===ei||B.minFilter!==md&&B.minFilter!==Nl||B.type===pa&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===kf&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(n.texParameterf(q,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function de(q,B){let pe=!1;q.__webglInit===void 0&&(q.__webglInit=!0,B.addEventListener("dispose",$));const Me=B.source;let Ve=S.get(Me);Ve===void 0&&(Ve={},S.set(Me,Ve));const je=X(B);if(je!==q.__cacheKey){Ve[je]===void 0&&(Ve[je]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Ve[je].usedTimes++;const He=Ve[q.__cacheKey];He!==void 0&&(Ve[q.__cacheKey].usedTimes--,He.usedTimes===0&&J(B)),q.__cacheKey=je,q.__webglTexture=Ve[je].texture}return pe}function _e(q,B,pe){let Me=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Me=35866),B.isData3DTexture&&(Me=32879);const Ve=de(q,B),je=B.source;t.bindTexture(Me,q.__webglTexture,33984+pe);const He=i.get(je);if(je.version!==He.__version||Ve===!0){t.activeTexture(33984+pe),n.pixelStorei(37440,B.flipY),n.pixelStorei(37441,B.premultiplyAlpha),n.pixelStorei(3317,B.unpackAlignment),n.pixelStorei(37443,0);const We=k(B)&&C(B.image)===!1;let Te=b(B.image,We,!1,f);Te=Oe(B,Te);const st=C(Te)||a,qe=s.convert(B.format,B.encoding);let ot=s.convert(B.type),Qe=A(B.internalFormat,qe,ot,B.encoding,B.isVideoTexture);ue(Me,B,st);let Ze;const oe=B.mipmaps,Le=a&&B.isVideoTexture!==!0,tt=He.__version===void 0||Ve===!0,re=O(B,Te,st);if(B.isDepthTexture)Qe=6402,a?B.type===pa?Qe=36012:B.type===_l?Qe=33190:B.type===Bu?Qe=35056:Qe=33189:B.type===pa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Al&&Qe===6402&&B.type!==OS&&B.type!==_l&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=_l,ot=s.convert(B.type)),B.format===Ju&&Qe===6402&&(Qe=34041,B.type!==Bu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Bu,ot=s.convert(B.type))),tt&&(Le?t.texStorage2D(3553,1,Qe,Te.width,Te.height):t.texImage2D(3553,0,Qe,Te.width,Te.height,0,qe,ot,null));else if(B.isDataTexture)if(oe.length>0&&st){Le&&tt&&t.texStorage2D(3553,re,Qe,oe[0].width,oe[0].height);for(let xe=0,Be=oe.length;xe<Be;xe++)Ze=oe[xe],Le?t.texSubImage2D(3553,xe,0,0,Ze.width,Ze.height,qe,ot,Ze.data):t.texImage2D(3553,xe,Qe,Ze.width,Ze.height,0,qe,ot,Ze.data);B.generateMipmaps=!1}else Le?(tt&&t.texStorage2D(3553,re,Qe,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,Te.width,Te.height,qe,ot,Te.data)):t.texImage2D(3553,0,Qe,Te.width,Te.height,0,qe,ot,Te.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Le&&tt&&t.texStorage3D(35866,re,Qe,oe[0].width,oe[0].height,Te.depth);for(let xe=0,Be=oe.length;xe<Be;xe++)Ze=oe[xe],B.format!==Xr?qe!==null?Le?t.compressedTexSubImage3D(35866,xe,0,0,0,Ze.width,Ze.height,Te.depth,qe,Ze.data,0,0):t.compressedTexImage3D(35866,xe,Qe,Ze.width,Ze.height,Te.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage3D(35866,xe,0,0,0,Ze.width,Ze.height,Te.depth,qe,ot,Ze.data):t.texImage3D(35866,xe,Qe,Ze.width,Ze.height,Te.depth,0,qe,ot,Ze.data)}else{Le&&tt&&t.texStorage2D(3553,re,Qe,oe[0].width,oe[0].height);for(let xe=0,Be=oe.length;xe<Be;xe++)Ze=oe[xe],B.format!==Xr?qe!==null?Le?t.compressedTexSubImage2D(3553,xe,0,0,Ze.width,Ze.height,qe,Ze.data):t.compressedTexImage2D(3553,xe,Qe,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage2D(3553,xe,0,0,Ze.width,Ze.height,qe,ot,Ze.data):t.texImage2D(3553,xe,Qe,Ze.width,Ze.height,0,qe,ot,Ze.data)}else if(B.isDataArrayTexture)Le?(tt&&t.texStorage3D(35866,re,Qe,Te.width,Te.height,Te.depth),t.texSubImage3D(35866,0,0,0,0,Te.width,Te.height,Te.depth,qe,ot,Te.data)):t.texImage3D(35866,0,Qe,Te.width,Te.height,Te.depth,0,qe,ot,Te.data);else if(B.isData3DTexture)Le?(tt&&t.texStorage3D(32879,re,Qe,Te.width,Te.height,Te.depth),t.texSubImage3D(32879,0,0,0,0,Te.width,Te.height,Te.depth,qe,ot,Te.data)):t.texImage3D(32879,0,Qe,Te.width,Te.height,Te.depth,0,qe,ot,Te.data);else if(B.isFramebufferTexture){if(tt)if(Le)t.texStorage2D(3553,re,Qe,Te.width,Te.height);else{let xe=Te.width,Be=Te.height;for(let nt=0;nt<re;nt++)t.texImage2D(3553,nt,Qe,xe,Be,0,qe,ot,null),xe>>=1,Be>>=1}}else if(oe.length>0&&st){Le&&tt&&t.texStorage2D(3553,re,Qe,oe[0].width,oe[0].height);for(let xe=0,Be=oe.length;xe<Be;xe++)Ze=oe[xe],Le?t.texSubImage2D(3553,xe,0,0,qe,ot,Ze):t.texImage2D(3553,xe,Qe,qe,ot,Ze);B.generateMipmaps=!1}else Le?(tt&&t.texStorage2D(3553,re,Qe,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,qe,ot,Te)):t.texImage2D(3553,0,Qe,qe,ot,Te);I(B,st)&&z(Me),He.__version=je.version,B.onUpdate&&B.onUpdate(B)}q.__version=B.version}function Ae(q,B,pe){if(B.image.length!==6)return;const Me=de(q,B),Ve=B.source;t.bindTexture(34067,q.__webglTexture,33984+pe);const je=i.get(Ve);if(Ve.version!==je.__version||Me===!0){t.activeTexture(33984+pe),n.pixelStorei(37440,B.flipY),n.pixelStorei(37441,B.premultiplyAlpha),n.pixelStorei(3317,B.unpackAlignment),n.pixelStorei(37443,0);const He=B.isCompressedTexture||B.image[0].isCompressedTexture,We=B.image[0]&&B.image[0].isDataTexture,Te=[];for(let xe=0;xe<6;xe++)!He&&!We?Te[xe]=b(B.image[xe],!1,!0,c):Te[xe]=We?B.image[xe].image:B.image[xe],Te[xe]=Oe(B,Te[xe]);const st=Te[0],qe=C(st)||a,ot=s.convert(B.format,B.encoding),Qe=s.convert(B.type),Ze=A(B.internalFormat,ot,Qe,B.encoding),oe=a&&B.isVideoTexture!==!0,Le=je.__version===void 0||Me===!0;let tt=O(B,st,qe);ue(34067,B,qe);let re;if(He){oe&&Le&&t.texStorage2D(34067,tt,Ze,st.width,st.height);for(let xe=0;xe<6;xe++){re=Te[xe].mipmaps;for(let Be=0;Be<re.length;Be++){const nt=re[Be];B.format!==Xr?ot!==null?oe?t.compressedTexSubImage2D(34069+xe,Be,0,0,nt.width,nt.height,ot,nt.data):t.compressedTexImage2D(34069+xe,Be,Ze,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?t.texSubImage2D(34069+xe,Be,0,0,nt.width,nt.height,ot,Qe,nt.data):t.texImage2D(34069+xe,Be,Ze,nt.width,nt.height,0,ot,Qe,nt.data)}}}else{re=B.mipmaps,oe&&Le&&(re.length>0&&tt++,t.texStorage2D(34067,tt,Ze,Te[0].width,Te[0].height));for(let xe=0;xe<6;xe++)if(We){oe?t.texSubImage2D(34069+xe,0,0,0,Te[xe].width,Te[xe].height,ot,Qe,Te[xe].data):t.texImage2D(34069+xe,0,Ze,Te[xe].width,Te[xe].height,0,ot,Qe,Te[xe].data);for(let Be=0;Be<re.length;Be++){const ct=re[Be].image[xe].image;oe?t.texSubImage2D(34069+xe,Be+1,0,0,ct.width,ct.height,ot,Qe,ct.data):t.texImage2D(34069+xe,Be+1,Ze,ct.width,ct.height,0,ot,Qe,ct.data)}}else{oe?t.texSubImage2D(34069+xe,0,0,0,ot,Qe,Te[xe]):t.texImage2D(34069+xe,0,Ze,ot,Qe,Te[xe]);for(let Be=0;Be<re.length;Be++){const nt=re[Be];oe?t.texSubImage2D(34069+xe,Be+1,0,0,ot,Qe,nt.image[xe]):t.texImage2D(34069+xe,Be+1,Ze,ot,Qe,nt.image[xe])}}}I(B,qe)&&z(34067),je.__version=Ve.version,B.onUpdate&&B.onUpdate(B)}q.__version=B.version}function Ue(q,B,pe,Me,Ve){const je=s.convert(pe.format,pe.encoding),He=s.convert(pe.type),We=A(pe.internalFormat,je,He,pe.encoding);i.get(B).__hasExternalTextures||(Ve===32879||Ve===35866?t.texImage3D(Ve,0,We,B.width,B.height,B.depth,0,je,He,null):t.texImage2D(Ve,0,We,B.width,B.height,0,je,He,null)),t.bindFramebuffer(36160,q),Xe(B)?m.framebufferTexture2DMultisampleEXT(36160,Me,Ve,i.get(pe).__webglTexture,0,Pe(B)):(Ve===3553||Ve>=34069&&Ve<=34074)&&n.framebufferTexture2D(36160,Me,Ve,i.get(pe).__webglTexture,0),t.bindFramebuffer(36160,null)}function ke(q,B,pe){if(n.bindRenderbuffer(36161,q),B.depthBuffer&&!B.stencilBuffer){let Me=33189;if(pe||Xe(B)){const Ve=B.depthTexture;Ve&&Ve.isDepthTexture&&(Ve.type===pa?Me=36012:Ve.type===_l&&(Me=33190));const je=Pe(B);Xe(B)?m.renderbufferStorageMultisampleEXT(36161,je,Me,B.width,B.height):n.renderbufferStorageMultisample(36161,je,Me,B.width,B.height)}else n.renderbufferStorage(36161,Me,B.width,B.height);n.framebufferRenderbuffer(36160,36096,36161,q)}else if(B.depthBuffer&&B.stencilBuffer){const Me=Pe(B);pe&&Xe(B)===!1?n.renderbufferStorageMultisample(36161,Me,35056,B.width,B.height):Xe(B)?m.renderbufferStorageMultisampleEXT(36161,Me,35056,B.width,B.height):n.renderbufferStorage(36161,34041,B.width,B.height),n.framebufferRenderbuffer(36160,33306,36161,q)}else{const Me=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ve=0;Ve<Me.length;Ve++){const je=Me[Ve],He=s.convert(je.format,je.encoding),We=s.convert(je.type),Te=A(je.internalFormat,He,We,je.encoding),st=Pe(B);pe&&Xe(B)===!1?n.renderbufferStorageMultisample(36161,st,Te,B.width,B.height):Xe(B)?m.renderbufferStorageMultisampleEXT(36161,st,Te,B.width,B.height):n.renderbufferStorage(36161,Te,B.width,B.height)}}n.bindRenderbuffer(36161,null)}function he(q,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,q),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),H(B.depthTexture,0);const Me=i.get(B.depthTexture).__webglTexture,Ve=Pe(B);if(B.depthTexture.format===Al)Xe(B)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,Me,0,Ve):n.framebufferTexture2D(36160,36096,3553,Me,0);else if(B.depthTexture.format===Ju)Xe(B)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,Me,0,Ve):n.framebufferTexture2D(36160,33306,3553,Me,0);else throw new Error("Unknown depthTexture format")}function Se(q){const B=i.get(q),pe=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!B.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");he(B.__webglFramebuffer,q)}else if(pe){B.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(36160,B.__webglFramebuffer[Me]),B.__webglDepthbuffer[Me]=n.createRenderbuffer(),ke(B.__webglDepthbuffer[Me],q,!1)}else t.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),ke(B.__webglDepthbuffer,q,!1);t.bindFramebuffer(36160,null)}function Fe(q,B,pe){const Me=i.get(q);B!==void 0&&Ue(Me.__webglFramebuffer,q,q.texture,36064,3553),pe!==void 0&&Se(q)}function Ne(q){const B=q.texture,pe=i.get(q),Me=i.get(B);q.addEventListener("dispose",Y),q.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=B.version,o.memory.textures++);const Ve=q.isWebGLCubeRenderTarget===!0,je=q.isWebGLMultipleRenderTargets===!0,He=C(q)||a;if(Ve){pe.__webglFramebuffer=[];for(let We=0;We<6;We++)pe.__webglFramebuffer[We]=n.createFramebuffer()}else{if(pe.__webglFramebuffer=n.createFramebuffer(),je)if(r.drawBuffers){const We=q.texture;for(let Te=0,st=We.length;Te<st;Te++){const qe=i.get(We[Te]);qe.__webglTexture===void 0&&(qe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&q.samples>0&&Xe(q)===!1){const We=je?B:[B];pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,pe.__webglMultisampledFramebuffer);for(let Te=0;Te<We.length;Te++){const st=We[Te];pe.__webglColorRenderbuffer[Te]=n.createRenderbuffer(),n.bindRenderbuffer(36161,pe.__webglColorRenderbuffer[Te]);const qe=s.convert(st.format,st.encoding),ot=s.convert(st.type),Qe=A(st.internalFormat,qe,ot,st.encoding,q.isXRRenderTarget===!0),Ze=Pe(q);n.renderbufferStorageMultisample(36161,Ze,Qe,q.width,q.height),n.framebufferRenderbuffer(36160,36064+Te,36161,pe.__webglColorRenderbuffer[Te])}n.bindRenderbuffer(36161,null),q.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ke(pe.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(36160,null)}}if(Ve){t.bindTexture(34067,Me.__webglTexture),ue(34067,B,He);for(let We=0;We<6;We++)Ue(pe.__webglFramebuffer[We],q,B,36064,34069+We);I(B,He)&&z(34067),t.unbindTexture()}else if(je){const We=q.texture;for(let Te=0,st=We.length;Te<st;Te++){const qe=We[Te],ot=i.get(qe);t.bindTexture(3553,ot.__webglTexture),ue(3553,qe,He),Ue(pe.__webglFramebuffer,q,qe,36064+Te,3553),I(qe,He)&&z(3553)}t.unbindTexture()}else{let We=3553;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(a?We=q.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(We,Me.__webglTexture),ue(We,B,He),Ue(pe.__webglFramebuffer,q,B,36064,We),I(B,He)&&z(We),t.unbindTexture()}q.depthBuffer&&Se(q)}function De(q){const B=C(q)||a,pe=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Me=0,Ve=pe.length;Me<Ve;Me++){const je=pe[Me];if(I(je,B)){const He=q.isWebGLCubeRenderTarget?34067:3553,We=i.get(je).__webglTexture;t.bindTexture(He,We),z(He),t.unbindTexture()}}}function Ke(q){if(a&&q.samples>0&&Xe(q)===!1){const B=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],pe=q.width,Me=q.height;let Ve=16384;const je=[],He=q.stencilBuffer?33306:36096,We=i.get(q),Te=q.isWebGLMultipleRenderTargets===!0;if(Te)for(let st=0;st<B.length;st++)t.bindFramebuffer(36160,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+st,36161,null),t.bindFramebuffer(36160,We.__webglFramebuffer),n.framebufferTexture2D(36009,36064+st,3553,null,0);t.bindFramebuffer(36008,We.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,We.__webglFramebuffer);for(let st=0;st<B.length;st++){je.push(36064+st),q.depthBuffer&&je.push(He);const qe=We.__ignoreDepthValues!==void 0?We.__ignoreDepthValues:!1;if(qe===!1&&(q.depthBuffer&&(Ve|=256),q.stencilBuffer&&(Ve|=1024)),Te&&n.framebufferRenderbuffer(36008,36064,36161,We.__webglColorRenderbuffer[st]),qe===!0&&(n.invalidateFramebuffer(36008,[He]),n.invalidateFramebuffer(36009,[He])),Te){const ot=i.get(B[st]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ot,0)}n.blitFramebuffer(0,0,pe,Me,0,0,pe,Me,Ve,9728),v&&n.invalidateFramebuffer(36008,je)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Te)for(let st=0;st<B.length;st++){t.bindFramebuffer(36160,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+st,36161,We.__webglColorRenderbuffer[st]);const qe=i.get(B[st]).__webglTexture;t.bindFramebuffer(36160,We.__webglFramebuffer),n.framebufferTexture2D(36009,36064+st,3553,qe,0)}t.bindFramebuffer(36009,We.__webglMultisampledFramebuffer)}}function Pe(q){return Math.min(p,q.samples)}function Xe(q){const B=i.get(q);return a&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Je(q){const B=o.render.frame;y.get(q)!==B&&(y.set(q,B),q.update())}function Oe(q,B){const pe=q.encoding,Me=q.format,Ve=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===Kv||pe!==Ca&&(pe===gn?a===!1?e.has("EXT_sRGB")===!0&&Me===Xr?(q.format=Kv,q.minFilter=Fn,q.generateMipmaps=!1):B=VS.sRGBToLinear(B):(Me!==Xr||Ve!==Pa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",pe)),B}this.allocateTextureUnit=F,this.resetTextureUnits=ye,this.setTexture2D=H,this.setTexture2DArray=W,this.setTexture3D=j,this.setTextureCube=se,this.rebindTextures=Fe,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=Ke,this.setupDepthRenderbuffer=Se,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=Xe}function JR(n,e,t){const i=t.isWebGL2;function r(s,o=null){let a;if(s===Pa)return 5121;if(s===wR)return 32819;if(s===SR)return 32820;if(s===yR)return 5120;if(s===_R)return 5122;if(s===OS)return 5123;if(s===xR)return 5124;if(s===_l)return 5125;if(s===pa)return 5126;if(s===kf)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===MR)return 6406;if(s===Xr)return 6408;if(s===bR)return 6409;if(s===TR)return 6410;if(s===Al)return 6402;if(s===Ju)return 34041;if(s===Kv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===ER)return 6403;if(s===PR)return 36244;if(s===CR)return 33319;if(s===AR)return 33320;if(s===LR)return 36249;if(s===nv||s===iv||s===rv||s===sv)if(o===gn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===nv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===iv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===rv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===sv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===nv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===iv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===rv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===sv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===v1||s===y1||s===_1||s===x1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===v1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===y1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===_1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===x1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===RR)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===w1||s===S1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===w1)return o===gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===S1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===M1||s===b1||s===T1||s===E1||s===P1||s===C1||s===A1||s===L1||s===R1||s===k1||s===I1||s===D1||s===N1||s===O1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===M1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===b1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===T1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===E1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===P1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===C1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===A1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===L1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===R1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===k1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===I1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===D1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===N1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===O1)return o===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ov)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===ov)return o===gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===kR||s===z1||s===F1||s===U1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===ov)return a.COMPRESSED_RED_RGTC1_EXT;if(s===z1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===F1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===U1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Bu?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class QR extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uf extends un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rj={type:"move"};class P_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const S=t.getJointPose(_,i),T=this._getHandJoint(c,_);S!==null&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=S.radius),T.visible=S!==null}const f=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],m=f.position.distanceTo(p.position),v=.02,y=.005;c.inputState.pinching&&m>v+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=v-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(rj)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new uf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class $R extends Gn{constructor(e,t,i,r,s,o,a,l,c,f){if(f=f!==void 0?f:Al,f!==Al&&f!==Ju)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Al&&(i=_l),i===void 0&&f===Ju&&(i=Bu),super(null,r,s,o,a,l,f,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ei,this.minFilter=l!==void 0?l:ei,this.flipY=!1,this.generateMipmaps=!1}}class sj extends Ia{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,f=null,p=null,m=null,v=null,y=null;const _=t.getContextAttributes();let S=null,T=null;const M=[],b=[],C=new Set,k=new Map,I=new ii;I.layers.enable(1),I.viewport=new hn;const z=new ii;z.layers.enable(2),z.viewport=new hn;const A=[I,z],O=new QR;O.layers.enable(1),O.layers.enable(2);let U=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let se=M[j];return se===void 0&&(se=new P_,M[j]=se),se.getTargetRaySpace()},this.getControllerGrip=function(j){let se=M[j];return se===void 0&&(se=new P_,M[j]=se),se.getGripSpace()},this.getHand=function(j){let se=M[j];return se===void 0&&(se=new P_,M[j]=se),se.getHandSpace()};function Y(j){const se=b.indexOf(j.inputSource);if(se===-1)return;const ee=M[se];ee!==void 0&&ee.dispatchEvent({type:j.type,data:j.inputSource})}function te(){r.removeEventListener("select",Y),r.removeEventListener("selectstart",Y),r.removeEventListener("selectend",Y),r.removeEventListener("squeeze",Y),r.removeEventListener("squeezestart",Y),r.removeEventListener("squeezeend",Y),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",J);for(let j=0;j<M.length;j++){const se=b[j];se!==null&&(b[j]=null,M[j].disconnect(se))}U=null,$=null,e.setRenderTarget(S),v=null,m=null,p=null,r=null,T=null,W.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){s=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){a=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(j){c=j},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(j){if(r=j,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",Y),r.addEventListener("selectstart",Y),r.addEventListener("selectend",Y),r.addEventListener("squeeze",Y),r.addEventListener("squeezestart",Y),r.addEventListener("squeezeend",Y),r.addEventListener("end",te),r.addEventListener("inputsourceschange",J),_.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const se={antialias:r.renderState.layers===void 0?_.antialias:!0,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,se),r.updateRenderState({baseLayer:v}),T=new vo(v.framebufferWidth,v.framebufferHeight,{format:Xr,type:Pa,encoding:e.outputEncoding,stencilBuffer:_.stencil})}else{let se=null,ee=null,Z=null;_.depth&&(Z=_.stencil?35056:33190,se=_.stencil?Ju:Al,ee=_.stencil?Bu:_l);const ue={colorFormat:32856,depthFormat:Z,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(ue),r.updateRenderState({layers:[m]}),T=new vo(m.textureWidth,m.textureHeight,{format:Xr,type:Pa,depthTexture:new $R(m.textureWidth,m.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:_.stencil,encoding:e.outputEncoding,samples:_.antialias?4:0});const de=e.properties.get(T);de.__ignoreDepthValues=m.ignoreDepthValues}T.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),W.setContext(r),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function J(j){for(let se=0;se<j.removed.length;se++){const ee=j.removed[se],Z=b.indexOf(ee);Z>=0&&(b[Z]=null,M[Z].disconnect(ee))}for(let se=0;se<j.added.length;se++){const ee=j.added[se];let Z=b.indexOf(ee);if(Z===-1){for(let de=0;de<M.length;de++)if(de>=b.length){b.push(ee),Z=de;break}else if(b[de]===null){b[de]=ee,Z=de;break}if(Z===-1)break}const ue=M[Z];ue&&ue.connect(ee)}}const ae=new ne,ce=new ne;function ye(j,se,ee){ae.setFromMatrixPosition(se.matrixWorld),ce.setFromMatrixPosition(ee.matrixWorld);const Z=ae.distanceTo(ce),ue=se.projectionMatrix.elements,de=ee.projectionMatrix.elements,_e=ue[14]/(ue[10]-1),Ae=ue[14]/(ue[10]+1),Ue=(ue[9]+1)/ue[5],ke=(ue[9]-1)/ue[5],he=(ue[8]-1)/ue[0],Se=(de[8]+1)/de[0],Fe=_e*he,Ne=_e*Se,De=Z/(-he+Se),Ke=De*-he;se.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(Ke),j.translateZ(De),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const Pe=_e+De,Xe=Ae+De,Je=Fe-Ke,Oe=Ne+(Z-Ke),q=Ue*Ae/Xe*Pe,B=ke*Ae/Xe*Pe;j.projectionMatrix.makePerspective(Je,Oe,q,B,Pe,Xe)}function F(j,se){se===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(se.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(r===null)return;O.near=z.near=I.near=j.near,O.far=z.far=I.far=j.far,(U!==O.near||$!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),U=O.near,$=O.far);const se=j.parent,ee=O.cameras;F(O,se);for(let ue=0;ue<ee.length;ue++)F(ee[ue],se);O.matrixWorld.decompose(O.position,O.quaternion,O.scale),j.matrix.copy(O.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale);const Z=j.children;for(let ue=0,de=Z.length;ue<de;ue++)Z[ue].updateMatrixWorld(!0);ee.length===2?ye(O,I,z):O.projectionMatrix.copy(I.projectionMatrix)},this.getCamera=function(){return O},this.getFoveation=function(){if(!(m===null&&v===null))return l},this.setFoveation=function(j){l=j,m!==null&&(m.fixedFoveation=j),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=j)},this.getPlanes=function(){return C};let X=null;function H(j,se){if(f=se.getViewerPose(c||o),y=se,f!==null){const ee=f.views;v!==null&&(e.setRenderTargetFramebuffer(T,v.framebuffer),e.setRenderTarget(T));let Z=!1;ee.length!==O.cameras.length&&(O.cameras.length=0,Z=!0);for(let ue=0;ue<ee.length;ue++){const de=ee[ue];let _e=null;if(v!==null)_e=v.getViewport(de);else{const Ue=p.getViewSubImage(m,de);_e=Ue.viewport,ue===0&&(e.setRenderTargetTextures(T,Ue.colorTexture,m.ignoreDepthValues?void 0:Ue.depthStencilTexture),e.setRenderTarget(T))}let Ae=A[ue];Ae===void 0&&(Ae=new ii,Ae.layers.enable(ue),Ae.viewport=new hn,A[ue]=Ae),Ae.matrix.fromArray(de.transform.matrix),Ae.projectionMatrix.fromArray(de.projectionMatrix),Ae.viewport.set(_e.x,_e.y,_e.width,_e.height),ue===0&&O.matrix.copy(Ae.matrix),Z===!0&&O.cameras.push(Ae)}}for(let ee=0;ee<M.length;ee++){const Z=b[ee],ue=M[ee];Z!==null&&ue!==void 0&&ue.update(Z,se,c||o)}if(X&&X(j,se),se.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:se.detectedPlanes});let ee=null;for(const Z of C)se.detectedPlanes.has(Z)||(ee===null&&(ee=[]),ee.push(Z));if(ee!==null)for(const Z of ee)C.delete(Z),k.delete(Z),i.dispatchEvent({type:"planeremoved",data:Z});for(const Z of se.detectedPlanes)if(!C.has(Z))C.add(Z),k.set(Z,se.lastChangedTime),i.dispatchEvent({type:"planeadded",data:Z});else{const ue=k.get(Z);Z.lastChangedTime>ue&&(k.set(Z,Z.lastChangedTime),i.dispatchEvent({type:"planechanged",data:Z}))}}y=null}const W=new ZR;W.setAnimationLoop(H),this.setAnimationLoop=function(j){X=j},this.dispose=function(){}}}function oj(n,e){function t(_,S){S.color.getRGB(_.fogColor.value,HR(n)),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)}function i(_,S,T,M,b){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(_,S):S.isMeshToonMaterial?(r(_,S),f(_,S)):S.isMeshPhongMaterial?(r(_,S),c(_,S)):S.isMeshStandardMaterial?(r(_,S),p(_,S),S.isMeshPhysicalMaterial&&m(_,S,b)):S.isMeshMatcapMaterial?(r(_,S),v(_,S)):S.isMeshDepthMaterial?r(_,S):S.isMeshDistanceMaterial?(r(_,S),y(_,S)):S.isMeshNormalMaterial?r(_,S):S.isLineBasicMaterial?(s(_,S),S.isLineDashedMaterial&&o(_,S)):S.isPointsMaterial?a(_,S,T,M):S.isSpriteMaterial?l(_,S):S.isShadowMaterial?(_.color.value.copy(S.color),_.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(_,S){_.opacity.value=S.opacity,S.color&&_.diffuse.value.copy(S.color),S.emissive&&_.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap),S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===Nr&&(_.bumpScale.value*=-1)),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===Nr&&_.normalScale.value.negate()),S.specularMap&&(_.specularMap.value=S.specularMap),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);const T=e.get(S).envMap;if(T&&(_.envMap.value=T,_.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=S.reflectivity,_.ior.value=S.ior,_.refractionRatio.value=S.refractionRatio),S.lightMap){_.lightMap.value=S.lightMap;const C=n.useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=S.lightMapIntensity*C}S.aoMap&&(_.aoMap.value=S.aoMap,_.aoMapIntensity.value=S.aoMapIntensity);let M;S.map?M=S.map:S.specularMap?M=S.specularMap:S.displacementMap?M=S.displacementMap:S.normalMap?M=S.normalMap:S.bumpMap?M=S.bumpMap:S.roughnessMap?M=S.roughnessMap:S.metalnessMap?M=S.metalnessMap:S.alphaMap?M=S.alphaMap:S.emissiveMap?M=S.emissiveMap:S.clearcoatMap?M=S.clearcoatMap:S.clearcoatNormalMap?M=S.clearcoatNormalMap:S.clearcoatRoughnessMap?M=S.clearcoatRoughnessMap:S.iridescenceMap?M=S.iridescenceMap:S.iridescenceThicknessMap?M=S.iridescenceThicknessMap:S.specularIntensityMap?M=S.specularIntensityMap:S.specularColorMap?M=S.specularColorMap:S.transmissionMap?M=S.transmissionMap:S.thicknessMap?M=S.thicknessMap:S.sheenColorMap?M=S.sheenColorMap:S.sheenRoughnessMap&&(M=S.sheenRoughnessMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),_.uvTransform.value.copy(M.matrix));let b;S.aoMap?b=S.aoMap:S.lightMap&&(b=S.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),_.uv2Transform.value.copy(b.matrix))}function s(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity}function o(_,S){_.dashSize.value=S.dashSize,_.totalSize.value=S.dashSize+S.gapSize,_.scale.value=S.scale}function a(_,S,T,M){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.size.value=S.size*T,_.scale.value=M*.5,S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);let b;S.map?b=S.map:S.alphaMap&&(b=S.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),_.uvTransform.value.copy(b.matrix))}function l(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.rotation.value=S.rotation,S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);let T;S.map?T=S.map:S.alphaMap&&(T=S.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),_.uvTransform.value.copy(T.matrix))}function c(_,S){_.specular.value.copy(S.specular),_.shininess.value=Math.max(S.shininess,1e-4)}function f(_,S){S.gradientMap&&(_.gradientMap.value=S.gradientMap)}function p(_,S){_.roughness.value=S.roughness,_.metalness.value=S.metalness,S.roughnessMap&&(_.roughnessMap.value=S.roughnessMap),S.metalnessMap&&(_.metalnessMap.value=S.metalnessMap),e.get(S).envMap&&(_.envMapIntensity.value=S.envMapIntensity)}function m(_,S,T){_.ior.value=S.ior,S.sheen>0&&(_.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),_.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(_.sheenColorMap.value=S.sheenColorMap),S.sheenRoughnessMap&&(_.sheenRoughnessMap.value=S.sheenRoughnessMap)),S.clearcoat>0&&(_.clearcoat.value=S.clearcoat,_.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(_.clearcoatMap.value=S.clearcoatMap),S.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap),S.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),_.clearcoatNormalMap.value=S.clearcoatNormalMap,S.side===Nr&&_.clearcoatNormalScale.value.negate())),S.iridescence>0&&(_.iridescence.value=S.iridescence,_.iridescenceIOR.value=S.iridescenceIOR,_.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(_.iridescenceMap.value=S.iridescenceMap),S.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=S.iridescenceThicknessMap)),S.transmission>0&&(_.transmission.value=S.transmission,_.transmissionSamplerMap.value=T.texture,_.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(_.transmissionMap.value=S.transmissionMap),_.thickness.value=S.thickness,S.thicknessMap&&(_.thicknessMap.value=S.thicknessMap),_.attenuationDistance.value=S.attenuationDistance,_.attenuationColor.value.copy(S.attenuationColor)),_.specularIntensity.value=S.specularIntensity,_.specularColor.value.copy(S.specularColor),S.specularIntensityMap&&(_.specularIntensityMap.value=S.specularIntensityMap),S.specularColorMap&&(_.specularColorMap.value=S.specularColorMap)}function v(_,S){S.matcap&&(_.matcap.value=S.matcap)}function y(_,S){_.referencePosition.value.copy(S.referencePosition),_.nearDistance.value=S.nearDistance,_.farDistance.value=S.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function aj(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(M,b){const C=b.program;i.uniformBlockBinding(M,C)}function c(M,b){let C=r[M.id];C===void 0&&(y(M),C=f(M),r[M.id]=C,M.addEventListener("dispose",S));const k=b.program;i.updateUBOMapping(M,k);const I=e.render.frame;s[M.id]!==I&&(m(M),s[M.id]=I)}function f(M){const b=p();M.__bindingPointIndex=b;const C=n.createBuffer(),k=M.__size,I=M.usage;return n.bindBuffer(35345,C),n.bufferData(35345,k,I),n.bindBuffer(35345,null),n.bindBufferBase(35345,b,C),C}function p(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(M){const b=r[M.id],C=M.uniforms,k=M.__cache;n.bindBuffer(35345,b);for(let I=0,z=C.length;I<z;I++){const A=C[I];if(v(A,I,k)===!0){const O=A.__offset,U=Array.isArray(A.value)?A.value:[A.value];let $=0;for(let Y=0;Y<U.length;Y++){const te=U[Y],J=_(te);typeof te=="number"?(A.__data[0]=te,n.bufferSubData(35345,O+$,A.__data)):te.isMatrix3?(A.__data[0]=te.elements[0],A.__data[1]=te.elements[1],A.__data[2]=te.elements[2],A.__data[3]=te.elements[0],A.__data[4]=te.elements[3],A.__data[5]=te.elements[4],A.__data[6]=te.elements[5],A.__data[7]=te.elements[0],A.__data[8]=te.elements[6],A.__data[9]=te.elements[7],A.__data[10]=te.elements[8],A.__data[11]=te.elements[0]):(te.toArray(A.__data,$),$+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,O,A.__data)}}n.bindBuffer(35345,null)}function v(M,b,C){const k=M.value;if(C[b]===void 0){if(typeof k=="number")C[b]=k;else{const I=Array.isArray(k)?k:[k],z=[];for(let A=0;A<I.length;A++)z.push(I[A].clone());C[b]=z}return!0}else if(typeof k=="number"){if(C[b]!==k)return C[b]=k,!0}else{const I=Array.isArray(C[b])?C[b]:[C[b]],z=Array.isArray(k)?k:[k];for(let A=0;A<I.length;A++){const O=I[A];if(O.equals(z[A])===!1)return O.copy(z[A]),!0}}return!1}function y(M){const b=M.uniforms;let C=0;const k=16;let I=0;for(let z=0,A=b.length;z<A;z++){const O=b[z],U={boundary:0,storage:0},$=Array.isArray(O.value)?O.value:[O.value];for(let Y=0,te=$.length;Y<te;Y++){const J=$[Y],ae=_(J);U.boundary+=ae.boundary,U.storage+=ae.storage}if(O.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=C,z>0){I=C%k;const Y=k-I;I!==0&&Y-U.boundary<0&&(C+=k-I,O.__offset=C)}C+=U.storage}return I=C%k,I>0&&(C+=k-I),M.__size=C,M.__cache={},this}function _(M){const b={boundary:0,storage:0};return typeof M=="number"?(b.boundary=4,b.storage=4):M.isVector2?(b.boundary=8,b.storage=8):M.isVector3||M.isColor?(b.boundary=16,b.storage=12):M.isVector4?(b.boundary=16,b.storage=16):M.isMatrix3?(b.boundary=48,b.storage=48):M.isMatrix4?(b.boundary=64,b.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),b}function S(M){const b=M.target;b.removeEventListener("dispose",S);const C=o.indexOf(b.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function T(){for(const M in r)n.deleteBuffer(r[M]);o=[],r={},s={}}return{bind:l,update:c,dispose:T}}function lj(){const n=ep("canvas");return n.style.display="block",n}function I0(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:lj(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let f;t!==null?f=t.getContextAttributes().alpha:f=n.alpha!==void 0?n.alpha:!1;let p=null,m=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ca,this.useLegacyLights=!0,this.toneMapping=mo,this.toneMappingExposure=1;const _=this;let S=!1,T=0,M=0,b=null,C=-1,k=null;const I=new hn,z=new hn;let A=null,O=e.width,U=e.height,$=1,Y=null,te=null;const J=new hn(0,0,O,U),ae=new hn(0,0,O,U);let ce=!1;const ye=new A0;let F=!1,X=!1,H=null;const W=new zt,j=new ne,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ee(){return b===null?$:1}let Z=t;function ue(Q,fe){for(let Ee=0;Ee<Q.length;Ee++){const ge=Q[Ee],Re=e.getContext(ge,fe);if(Re!==null)return Re}return null}try{const Q={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${b0}`),e.addEventListener("webglcontextlost",ot,!1),e.addEventListener("webglcontextrestored",Qe,!1),e.addEventListener("webglcontextcreationerror",Ze,!1),Z===null){const fe=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&fe.shift(),Z=ue(fe,Q),Z===null)throw ue(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let de,_e,Ae,Ue,ke,he,Se,Fe,Ne,De,Ke,Pe,Xe,Je,Oe,q,B,pe,Me,Ve,je,He,We,Te;function st(){de=new bH(Z),_e=new yH(Z,de,n),de.init(_e),He=new JR(Z,de,_e),Ae=new nj(Z,de,_e),Ue=new PH,ke=new WW,he=new ij(Z,de,Ae,ke,_e,He,Ue),Se=new xH(_),Fe=new MH(_),Ne=new OV(Z,_e),We=new gH(Z,de,Ne,_e),De=new TH(Z,Ne,Ue,We),Ke=new RH(Z,De,Ne,Ue),Me=new LH(Z,_e,he),q=new _H(ke),Pe=new HW(_,Se,Fe,de,_e,We,q),Xe=new oj(_,ke),Je=new ZW,Oe=new QW(de,_e),pe=new mH(_,Se,Fe,Ae,Ke,f,o),B=new tj(_,Ke,_e),Te=new aj(Z,Ue,_e,Ae),Ve=new vH(Z,de,Ue,_e),je=new EH(Z,de,Ue,_e),Ue.programs=Pe.programs,_.capabilities=_e,_.extensions=de,_.properties=ke,_.renderLists=Je,_.shadowMap=B,_.state=Ae,_.info=Ue}st();const qe=new sj(_,Z);this.xr=qe,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const Q=de.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=de.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(Q){Q!==void 0&&($=Q,this.setSize(O,U,!1))},this.getSize=function(Q){return Q.set(O,U)},this.setSize=function(Q,fe,Ee=!0){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=Q,U=fe,e.width=Math.floor(Q*$),e.height=Math.floor(fe*$),Ee===!0&&(e.style.width=Q+"px",e.style.height=fe+"px"),this.setViewport(0,0,Q,fe)},this.getDrawingBufferSize=function(Q){return Q.set(O*$,U*$).floor()},this.setDrawingBufferSize=function(Q,fe,Ee){O=Q,U=fe,$=Ee,e.width=Math.floor(Q*Ee),e.height=Math.floor(fe*Ee),this.setViewport(0,0,Q,fe)},this.getCurrentViewport=function(Q){return Q.copy(I)},this.getViewport=function(Q){return Q.copy(J)},this.setViewport=function(Q,fe,Ee,ge){Q.isVector4?J.set(Q.x,Q.y,Q.z,Q.w):J.set(Q,fe,Ee,ge),Ae.viewport(I.copy(J).multiplyScalar($).floor())},this.getScissor=function(Q){return Q.copy(ae)},this.setScissor=function(Q,fe,Ee,ge){Q.isVector4?ae.set(Q.x,Q.y,Q.z,Q.w):ae.set(Q,fe,Ee,ge),Ae.scissor(z.copy(ae).multiplyScalar($).floor())},this.getScissorTest=function(){return ce},this.setScissorTest=function(Q){Ae.setScissorTest(ce=Q)},this.setOpaqueSort=function(Q){Y=Q},this.setTransparentSort=function(Q){te=Q},this.getClearColor=function(Q){return Q.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(Q=!0,fe=!0,Ee=!0){let ge=0;Q&&(ge|=16384),fe&&(ge|=256),Ee&&(ge|=1024),Z.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ot,!1),e.removeEventListener("webglcontextrestored",Qe,!1),e.removeEventListener("webglcontextcreationerror",Ze,!1),Je.dispose(),Oe.dispose(),ke.dispose(),Se.dispose(),Fe.dispose(),Ke.dispose(),We.dispose(),Te.dispose(),Pe.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",Be),qe.removeEventListener("sessionend",nt),H&&(H.dispose(),H=null),ct.stop()};function ot(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const Q=Ue.autoReset,fe=B.enabled,Ee=B.autoUpdate,ge=B.needsUpdate,Re=B.type;st(),Ue.autoReset=Q,B.enabled=fe,B.autoUpdate=Ee,B.needsUpdate=ge,B.type=Re}function Ze(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function oe(Q){const fe=Q.target;fe.removeEventListener("dispose",oe),Le(fe)}function Le(Q){tt(Q),ke.remove(Q)}function tt(Q){const fe=ke.get(Q).programs;fe!==void 0&&(fe.forEach(function(Ee){Pe.releaseProgram(Ee)}),Q.isShaderMaterial&&Pe.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,fe,Ee,ge,Re,pt){fe===null&&(fe=se);const vt=Re.isMesh&&Re.matrixWorld.determinant()<0,bt=zi(Q,fe,Ee,ge,Re);Ae.setMaterial(ge,vt);let Ct=Ee.index,Zt=1;ge.wireframe===!0&&(Ct=De.getWireframeAttribute(Ee),Zt=2);const It=Ee.drawRange,Bt=Ee.attributes.position;let wn=It.start*Zt,ri=(It.start+It.count)*Zt;pt!==null&&(wn=Math.max(wn,pt.start*Zt),ri=Math.min(ri,(pt.start+pt.count)*Zt)),Ct!==null?(wn=Math.max(wn,0),ri=Math.min(ri,Ct.count)):Bt!=null&&(wn=Math.max(wn,0),ri=Math.min(ri,Bt.count));const gi=ri-wn;if(gi<0||gi===1/0)return;We.setup(Re,ge,bt,Ee,Ct);let dr,cn=Ve;if(Ct!==null&&(dr=Ne.get(Ct),cn=je,cn.setIndex(dr)),Re.isMesh)ge.wireframe===!0?(Ae.setLineWidth(ge.wireframeLinewidth*ee()),cn.setMode(1)):cn.setMode(4);else if(Re.isLine){let $e=ge.linewidth;$e===void 0&&($e=1),Ae.setLineWidth($e*ee()),Re.isLineSegments?cn.setMode(1):Re.isLineLoop?cn.setMode(2):cn.setMode(3)}else Re.isPoints?cn.setMode(0):Re.isSprite&&cn.setMode(4);if(Re.isInstancedMesh)cn.renderInstances(wn,gi,Re.count);else if(Ee.isInstancedBufferGeometry){const $e=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,Fi=Math.min(Ee.instanceCount,$e);cn.renderInstances(wn,gi,Fi)}else cn.render(wn,gi)},this.compile=function(Q,fe){function Ee(ge,Re,pt){ge.transparent===!0&&ge.side===uo&&ge.forceSinglePass===!1?(ge.side=Nr,ge.needsUpdate=!0,At(ge,Re,pt),ge.side=zo,ge.needsUpdate=!0,At(ge,Re,pt),ge.side=uo):At(ge,Re,pt)}m=Oe.get(Q),m.init(),y.push(m),Q.traverseVisible(function(ge){ge.isLight&&ge.layers.test(fe.layers)&&(m.pushLight(ge),ge.castShadow&&m.pushShadow(ge))}),m.setupLights(_.useLegacyLights),Q.traverse(function(ge){const Re=ge.material;if(Re)if(Array.isArray(Re))for(let pt=0;pt<Re.length;pt++){const vt=Re[pt];Ee(vt,Q,ge)}else Ee(Re,Q,ge)}),y.pop(),m=null};let re=null;function xe(Q){re&&re(Q)}function Be(){ct.stop()}function nt(){ct.start()}const ct=new ZR;ct.setAnimationLoop(xe),typeof self<"u"&&ct.setContext(self),this.setAnimationLoop=function(Q){re=Q,qe.setAnimationLoop(Q),Q===null?ct.stop():ct.start()},qe.addEventListener("sessionstart",Be),qe.addEventListener("sessionend",nt),this.render=function(Q,fe){if(fe!==void 0&&fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),fe.parent===null&&fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(fe),fe=qe.getCamera()),Q.isScene===!0&&Q.onBeforeRender(_,Q,fe,b),m=Oe.get(Q,y.length),m.init(),y.push(m),W.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),ye.setFromProjectionMatrix(W),X=this.localClippingEnabled,F=q.init(this.clippingPlanes,X),p=Je.get(Q,v.length),p.init(),v.push(p),Ft(Q,fe,0,_.sortObjects),p.finish(),_.sortObjects===!0&&p.sort(Y,te),F===!0&&q.beginShadows();const Ee=m.state.shadowsArray;if(B.render(Ee,Q,fe),F===!0&&q.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(p,Q),m.setupLights(_.useLegacyLights),fe.isArrayCamera){const ge=fe.cameras;for(let Re=0,pt=ge.length;Re<pt;Re++){const vt=ge[Re];Rt(p,Q,vt,vt.viewport)}}else Rt(p,Q,fe);b!==null&&(he.updateMultisampleRenderTarget(b),he.updateRenderTargetMipmap(b)),Q.isScene===!0&&Q.onAfterRender(_,Q,fe),We.resetDefaultState(),C=-1,k=null,y.pop(),y.length>0?m=y[y.length-1]:m=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function Ft(Q,fe,Ee,ge){if(Q.visible===!1)return;if(Q.layers.test(fe.layers)){if(Q.isGroup)Ee=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(fe);else if(Q.isLight)m.pushLight(Q),Q.castShadow&&m.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||ye.intersectsSprite(Q)){ge&&j.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(W);const vt=Ke.update(Q),bt=Q.material;bt.visible&&p.push(Q,vt,bt,Ee,j.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==Ue.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=Ue.render.frame),!Q.frustumCulled||ye.intersectsObject(Q))){ge&&j.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(W);const vt=Ke.update(Q),bt=Q.material;if(Array.isArray(bt)){const Ct=vt.groups;for(let Zt=0,It=Ct.length;Zt<It;Zt++){const Bt=Ct[Zt],wn=bt[Bt.materialIndex];wn&&wn.visible&&p.push(Q,vt,wn,Ee,j.z,Bt)}}else bt.visible&&p.push(Q,vt,bt,Ee,j.z,null)}}const pt=Q.children;for(let vt=0,bt=pt.length;vt<bt;vt++)Ft(pt[vt],fe,Ee,ge)}function Rt(Q,fe,Ee,ge){const Re=Q.opaque,pt=Q.transmissive,vt=Q.transparent;m.setupLightsView(Ee),F===!0&&q.setGlobalState(_.clippingPlanes,Ee),pt.length>0&&Dt(Re,fe,Ee),ge&&Ae.viewport(I.copy(ge)),Re.length>0&&kt(Re,fe,Ee),pt.length>0&&kt(pt,fe,Ee),vt.length>0&&kt(vt,fe,Ee),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Dt(Q,fe,Ee){const ge=_e.isWebGL2;H===null&&(H=new vo(1024,1024,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?kf:Pa,minFilter:Nl,samples:ge&&s===!0?4:0}));const Re=_.getRenderTarget();_.setRenderTarget(H),_.clear();const pt=_.toneMapping;_.toneMapping=mo,kt(Q,fe,Ee),_.toneMapping=pt,he.updateMultisampleRenderTarget(H),he.updateRenderTargetMipmap(H),_.setRenderTarget(Re)}function kt(Q,fe,Ee){const ge=fe.isScene===!0?fe.overrideMaterial:null;for(let Re=0,pt=Q.length;Re<pt;Re++){const vt=Q[Re],bt=vt.object,Ct=vt.geometry,Zt=ge===null?vt.material:ge,It=vt.group;bt.layers.test(Ee.layers)&&Jt(bt,fe,Ee,Ct,Zt,It)}}function Jt(Q,fe,Ee,ge,Re,pt){Q.onBeforeRender(_,fe,Ee,ge,Re,pt),Q.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Re.onBeforeRender(_,fe,Ee,ge,Q,pt),Re.transparent===!0&&Re.side===uo&&Re.forceSinglePass===!1?(Re.side=Nr,Re.needsUpdate=!0,_.renderBufferDirect(Ee,fe,ge,Re,Q,pt),Re.side=zo,Re.needsUpdate=!0,_.renderBufferDirect(Ee,fe,ge,Re,Q,pt),Re.side=uo):_.renderBufferDirect(Ee,fe,ge,Re,Q,pt),Q.onAfterRender(_,fe,Ee,ge,Re,pt)}function At(Q,fe,Ee){fe.isScene!==!0&&(fe=se);const ge=ke.get(Q),Re=m.state.lights,pt=m.state.shadowsArray,vt=Re.state.version,bt=Pe.getParameters(Q,Re.state,pt,fe,Ee),Ct=Pe.getProgramCacheKey(bt);let Zt=ge.programs;ge.environment=Q.isMeshStandardMaterial?fe.environment:null,ge.fog=fe.fog,ge.envMap=(Q.isMeshStandardMaterial?Fe:Se).get(Q.envMap||ge.environment),Zt===void 0&&(Q.addEventListener("dispose",oe),Zt=new Map,ge.programs=Zt);let It=Zt.get(Ct);if(It!==void 0){if(ge.currentProgram===It&&ge.lightsStateVersion===vt)return Ut(Q,bt),It}else bt.uniforms=Pe.getUniforms(Q),Q.onBuild(Ee,bt,_),Q.onBeforeCompile(bt,_),It=Pe.acquireProgram(bt,Ct),Zt.set(Ct,It),ge.uniforms=bt.uniforms;const Bt=ge.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Bt.clippingPlanes=q.uniform),Ut(Q,bt),ge.needsLights=$t(Q),ge.lightsStateVersion=vt,ge.needsLights&&(Bt.ambientLightColor.value=Re.state.ambient,Bt.lightProbe.value=Re.state.probe,Bt.directionalLights.value=Re.state.directional,Bt.directionalLightShadows.value=Re.state.directionalShadow,Bt.spotLights.value=Re.state.spot,Bt.spotLightShadows.value=Re.state.spotShadow,Bt.rectAreaLights.value=Re.state.rectArea,Bt.ltc_1.value=Re.state.rectAreaLTC1,Bt.ltc_2.value=Re.state.rectAreaLTC2,Bt.pointLights.value=Re.state.point,Bt.pointLightShadows.value=Re.state.pointShadow,Bt.hemisphereLights.value=Re.state.hemi,Bt.directionalShadowMap.value=Re.state.directionalShadowMap,Bt.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,Bt.spotShadowMap.value=Re.state.spotShadowMap,Bt.spotLightMatrix.value=Re.state.spotLightMatrix,Bt.spotLightMap.value=Re.state.spotLightMap,Bt.pointShadowMap.value=Re.state.pointShadowMap,Bt.pointShadowMatrix.value=Re.state.pointShadowMatrix);const wn=It.getUniforms(),ri=uv.seqWithValue(wn.seq,Bt);return ge.currentProgram=It,ge.uniformsList=ri,It}function Ut(Q,fe){const Ee=ke.get(Q);Ee.outputEncoding=fe.outputEncoding,Ee.instancing=fe.instancing,Ee.skinning=fe.skinning,Ee.morphTargets=fe.morphTargets,Ee.morphNormals=fe.morphNormals,Ee.morphColors=fe.morphColors,Ee.morphTargetsCount=fe.morphTargetsCount,Ee.numClippingPlanes=fe.numClippingPlanes,Ee.numIntersection=fe.numClipIntersection,Ee.vertexAlphas=fe.vertexAlphas,Ee.vertexTangents=fe.vertexTangents,Ee.toneMapping=fe.toneMapping}function zi(Q,fe,Ee,ge,Re){fe.isScene!==!0&&(fe=se),he.resetTextureUnits();const pt=fe.fog,vt=ge.isMeshStandardMaterial?fe.environment:null,bt=b===null?_.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:Ca,Ct=(ge.isMeshStandardMaterial?Fe:Se).get(ge.envMap||vt),Zt=ge.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,It=!!ge.normalMap&&!!Ee.attributes.tangent,Bt=!!Ee.morphAttributes.position,wn=!!Ee.morphAttributes.normal,ri=!!Ee.morphAttributes.color,gi=ge.toneMapped?_.toneMapping:mo,dr=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,cn=dr!==void 0?dr.length:0,$e=ke.get(ge),Fi=m.state.lights;if(F===!0&&(X===!0||Q!==k)){const yt=Q===k&&ge.id===C;q.setState(ge,Q,yt)}let Sn=!1;ge.version===$e.__version?($e.needsLights&&$e.lightsStateVersion!==Fi.state.version||$e.outputEncoding!==bt||Re.isInstancedMesh&&$e.instancing===!1||!Re.isInstancedMesh&&$e.instancing===!0||Re.isSkinnedMesh&&$e.skinning===!1||!Re.isSkinnedMesh&&$e.skinning===!0||$e.envMap!==Ct||ge.fog===!0&&$e.fog!==pt||$e.numClippingPlanes!==void 0&&($e.numClippingPlanes!==q.numPlanes||$e.numIntersection!==q.numIntersection)||$e.vertexAlphas!==Zt||$e.vertexTangents!==It||$e.morphTargets!==Bt||$e.morphNormals!==wn||$e.morphColors!==ri||$e.toneMapping!==gi||_e.isWebGL2===!0&&$e.morphTargetsCount!==cn)&&(Sn=!0):(Sn=!0,$e.__version=ge.version);let si=$e.currentProgram;Sn===!0&&(si=At(ge,fe,Re));let Fs=!1,Ki=!1,oi=!1;const sn=si.getUniforms(),Gt=$e.uniforms;if(Ae.useProgram(si.program)&&(Fs=!0,Ki=!0,oi=!0),ge.id!==C&&(C=ge.id,Ki=!0),Fs||k!==Q){if(sn.setValue(Z,"projectionMatrix",Q.projectionMatrix),_e.logarithmicDepthBuffer&&sn.setValue(Z,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),k!==Q&&(k=Q,Ki=!0,oi=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const yt=sn.map.cameraPosition;yt!==void 0&&yt.setValue(Z,j.setFromMatrixPosition(Q.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&sn.setValue(Z,"isOrthographic",Q.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Re.isSkinnedMesh)&&sn.setValue(Z,"viewMatrix",Q.matrixWorldInverse)}if(Re.isSkinnedMesh){sn.setOptional(Z,Re,"bindMatrix"),sn.setOptional(Z,Re,"bindMatrixInverse");const yt=Re.skeleton;yt&&(_e.floatVertexTextures?(yt.boneTexture===null&&yt.computeBoneTexture(),sn.setValue(Z,"boneTexture",yt.boneTexture,he),sn.setValue(Z,"boneTextureSize",yt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const qt=Ee.morphAttributes;if((qt.position!==void 0||qt.normal!==void 0||qt.color!==void 0&&_e.isWebGL2===!0)&&Me.update(Re,Ee,si),(Ki||$e.receiveShadow!==Re.receiveShadow)&&($e.receiveShadow=Re.receiveShadow,sn.setValue(Z,"receiveShadow",Re.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Gt.envMap.value=Ct,Gt.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1),Ki&&(sn.setValue(Z,"toneMappingExposure",_.toneMappingExposure),$e.needsLights&&mi(Gt,oi),pt&&ge.fog===!0&&Xe.refreshFogUniforms(Gt,pt),Xe.refreshMaterialUniforms(Gt,ge,$,U,H),uv.upload(Z,$e.uniformsList,Gt,he)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(uv.upload(Z,$e.uniformsList,Gt,he),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&sn.setValue(Z,"center",Re.center),sn.setValue(Z,"modelViewMatrix",Re.modelViewMatrix),sn.setValue(Z,"normalMatrix",Re.normalMatrix),sn.setValue(Z,"modelMatrix",Re.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const yt=ge.uniformsGroups;for(let Lt=0,Cn=yt.length;Lt<Cn;Lt++)if(_e.isWebGL2){const ai=yt[Lt];Te.update(ai,si),Te.bind(ai,si)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return si}function mi(Q,fe){Q.ambientLightColor.needsUpdate=fe,Q.lightProbe.needsUpdate=fe,Q.directionalLights.needsUpdate=fe,Q.directionalLightShadows.needsUpdate=fe,Q.pointLights.needsUpdate=fe,Q.pointLightShadows.needsUpdate=fe,Q.spotLights.needsUpdate=fe,Q.spotLightShadows.needsUpdate=fe,Q.rectAreaLights.needsUpdate=fe,Q.hemisphereLights.needsUpdate=fe}function $t(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(Q,fe,Ee){ke.get(Q.texture).__webglTexture=fe,ke.get(Q.depthTexture).__webglTexture=Ee;const ge=ke.get(Q);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=Ee===void 0,ge.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Q,fe){const Ee=ke.get(Q);Ee.__webglFramebuffer=fe,Ee.__useDefaultFramebuffer=fe===void 0},this.setRenderTarget=function(Q,fe=0,Ee=0){b=Q,T=fe,M=Ee;let ge=!0,Re=null,pt=!1,vt=!1;if(Q){const Ct=ke.get(Q);Ct.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(36160,null),ge=!1):Ct.__webglFramebuffer===void 0?he.setupRenderTarget(Q):Ct.__hasExternalTextures&&he.rebindTextures(Q,ke.get(Q.texture).__webglTexture,ke.get(Q.depthTexture).__webglTexture);const Zt=Q.texture;(Zt.isData3DTexture||Zt.isDataArrayTexture||Zt.isCompressedArrayTexture)&&(vt=!0);const It=ke.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Re=It[fe],pt=!0):_e.isWebGL2&&Q.samples>0&&he.useMultisampledRTT(Q)===!1?Re=ke.get(Q).__webglMultisampledFramebuffer:Re=It,I.copy(Q.viewport),z.copy(Q.scissor),A=Q.scissorTest}else I.copy(J).multiplyScalar($).floor(),z.copy(ae).multiplyScalar($).floor(),A=ce;if(Ae.bindFramebuffer(36160,Re)&&_e.drawBuffers&&ge&&Ae.drawBuffers(Q,Re),Ae.viewport(I),Ae.scissor(z),Ae.setScissorTest(A),pt){const Ct=ke.get(Q.texture);Z.framebufferTexture2D(36160,36064,34069+fe,Ct.__webglTexture,Ee)}else if(vt){const Ct=ke.get(Q.texture),Zt=fe||0;Z.framebufferTextureLayer(36160,36064,Ct.__webglTexture,Ee||0,Zt)}C=-1},this.readRenderTargetPixels=function(Q,fe,Ee,ge,Re,pt,vt){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=ke.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&vt!==void 0&&(bt=bt[vt]),bt){Ae.bindFramebuffer(36160,bt);try{const Ct=Q.texture,Zt=Ct.format,It=Ct.type;if(Zt!==Xr&&He.convert(Zt)!==Z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Bt=It===kf&&(de.has("EXT_color_buffer_half_float")||_e.isWebGL2&&de.has("EXT_color_buffer_float"));if(It!==Pa&&He.convert(It)!==Z.getParameter(35738)&&!(It===pa&&(_e.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!Bt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fe>=0&&fe<=Q.width-ge&&Ee>=0&&Ee<=Q.height-Re&&Z.readPixels(fe,Ee,ge,Re,He.convert(Zt),He.convert(It),pt)}finally{const Ct=b!==null?ke.get(b).__webglFramebuffer:null;Ae.bindFramebuffer(36160,Ct)}}},this.copyFramebufferToTexture=function(Q,fe,Ee=0){const ge=Math.pow(2,-Ee),Re=Math.floor(fe.image.width*ge),pt=Math.floor(fe.image.height*ge);he.setTexture2D(fe,0),Z.copyTexSubImage2D(3553,Ee,0,0,Q.x,Q.y,Re,pt),Ae.unbindTexture()},this.copyTextureToTexture=function(Q,fe,Ee,ge=0){const Re=fe.image.width,pt=fe.image.height,vt=He.convert(Ee.format),bt=He.convert(Ee.type);he.setTexture2D(Ee,0),Z.pixelStorei(37440,Ee.flipY),Z.pixelStorei(37441,Ee.premultiplyAlpha),Z.pixelStorei(3317,Ee.unpackAlignment),fe.isDataTexture?Z.texSubImage2D(3553,ge,Q.x,Q.y,Re,pt,vt,bt,fe.image.data):fe.isCompressedTexture?Z.compressedTexSubImage2D(3553,ge,Q.x,Q.y,fe.mipmaps[0].width,fe.mipmaps[0].height,vt,fe.mipmaps[0].data):Z.texSubImage2D(3553,ge,Q.x,Q.y,vt,bt,fe.image),ge===0&&Ee.generateMipmaps&&Z.generateMipmap(3553),Ae.unbindTexture()},this.copyTextureToTexture3D=function(Q,fe,Ee,ge,Re=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pt=Q.max.x-Q.min.x+1,vt=Q.max.y-Q.min.y+1,bt=Q.max.z-Q.min.z+1,Ct=He.convert(ge.format),Zt=He.convert(ge.type);let It;if(ge.isData3DTexture)he.setTexture3D(ge,0),It=32879;else if(ge.isDataArrayTexture)he.setTexture2DArray(ge,0),It=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(37440,ge.flipY),Z.pixelStorei(37441,ge.premultiplyAlpha),Z.pixelStorei(3317,ge.unpackAlignment);const Bt=Z.getParameter(3314),wn=Z.getParameter(32878),ri=Z.getParameter(3316),gi=Z.getParameter(3315),dr=Z.getParameter(32877),cn=Ee.isCompressedTexture?Ee.mipmaps[0]:Ee.image;Z.pixelStorei(3314,cn.width),Z.pixelStorei(32878,cn.height),Z.pixelStorei(3316,Q.min.x),Z.pixelStorei(3315,Q.min.y),Z.pixelStorei(32877,Q.min.z),Ee.isDataTexture||Ee.isData3DTexture?Z.texSubImage3D(It,Re,fe.x,fe.y,fe.z,pt,vt,bt,Ct,Zt,cn.data):Ee.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(It,Re,fe.x,fe.y,fe.z,pt,vt,bt,Ct,cn.data)):Z.texSubImage3D(It,Re,fe.x,fe.y,fe.z,pt,vt,bt,Ct,Zt,cn),Z.pixelStorei(3314,Bt),Z.pixelStorei(32878,wn),Z.pixelStorei(3316,ri),Z.pixelStorei(3315,gi),Z.pixelStorei(32877,dr),Re===0&&ge.generateMipmaps&&Z.generateMipmap(It),Ae.unbindTexture()},this.initTexture=function(Q){Q.isCubeTexture?he.setTextureCube(Q,0):Q.isData3DTexture?he.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?he.setTexture2DArray(Q,0):he.setTexture2D(Q,0),Ae.unbindTexture()},this.resetState=function(){T=0,M=0,b=null,Ae.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(I0.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class ek extends I0{}ek.prototype.isWebGL1Renderer=!0;class D0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ht(e),this.density=t}clone(){return new D0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class N0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ht(e),this.near=t,this.far=i}clone(){return new N0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Jv extends un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class O0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Qd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=fs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Lr=new ne;class Qu{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix4(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyNormalMatrix(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.transformDirection(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ma(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ma(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ma(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ma(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class XS extends qi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zc;const zh=new ne,Fc=new ne,Uc=new ne,Bc=new Ge,Fh=new Ge,tk=new zt,hg=new ne,Uh=new ne,dg=new ne,fE=new Ge,C_=new Ge,hE=new Ge;class nk extends un{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",zc===void 0){zc=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new O0(t,5);zc.setIndex([0,1,2,0,2,3]),zc.setAttribute("position",new Qu(i,3,0,!1)),zc.setAttribute("uv",new Qu(i,2,3,!1))}this.geometry=zc,this.material=e!==void 0?e:new XS,this.center=new Ge(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fc.setFromMatrixScale(this.matrixWorld),tk.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Uc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fc.multiplyScalar(-Uc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;pg(hg.set(-.5,-.5,0),Uc,o,Fc,r,s),pg(Uh.set(.5,-.5,0),Uc,o,Fc,r,s),pg(dg.set(.5,.5,0),Uc,o,Fc,r,s),fE.set(0,0),C_.set(1,0),hE.set(1,1);let a=e.ray.intersectTriangle(hg,Uh,dg,!1,zh);if(a===null&&(pg(Uh.set(-.5,.5,0),Uc,o,Fc,r,s),C_.set(0,1),a=e.ray.intersectTriangle(hg,dg,Uh,!1,zh),a===null))return;const l=e.ray.origin.distanceTo(zh);l<e.near||l>e.far||t.push({distance:l,point:zh.clone(),uv:ks.getUV(zh,hg,Uh,dg,fE,C_,hE,new Ge),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function pg(n,e,t,i,r,s){Bc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Fh.x=s*Bc.x-r*Bc.y,Fh.y=r*Bc.x+s*Bc.y):Fh.copy(Bc),n.copy(e),n.x+=Fh.x,n.y+=Fh.y,n.applyMatrix4(tk)}const mg=new ne,dE=new ne;class ik extends un{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){mg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(mg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){mg.setFromMatrixPosition(e.matrixWorld),dE.setFromMatrixPosition(this.matrixWorld);const i=mg.distanceTo(dE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const pE=new ne,mE=new hn,gE=new hn,uj=new ne,vE=new zt;class rk extends pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zt,this.bindMatrixInverse=new zt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;mE.fromBufferAttribute(r.attributes.skinIndex,e),gE.fromBufferAttribute(r.attributes.skinWeight,e),pE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=gE.getComponent(s);if(o!==0){const a=mE.getComponent(s);vE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(uj.copy(pE).applyMatrix4(vE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class YS extends un{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Sf extends Gn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=ei,f=ei,p,m){super(null,o,a,l,c,f,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yE=new zt,cj=new zt;class z0{constructor(e=[],t=[]){this.uuid=fs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new zt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:cj;yE.multiplyMatrices(a,t[s]),yE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new z0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=UR(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Sf(t,e,e,Xr,pa);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new YS),this.bones.push(o),this.boneInverses.push(new zt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class $u extends xn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _E=new zt,xE=new zt,gg=[],fj=new zt,Bh=new pi;class sk extends pi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $u(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,fj)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Bh.geometry=this.geometry,Bh.material=this.material,Bh.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,_E),xE.multiplyMatrices(i,_E),Bh.matrixWorld=xE,Bh.raycast(e,gg);for(let o=0,a=gg.length;o<a;o++){const l=gg[o];l.instanceId=s,l.object=this,t.push(l)}gg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $u(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Fr extends qi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wE=new ne,SE=new ne,ME=new zt,A_=new Wf,vg=new Hl;class Ol extends un{constructor(e=new jt,t=new Fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)wE.fromBufferAttribute(t,r-1),SE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=wE.distanceTo(SE);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),vg.copy(i.boundingSphere),vg.applyMatrix4(r),vg.radius+=s,e.ray.intersectsSphere(vg)===!1)return;ME.copy(r).invert(),A_.copy(e.ray).applyMatrix4(ME);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new ne,f=new ne,p=new ne,m=new ne,v=this.isLineSegments?2:1,y=i.index,S=i.attributes.position;if(y!==null){const T=Math.max(0,o.start),M=Math.min(y.count,o.start+o.count);for(let b=T,C=M-1;b<C;b+=v){const k=y.getX(b),I=y.getX(b+1);if(c.fromBufferAttribute(S,k),f.fromBufferAttribute(S,I),A_.distanceSqToSegment(c,f,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(m);A<e.near||A>e.far||t.push({distance:A,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const T=Math.max(0,o.start),M=Math.min(S.count,o.start+o.count);for(let b=T,C=M-1;b<C;b+=v){if(c.fromBufferAttribute(S,b),f.fromBufferAttribute(S,b+1),A_.distanceSqToSegment(c,f,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(m);I<e.near||I>e.far||t.push({distance:I,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const bE=new ne,TE=new ne;class Bo extends Ol{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)bE.fromBufferAttribute(t,r),TE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+bE.distanceTo(TE);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ok extends Ol{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class qS extends qi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EE=new zt,W1=new Wf,yg=new Hl,_g=new ne;class ak extends un{constructor(e=new jt,t=new qS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),yg.copy(i.boundingSphere),yg.applyMatrix4(r),yg.radius+=s,e.ray.intersectsSphere(yg)===!1)return;EE.copy(r).invert(),W1.copy(e.ray).applyMatrix4(EE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,p=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),v=Math.min(c.count,o.start+o.count);for(let y=m,_=v;y<_;y++){const S=c.getX(y);_g.fromBufferAttribute(p,S),PE(_g,S,l,r,e,t,this)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let y=m,_=v;y<_;y++)_g.fromBufferAttribute(p,y),PE(_g,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function PE(n,e,t,i,r,s,o){const a=W1.distanceSqToPoint(n);if(a<t){const l=new ne;W1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class hj extends Gn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Fn,this.magFilter=s!==void 0?s:Fn,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class dj extends Gn{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ei,this.minFilter=ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class KS extends Gn{constructor(e,t,i,r,s,o,a,l,c,f,p,m){super(null,o,a,l,c,f,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class pj extends KS{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=cr}}class mj extends Gn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class yo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],m=i[r+1]-f,v=(o-f)/m;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ge:new ne);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ne,r=[],s=[],o=[],a=new ne,l=new zt;for(let v=0;v<=e;v++){const y=v/e;r[v]=this.getTangentAt(y,new ne)}s[0]=new ne,o[0]=new ne;let c=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);f<=c&&(c=f,i.set(1,0,0)),p<=c&&(c=p,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(ni(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,y))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(ni(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],v*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class F0 extends yo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ge,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,v=c-this.aY;l=m*f-v*p+this.aX,c=m*p+v*f+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lk extends F0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function JS(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,f,p){let m=(o-s)/c-(a-s)/(c+f)+(a-o)/f,v=(a-o)/f-(l-o)/(f+p)+(l-a)/p;m*=f,v*=f,r(o,a,m,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const xg=new ne,L_=new JS,R_=new JS,k_=new JS;class uk extends yo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ne){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,f;this.closed||a>0?c=r[(a-1)%s]:(xg.subVectors(r[0],r[1]).add(r[0]),c=xg);const p=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(xg.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=xg),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(p),v),_=Math.pow(p.distanceToSquared(m),v),S=Math.pow(m.distanceToSquared(f),v);_<1e-4&&(_=1),y<1e-4&&(y=_),S<1e-4&&(S=_),L_.initNonuniformCatmullRom(c.x,p.x,m.x,f.x,y,_,S),R_.initNonuniformCatmullRom(c.y,p.y,m.y,f.y,y,_,S),k_.initNonuniformCatmullRom(c.z,p.z,m.z,f.z,y,_,S)}else this.curveType==="catmullrom"&&(L_.initCatmullRom(c.x,p.x,m.x,f.x,this.tension),R_.initCatmullRom(c.y,p.y,m.y,f.y,this.tension),k_.initCatmullRom(c.z,p.z,m.z,f.z,this.tension));return i.set(L_.calc(l),R_.calc(l),k_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ne().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CE(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function gj(n,e){const t=1-n;return t*t*e}function vj(n,e){return 2*(1-n)*n*e}function yj(n,e){return n*n*e}function vd(n,e,t,i){return gj(n,e)+vj(n,t)+yj(n,i)}function _j(n,e){const t=1-n;return t*t*t*e}function xj(n,e){const t=1-n;return 3*t*t*n*e}function wj(n,e){return 3*(1-n)*n*n*e}function Sj(n,e){return n*n*n*e}function yd(n,e,t,i,r){return _j(n,e)+xj(n,t)+wj(n,i)+Sj(n,r)}class QS extends yo{constructor(e=new Ge,t=new Ge,i=new Ge,r=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ge){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(yd(e,r.x,s.x,o.x,a.x),yd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ck extends yo{constructor(e=new ne,t=new ne,i=new ne,r=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(yd(e,r.x,s.x,o.x,a.x),yd(e,r.y,s.y,o.y,a.y),yd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class U0 extends yo{constructor(e=new Ge,t=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ge){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fk extends yo{constructor(e=new ne,t=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ne){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ne){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $S extends yo{constructor(e=new Ge,t=new Ge,i=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ge){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(vd(e,r.x,s.x,o.x),vd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eM extends yo{constructor(e=new ne,t=new ne,i=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(vd(e,r.x,s.x,o.x),vd(e,r.y,s.y,o.y),vd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tM extends yo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ge){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(CE(a,l.x,c.x,f.x,p.x),CE(a,l.y,c.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ge().fromArray(r))}return this}}var nM=Object.freeze({__proto__:null,ArcCurve:lk,CatmullRomCurve3:uk,CubicBezierCurve:QS,CubicBezierCurve3:ck,EllipseCurve:F0,LineCurve:U0,LineCurve3:fk,QuadraticBezierCurve:$S,QuadraticBezierCurve3:eM,SplineCurve:tM});class hk extends yo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new U0(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const f=l[c];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new nM[r.type]().fromJSON(r))}return this}}class tp extends hk{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new U0(this.currentPoint.clone(),new Ge(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new $S(this.currentPoint.clone(),new Ge(e,t),new Ge(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new QS(this.currentPoint.clone(),new Ge(e,t),new Ge(i,r),new Ge(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new tM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new F0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zf extends jt{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=ni(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],f=1/t,p=new ne,m=new Ge,v=new ne,y=new ne,_=new ne;let S=0,T=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:S=e[M+1].x-e[M].x,T=e[M+1].y-e[M].y,v.x=T*1,v.y=-S,v.z=T*0,_.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:S=e[M+1].x-e[M].x,T=e[M+1].y-e[M].y,v.x=T*1,v.y=-S,v.z=T*0,y.copy(v),v.x+=_.x,v.y+=_.y,v.z+=_.z,v.normalize(),l.push(v.x,v.y,v.z),_.copy(y)}for(let M=0;M<=t;M++){const b=i+M*f*r,C=Math.sin(b),k=Math.cos(b);for(let I=0;I<=e.length-1;I++){p.x=e[I].x*C,p.y=e[I].y,p.z=e[I].x*k,o.push(p.x,p.y,p.z),m.x=M/t,m.y=I/(e.length-1),a.push(m.x,m.y);const z=l[3*I+0]*C,A=l[3*I+1],O=l[3*I+0]*k;c.push(z,A,O)}}for(let M=0;M<t;M++)for(let b=0;b<e.length-1;b++){const C=b+M*e.length,k=C,I=C+e.length,z=C+e.length+1,A=C+1;s.push(k,I,A),s.push(z,A,I)}this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("uv",new gt(a,2)),this.setAttribute("normal",new gt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.points,e.segments,e.phiStart,e.phiLength)}}class Cp extends Zf{constructor(e=1,t=1,i=4,r=8){const s=new tp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Cp(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ap extends jt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new ne,f=new Ge;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const v=i+p/t*r;c.x=e*Math.cos(v),c.y=e*Math.sin(v),o.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(o[m]/e+1)/2,f.y=(o[m+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ap(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sc extends jt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],m=[],v=[];let y=0;const _=[],S=i/2;let T=0;M(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(f),this.setAttribute("position",new gt(p,3)),this.setAttribute("normal",new gt(m,3)),this.setAttribute("uv",new gt(v,2));function M(){const C=new ne,k=new ne;let I=0;const z=(t-e)/i;for(let A=0;A<=s;A++){const O=[],U=A/s,$=U*(t-e)+e;for(let Y=0;Y<=r;Y++){const te=Y/r,J=te*l+a,ae=Math.sin(J),ce=Math.cos(J);k.x=$*ae,k.y=-U*i+S,k.z=$*ce,p.push(k.x,k.y,k.z),C.set(ae,z,ce).normalize(),m.push(C.x,C.y,C.z),v.push(te,1-U),O.push(y++)}_.push(O)}for(let A=0;A<r;A++)for(let O=0;O<s;O++){const U=_[O][A],$=_[O+1][A],Y=_[O+1][A+1],te=_[O][A+1];f.push(U,$,te),f.push($,Y,te),I+=6}c.addGroup(T,I,0),T+=I}function b(C){const k=y,I=new Ge,z=new ne;let A=0;const O=C===!0?e:t,U=C===!0?1:-1;for(let Y=1;Y<=r;Y++)p.push(0,S*U,0),m.push(0,U,0),v.push(.5,.5),y++;const $=y;for(let Y=0;Y<=r;Y++){const J=Y/r*l+a,ae=Math.cos(J),ce=Math.sin(J);z.x=O*ce,z.y=S*U,z.z=O*ae,p.push(z.x,z.y,z.z),m.push(0,U,0),I.x=ae*.5+.5,I.y=ce*.5*U+.5,v.push(I.x,I.y),y++}for(let Y=0;Y<r;Y++){const te=k+Y,J=$+Y;C===!0?f.push(J,J+1,te):f.push(J+1,J,te),A+=3}c.addGroup(T,A,C===!0?1:2),T+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Lp extends sc{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Lp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Oa extends jt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),f(),this.setAttribute("position",new gt(s,3)),this.setAttribute("normal",new gt(s.slice(),3)),this.setAttribute("uv",new gt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const b=new ne,C=new ne,k=new ne;for(let I=0;I<t.length;I+=3)v(t[I+0],b),v(t[I+1],C),v(t[I+2],k),l(b,C,k,M)}function l(M,b,C,k){const I=k+1,z=[];for(let A=0;A<=I;A++){z[A]=[];const O=M.clone().lerp(C,A/I),U=b.clone().lerp(C,A/I),$=I-A;for(let Y=0;Y<=$;Y++)Y===0&&A===I?z[A][Y]=O:z[A][Y]=O.clone().lerp(U,Y/$)}for(let A=0;A<I;A++)for(let O=0;O<2*(I-A)-1;O++){const U=Math.floor(O/2);O%2===0?(m(z[A][U+1]),m(z[A+1][U]),m(z[A][U])):(m(z[A][U+1]),m(z[A+1][U+1]),m(z[A+1][U]))}}function c(M){const b=new ne;for(let C=0;C<s.length;C+=3)b.x=s[C+0],b.y=s[C+1],b.z=s[C+2],b.normalize().multiplyScalar(M),s[C+0]=b.x,s[C+1]=b.y,s[C+2]=b.z}function f(){const M=new ne;for(let b=0;b<s.length;b+=3){M.x=s[b+0],M.y=s[b+1],M.z=s[b+2];const C=S(M)/2/Math.PI+.5,k=T(M)/Math.PI+.5;o.push(C,1-k)}y(),p()}function p(){for(let M=0;M<o.length;M+=6){const b=o[M+0],C=o[M+2],k=o[M+4],I=Math.max(b,C,k),z=Math.min(b,C,k);I>.9&&z<.1&&(b<.2&&(o[M+0]+=1),C<.2&&(o[M+2]+=1),k<.2&&(o[M+4]+=1))}}function m(M){s.push(M.x,M.y,M.z)}function v(M,b){const C=M*3;b.x=e[C+0],b.y=e[C+1],b.z=e[C+2]}function y(){const M=new ne,b=new ne,C=new ne,k=new ne,I=new Ge,z=new Ge,A=new Ge;for(let O=0,U=0;O<s.length;O+=9,U+=6){M.set(s[O+0],s[O+1],s[O+2]),b.set(s[O+3],s[O+4],s[O+5]),C.set(s[O+6],s[O+7],s[O+8]),I.set(o[U+0],o[U+1]),z.set(o[U+2],o[U+3]),A.set(o[U+4],o[U+5]),k.copy(M).add(b).add(C).divideScalar(3);const $=S(k);_(I,U+0,M,$),_(z,U+2,b,$),_(A,U+4,C,$)}}function _(M,b,C,k){k<0&&M.x===1&&(o[b]=M.x-1),C.x===0&&C.z===0&&(o[b]=k/2/Math.PI+.5)}function S(M){return Math.atan2(M.z,-M.x)}function T(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oa(e.vertices,e.indices,e.radius,e.details)}}class Rp extends Oa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rp(e.radius,e.detail)}}const wg=new ne,Sg=new ne,I_=new ne,Mg=new ks;class dk extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Vu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],f=["a","b","c"],p=new Array(3),m={},v=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:_,b:S,c:T}=Mg;if(_.fromBufferAttribute(a,c[0]),S.fromBufferAttribute(a,c[1]),T.fromBufferAttribute(a,c[2]),Mg.getNormal(I_),p[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let M=0;M<3;M++){const b=(M+1)%3,C=p[M],k=p[b],I=Mg[f[M]],z=Mg[f[b]],A=`${C}_${k}`,O=`${k}_${C}`;O in m&&m[O]?(I_.dot(m[O].normal)<=s&&(v.push(I.x,I.y,I.z),v.push(z.x,z.y,z.z)),m[O]=null):A in m||(m[A]={index0:c[M],index1:c[b],normal:I_.clone()})}}for(const y in m)if(m[y]){const{index0:_,index1:S}=m[y];wg.fromBufferAttribute(a,_),Sg.fromBufferAttribute(a,S),v.push(wg.x,wg.y,wg.z),v.push(Sg.x,Sg.y,Sg.z)}this.setAttribute("position",new gt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Hu extends tp{constructor(e){super(e),this.uuid=fs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new tp().fromJSON(r))}return this}}const Mj={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=pk(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,f,p,m,v;if(i&&(s=Cj(n,e,s,t)),n.length>80*t){a=c=n[0],l=f=n[1];for(let y=t;y<r;y+=t)p=n[y],m=n[y+1],p<a&&(a=p),m<l&&(l=m),p>c&&(c=p),m>f&&(f=m);v=Math.max(c-a,f-l),v=v!==0?32767/v:0}return np(s,o,t,a,l,v,0),o}};function pk(n,e,t,i,r){let s,o;if(r===Uj(n,e,t,i)>0)for(s=e;s<t;s+=i)o=AE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=AE(s,n[s],n[s+1],o);return o&&B0(o,o.next)&&(rp(o),o=o.next),o}function ec(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(B0(t,t.next)||Un(t.prev,t,t.next)===0)){if(rp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function np(n,e,t,i,r,s,o){if(!n)return;!o&&s&&Ij(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Tj(n,i,r,s):bj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),rp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Ej(ec(n),e,t),np(n,e,t,i,r,s,2)):o===2&&Pj(n,e,t,i,r,s):np(ec(n),e,t,i,r,s,1);break}}}function bj(n){const e=n.prev,t=n,i=n.next;if(Un(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,f=r<s?r<o?r:o:s<o?s:o,p=a<l?a<c?a:c:l<c?l:c,m=r>s?r>o?r:o:s>o?s:o,v=a>l?a>c?a:c:l>c?l:c;let y=i.next;for(;y!==e;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=v&&cf(r,a,s,l,o,c,y.x,y.y)&&Un(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Tj(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Un(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,f=r.y,p=s.y,m=o.y,v=a<l?a<c?a:c:l<c?l:c,y=f<p?f<m?f:m:p<m?p:m,_=a>l?a>c?a:c:l>c?l:c,S=f>p?f>m?f:m:p>m?p:m,T=j1(v,y,e,t,i),M=j1(_,S,e,t,i);let b=n.prevZ,C=n.nextZ;for(;b&&b.z>=T&&C&&C.z<=M;){if(b.x>=v&&b.x<=_&&b.y>=y&&b.y<=S&&b!==r&&b!==o&&cf(a,f,l,p,c,m,b.x,b.y)&&Un(b.prev,b,b.next)>=0||(b=b.prevZ,C.x>=v&&C.x<=_&&C.y>=y&&C.y<=S&&C!==r&&C!==o&&cf(a,f,l,p,c,m,C.x,C.y)&&Un(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;b&&b.z>=T;){if(b.x>=v&&b.x<=_&&b.y>=y&&b.y<=S&&b!==r&&b!==o&&cf(a,f,l,p,c,m,b.x,b.y)&&Un(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;C&&C.z<=M;){if(C.x>=v&&C.x<=_&&C.y>=y&&C.y<=S&&C!==r&&C!==o&&cf(a,f,l,p,c,m,C.x,C.y)&&Un(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Ej(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!B0(r,s)&&mk(r,i,i.next,s)&&ip(r,s)&&ip(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),rp(i),rp(i.next),i=n=s),i=i.next}while(i!==n);return ec(i)}function Pj(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Oj(o,a)){let l=gk(o,a);o=ec(o,o.next),l=ec(l,l.next),np(o,e,t,i,r,s,0),np(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Cj(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=pk(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Nj(c));for(r.sort(Aj),s=0;s<r.length;s++)t=Lj(r[s],t);return t}function Aj(n,e){return n.x-e.x}function Lj(n,e){const t=Rj(n,e);if(!t)return e;const i=gk(t,n);return ec(i,i.next),ec(t,t.next)}function Rj(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let f=1/0,p;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&cf(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),ip(t,n)&&(p<f||p===f&&(t.x>r.x||t.x===r.x&&kj(r,t)))&&(r=t,f=p)),t=t.next;while(t!==a);return r}function kj(n,e){return Un(n.prev,n,e.prev)<0&&Un(e.next,n,n.next)<0}function Ij(n,e,t,i){let r=n;do r.z===0&&(r.z=j1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Dj(r)}function Dj(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function j1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Nj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function cf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Oj(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!zj(n,e)&&(ip(n,e)&&ip(e,n)&&Fj(n,e)&&(Un(n.prev,n,e.prev)||Un(n,e.prev,e))||B0(n,e)&&Un(n.prev,n,n.next)>0&&Un(e.prev,e,e.next)>0)}function Un(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function B0(n,e){return n.x===e.x&&n.y===e.y}function mk(n,e,t,i){const r=Tg(Un(n,e,t)),s=Tg(Un(n,e,i)),o=Tg(Un(t,i,n)),a=Tg(Un(t,i,e));return!!(r!==s&&o!==a||r===0&&bg(n,t,e)||s===0&&bg(n,i,e)||o===0&&bg(t,n,i)||a===0&&bg(t,e,i))}function bg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Tg(n){return n>0?1:n<0?-1:0}function zj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&mk(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ip(n,e){return Un(n.prev,n,n.next)<0?Un(n,e,n.next)>=0&&Un(n,n.prev,e)>=0:Un(n,e,n.prev)<0||Un(n,n.next,e)<0}function Fj(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function gk(n,e){const t=new Z1(n.i,n.x,n.y),i=new Z1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function AE(n,e,t,i){const r=new Z1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function rp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Z1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Uj(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class No{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return No.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];LE(e),RE(i,e);let o=e.length;t.forEach(LE);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,RE(i,t[l]);const a=Mj.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function LE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function RE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class kp extends jt{constructor(e=new Hu([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new gt(r,3)),this.setAttribute("uv",new gt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:v-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:Bj;let b,C=!1,k,I,z,A;T&&(b=T.getSpacedPoints(f),C=!0,m=!1,k=T.computeFrenetFrames(f,!1),I=new ne,z=new ne,A=new ne),m||(S=0,v=0,y=0,_=0);const O=a.extractPoints(c);let U=O.shape;const $=O.holes;if(!No.isClockWise(U)){U=U.reverse();for(let he=0,Se=$.length;he<Se;he++){const Fe=$[he];No.isClockWise(Fe)&&($[he]=Fe.reverse())}}const te=No.triangulateShape(U,$),J=U;for(let he=0,Se=$.length;he<Se;he++){const Fe=$[he];U=U.concat(Fe)}function ae(he,Se,Fe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(Se,Fe)}const ce=U.length,ye=te.length;function F(he,Se,Fe){let Ne,De,Ke;const Pe=he.x-Se.x,Xe=he.y-Se.y,Je=Fe.x-he.x,Oe=Fe.y-he.y,q=Pe*Pe+Xe*Xe,B=Pe*Oe-Xe*Je;if(Math.abs(B)>Number.EPSILON){const pe=Math.sqrt(q),Me=Math.sqrt(Je*Je+Oe*Oe),Ve=Se.x-Xe/pe,je=Se.y+Pe/pe,He=Fe.x-Oe/Me,We=Fe.y+Je/Me,Te=((He-Ve)*Oe-(We-je)*Je)/(Pe*Oe-Xe*Je);Ne=Ve+Pe*Te-he.x,De=je+Xe*Te-he.y;const st=Ne*Ne+De*De;if(st<=2)return new Ge(Ne,De);Ke=Math.sqrt(st/2)}else{let pe=!1;Pe>Number.EPSILON?Je>Number.EPSILON&&(pe=!0):Pe<-Number.EPSILON?Je<-Number.EPSILON&&(pe=!0):Math.sign(Xe)===Math.sign(Oe)&&(pe=!0),pe?(Ne=-Xe,De=Pe,Ke=Math.sqrt(q)):(Ne=Pe,De=Xe,Ke=Math.sqrt(q/2))}return new Ge(Ne/Ke,De/Ke)}const X=[];for(let he=0,Se=J.length,Fe=Se-1,Ne=he+1;he<Se;he++,Fe++,Ne++)Fe===Se&&(Fe=0),Ne===Se&&(Ne=0),X[he]=F(J[he],J[Fe],J[Ne]);const H=[];let W,j=X.concat();for(let he=0,Se=$.length;he<Se;he++){const Fe=$[he];W=[];for(let Ne=0,De=Fe.length,Ke=De-1,Pe=Ne+1;Ne<De;Ne++,Ke++,Pe++)Ke===De&&(Ke=0),Pe===De&&(Pe=0),W[Ne]=F(Fe[Ne],Fe[Ke],Fe[Pe]);H.push(W),j=j.concat(W)}for(let he=0;he<S;he++){const Se=he/S,Fe=v*Math.cos(Se*Math.PI/2),Ne=y*Math.sin(Se*Math.PI/2)+_;for(let De=0,Ke=J.length;De<Ke;De++){const Pe=ae(J[De],X[De],Ne);de(Pe.x,Pe.y,-Fe)}for(let De=0,Ke=$.length;De<Ke;De++){const Pe=$[De];W=H[De];for(let Xe=0,Je=Pe.length;Xe<Je;Xe++){const Oe=ae(Pe[Xe],W[Xe],Ne);de(Oe.x,Oe.y,-Fe)}}}const se=y+_;for(let he=0;he<ce;he++){const Se=m?ae(U[he],j[he],se):U[he];C?(z.copy(k.normals[0]).multiplyScalar(Se.x),I.copy(k.binormals[0]).multiplyScalar(Se.y),A.copy(b[0]).add(z).add(I),de(A.x,A.y,A.z)):de(Se.x,Se.y,0)}for(let he=1;he<=f;he++)for(let Se=0;Se<ce;Se++){const Fe=m?ae(U[Se],j[Se],se):U[Se];C?(z.copy(k.normals[he]).multiplyScalar(Fe.x),I.copy(k.binormals[he]).multiplyScalar(Fe.y),A.copy(b[he]).add(z).add(I),de(A.x,A.y,A.z)):de(Fe.x,Fe.y,p/f*he)}for(let he=S-1;he>=0;he--){const Se=he/S,Fe=v*Math.cos(Se*Math.PI/2),Ne=y*Math.sin(Se*Math.PI/2)+_;for(let De=0,Ke=J.length;De<Ke;De++){const Pe=ae(J[De],X[De],Ne);de(Pe.x,Pe.y,p+Fe)}for(let De=0,Ke=$.length;De<Ke;De++){const Pe=$[De];W=H[De];for(let Xe=0,Je=Pe.length;Xe<Je;Xe++){const Oe=ae(Pe[Xe],W[Xe],Ne);C?de(Oe.x,Oe.y+b[f-1].y,b[f-1].x+Fe):de(Oe.x,Oe.y,p+Fe)}}}ee(),Z();function ee(){const he=r.length/3;if(m){let Se=0,Fe=ce*Se;for(let Ne=0;Ne<ye;Ne++){const De=te[Ne];_e(De[2]+Fe,De[1]+Fe,De[0]+Fe)}Se=f+S*2,Fe=ce*Se;for(let Ne=0;Ne<ye;Ne++){const De=te[Ne];_e(De[0]+Fe,De[1]+Fe,De[2]+Fe)}}else{for(let Se=0;Se<ye;Se++){const Fe=te[Se];_e(Fe[2],Fe[1],Fe[0])}for(let Se=0;Se<ye;Se++){const Fe=te[Se];_e(Fe[0]+ce*f,Fe[1]+ce*f,Fe[2]+ce*f)}}i.addGroup(he,r.length/3-he,0)}function Z(){const he=r.length/3;let Se=0;ue(J,Se),Se+=J.length;for(let Fe=0,Ne=$.length;Fe<Ne;Fe++){const De=$[Fe];ue(De,Se),Se+=De.length}i.addGroup(he,r.length/3-he,1)}function ue(he,Se){let Fe=he.length;for(;--Fe>=0;){const Ne=Fe;let De=Fe-1;De<0&&(De=he.length-1);for(let Ke=0,Pe=f+S*2;Ke<Pe;Ke++){const Xe=ce*Ke,Je=ce*(Ke+1),Oe=Se+Ne+Xe,q=Se+De+Xe,B=Se+De+Je,pe=Se+Ne+Je;Ae(Oe,q,B,pe)}}}function de(he,Se,Fe){l.push(he),l.push(Se),l.push(Fe)}function _e(he,Se,Fe){Ue(he),Ue(Se),Ue(Fe);const Ne=r.length/3,De=M.generateTopUV(i,r,Ne-3,Ne-2,Ne-1);ke(De[0]),ke(De[1]),ke(De[2])}function Ae(he,Se,Fe,Ne){Ue(he),Ue(Se),Ue(Ne),Ue(Se),Ue(Fe),Ue(Ne);const De=r.length/3,Ke=M.generateSideWallUV(i,r,De-6,De-3,De-2,De-1);ke(Ke[0]),ke(Ke[1]),ke(Ke[3]),ke(Ke[1]),ke(Ke[2]),ke(Ke[3])}function Ue(he){r.push(l[he*3+0]),r.push(l[he*3+1]),r.push(l[he*3+2])}function ke(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Vj(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new nM[r.type]().fromJSON(r)),new kp(i,e.options)}}const Bj={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],f=e[r*3+1];return[new Ge(s,o),new Ge(a,l),new Ge(c,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[r*3],v=e[r*3+1],y=e[r*3+2],_=e[s*3],S=e[s*3+1],T=e[s*3+2];return Math.abs(a-f)<Math.abs(o-c)?[new Ge(o,1-l),new Ge(c,1-p),new Ge(m,1-y),new Ge(_,1-T)]:[new Ge(a,1-l),new Ge(f,1-p),new Ge(v,1-y),new Ge(S,1-T)]}};function Vj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ip extends Oa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ip(e.radius,e.detail)}}class Xf extends Oa{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xf(e.radius,e.detail)}}class Dp extends jt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],f=[];let p=e;const m=(t-e)/r,v=new ne,y=new Ge;for(let _=0;_<=r;_++){for(let S=0;S<=i;S++){const T=s+S/i*o;v.x=p*Math.cos(T),v.y=p*Math.sin(T),l.push(v.x,v.y,v.z),c.push(0,0,1),y.x=(v.x/t+1)/2,y.y=(v.y/t+1)/2,f.push(y.x,y.y)}p+=m}for(let _=0;_<r;_++){const S=_*(i+1);for(let T=0;T<i;T++){const M=T+S,b=M,C=M+i+1,k=M+i+2,I=M+1;a.push(b,C,I),a.push(C,k,I)}}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Np extends jt{constructor(e=new Hu([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new gt(r,3)),this.setAttribute("normal",new gt(s,3)),this.setAttribute("uv",new gt(o,2));function c(f){const p=r.length/3,m=f.extractPoints(t);let v=m.shape;const y=m.holes;No.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,T=y.length;S<T;S++){const M=y[S];No.isClockWise(M)===!0&&(y[S]=M.reverse())}const _=No.triangulateShape(v,y);for(let S=0,T=y.length;S<T;S++){const M=y[S];v=v.concat(M)}for(let S=0,T=v.length;S<T;S++){const M=v[S];r.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let S=0,T=_.length;S<T;S++){const M=_[S],b=M[0]+p,C=M[1]+p,k=M[2]+p;i.push(b,C,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Gj(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Np(i,e.curveSegments)}}function Gj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Yf extends jt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const f=[],p=new ne,m=new ne,v=[],y=[],_=[],S=[];for(let T=0;T<=i;T++){const M=[],b=T/i;let C=0;T==0&&o==0?C=.5/t:T==i&&l==Math.PI&&(C=-.5/t);for(let k=0;k<=t;k++){const I=k/t;p.x=-e*Math.cos(r+I*s)*Math.sin(o+b*a),p.y=e*Math.cos(o+b*a),p.z=e*Math.sin(r+I*s)*Math.sin(o+b*a),y.push(p.x,p.y,p.z),m.copy(p).normalize(),_.push(m.x,m.y,m.z),S.push(I+C,1-b),M.push(c++)}f.push(M)}for(let T=0;T<i;T++)for(let M=0;M<t;M++){const b=f[T][M+1],C=f[T][M],k=f[T+1][M],I=f[T+1][M+1];(T!==0||o>0)&&v.push(b,C,I),(T!==i-1||l<Math.PI)&&v.push(C,k,I)}this.setIndex(v),this.setAttribute("position",new gt(y,3)),this.setAttribute("normal",new gt(_,3)),this.setAttribute("uv",new gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Op extends Oa{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Op(e.radius,e.detail)}}class zp extends jt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],f=new ne,p=new ne,m=new ne;for(let v=0;v<=i;v++)for(let y=0;y<=r;y++){const _=y/r*s,S=v/i*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(_),p.y=(e+t*Math.cos(S))*Math.sin(_),p.z=t*Math.sin(S),a.push(p.x,p.y,p.z),f.x=e*Math.cos(_),f.y=e*Math.sin(_),m.subVectors(p,f).normalize(),l.push(m.x,m.y,m.z),c.push(y/r),c.push(v/i)}for(let v=1;v<=i;v++)for(let y=1;y<=r;y++){const _=(r+1)*v+y-1,S=(r+1)*(v-1)+y-1,T=(r+1)*(v-1)+y,M=(r+1)*v+y;o.push(_,S,M),o.push(S,T,M)}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(l,3)),this.setAttribute("uv",new gt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zp(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Fp extends jt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],p=new ne,m=new ne,v=new ne,y=new ne,_=new ne,S=new ne,T=new ne;for(let b=0;b<=i;++b){const C=b/i*s*Math.PI*2;M(C,s,o,e,v),M(C+.01,s,o,e,y),S.subVectors(y,v),T.addVectors(y,v),_.crossVectors(S,T),T.crossVectors(_,S),_.normalize(),T.normalize();for(let k=0;k<=r;++k){const I=k/r*Math.PI*2,z=-t*Math.cos(I),A=t*Math.sin(I);p.x=v.x+(z*T.x+A*_.x),p.y=v.y+(z*T.y+A*_.y),p.z=v.z+(z*T.z+A*_.z),l.push(p.x,p.y,p.z),m.subVectors(p,v).normalize(),c.push(m.x,m.y,m.z),f.push(b/i),f.push(k/r)}}for(let b=1;b<=i;b++)for(let C=1;C<=r;C++){const k=(r+1)*(b-1)+(C-1),I=(r+1)*b+(C-1),z=(r+1)*b+C,A=(r+1)*(b-1)+C;a.push(k,I,A),a.push(I,z,A)}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(f,2));function M(b,C,k,I,z){const A=Math.cos(b),O=Math.sin(b),U=k/C*b,$=Math.cos(U);z.x=I*(2+$)*.5*A,z.y=I*(2+$)*O*.5,z.z=I*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Up extends jt{constructor(e=new eM(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ne,l=new ne,c=new Ge;let f=new ne;const p=[],m=[],v=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new gt(p,3)),this.setAttribute("normal",new gt(m,3)),this.setAttribute("uv",new gt(v,2));function _(){for(let b=0;b<t;b++)S(b);S(s===!1?t:0),M(),T()}function S(b){f=e.getPointAt(b/t,f);const C=o.normals[b],k=o.binormals[b];for(let I=0;I<=r;I++){const z=I/r*Math.PI*2,A=Math.sin(z),O=-Math.cos(z);l.x=O*C.x+A*k.x,l.y=O*C.y+A*k.y,l.z=O*C.z+A*k.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,p.push(a.x,a.y,a.z)}}function T(){for(let b=1;b<=t;b++)for(let C=1;C<=r;C++){const k=(r+1)*(b-1)+(C-1),I=(r+1)*b+(C-1),z=(r+1)*b+C,A=(r+1)*(b-1)+C;y.push(k,I,A),y.push(I,z,A)}}function M(){for(let b=0;b<=t;b++)for(let C=0;C<=r;C++)c.x=b/t,c.y=C/r,v.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Up(new nM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vk extends jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ne,s=new ne;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,f=l.length;c<f;++c){const p=l[c],m=p.start,v=p.count;for(let y=m,_=m+v;y<_;y+=3)for(let S=0;S<3;S++){const T=a.getX(y+S),M=a.getX(y+(S+1)%3);r.fromBufferAttribute(o,T),s.fromBufferAttribute(o,M),kE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const f=3*a+c,p=3*a+(c+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,p),kE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var IE=Object.freeze({__proto__:null,BoxGeometry:Wl,CapsuleGeometry:Cp,CircleGeometry:Ap,ConeGeometry:Lp,CylinderGeometry:sc,DodecahedronGeometry:Rp,EdgesGeometry:dk,ExtrudeGeometry:kp,IcosahedronGeometry:Ip,LatheGeometry:Zf,OctahedronGeometry:Xf,PlaneGeometry:Na,PolyhedronGeometry:Oa,RingGeometry:Dp,ShapeGeometry:Np,SphereGeometry:Yf,TetrahedronGeometry:Op,TorusGeometry:zp,TorusKnotGeometry:Fp,TubeGeometry:Up,WireframeGeometry:vk});class yk extends qi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _k extends Fo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class iM extends qi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xk extends iM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wk extends qi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sk extends qi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Mk extends qi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class bk extends qi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tk extends qi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ek extends Fr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function As(n,e,t){return rM(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ou(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function rM(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Pk(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function X1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function sM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Hj(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],f=c.getValueSize(),p=[],m=[];for(let v=0;v<c.times.length;++v){const y=c.times[v]*r;if(!(y<t||y>=i)){p.push(c.times[v]);for(let _=0;_<f;++_)m.push(c.values[v*f+_])}}p.length!==0&&(c.times=Ou(p,c.times.constructor),c.values=Ou(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Wj(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(T){return T.name===a.name&&T.ValueTypeName===l});if(c===void 0)continue;let f=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const y=a.times.length-1;let _;if(s<=a.times[0]){const T=f,M=p-f;_=As(a.values,T,M)}else if(s>=a.times[y]){const T=y*p+f,M=T+p-f;_=As(a.values,T,M)}else{const T=a.createInterpolant(),M=f,b=p-f;T.evaluate(s),_=As(T.resultBuffer,M,b)}l==="quaternion"&&new fr().fromArray(_).normalize().conjugate().toArray(_);const S=c.times.length;for(let T=0;T<S;++T){const M=T*v+m;if(l==="quaternion")fr.multiplyQuaternionsFlat(c.values,M,_,0,c.values,M);else{const b=v-m*2;for(let C=0;C<b;++C)c.values[M+C]-=_[C]}}}return n.blendMode=zS,n}const jj={arraySlice:As,convertArray:Ou,isTypedArray:rM,getKeyframeOrder:Pk,sortedArray:X1,flattenJSON:sM,subclip:Hj,makeClipAdditive:Wj};class Bp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ck extends Bp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Iu,endingEnd:Iu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Du:s=e,a=2*t-i;break;case Jd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Du:o=e,l=2*i-t;break;case Jd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,f=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,v=this._weightNext,y=(i-t)/(r-t),_=y*y,S=_*y,T=-m*S+2*m*_-m*y,M=(1+m)*S+(-1.5-2*m)*_+(-.5+m)*y+1,b=(-1-v)*S+(1.5+v)*_+.5*y,C=v*S-v*_;for(let k=0;k!==a;++k)s[k]=T*o[f+k]+M*o[c+k]+b*o[l+k]+C*o[p+k];return s}}class oM extends Bp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=(i-t)/(r-t),p=1-f;for(let m=0;m!==a;++m)s[m]=o[c+m]*p+o[l+m]*f;return s}}class Ak extends Bp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class _o{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ou(t,this.TimeBufferType),this.values=Ou(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ou(e.times,Array),values:Ou(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Ak(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ck(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qd:t=this.InterpolantFactoryMethodDiscrete;break;case Kd:t=this.InterpolantFactoryMethodLinear;break;case av:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qd;case this.InterpolantFactoryMethodLinear:return Kd;case this.InterpolantFactoryMethodSmooth:return av}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=As(i,s,o),this.values=As(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&rM(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=As(this.times),t=As(this.values),i=this.getValueSize(),r=this.getInterpolation()===av,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],f=e[a+1];if(c!==f&&(a!==1||c!==e[0]))if(r)l=!0;else{const p=a*i,m=p-i,v=p+i;for(let y=0;y!==i;++y){const _=t[p+y];if(_!==t[m+y]||_!==t[v+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*i,m=o*i;for(let v=0;v!==i;++v)t[m+v]=t[p+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=As(e,0,o),this.values=As(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=As(this.times,0),t=As(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}_o.prototype.TimeBufferType=Float32Array;_o.prototype.ValueBufferType=Float32Array;_o.prototype.DefaultInterpolation=Kd;class oc extends _o{}oc.prototype.ValueTypeName="bool";oc.prototype.ValueBufferType=Array;oc.prototype.DefaultInterpolation=qd;oc.prototype.InterpolantFactoryMethodLinear=void 0;oc.prototype.InterpolantFactoryMethodSmooth=void 0;class aM extends _o{}aM.prototype.ValueTypeName="color";class sp extends _o{}sp.prototype.ValueTypeName="number";class Lk extends Bp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let f=c+a;c!==f;c+=4)fr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class qf extends _o{InterpolantFactoryMethodLinear(e){return new Lk(this.times,this.values,this.getValueSize(),e)}}qf.prototype.ValueTypeName="quaternion";qf.prototype.DefaultInterpolation=Kd;qf.prototype.InterpolantFactoryMethodSmooth=void 0;class ac extends _o{}ac.prototype.ValueTypeName="string";ac.prototype.ValueBufferType=Array;ac.prototype.DefaultInterpolation=qd;ac.prototype.InterpolantFactoryMethodLinear=void 0;ac.prototype.InterpolantFactoryMethodSmooth=void 0;class op extends _o{}op.prototype.ValueTypeName="vector";class ap{constructor(e,t=-1,i,r=P0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=fs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Xj(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(_o.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const f=Pk(l);l=X1(l,1,f),c=X1(c,1,f),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new sp(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.name.match(s);if(f&&f.length>1){const p=f[1];let m=r[p];m||(r[p]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,v,y,_){if(v.length!==0){const S=[],T=[];sM(v,S,T,y),S.length!==0&&_.push(new p(m,S,T))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const m=c[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let _=0;_<m[y].morphTargets.length;_++)v[m[y].morphTargets[_]]=-1;for(const _ in v){const S=[],T=[];for(let M=0;M!==m[y].morphTargets.length;++M){const b=m[y];S.push(b.time),T.push(b.morphTarget===_?1:0)}r.push(new sp(".morphTargetInfluence["+_+"]",S,T))}l=v.length*o}else{const v=".bones["+t[p].name+"]";i(op,v+".position",m,"pos",r),i(qf,v+".quaternion",m,"rot",r),i(op,v+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Zj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sp;case"vector":case"vector2":case"vector3":case"vector4":return op;case"color":return aM;case"quaternion":return qf;case"bool":case"boolean":return oc;case"string":return ac}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Xj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Zj(n.type);if(n.times===void 0){const t=[],i=[];sM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const tc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class lM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,p){return c.push(f,p),this},this.removeHandler=function(f){const p=c.indexOf(f);return p!==-1&&c.splice(p,2),this},this.getHandler=function(f){for(let p=0,m=c.length;p<m;p+=2){const v=c[p],y=c[p+1];if(v.global&&(v.lastIndex=0),v.test(f))return y}return null}}}const Rk=new lM;class ms{constructor(e){this.manager=e!==void 0?e:Rk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const oa={};class Yj extends Error{constructor(e,t){super(e),this.response=t}}class Aa extends ms{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=tc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(oa[e]!==void 0){oa[e].push({onLoad:t,onProgress:i,onError:r});return}oa[e]=[],oa[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const f=oa[e],p=c.body.getReader(),m=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),v=m?parseInt(m):0,y=v!==0;let _=0;const S=new ReadableStream({start(T){M();function M(){p.read().then(({done:b,value:C})=>{if(b)T.close();else{_+=C.byteLength;const k=new ProgressEvent("progress",{lengthComputable:y,loaded:_,total:v});for(let I=0,z=f.length;I<z;I++){const A=f[I];A.onProgress&&A.onProgress(k)}T.enqueue(C),M()}})}}});return new Response(S)}else throw new Yj(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return c.json();default:if(a===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),m=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(m);return c.arrayBuffer().then(y=>v.decode(y))}}}).then(c=>{tc.add(e,c);const f=oa[e];delete oa[e];for(let p=0,m=f.length;p<m;p++){const v=f[p];v.onLoad&&v.onLoad(c)}}).catch(c=>{const f=oa[e];if(f===void 0)throw this.manager.itemError(e),c;delete oa[e];for(let p=0,m=f.length;p<m;p++){const v=f[p];v.onError&&v.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class qj extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Aa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=ap.parse(e[i]);t.push(r)}return t}}class Kj extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new KS,l=new Aa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function f(p){l.load(e[p],function(m){const v=s.parse(m,!0);o[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},c+=1,c===6&&(v.mipmapCount===1&&(a.minFilter=Fn),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)f(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let y=0;y<v;y++){o[y]={mipmaps:[]};for(let _=0;_<m.mipmapCount;_++)o[y].mipmaps.push(m.mipmaps[y*m.mipmapCount+_]),o[y].format=m.format,o[y].width=m.width,o[y].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Fn),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class lp extends ms{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=tc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=ep("img");function l(){f(),tc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(p){f(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Jj extends ms{constructor(e){super(e)}load(e,t,i,r){const s=new Pp,o=new lp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(f){s.images[c]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Qj extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Sf,a=new Aa(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:cr,o.wrapT=c.wrapT!==void 0?c.wrapT:cr,o.magFilter=c.magFilter!==void 0?c.magFilter:Fn,o.minFilter=c.minFilter!==void 0?c.minFilter:Fn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Nl),c.mipmapCount===1&&(o.minFilter=Fn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class $j extends ms{constructor(e){super(e)}load(e,t,i,r){const s=new Gn,o=new lp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class jl extends un{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kk extends jl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const D_=new zt,DE=new ne,NE=new ne;class uM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new A0,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;DE.setFromMatrixPosition(e.matrixWorld),t.position.copy(DE),NE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(NE),t.updateMatrixWorld(),D_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(D_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(D_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class e7 extends uM{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=$d*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ik extends jl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new e7}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const OE=new zt,Vh=new ne,N_=new ne;class t7 extends uM{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new hn(2,1,1,1),new hn(0,1,1,1),new hn(3,1,1,1),new hn(1,1,1,1),new hn(3,0,1,1),new hn(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Vh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Vh),N_.copy(i.position),N_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(N_),i.updateMatrixWorld(),r.makeTranslation(-Vh.x,-Vh.y,-Vh.z),OE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OE)}}class Dk extends jl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new t7}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class n7 extends uM{constructor(){super(new Ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nk extends jl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.shadow=new n7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ok extends jl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class zk extends jl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Fk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class V0 extends jl{constructor(e=new Fk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class G0 extends ms{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Aa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=G0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ht().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ge().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ne().fromArray(o.value);break;case"v4":r.uniforms[s].value=new hn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ni().fromArray(o.value);break;case"m4":r.uniforms[s].value=new zt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ge().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:yk,SpriteMaterial:XS,RawShaderMaterial:_k,ShaderMaterial:Fo,PointsMaterial:qS,MeshPhysicalMaterial:xk,MeshStandardMaterial:iM,MeshPhongMaterial:wk,MeshToonMaterial:Sk,MeshNormalMaterial:Mk,MeshLambertMaterial:bk,MeshDepthMaterial:R0,MeshDistanceMaterial:k0,MeshBasicMaterial:Da,MeshMatcapMaterial:Tk,LineDashedMaterial:Ek,LineBasicMaterial:Fr,Material:qi};return new t[e]}}class Y1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cM extends jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Uk extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Aa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,y){if(t[y]!==void 0)return t[y];const S=v.interleavedBuffers[y],T=s(v,S.buffer),M=af(S.type,T),b=new O0(M,S.stride);return b.uuid=S.uuid,t[y]=b,b}function s(v,y){if(i[y]!==void 0)return i[y];const S=v.arrayBuffers[y],T=new Uint32Array(S).buffer;return i[y]=T,T}const o=e.isInstancedBufferGeometry?new cM:new jt,a=e.data.index;if(a!==void 0){const v=af(a.type,a.array);o.setIndex(new xn(v,1))}const l=e.data.attributes;for(const v in l){const y=l[v];let _;if(y.isInterleavedBufferAttribute){const S=r(e.data,y.data);_=new Qu(S,y.itemSize,y.offset,y.normalized)}else{const S=af(y.type,y.array),T=y.isInstancedBufferAttribute?$u:xn;_=new T(S,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),y.updateRange!==void 0&&(_.updateRange.offset=y.updateRange.offset,_.updateRange.count=y.updateRange.count),o.setAttribute(v,_)}const c=e.data.morphAttributes;if(c)for(const v in c){const y=c[v],_=[];for(let S=0,T=y.length;S<T;S++){const M=y[S];let b;if(M.isInterleavedBufferAttribute){const C=r(e.data,M.data);b=new Qu(C,M.itemSize,M.offset,M.normalized)}else{const C=af(M.type,M.array);b=new xn(C,M.itemSize,M.normalized)}M.name!==void 0&&(b.name=M.name),_.push(b)}o.morphAttributes[v]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,y=p.length;v!==y;++v){const _=p[v];o.addGroup(_.start,_.count,_.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const v=new ne;m.center!==void 0&&v.fromArray(m.center),o.boundingSphere=new Hl(v,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class i7 extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Y1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Aa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Y1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Aa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,f),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Hu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new z0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new Uk;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in IE?a=IE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new G0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=ap.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(f)}else return l.data?{data:af(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new lM(t);s=new lp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,f=e.length;c<f;c++){const p=e[c],m=p.url;if(Array.isArray(m)){const v=[];for(let y=0,_=m.length;y<_;y++){const S=m[y],T=a(S);T!==null&&(T instanceof HTMLImageElement?v.push(T):v.push(new Sf(T.data,T.width,T.height)))}r[p.uuid]=new Nu(v)}else{const v=a(p.url);r[p.uuid]=new Nu(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:af(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new lp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const f=[];for(let p=0,m=c.length;p<m;p++){const v=c[p],y=await s(v);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new Sf(y.data,y.width,y.height)))}i[l.uuid]=new Nu(f)}else{const f=await s(l.url);i[l.uuid]=new Nu(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let f;Array.isArray(c)?(f=new Pp,c.length===6&&(f.needsUpdate=!0)):(c&&c.data?f=new Sf:f=new Gn,c&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,r7)),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],zE),f.wrapT=i(a.wrap[1],zE)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,FE)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,FE)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let y=0,_=m.length;y<_;y++){const S=m[y];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(i[S])}return v}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let f,p;switch(e.type){case"Scene":o=new Jv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ht(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new N0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new D0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new ii(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ll(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Ok(e.color,e.intensity);break;case"DirectionalLight":o=new Nk(e.color,e.intensity);break;case"PointLight":o=new Dk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new zk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ik(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new kk(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new V0().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),p=l(e.material),o=new rk(f,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),p=l(e.material),o=new pi(f,p);break;case"InstancedMesh":f=a(e.geometry),p=l(e.material);const m=e.count,v=e.instanceMatrix,y=e.instanceColor;o=new sk(f,p,m),o.instanceMatrix=new $u(new Float32Array(v.array),16),y!==void 0&&(o.instanceColor=new $u(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new ik;break;case"Line":o=new Ol(a(e.geometry),l(e.material));break;case"LineLoop":o=new ok(a(e.geometry),l(e.material));break;case"LineSegments":o=new Bo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new ak(a(e.geometry),l(e.material));break;case"Sprite":o=new nk(l(e.material));break;case"Group":o=new uf;break;case"Bone":o=new YS;break;default:o=new un}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)o.add(this.parseObject(m[v],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const y=m[v];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const y=m[v],_=o.getObjectByProperty("uuid",y.object);_!==void 0&&o.addLevel(_,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const r7={UVMapping:E0,CubeReflectionMapping:Il,CubeRefractionMapping:Dl,EquirectangularReflectionMapping:jd,EquirectangularRefractionMapping:Zd,CubeUVReflectionMapping:Hf},zE={RepeatWrapping:Xd,ClampToEdgeWrapping:cr,MirroredRepeatWrapping:Yd},FE={NearestFilter:ei,NearestMipmapNearestFilter:qv,NearestMipmapLinearFilter:md,LinearFilter:Fn,LinearMipmapNearestFilter:NS,LinearMipmapLinearFilter:Nl};class s7 extends ms{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=tc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){tc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Eg;class fM{static getContext(){return Eg===void 0&&(Eg=new(window.AudioContext||window.webkitAudioContext)),Eg}static setContext(e){Eg=e}}class o7 extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Aa(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);fM.getContext().decodeAudioData(l,function(f){t(f)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class a7 extends V0{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ht().set(e),s=new ht().set(t),o=new ne(r.r,r.g,r.b),a=new ne(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class l7 extends V0{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new ht().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const UE=new zt,BE=new zt,mu=new zt;class u7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Vu*t.fov*.5)/t.zoom;let a,l;BE.elements[12]=-r,UE.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,mu.elements[0]=2*t.near/(l-a),mu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(mu),a=-o*t.aspect-s,l=o*t.aspect-s,mu.elements[0]=2*t.near/(l-a),mu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(mu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(BE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(UE)}}class hM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=VE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=VE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function VE(){return(typeof performance>"u"?Date:performance).now()}const gu=new ne,GE=new fr,c7=new ne,vu=new ne;class f7 extends un{constructor(){super(),this.type="AudioListener",this.context=fM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new hM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gu,GE,c7),vu.set(0,0,-1).applyQuaternion(GE),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gu.x,r),t.positionY.linearRampToValueAtTime(gu.y,r),t.positionZ.linearRampToValueAtTime(gu.z,r),t.forwardX.linearRampToValueAtTime(vu.x,r),t.forwardY.linearRampToValueAtTime(vu.y,r),t.forwardZ.linearRampToValueAtTime(vu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(gu.x,gu.y,gu.z),t.setOrientation(vu.x,vu.y,vu.z,i.x,i.y,i.z)}}class Bk extends un{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const yu=new ne,HE=new fr,h7=new ne,_u=new ne;class d7 extends Bk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(yu,HE,h7),_u.set(0,0,1).applyQuaternion(HE);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yu.x,i),t.positionY.linearRampToValueAtTime(yu.y,i),t.positionZ.linearRampToValueAtTime(yu.z,i),t.orientationX.linearRampToValueAtTime(_u.x,i),t.orientationY.linearRampToValueAtTime(_u.y,i),t.orientationZ.linearRampToValueAtTime(_u.z,i)}else t.setPosition(yu.x,yu.y,yu.z),t.setOrientation(_u.x,_u.y,_u.z)}}class p7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Vk{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){fr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;fr.multiplyQuaternionsFlat(e,o,e,t,e,i),fr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const dM="\\[\\]\\.:\\/",m7=new RegExp("["+dM+"]","g"),pM="[^"+dM+"]",g7="[^"+dM.replace("\\.","")+"]",v7=/((?:WC+[\/:])*)/.source.replace("WC",pM),y7=/(WCOD+)?/.source.replace("WCOD",g7),_7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pM),x7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pM),w7=new RegExp("^"+v7+y7+_7+x7+"$"),S7=["material","materials","bones","map"];class M7{constructor(e,t,i){const r=i||nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class nn{constructor(e,t,i){this.path=t,this.parsedPath=i||nn.parseTrackName(t),this.node=nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new nn.Composite(e,t,i):new nn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(m7,"")}static parseTrackName(e){const t=w7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);S7.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nn.Composite=M7;nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nn.prototype.GetterByBindingType=[nn.prototype._getValue_direct,nn.prototype._getValue_array,nn.prototype._getValue_arrayElement,nn.prototype._getValue_toArray];nn.prototype.SetterByBindingTypeAndVersioning=[[nn.prototype._setValue_direct,nn.prototype._setValue_direct_setNeedsUpdate,nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_array,nn.prototype._setValue_array_setNeedsUpdate,nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_arrayElement,nn.prototype._setValue_arrayElement_setNeedsUpdate,nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_fromArray,nn.prototype._setValue_fromArray_setNeedsUpdate,nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class b7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=fs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const m=arguments[f],v=m.uuid;let y=t[v];if(y===void 0){y=l++,t[v]=y,e.push(m);for(let _=0,S=o;_!==S;++_)s[_].push(new nn(m,i[_],r[_]))}else if(y<c){a=e[y];const _=--c,S=e[_];t[S.uuid]=y,e[y]=S,t[v]=_,e[_]=m;for(let T=0,M=o;T!==M;++T){const b=s[T],C=b[_];let k=b[y];b[y]=C,k===void 0&&(k=new nn(m,i[T],r[T])),b[_]=k}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,f=t[c];if(f!==void 0&&f>=s){const p=s++,m=e[p];t[m.uuid]=f,e[f]=m,t[c]=p,e[p]=l;for(let v=0,y=r;v!==y;++v){const _=i[v],S=_[p],T=_[f];_[f]=S,_[p]=T}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,p=t[f];if(p!==void 0)if(delete t[f],p<s){const m=--s,v=e[m],y=--o,_=e[y];t[v.uuid]=p,e[p]=v,t[_.uuid]=m,e[m]=_,e.pop();for(let S=0,T=r;S!==T;++S){const M=i[S],b=M[m],C=M[y];M[p]=b,M[m]=C,M.pop()}}else{const m=--o,v=e[m];m>0&&(t[v.uuid]=p),e[p]=v,e.pop();for(let y=0,_=r;y!==_;++y){const S=i[y];S[p]=S[m],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,f=this.nCachedObjects_,p=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(p);for(let m=f,v=l.length;m!==v;++m){const y=l[m];p[m]=new nn(y,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class T7{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Iu,endingEnd:Iu};for(let c=0;c!==o;++c){const f=s[c].createInterpolant(null);a[c]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case zS:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(o),c[f].accumulateAdditive(a);break;case P0:default:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(o),c[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===NR;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===IR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Du,r.endingEnd=Du):(e?r.endingStart=this.zeroSlopeAtStart?Du:Iu:r.endingStart=Jd,t?r.endingEnd=this.zeroSlopeAtEnd?Du:Iu:r.endingEnd=Jd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const E7=new Float32Array(1);class P7 extends Ia{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let f=c[l];f===void 0&&(f={},c[l]=f);for(let p=0;p!==s;++p){const m=r[p],v=m.name;let y=f[v];if(y!==void 0)++y.referenceCount,o[p]=y;else{if(y=o[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,v));continue}const _=t&&t._propertyBindings[p].binding.parsedPath;y=new Vk(nn.create(i,v,_),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,v),o[p]=y}a[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,l[f]=c,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new oM(new Float32Array(2),new Float32Array(2),1,E7),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?ap.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=P0),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const f=new T7(this,o,t,i);return this._bindAction(f,c),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?ap.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const f=c._cacheIndex,p=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class mM{constructor(e){this.value=e}clone(){return new mM(this.value.clone===void 0?this.value:this.value.clone())}}let C7=0;class A7 extends Ia{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:C7++}),this.name="",this.usage=Qd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class L7 extends O0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class R7{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Gk{constructor(e,t,i=0,r=1/0){this.ray=new Wf(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Gu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return q1(e,this,i,t),i.sort(WE),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)q1(e[r],this,i,t);return i.sort(WE),i}}function WE(n,e){return n.distance-e.distance}function q1(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)q1(r[s],e,t,!0)}}class K1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ni(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class k7{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const jE=new Ge;class I7{constructor(e=new Ge(1/0,1/0),t=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=jE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZE=new ne,Pg=new ne;class D7{constructor(e=new ne,t=new ne){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ZE.subVectors(e,this.start),Pg.subVectors(this.end,this.start);const i=Pg.dot(Pg);let s=Pg.dot(ZE)/i;return t&&(s=ni(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const XE=new ne;class N7 extends un{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new jt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new gt(r,3));const s=new Fr({fog:!1,toneMapped:!1});this.cone=new Bo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),XE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const al=new ne,Cg=new zt,O_=new zt;class O7 extends Bo{constructor(e){const t=Hk(e),i=new jt,r=[],s=[],o=new ht(0,0,1),a=new ht(0,1,0);for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new gt(r,3)),i.setAttribute("color",new gt(s,3));const l=new Fr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");O_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Cg.multiplyMatrices(O_,a.matrixWorld),al.setFromMatrixPosition(Cg),r.setXYZ(o,al.x,al.y,al.z),Cg.multiplyMatrices(O_,a.parent.matrixWorld),al.setFromMatrixPosition(Cg),r.setXYZ(o+1,al.x,al.y,al.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Hk(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Hk(n.children[t]));return e}class z7 extends pi{constructor(e,t,i){const r=new Yf(t,4,2),s=new Da({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const F7=new ne,YE=new ht,qE=new ht;class U7 extends un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Xf(t);r.rotateY(Math.PI*.5),this.material=new Da({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new xn(o,3)),this.add(new pi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");YE.copy(this.light.color),qE.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?YE:qE;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(F7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class B7 extends Bo{constructor(e=10,t=10,i=4473924,r=8947848){i=new ht(i),r=new ht(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,v=0,y=-a;m<=t;m++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const _=m===s?i:r;_.toArray(c,v),v+=3,_.toArray(c,v),v+=3,_.toArray(c,v),v+=3,_.toArray(c,v),v+=3}const f=new jt;f.setAttribute("position",new gt(l,3)),f.setAttribute("color",new gt(c,3));const p=new Fr({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class V7 extends Bo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ht(s),o=new ht(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),v=Math.sin(m)*e,y=Math.cos(m)*e;a.push(0,0,0),a.push(v,0,y);const _=p&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let p=0;p<i;p++){const m=p&1?s:o,v=e-e/i*p;for(let y=0;y<r;y++){let _=y/r*(Math.PI*2),S=Math.sin(_)*v,T=Math.cos(_)*v;a.push(S,0,T),l.push(m.r,m.g,m.b),_=(y+1)/r*(Math.PI*2),S=Math.sin(_)*v,T=Math.cos(_)*v,a.push(S,0,T),l.push(m.r,m.g,m.b)}}const c=new jt;c.setAttribute("position",new gt(a,3)),c.setAttribute("color",new gt(l,3));const f=new Fr({vertexColors:!0,toneMapped:!1});super(c,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KE=new ne,Ag=new ne,JE=new ne;class G7 extends un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new jt;r.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Fr({fog:!1,toneMapped:!1});this.lightPlane=new Ol(r,s),this.add(this.lightPlane),r=new jt,r.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new Ol(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KE.setFromMatrixPosition(this.light.matrixWorld),Ag.setFromMatrixPosition(this.light.target.matrixWorld),JE.subVectors(Ag,KE),this.lightPlane.lookAt(Ag),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ag),this.targetLine.scale.z=JE.length()}}const Lg=new ne,Zn=new Ep;class H7 extends Bo{constructor(e){const t=new jt,i=new Fr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,_){l(y),l(_)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new gt(r,3)),t.setAttribute("color",new gt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ht(16755200),f=new ht(16711680),p=new ht(43775),m=new ht(16777215),v=new ht(3355443);this.setColors(c,f,p,m,v)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),$n("c",t,e,Zn,0,0,-1),$n("t",t,e,Zn,0,0,1),$n("n1",t,e,Zn,-i,-r,-1),$n("n2",t,e,Zn,i,-r,-1),$n("n3",t,e,Zn,-i,r,-1),$n("n4",t,e,Zn,i,r,-1),$n("f1",t,e,Zn,-i,-r,1),$n("f2",t,e,Zn,i,-r,1),$n("f3",t,e,Zn,-i,r,1),$n("f4",t,e,Zn,i,r,1),$n("u1",t,e,Zn,i*.7,r*1.1,-1),$n("u2",t,e,Zn,-i*.7,r*1.1,-1),$n("u3",t,e,Zn,0,r*2,-1),$n("cf1",t,e,Zn,-i,0,1),$n("cf2",t,e,Zn,i,0,1),$n("cf3",t,e,Zn,0,-r,1),$n("cf4",t,e,Zn,0,r,1),$n("cn1",t,e,Zn,-i,0,-1),$n("cn2",t,e,Zn,i,0,-1),$n("cn3",t,e,Zn,0,-r,-1),$n("cn4",t,e,Zn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $n(n,e,t,i,r,s,o){Lg.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,f=a.length;c<f;c++)l.setXYZ(a[c],Lg.x,Lg.y,Lg.z)}}const Rg=new Gl;class W7 extends Bo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new jt;s.setIndex(new xn(i,1)),s.setAttribute("position",new xn(r,3)),super(s,new Fr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Rg.setFromObject(this.object),Rg.isEmpty())return;const t=Rg.min,i=Rg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class j7 extends Bo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new jt;s.setIndex(new xn(i,1)),s.setAttribute("position",new gt(r,3)),super(s,new Fr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z7 extends Ol{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new jt;o.setAttribute("position",new gt(s,3)),o.computeBoundingSphere(),super(o,new Fr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new jt;l.setAttribute("position",new gt(a,3)),l.computeBoundingSphere(),this.add(new pi(l,new Da({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QE=new ne;let kg,z_;class X7 extends un{constructor(e=new ne(0,0,1),t=new ne(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",kg===void 0&&(kg=new jt,kg.setAttribute("position",new gt([0,0,0,0,1,0],3)),z_=new sc(0,.5,1,5,1),z_.translate(0,-.5,0)),this.position.copy(t),this.line=new Ol(kg,new Fr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new pi(z_,new Da({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QE.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QE,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Y7 extends Bo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new jt;r.setAttribute("position",new gt(t,3)),r.setAttribute("color",new gt(i,3));const s=new Fr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ht,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class q7{constructor(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new tp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const M=[];for(let b=0,C=T.length;b<C;b++){const k=T[b],I=new Hu;I.curves=k.curves,M.push(I)}return M}function i(T,M){const b=M.length;let C=!1;for(let k=b-1,I=0;I<b;k=I++){let z=M[k],A=M[I],O=A.x-z.x,U=A.y-z.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(z=M[I],O=-O,A=M[k],U=-U),T.y<z.y||T.y>A.y)continue;if(T.y===z.y){if(T.x===z.x)return!0}else{const $=U*(T.x-z.x)-O*(T.y-z.y);if($===0)return!0;if($<0)continue;C=!C}}else{if(T.y!==z.y)continue;if(A.x<=T.x&&T.x<=z.x||z.x<=T.x&&T.x<=A.x)return!0}}return C}const r=No.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Hu,l.curves=a.curves,c.push(l),c;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],m=[];let v=[],y=0,_;m[y]=void 0,v[y]=[];for(let T=0,M=s.length;T<M;T++)a=s[T],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!f&&m[y]&&y++,m[y]={s:new Hu,p:_},m[y].s.curves=a.curves,f&&y++,v[y]=[]):v[y].push({h:a,p:_[0]});if(!m[0])return t(s);if(m.length>1){let T=!1,M=0;for(let b=0,C=m.length;b<C;b++)p[b]=[];for(let b=0,C=m.length;b<C;b++){const k=v[b];for(let I=0;I<k.length;I++){const z=k[I];let A=!0;for(let O=0;O<m.length;O++)i(z.p,m[O].p)&&(b!==O&&M++,A?(A=!1,p[O].push(z)):T=!0);A&&p[b].push(z)}}M>0&&T===!1&&(v=p)}let S;for(let T=0,M=m.length;T<M;T++){l=m[T].s,c.push(l),S=v[T];for(let b=0,C=S.length;b<C;b++)l.holes.push(S[b].h)}return c}}const fa=K7();function K7(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,f=0;for(;!(c&8388608);)c<<=1,f-=8388608;c&=-8388609,f+=947912704,s[l]=c|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function J7(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ni(n,-65504,65504),fa.floatView[0]=n;const e=fa.uint32View[0],t=e>>23&511;return fa.baseTable[t]+((e&8388607)>>fa.shiftTable[t])}function Q7(n){const e=n>>10;return fa.uint32View[0]=fa.mantissaTable[fa.offsetTable[e]+(n&1023)]+fa.exponentTable[e],fa.floatView[0]}const $7={toHalfFloat:J7,fromHalfFloat:Q7};class e9 extends Wl{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class t9 extends Cp{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class n9 extends Ap{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class i9 extends Lp{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class r9 extends sc{constructor(e,t,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,l)}}class s9 extends Rp{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class o9 extends kp{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class a9 extends Ip{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class l9 extends Zf{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class u9 extends Xf{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class c9 extends Na{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class f9 extends Oa{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class h9 extends Dp{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class d9 extends Np{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class p9 extends Yf{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class m9 extends Op{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class g9 extends zp{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class v9 extends Fp{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class y9 extends Up{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:b0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=b0);const _9=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:DS,AddEquation:Eu,AddOperation:dR,AdditiveAnimationBlendMode:zS,AdditiveBlending:h1,AlphaFormat:MR,AlwaysDepth:oR,AlwaysStencilFunc:FR,AmbientLight:Ok,AmbientLightProbe:l7,AnimationClip:ap,AnimationLoader:qj,AnimationMixer:P7,AnimationObjectGroup:b7,AnimationUtils:jj,ArcCurve:lk,ArrayCamera:QR,ArrowHelper:X7,Audio:Bk,AudioAnalyser:p7,AudioContext:fM,AudioListener:f7,AudioLoader:o7,AxesHelper:Y7,BackSide:Nr,BasicDepthPacking:OR,BasicShadowMap:ZL,Bone:YS,BooleanKeyframeTrack:oc,Box2:I7,Box3:Gl,Box3Helper:j7,BoxBufferGeometry:e9,BoxGeometry:Wl,BoxHelper:W7,BufferAttribute:xn,BufferGeometry:jt,BufferGeometryLoader:Uk,ByteType:yR,Cache:tc,Camera:Ep,CameraHelper:H7,CanvasTexture:mj,CapsuleBufferGeometry:t9,CapsuleGeometry:Cp,CatmullRomCurve3:uk,CineonToneMapping:gR,CircleBufferGeometry:n9,CircleGeometry:Ap,ClampToEdgeWrapping:cr,Clock:hM,Color:ht,ColorKeyframeTrack:aM,ColorManagement:ar,CompressedArrayTexture:pj,CompressedTexture:KS,CompressedTextureLoader:Kj,ConeBufferGeometry:i9,ConeGeometry:Lp,CubeCamera:WR,CubeReflectionMapping:Il,CubeRefractionMapping:Dl,CubeTexture:Pp,CubeTextureLoader:Jj,CubeUVReflectionMapping:Hf,CubicBezierCurve:QS,CubicBezierCurve3:ck,CubicInterpolant:Ck,CullFaceBack:f1,CullFaceFront:jL,CullFaceFrontBack:c6,CullFaceNone:WL,Curve:yo,CurvePath:hk,CustomBlending:XL,CustomToneMapping:vR,CylinderBufferGeometry:r9,CylinderGeometry:sc,Cylindrical:k7,Data3DTexture:GS,DataArrayTexture:C0,DataTexture:Sf,DataTextureLoader:Qj,DataUtils:$7,DecrementStencilOp:M6,DecrementWrapStencilOp:T6,DefaultLoadingManager:Rk,DepthFormat:Al,DepthStencilFormat:Ju,DepthTexture:$R,DirectionalLight:Nk,DirectionalLightHelper:G7,DiscreteInterpolant:Ak,DisplayP3ColorSpace:US,DodecahedronBufferGeometry:s9,DodecahedronGeometry:Rp,DoubleSide:uo,DstAlphaFactor:eR,DstColorFactor:nR,DynamicCopyUsage:B6,DynamicDrawUsage:D6,DynamicReadUsage:z6,EdgesGeometry:dk,EllipseCurve:F0,EqualDepth:lR,EqualStencilFunc:A6,EquirectangularReflectionMapping:jd,EquirectangularRefractionMapping:Zd,Euler:Tp,EventDispatcher:Ia,ExtrudeBufferGeometry:o9,ExtrudeGeometry:kp,FileLoader:Aa,Float16BufferAttribute:PV,Float32BufferAttribute:gt,Float64BufferAttribute:CV,FloatType:pa,Fog:N0,FogExp2:D0,FramebufferTexture:dj,FrontSide:zo,Frustum:A0,GLBufferAttribute:R7,GLSL1:G6,GLSL3:B1,GreaterDepth:cR,GreaterEqualDepth:uR,GreaterEqualStencilFunc:I6,GreaterStencilFunc:R6,GridHelper:B7,Group:uf,HalfFloatType:kf,HemisphereLight:kk,HemisphereLightHelper:U7,HemisphereLightProbe:a7,IcosahedronBufferGeometry:a9,IcosahedronGeometry:Ip,ImageBitmapLoader:s7,ImageLoader:lp,ImageUtils:VS,IncrementStencilOp:S6,IncrementWrapStencilOp:b6,InstancedBufferAttribute:$u,InstancedBufferGeometry:cM,InstancedInterleavedBuffer:L7,InstancedMesh:sk,Int16BufferAttribute:TV,Int32BufferAttribute:EV,Int8BufferAttribute:SV,IntType:xR,InterleavedBuffer:O0,InterleavedBufferAttribute:Qu,Interpolant:Bp,InterpolateDiscrete:qd,InterpolateLinear:Kd,InterpolateSmooth:av,InvertStencilOp:E6,KeepStencilOp:lv,KeyframeTrack:_o,LOD:ik,LatheBufferGeometry:l9,LatheGeometry:Zf,Layers:Gu,LessDepth:aR,LessEqualDepth:Yv,LessEqualStencilFunc:L6,LessStencilFunc:C6,Light:jl,LightProbe:V0,Line:Ol,Line3:D7,LineBasicMaterial:Fr,LineCurve:U0,LineCurve3:fk,LineDashedMaterial:Ek,LineLoop:ok,LineSegments:Bo,LinearEncoding:Ca,LinearFilter:Fn,LinearInterpolant:oM,LinearMipMapLinearFilter:m6,LinearMipMapNearestFilter:p6,LinearMipmapLinearFilter:Nl,LinearMipmapNearestFilter:NS,LinearSRGBColorSpace:If,LinearToneMapping:pR,Loader:ms,LoaderUtils:Y1,LoadingManager:lM,LoopOnce:IR,LoopPingPong:NR,LoopRepeat:DR,LuminanceAlphaFormat:TR,LuminanceFormat:bR,MOUSE:Mu,Material:qi,MaterialLoader:G0,MathUtils:nV,Matrix3:Ni,Matrix4:zt,MaxEquation:g1,Mesh:pi,MeshBasicMaterial:Da,MeshDepthMaterial:R0,MeshDistanceMaterial:k0,MeshLambertMaterial:bk,MeshMatcapMaterial:Tk,MeshNormalMaterial:Mk,MeshPhongMaterial:wk,MeshPhysicalMaterial:xk,MeshStandardMaterial:iM,MeshToonMaterial:Sk,MinEquation:m1,MirroredRepeatWrapping:Yd,MixOperation:hR,MultiplyBlending:p1,MultiplyOperation:bp,NearestFilter:ei,NearestMipMapLinearFilter:d6,NearestMipMapNearestFilter:h6,NearestMipmapLinearFilter:md,NearestMipmapNearestFilter:qv,NeverDepth:sR,NeverStencilFunc:P6,NoBlending:ya,NoColorSpace:_6,NoToneMapping:mo,NormalAnimationBlendMode:P0,NormalBlending:Uu,NotEqualDepth:fR,NotEqualStencilFunc:k6,NumberKeyframeTrack:sp,Object3D:un,ObjectLoader:i7,ObjectSpaceNormalMap:zR,OctahedronBufferGeometry:u9,OctahedronGeometry:Xf,OneFactor:JL,OneMinusDstAlphaFactor:tR,OneMinusDstColorFactor:iR,OneMinusSrcAlphaFactor:IS,OneMinusSrcColorFactor:$L,OrthographicCamera:Ll,PCFShadowMap:T0,PCFSoftShadowMap:pd,PMREMGenerator:G1,Path:tp,PerspectiveCamera:ii,Plane:ca,PlaneBufferGeometry:c9,PlaneGeometry:Na,PlaneHelper:Z7,PointLight:Dk,PointLightHelper:z7,Points:ak,PointsMaterial:qS,PolarGridHelper:V7,PolyhedronBufferGeometry:f9,PolyhedronGeometry:Oa,PositionalAudio:d7,PropertyBinding:nn,PropertyMixer:Vk,QuadraticBezierCurve:$S,QuadraticBezierCurve3:eM,Quaternion:fr,QuaternionKeyframeTrack:qf,QuaternionLinearInterpolant:Lk,RED_GREEN_RGTC2_Format:F1,RED_RGTC1_Format:kR,REVISION:b0,RGBADepthPacking:FS,RGBAFormat:Xr,RGBAIntegerFormat:LR,RGBA_ASTC_10x10_Format:D1,RGBA_ASTC_10x5_Format:R1,RGBA_ASTC_10x6_Format:k1,RGBA_ASTC_10x8_Format:I1,RGBA_ASTC_12x10_Format:N1,RGBA_ASTC_12x12_Format:O1,RGBA_ASTC_4x4_Format:M1,RGBA_ASTC_5x4_Format:b1,RGBA_ASTC_5x5_Format:T1,RGBA_ASTC_6x5_Format:E1,RGBA_ASTC_6x6_Format:P1,RGBA_ASTC_8x5_Format:C1,RGBA_ASTC_8x6_Format:A1,RGBA_ASTC_8x8_Format:L1,RGBA_BPTC_Format:ov,RGBA_ETC2_EAC_Format:S1,RGBA_PVRTC_2BPPV1_Format:x1,RGBA_PVRTC_4BPPV1_Format:_1,RGBA_S3TC_DXT1_Format:iv,RGBA_S3TC_DXT3_Format:rv,RGBA_S3TC_DXT5_Format:sv,RGB_ETC1_Format:RR,RGB_ETC2_Format:w1,RGB_PVRTC_2BPPV1_Format:y1,RGB_PVRTC_4BPPV1_Format:v1,RGB_S3TC_DXT1_Format:nv,RGFormat:CR,RGIntegerFormat:AR,RawShaderMaterial:_k,Ray:Wf,Raycaster:Gk,RectAreaLight:zk,RedFormat:ER,RedIntegerFormat:PR,ReinhardToneMapping:mR,RepeatWrapping:Xd,ReplaceStencilOp:w6,ReverseSubtractEquation:qL,RingBufferGeometry:h9,RingGeometry:Dp,SIGNED_RED_GREEN_RGTC2_Format:U1,SIGNED_RED_RGTC1_Format:z1,SRGBColorSpace:so,Scene:Jv,ShaderChunk:Wt,ShaderLib:ao,ShaderMaterial:Fo,ShadowMaterial:yk,Shape:Hu,ShapeBufferGeometry:d9,ShapeGeometry:Np,ShapePath:q7,ShapeUtils:No,ShortType:_R,Skeleton:z0,SkeletonHelper:O7,SkinnedMesh:rk,Source:Nu,Sphere:Hl,SphereBufferGeometry:p9,SphereGeometry:Yf,Spherical:K1,SphericalHarmonics3:Fk,SplineCurve:tM,SpotLight:Ik,SpotLightHelper:N7,Sprite:nk,SpriteMaterial:XS,SrcAlphaFactor:kS,SrcAlphaSaturateFactor:rR,SrcColorFactor:QL,StaticCopyUsage:U6,StaticDrawUsage:Qd,StaticReadUsage:O6,StereoCamera:u7,StreamCopyUsage:V6,StreamDrawUsage:N6,StreamReadUsage:F6,StringKeyframeTrack:ac,SubtractEquation:YL,SubtractiveBlending:d1,TOUCH:bu,TangentSpaceNormalMap:Vl,TetrahedronBufferGeometry:m9,TetrahedronGeometry:Op,Texture:Gn,TextureLoader:$j,TorusBufferGeometry:g9,TorusGeometry:zp,TorusKnotBufferGeometry:v9,TorusKnotGeometry:Fp,Triangle:ks,TriangleFanDrawMode:y6,TriangleStripDrawMode:v6,TrianglesDrawMode:g6,TubeBufferGeometry:y9,TubeGeometry:Up,TwoPassDoubleSide:f6,UVMapping:E0,Uint16BufferAttribute:HS,Uint32BufferAttribute:WS,Uint8BufferAttribute:MV,Uint8ClampedBufferAttribute:bV,Uniform:mM,UniformsGroup:A7,UniformsLib:at,UniformsUtils:jS,UnsignedByteType:Pa,UnsignedInt248Type:Bu,UnsignedIntType:_l,UnsignedShort4444Type:wR,UnsignedShort5551Type:SR,UnsignedShortType:OS,VSMShadowMap:ku,Vector2:Ge,Vector3:ne,Vector4:hn,VectorKeyframeTrack:op,VideoTexture:hj,WebGL1Renderer:ek,WebGL3DRenderTarget:hV,WebGLArrayRenderTarget:fV,WebGLCubeRenderTarget:jR,WebGLMultipleRenderTargets:dV,WebGLRenderTarget:vo,WebGLRenderer:I0,WebGLUtils:JR,WireframeGeometry:vk,WrapAroundEnding:Jd,ZeroCurvatureEnding:Iu,ZeroFactor:KL,ZeroSlopeEnding:Du,ZeroStencilOp:x6,_SRGBAFormat:Kv,sRGBEncoding:gn},Symbol.toStringTag,{value:"Module"}));var Wk={exports:{}},lc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lc.ConcurrentRoot=1;lc.ContinuousEventPriority=4;lc.DefaultEventPriority=16;lc.DiscreteEventPriority=1;lc.IdleEventPriority=536870912;lc.LegacyRoot=0;Wk.exports=lc;var ff=Wk.exports;function x9(n){let e;const t=new Set,i=(c,f)=>{const p=typeof c=="function"?c(e):c;if(p!==e){const m=e;e=f?p:Object.assign({},e,p),t.forEach(v=>v(e,m))}},r=()=>e,s=(c,f=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function v(){const y=f(e);if(!p(m,y)){const _=m;c(m=y,_)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:r,subscribe:(c,f,p)=>f||p?s(c,f,p):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const w9=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$E=w9?K.useEffect:K.useLayoutEffect;function S9(n){const e=typeof n=="function"?x9(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=K.useReducer(S=>S+1,0),o=e.getState(),a=K.useRef(o),l=K.useRef(i),c=K.useRef(r),f=K.useRef(!1),p=K.useRef();p.current===void 0&&(p.current=i(o));let m,v=!1;(a.current!==o||l.current!==i||c.current!==r||f.current)&&(m=i(o),v=!r(p.current,m)),$E(()=>{v&&(p.current=m),a.current=o,l.current=i,c.current=r,f.current=!1});const y=K.useRef(o);$E(()=>{const S=()=>{try{const M=e.getState(),b=l.current(M);c.current(p.current,b)||(a.current=M,p.current=b,s())}catch{f.current=!0,s()}},T=e.subscribe(S);return e.getState()!==y.current&&S(),T},[]);const _=v?m:p.current;return K.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var jk={exports:{}},F_={exports:{}},U_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eP;function M9(){return eP||(eP=1,function(n){function e(F,X){var H=F.length;F.push(X);e:for(;0<H;){var W=H-1>>>1,j=F[W];if(0<r(j,X))F[W]=X,F[H]=j,H=W;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],H=F.pop();if(H!==X){F[0]=H;e:for(var W=0,j=F.length,se=j>>>1;W<se;){var ee=2*(W+1)-1,Z=F[ee],ue=ee+1,de=F[ue];if(0>r(Z,H))ue<j&&0>r(de,Z)?(F[W]=de,F[ue]=H,W=ue):(F[W]=Z,F[ee]=H,W=ee);else if(ue<j&&0>r(de,H))F[W]=de,F[ue]=H,W=ue;else break e}}return X}function r(F,X){var H=F.sortIndex-X.sortIndex;return H!==0?H:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,p=null,m=3,v=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(_=!1,b(F),!y)if(t(l)!==null)y=!0,ce(k);else{var X=t(c);X!==null&&ye(C,X.startTime-F)}}function k(F,X){y=!1,_&&(_=!1,T(A),A=-1),v=!0;var H=m;try{for(b(X),p=t(l);p!==null&&(!(p.expirationTime>X)||F&&!$());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var j=W(p.expirationTime<=X);X=n.unstable_now(),typeof j=="function"?p.callback=j:p===t(l)&&i(l),b(X)}else i(l);p=t(l)}if(p!==null)var se=!0;else{var ee=t(c);ee!==null&&ye(C,ee.startTime-X),se=!1}return se}finally{p=null,m=H,v=!1}}var I=!1,z=null,A=-1,O=5,U=-1;function $(){return!(n.unstable_now()-U<O)}function Y(){if(z!==null){var F=n.unstable_now();U=F;var X=!0;try{X=z(!0,F)}finally{X?te():(I=!1,z=null)}}else I=!1}var te;if(typeof M=="function")te=function(){M(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,te=function(){ae.postMessage(null)}}else te=function(){S(Y,0)};function ce(F){z=F,I||(I=!0,te())}function ye(F,X){A=S(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||v||(y=!0,ce(k))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var H=m;m=X;try{return F()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=m;m=F;try{return X()}finally{m=H}},n.unstable_scheduleCallback=function(F,X,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,F={id:f++,callback:X,priorityLevel:F,startTime:H,expirationTime:j,sortIndex:-1},H>W?(F.sortIndex=H,e(c,F),t(l)===null&&F===t(c)&&(_?(T(A),A=-1):_=!0,ye(C,H-W))):(F.sortIndex=j,e(l,F),y||v||(y=!0,ce(k))),F},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(F){var X=m;return function(){var H=m;m=X;try{return F.apply(this,arguments)}finally{m=H}}}}(U_)),U_}var tP;function b9(){return tP||(tP=1,F_.exports=M9()),F_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T9=function(e){var t={},i=K,r=b9(),s=Object.assign;function o(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)d+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),k=Symbol.iterator;function I(h){return h===null||typeof h!="object"?null:(h=k&&h[k]||h["@@iterator"],typeof h=="function"?h:null)}function z(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case f:return"Fragment";case c:return"Portal";case m:return"Profiler";case p:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case y:return(h.displayName||"Context")+".Consumer";case v:return(h._context.displayName||"Context")+".Provider";case _:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case M:return d=h.displayName||null,d!==null?d:z(h.type)||"Memo";case b:d=h._payload,h=h._init;try{return z(h(d))}catch{}}return null}function A(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(d);case 8:return d===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function O(h){var d=h,w=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(w=d.return),h=d.return;while(h)}return d.tag===3?w:null}function U(h){if(O(h)!==h)throw Error(o(188))}function $(h){var d=h.alternate;if(!d){if(d=O(h),d===null)throw Error(o(188));return d!==h?null:h}for(var w=h,E=d;;){var R=w.return;if(R===null)break;var N=R.alternate;if(N===null){if(E=R.return,E!==null){w=E;continue}break}if(R.child===N.child){for(N=R.child;N;){if(N===w)return U(R),h;if(N===E)return U(R),d;N=N.sibling}throw Error(o(188))}if(w.return!==E.return)w=R,E=N;else{for(var ie=!1,me=R.child;me;){if(me===w){ie=!0,w=R,E=N;break}if(me===E){ie=!0,E=R,w=N;break}me=me.sibling}if(!ie){for(me=N.child;me;){if(me===w){ie=!0,w=N,E=R;break}if(me===E){ie=!0,E=N,w=R;break}me=me.sibling}if(!ie)throw Error(o(189))}}if(w.alternate!==E)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?h:d}function Y(h){return h=$(h),h!==null?te(h):null}function te(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=te(h);if(d!==null)return d;h=h.sibling}return null}function J(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=J(h);if(d!==null)return d}h=h.sibling}return null}var ae=Array.isArray,ce=e.getPublicInstance,ye=e.getRootHostContext,F=e.getChildHostContext,X=e.prepareForCommit,H=e.resetAfterCommit,W=e.createInstance,j=e.appendInitialChild,se=e.finalizeInitialChildren,ee=e.prepareUpdate,Z=e.shouldSetTextContent,ue=e.createTextInstance,de=e.scheduleTimeout,_e=e.cancelTimeout,Ae=e.noTimeout,Ue=e.isPrimaryRenderer,ke=e.supportsMutation,he=e.supportsPersistence,Se=e.supportsHydration,Fe=e.getInstanceFromNode,Ne=e.preparePortalMount,De=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,Pe=e.supportsMicrotasks,Xe=e.scheduleMicrotask,Je=e.supportsTestSelectors,Oe=e.findFiberRoot,q=e.getBoundingRect,B=e.getTextContent,pe=e.isHiddenSubtree,Me=e.matchAccessibilityRole,Ve=e.setFocusIfFocusable,je=e.setupIntersectionObserver,He=e.appendChild,We=e.appendChildToContainer,Te=e.commitTextUpdate,st=e.commitMount,qe=e.commitUpdate,ot=e.insertBefore,Qe=e.insertInContainerBefore,Ze=e.removeChild,oe=e.removeChildFromContainer,Le=e.resetTextContent,tt=e.hideInstance,re=e.hideTextInstance,xe=e.unhideInstance,Be=e.unhideTextInstance,nt=e.clearContainer,ct=e.cloneInstance,Ft=e.createContainerChildSet,Rt=e.appendChildToContainerChildSet,Dt=e.finalizeContainerChildren,kt=e.replaceContainerChildren,Jt=e.cloneHiddenInstance,At=e.cloneHiddenTextInstance,Ut=e.canHydrateInstance,zi=e.canHydrateTextInstance,mi=e.canHydrateSuspenseInstance,$t=e.isSuspenseInstancePending,Q=e.isSuspenseInstanceFallback,fe=e.registerSuspenseInstanceRetry,Ee=e.getNextHydratableSibling,ge=e.getFirstHydratableChild,Re=e.getFirstHydratableChildWithinContainer,pt=e.getFirstHydratableChildWithinSuspenseInstance,vt=e.hydrateInstance,bt=e.hydrateTextInstance,Ct=e.hydrateSuspenseInstance,Zt=e.getNextHydratableInstanceAfterSuspenseInstance,It=e.commitHydratedContainer,Bt=e.commitHydratedSuspenseInstance,wn=e.clearSuspenseBoundary,ri=e.clearSuspenseBoundaryFromContainer,gi=e.shouldDeleteUnhydratedTailInstances,dr=e.didNotMatchHydratedContainerTextInstance,cn=e.didNotMatchHydratedTextInstance,$e;function Fi(h){if($e===void 0)try{throw Error()}catch(w){var d=w.stack.trim().match(/\n( *(at )?)/);$e=d&&d[1]||""}return`
`+$e+h}var Sn=!1;function si(h,d){if(!h||Sn)return"";Sn=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(rt){var E=rt}Reflect.construct(h,[],d)}else{try{d.call()}catch(rt){E=rt}h.call(d.prototype)}else{try{throw Error()}catch(rt){E=rt}h()}}catch(rt){if(rt&&E&&typeof rt.stack=="string"){for(var R=rt.stack.split(`
`),N=E.stack.split(`
`),ie=R.length-1,me=N.length-1;1<=ie&&0<=me&&R[ie]!==N[me];)me--;for(;1<=ie&&0<=me;ie--,me--)if(R[ie]!==N[me]){if(ie!==1||me!==1)do if(ie--,me--,0>me||R[ie]!==N[me]){var ze=`
`+R[ie].replace(" at new "," at ");return h.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",h.displayName)),ze}while(1<=ie&&0<=me);break}}}finally{Sn=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?Fi(h):""}var Fs=Object.prototype.hasOwnProperty,Ki=[],oi=-1;function sn(h){return{current:h}}function Gt(h){0>oi||(h.current=Ki[oi],Ki[oi]=null,oi--)}function qt(h,d){oi++,Ki[oi]=h.current,h.current=d}var yt={},Lt=sn(yt),Cn=sn(!1),ai=yt;function vi(h,d){var w=h.type.contextTypes;if(!w)return yt;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var R={},N;for(N in w)R[N]=d[N];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=R),R}function Wn(h){return h=h.childContextTypes,h!=null}function wt(){Gt(Cn),Gt(Lt)}function mn(h,d,w){if(Lt.current!==yt)throw Error(o(168));qt(Lt,d),qt(Cn,w)}function xo(h,d,w){var E=h.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var R in E)if(!(R in d))throw Error(o(108,A(h)||"Unknown",R));return s({},w,E)}function Qr(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||yt,ai=Lt.current,qt(Lt,h),qt(Cn,Cn.current),!0}function Mn(h,d,w){var E=h.stateNode;if(!E)throw Error(o(169));w?(h=xo(h,d,ai),E.__reactInternalMemoizedMergedChildContext=h,Gt(Cn),Gt(Lt),qt(Lt,h)):Gt(Cn),qt(Cn,w)}var pr=Math.clz32?Math.clz32:An,Us=Math.log,mr=Math.LN2;function An(h){return h>>>=0,h===0?32:31-(Us(h)/mr|0)|0}var Ui=64,gr=4194304;function vr(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Bs(h,d){var w=h.pendingLanes;if(w===0)return 0;var E=0,R=h.suspendedLanes,N=h.pingedLanes,ie=w&268435455;if(ie!==0){var me=ie&~R;me!==0?E=vr(me):(N&=ie,N!==0&&(E=vr(N)))}else ie=w&~R,ie!==0?E=vr(ie):N!==0&&(E=vr(N));if(E===0)return 0;if(d!==0&&d!==E&&!(d&R)&&(R=E&-E,N=d&-d,R>=N||R===16&&(N&4194240)!==0))return d;if(E&4&&(E|=w&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=E;0<d;)w=31-pr(d),R=1<<w,E|=h[w],d&=~R;return E}function wo(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(h,d){for(var w=h.suspendedLanes,E=h.pingedLanes,R=h.expirationTimes,N=h.pendingLanes;0<N;){var ie=31-pr(N),me=1<<ie,ze=R[ie];ze===-1?(!(me&w)||me&E)&&(R[ie]=wo(me,d)):ze<=d&&(h.expiredLanes|=me),N&=~me}}function $r(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Vs(h){for(var d=[],w=0;31>w;w++)d.push(h);return d}function Ur(h,d,w){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-pr(d),h[d]=w}function gs(h,d){var w=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<w;){var R=31-pr(w),N=1<<R;d[R]=0,E[R]=-1,h[R]=-1,w&=~N}}function yr(h,d){var w=h.entangledLanes|=d;for(h=h.entanglements;w;){var E=31-pr(w),R=1<<E;R&d|h[E]&d&&(h[E]|=d),w&=~R}}var Ht=0;function Go(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Gs=r.unstable_scheduleCallback,Et=r.unstable_cancelCallback,Ji=r.unstable_shouldYield,fn=r.unstable_requestPaint,bn=r.unstable_now,Hs=r.unstable_ImmediatePriority,za=r.unstable_UserBlockingPriority,yi=r.unstable_NormalPriority,es=r.unstable_IdlePriority,Ws=null,_i=null;function Nn(h){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Ws,h,void 0,(h.current.flags&128)===128)}catch{}}function vs(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var Qi=typeof Object.is=="function"?Object.is:vs,Ai=null,ys=!1,_r=!1;function Ho(h){Ai===null?Ai=[h]:Ai.push(h)}function Zl(h){ys=!0,Ho(h)}function Bi(){if(!_r&&Ai!==null){_r=!0;var h=0,d=Ht;try{var w=Ai;for(Ht=1;h<w.length;h++){var E=w[h];do E=E(!0);while(E!==null)}Ai=null,ys=!1}catch(R){throw Ai!==null&&(Ai=Ai.slice(h+1)),Gs(Hs,Bi),R}finally{Ht=d,_r=!1}}return null}var Vt=a.ReactCurrentBatchConfig;function Wo(h,d){if(Qi(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var w=Object.keys(h),E=Object.keys(d);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var R=w[E];if(!Fs.call(d,R)||!Qi(h[R],d[R]))return!1}return!0}function xi(h){switch(h.tag){case 5:return Fi(h.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return h=si(h.type,!1),h;case 11:return h=si(h.type.render,!1),h;case 1:return h=si(h.type,!0),h;default:return""}}function Kn(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var w in h)d[w]===void 0&&(d[w]=h[w]);return d}return d}var Jn=sn(null),Fa=null,xr=null,So=null;function jo(){So=xr=Fa=null}function uc(h,d,w){Ue?(qt(Jn,d._currentValue),d._currentValue=w):(qt(Jn,d._currentValue2),d._currentValue2=w)}function li(h){var d=Jn.current;Gt(Jn),Ue?h._currentValue=d:h._currentValue2=d}function wi(h,d,w){for(;h!==null;){var E=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),h===w)break;h=h.return}}function On(h,d){Fa=h,So=xr=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&(rs=!0),h.firstContext=null)}function on(h){var d=Ue?h._currentValue:h._currentValue2;if(So!==h)if(h={context:h,memoizedValue:d,next:null},xr===null){if(Fa===null)throw Error(o(308));xr=h,Fa.dependencies={lanes:0,firstContext:h}}else xr=xr.next=h;return d}var wr=null,js=!1;function _s(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function xs(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function ws(h,d){var w=h.updateQueue;w!==null&&(w=w.shared,ci!==null&&h.mode&1&&!(Kt&2)?(h=w.interleaved,h===null?(d.next=d,wr===null?wr=[w]:wr.push(w)):(d.next=h.next,h.next=d),w.interleaved=d):(h=w.pending,h===null?d.next=d:(d.next=h.next,h.next=d),w.pending=d))}function cc(h,d,w){if(d=d.updateQueue,d!==null&&(d=d.shared,(w&4194240)!==0)){var E=d.lanes;E&=h.pendingLanes,w|=E,d.lanes=w,yr(h,w)}}function Jf(h,d){var w=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var R=null,N=null;if(w=w.firstBaseUpdate,w!==null){do{var ie={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};N===null?R=N=ie:N=N.next=ie,w=w.next}while(w!==null);N===null?R=N=d:N=N.next=d}else R=N=d;w={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:N,shared:E.shared,effects:E.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=d:h.next=d,w.lastBaseUpdate=d}function Xl(h,d,w,E){var R=h.updateQueue;js=!1;var N=R.firstBaseUpdate,ie=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var ze=me,rt=ze.next;ze.next=null,ie===null?N=rt:ie.next=rt,ie=ze;var mt=h.alternate;mt!==null&&(mt=mt.updateQueue,me=mt.lastBaseUpdate,me!==ie&&(me===null?mt.firstBaseUpdate=rt:me.next=rt,mt.lastBaseUpdate=ze))}if(N!==null){var Nt=R.baseState;ie=0,mt=rt=ze=null,me=N;do{var St=me.lane,yn=me.eventTime;if((E&St)===St){mt!==null&&(mt=mt.next={eventTime:yn,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var xt=h,nr=me;switch(St=d,yn=w,nr.tag){case 1:if(xt=nr.payload,typeof xt=="function"){Nt=xt.call(yn,Nt,St);break e}Nt=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=nr.payload,St=typeof xt=="function"?xt.call(yn,Nt,St):xt,St==null)break e;Nt=s({},Nt,St);break e;case 2:js=!0}}me.callback!==null&&me.lane!==0&&(h.flags|=64,St=R.effects,St===null?R.effects=[me]:St.push(me))}else yn={eventTime:yn,lane:St,tag:me.tag,payload:me.payload,callback:me.callback,next:null},mt===null?(rt=mt=yn,ze=Nt):mt=mt.next=yn,ie|=St;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;St=me,me=St.next,St.next=null,R.lastBaseUpdate=St,R.shared.pending=null}}while(1);if(mt===null&&(ze=Nt),R.baseState=ze,R.firstBaseUpdate=rt,R.lastBaseUpdate=mt,d=R.shared.interleaved,d!==null){R=d;do ie|=R.lane,R=R.next;while(R!==d)}else N===null&&(R.shared.lanes=0);wc|=ie,h.lanes=ie,h.memoizedState=Nt}}function Hp(h,d,w){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var E=h[d],R=E.callback;if(R!==null){if(E.callback=null,E=w,typeof R!="function")throw Error(o(191,R));R.call(E)}}}var Wp=new i.Component().refs;function Yl(h,d,w,E){d=h.memoizedState,w=w(E,d),w=w==null?d:s({},d,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var fc={isMounted:function(h){return(h=h._reactInternals)?O(h)===h:!1},enqueueSetState:function(h,d,w){h=h._reactInternals;var E=Ar(),R=Qa(h),N=xs(E,R);N.payload=d,w!=null&&(N.callback=w),ws(h,N),d=Ts(h,R,E),d!==null&&cc(d,h,R)},enqueueReplaceState:function(h,d,w){h=h._reactInternals;var E=Ar(),R=Qa(h),N=xs(E,R);N.tag=1,N.payload=d,w!=null&&(N.callback=w),ws(h,N),d=Ts(h,R,E),d!==null&&cc(d,h,R)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var w=Ar(),E=Qa(h),R=xs(w,E);R.tag=2,d!=null&&(R.callback=d),ws(h,R),d=Ts(h,E,w),d!==null&&cc(d,h,E)}};function Qf(h,d,w,E,R,N,ie){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,N,ie):d.prototype&&d.prototype.isPureReactComponent?!Wo(w,E)||!Wo(R,N):!0}function $f(h,d,w){var E=!1,R=yt,N=d.contextType;return typeof N=="object"&&N!==null?N=on(N):(R=Wn(d)?ai:Lt.current,E=d.contextTypes,N=(E=E!=null)?vi(h,R):yt),d=new d(w,N),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=fc,h.stateNode=d,d._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=R,h.__reactInternalMemoizedMaskedChildContext=N),d}function ql(h,d,w,E){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(w,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(w,E),d.state!==h&&fc.enqueueReplaceState(d,d.state,null)}function Zs(h,d,w,E){var R=h.stateNode;R.props=w,R.state=h.memoizedState,R.refs=Wp,_s(h);var N=d.contextType;typeof N=="object"&&N!==null?R.context=on(N):(N=Wn(d)?ai:Lt.current,R.context=vi(h,N)),R.state=h.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(Yl(h,d,N,w),R.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(d=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),d!==R.state&&fc.enqueueReplaceState(R,R.state,null),Xl(h,w,R,E),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308)}var Ua=[],Ss=0,Vi=null,Kl=0,Sr=[],Br=0,Xs=null,ts=1,Ys="";function Zo(h,d){Ua[Ss++]=Kl,Ua[Ss++]=Vi,Vi=h,Kl=d}function eh(h,d,w){Sr[Br++]=ts,Sr[Br++]=Ys,Sr[Br++]=Xs,Xs=h;var E=ts;h=Ys;var R=32-pr(E)-1;E&=~(1<<R),w+=1;var N=32-pr(d)+R;if(30<N){var ie=R-R%5;N=(E&(1<<ie)-1).toString(32),E>>=ie,R-=ie,ts=1<<32-pr(d)+R|w<<R|E,Ys=N+h}else ts=1<<N|w<<R|E,Ys=h}function th(h){h.return!==null&&(Zo(h,1),eh(h,1,0))}function Mr(h){for(;h===Vi;)Vi=Ua[--Ss],Ua[Ss]=null,Kl=Ua[--Ss],Ua[Ss]=null;for(;h===Xs;)Xs=Sr[--Br],Sr[Br]=null,Ys=Sr[--Br],Sr[Br]=null,ts=Sr[--Br],Sr[Br]=null}var ui=null,br=null,en=!1,Jl=!1,Li=null;function jp(h,d){var w=Es(5,null,null,0);w.elementType="DELETED",w.stateNode=d,w.return=h,d=h.deletions,d===null?(h.deletions=[w],h.flags|=16):d.push(w)}function Ba(h,d){switch(h.tag){case 5:return d=Ut(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,ui=h,br=ge(d),!0):!1;case 6:return d=zi(d,h.pendingProps),d!==null?(h.stateNode=d,ui=h,br=null,!0):!1;case 13:if(d=mi(d),d!==null){var w=Xs!==null?{id:ts,overflow:Ys}:null;return h.memoizedState={dehydrated:d,treeContext:w,retryLane:1073741824},w=Es(18,null,null,0),w.stateNode=d,w.return=h,h.child=w,ui=h,br=null,!0}return!1;default:return!1}}function hc(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Va(h){if(en){var d=br;if(d){var w=d;if(!Ba(h,d)){if(hc(h))throw Error(o(418));d=Ee(w);var E=ui;d&&Ba(h,d)?jp(E,w):(h.flags=h.flags&-4097|2,en=!1,ui=h)}}else{if(hc(h))throw Error(o(418));h.flags=h.flags&-4097|2,en=!1,ui=h}}}function Zp(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ui=h}function Vr(h){if(!Se||h!==ui)return!1;if(!en)return Zp(h),en=!0,!1;if(h.tag!==3&&(h.tag!==5||gi(h.type)&&!Z(h.type,h.memoizedProps))){var d=br;if(d){if(hc(h)){for(h=br;h;)h=Ee(h);throw Error(o(418))}for(;d;)jp(h,d),d=Ee(d)}}if(Zp(h),h.tag===13){if(!Se)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));br=Zt(h)}else br=ui?Ee(h.stateNode):null;return!0}function qs(){Se&&(br=ui=null,Jl=en=!1)}function nh(h){Li===null?Li=[h]:Li.push(h)}function Xo(h,d,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var E=w.stateNode}if(!E)throw Error(o(147,h));var R=E,N=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===N?d.ref:(d=function(ie){var me=R.refs;me===Wp&&(me=R.refs={}),ie===null?delete me[N]:me[N]=ie},d._stringRef=N,d)}if(typeof h!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,h))}return h}function dc(h,d){throw h=Object.prototype.toString.call(d),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function Ms(h){var d=h._init;return d(h._payload)}function Xp(h){function d(be,ve){if(h){var Ie=be.deletions;Ie===null?(be.deletions=[ve],be.flags|=16):Ie.push(ve)}}function w(be,ve){if(!h)return null;for(;ve!==null;)d(be,ve),ve=ve.sibling;return null}function E(be,ve){for(be=new Map;ve!==null;)ve.key!==null?be.set(ve.key,ve):be.set(ve.index,ve),ve=ve.sibling;return be}function R(be,ve){return be=el(be,ve),be.index=0,be.sibling=null,be}function N(be,ve,Ie){return be.index=Ie,h?(Ie=be.alternate,Ie!==null?(Ie=Ie.index,Ie<ve?(be.flags|=2,ve):Ie):(be.flags|=2,ve)):(be.flags|=1048576,ve)}function ie(be){return h&&be.alternate===null&&(be.flags|=2),be}function me(be,ve,Ie,ft){return ve===null||ve.tag!==6?(ve=gy(Ie,be.mode,ft),ve.return=be,ve):(ve=R(ve,Ie),ve.return=be,ve)}function ze(be,ve,Ie,ft){var _t=Ie.type;return _t===f?mt(be,ve,Ie.props.children,ft,Ie.key):ve!==null&&(ve.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===b&&Ms(_t)===ve.type)?(ft=R(ve,Ie.props),ft.ref=Xo(be,ve,Ie),ft.return=be,ft):(ft=Sm(Ie.type,Ie.key,Ie.props,null,be.mode,ft),ft.ref=Xo(be,ve,Ie),ft.return=be,ft)}function rt(be,ve,Ie,ft){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ie.containerInfo||ve.stateNode.implementation!==Ie.implementation?(ve=vy(Ie,be.mode,ft),ve.return=be,ve):(ve=R(ve,Ie.children||[]),ve.return=be,ve)}function mt(be,ve,Ie,ft,_t){return ve===null||ve.tag!==7?(ve=uu(Ie,be.mode,ft,_t),ve.return=be,ve):(ve=R(ve,Ie),ve.return=be,ve)}function Nt(be,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=gy(""+ve,be.mode,Ie),ve.return=be,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case l:return Ie=Sm(ve.type,ve.key,ve.props,null,be.mode,Ie),Ie.ref=Xo(be,null,ve),Ie.return=be,Ie;case c:return ve=vy(ve,be.mode,Ie),ve.return=be,ve;case b:var ft=ve._init;return Nt(be,ft(ve._payload),Ie)}if(ae(ve)||I(ve))return ve=uu(ve,be.mode,Ie,null),ve.return=be,ve;dc(be,ve)}return null}function St(be,ve,Ie,ft){var _t=ve!==null?ve.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return _t!==null?null:me(be,ve,""+Ie,ft);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Ie.key===_t?ze(be,ve,Ie,ft):null;case c:return Ie.key===_t?rt(be,ve,Ie,ft):null;case b:return _t=Ie._init,St(be,ve,_t(Ie._payload),ft)}if(ae(Ie)||I(Ie))return _t!==null?null:mt(be,ve,Ie,ft,null);dc(be,Ie)}return null}function yn(be,ve,Ie,ft,_t){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return be=be.get(Ie)||null,me(ve,be,""+ft,_t);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case l:return be=be.get(ft.key===null?Ie:ft.key)||null,ze(ve,be,ft,_t);case c:return be=be.get(ft.key===null?Ie:ft.key)||null,rt(ve,be,ft,_t);case b:var Yt=ft._init;return yn(be,ve,Ie,Yt(ft._payload),_t)}if(ae(ft)||I(ft))return be=be.get(Ie)||null,mt(ve,be,ft,_t,null);dc(ve,ft)}return null}function xt(be,ve,Ie,ft){for(var _t=null,Yt=null,Ot=ve,an=ve=0,ki=null;Ot!==null&&an<Ie.length;an++){Ot.index>an?(ki=Ot,Ot=null):ki=Ot.sibling;var ln=St(be,Ot,Ie[an],ft);if(ln===null){Ot===null&&(Ot=ki);break}h&&Ot&&ln.alternate===null&&d(be,Ot),ve=N(ln,ve,an),Yt===null?_t=ln:Yt.sibling=ln,Yt=ln,Ot=ki}if(an===Ie.length)return w(be,Ot),en&&Zo(be,an),_t;if(Ot===null){for(;an<Ie.length;an++)Ot=Nt(be,Ie[an],ft),Ot!==null&&(ve=N(Ot,ve,an),Yt===null?_t=Ot:Yt.sibling=Ot,Yt=Ot);return en&&Zo(be,an),_t}for(Ot=E(be,Ot);an<Ie.length;an++)ki=yn(Ot,be,an,Ie[an],ft),ki!==null&&(h&&ki.alternate!==null&&Ot.delete(ki.key===null?an:ki.key),ve=N(ki,ve,an),Yt===null?_t=ki:Yt.sibling=ki,Yt=ki);return h&&Ot.forEach(function(tl){return d(be,tl)}),en&&Zo(be,an),_t}function nr(be,ve,Ie,ft){var _t=I(Ie);if(typeof _t!="function")throw Error(o(150));if(Ie=_t.call(Ie),Ie==null)throw Error(o(151));for(var Yt=_t=null,Ot=ve,an=ve=0,ki=null,ln=Ie.next();Ot!==null&&!ln.done;an++,ln=Ie.next()){Ot.index>an?(ki=Ot,Ot=null):ki=Ot.sibling;var tl=St(be,Ot,ln.value,ft);if(tl===null){Ot===null&&(Ot=ki);break}h&&Ot&&tl.alternate===null&&d(be,Ot),ve=N(tl,ve,an),Yt===null?_t=tl:Yt.sibling=tl,Yt=tl,Ot=ki}if(ln.done)return w(be,Ot),en&&Zo(be,an),_t;if(Ot===null){for(;!ln.done;an++,ln=Ie.next())ln=Nt(be,ln.value,ft),ln!==null&&(ve=N(ln,ve,an),Yt===null?_t=ln:Yt.sibling=ln,Yt=ln);return en&&Zo(be,an),_t}for(Ot=E(be,Ot);!ln.done;an++,ln=Ie.next())ln=yn(Ot,be,an,ln.value,ft),ln!==null&&(h&&ln.alternate!==null&&Ot.delete(ln.key===null?an:ln.key),ve=N(ln,ve,an),Yt===null?_t=ln:Yt.sibling=ln,Yt=ln);return h&&Ot.forEach(function(GI){return d(be,GI)}),en&&Zo(be,an),_t}function Ps(be,ve,Ie,ft){if(typeof Ie=="object"&&Ie!==null&&Ie.type===f&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:e:{for(var _t=Ie.key,Yt=ve;Yt!==null;){if(Yt.key===_t){if(_t=Ie.type,_t===f){if(Yt.tag===7){w(be,Yt.sibling),ve=R(Yt,Ie.props.children),ve.return=be,be=ve;break e}}else if(Yt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===b&&Ms(_t)===Yt.type){w(be,Yt.sibling),ve=R(Yt,Ie.props),ve.ref=Xo(be,Yt,Ie),ve.return=be,be=ve;break e}w(be,Yt);break}else d(be,Yt);Yt=Yt.sibling}Ie.type===f?(ve=uu(Ie.props.children,be.mode,ft,Ie.key),ve.return=be,be=ve):(ft=Sm(Ie.type,Ie.key,Ie.props,null,be.mode,ft),ft.ref=Xo(be,ve,Ie),ft.return=be,be=ft)}return ie(be);case c:e:{for(Yt=Ie.key;ve!==null;){if(ve.key===Yt)if(ve.tag===4&&ve.stateNode.containerInfo===Ie.containerInfo&&ve.stateNode.implementation===Ie.implementation){w(be,ve.sibling),ve=R(ve,Ie.children||[]),ve.return=be,be=ve;break e}else{w(be,ve);break}else d(be,ve);ve=ve.sibling}ve=vy(Ie,be.mode,ft),ve.return=be,be=ve}return ie(be);case b:return Yt=Ie._init,Ps(be,ve,Yt(Ie._payload),ft)}if(ae(Ie))return xt(be,ve,Ie,ft);if(I(Ie))return nr(be,ve,Ie,ft);dc(be,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ve!==null&&ve.tag===6?(w(be,ve.sibling),ve=R(ve,Ie),ve.return=be,be=ve):(w(be,ve),ve=gy(Ie,be.mode,ft),ve.return=be,be=ve),ie(be)):w(be,ve)}return Ps}var ns=Xp(!0),Yp=Xp(!1),Tr={},Gi=sn(Tr),Ga=sn(Tr),Mo=sn(Tr);function Er(h){if(h===Tr)throw Error(o(174));return h}function Ql(h,d){qt(Mo,d),qt(Ga,h),qt(Gi,Tr),h=ye(d),Gt(Gi),qt(Gi,h)}function Ks(){Gt(Gi),Gt(Ga),Gt(Mo)}function Yo(h){var d=Er(Mo.current),w=Er(Gi.current);d=F(w,h.type,d),w!==d&&(qt(Ga,h),qt(Gi,d))}function Ha(h){Ga.current===h&&(Gt(Gi),Gt(Ga))}var vn=sn(0);function $l(h){for(var d=h;d!==null;){if(d.tag===13){var w=d.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||$t(w)||Q(w)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ih=[];function Wa(){for(var h=0;h<ih.length;h++){var d=ih[h];Ue?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}ih.length=0}var pc=a.ReactCurrentDispatcher,Pr=a.ReactCurrentBatchConfig,ja=0,Ln=null,Ri=null,dn=null,qo=!1,eu=!1,bo=0,W0=0;function Si(){throw Error(o(321))}function rh(h,d){if(d===null)return!1;for(var w=0;w<d.length&&w<h.length;w++)if(!Qi(h[w],d[w]))return!1;return!0}function Ko(h,d,w,E,R,N){if(ja=N,Ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,pc.current=h===null||h.memoizedState===null?Tt:Xt,h=w(E,R),eu){N=0;do{if(eu=!1,bo=0,25<=N)throw Error(o(301));N+=1,dn=Ri=null,d.updateQueue=null,pc.current=Hi,h=w(E,R)}while(eu)}if(pc.current=lt,d=Ri!==null&&Ri.next!==null,ja=0,dn=Ri=Ln=null,qo=!1,d)throw Error(o(300));return h}function sh(){var h=bo!==0;return bo=0,h}function $i(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ln.memoizedState=dn=h:dn=dn.next=h,dn}function is(){if(Ri===null){var h=Ln.alternate;h=h!==null?h.memoizedState:null}else h=Ri.next;var d=dn===null?Ln.memoizedState:dn.next;if(d!==null)dn=d,Ri=h;else{if(h===null)throw Error(o(310));Ri=h,h={memoizedState:Ri.memoizedState,baseState:Ri.baseState,baseQueue:Ri.baseQueue,queue:Ri.queue,next:null},dn===null?Ln.memoizedState=dn=h:dn=dn.next=h}return dn}function To(h,d){return typeof d=="function"?d(h):d}function mc(h){var d=is(),w=d.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var E=Ri,R=E.baseQueue,N=w.pending;if(N!==null){if(R!==null){var ie=R.next;R.next=N.next,N.next=ie}E.baseQueue=R=N,w.pending=null}if(R!==null){N=R.next,E=E.baseState;var me=ie=null,ze=null,rt=N;do{var mt=rt.lane;if((ja&mt)===mt)ze!==null&&(ze=ze.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),E=rt.hasEagerState?rt.eagerState:h(E,rt.action);else{var Nt={lane:mt,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};ze===null?(me=ze=Nt,ie=E):ze=ze.next=Nt,Ln.lanes|=mt,wc|=mt}rt=rt.next}while(rt!==null&&rt!==N);ze===null?ie=E:ze.next=me,Qi(E,d.memoizedState)||(rs=!0),d.memoizedState=E,d.baseState=ie,d.baseQueue=ze,w.lastRenderedState=E}if(h=w.interleaved,h!==null){R=h;do N=R.lane,Ln.lanes|=N,wc|=N,R=R.next;while(R!==h)}else R===null&&(w.lanes=0);return[d.memoizedState,w.dispatch]}function Gr(h){var d=is(),w=d.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var E=w.dispatch,R=w.pending,N=d.memoizedState;if(R!==null){w.pending=null;var ie=R=R.next;do N=h(N,ie.action),ie=ie.next;while(ie!==R);Qi(N,d.memoizedState)||(rs=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),w.lastRenderedState=N}return[N,E]}function oh(){}function ah(h,d){var w=Ln,E=is(),R=d(),N=!Qi(E.memoizedState,R);if(N&&(E.memoizedState=R,rs=!0),E=E.queue,qa(tu.bind(null,w,E,h),[h]),E.getSnapshot!==d||N||dn!==null&&dn.memoizedState.tag&1){if(w.flags|=2048,Ya(9,qp.bind(null,w,E,R,d),void 0,null),ci===null)throw Error(o(349));ja&30||Za(w,d,R)}return R}function Za(h,d,w){h.flags|=16384,h={getSnapshot:d,value:w},d=Ln.updateQueue,d===null?(d={lastEffect:null,stores:null},Ln.updateQueue=d,d.stores=[h]):(w=d.stores,w===null?d.stores=[h]:w.push(h))}function qp(h,d,w,E){d.value=w,d.getSnapshot=E,Xa(d)&&Ts(h,1,-1)}function tu(h,d,w){return w(function(){Xa(d)&&Ts(h,1,-1)})}function Xa(h){var d=h.getSnapshot;h=h.value;try{var w=d();return!Qi(h,w)}catch{return!0}}function gc(h){var d=$i();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:h},d.queue=h,h=h.dispatch=V.bind(null,Ln,h),[d.memoizedState,h]}function Ya(h,d,w,E){return h={tag:h,create:d,destroy:w,deps:E,next:null},d=Ln.updateQueue,d===null?(d={lastEffect:null,stores:null},Ln.updateQueue=d,d.lastEffect=h.next=h):(w=d.lastEffect,w===null?d.lastEffect=h.next=h:(E=w.next,w.next=h,h.next=E,d.lastEffect=h)),h}function Kp(){return is().memoizedState}function nu(h,d,w,E){var R=$i();Ln.flags|=h,R.memoizedState=Ya(1|d,w,void 0,E===void 0?null:E)}function iu(h,d,w,E){var R=is();E=E===void 0?null:E;var N=void 0;if(Ri!==null){var ie=Ri.memoizedState;if(N=ie.destroy,E!==null&&rh(E,ie.deps)){R.memoizedState=Ya(d,w,N,E);return}}Ln.flags|=h,R.memoizedState=Ya(1|d,w,N,E)}function vc(h,d){return nu(8390656,8,h,d)}function qa(h,d){return iu(2048,8,h,d)}function lh(h,d){return iu(4,2,h,d)}function Jp(h,d){return iu(4,4,h,d)}function uh(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function ch(h,d,w){return w=w!=null?w.concat([h]):null,iu(4,4,uh.bind(null,d,h),w)}function fh(){}function u(h,d){var w=is();d=d===void 0?null:d;var E=w.memoizedState;return E!==null&&d!==null&&rh(d,E[1])?E[0]:(w.memoizedState=[h,d],h)}function g(h,d){var w=is();d=d===void 0?null:d;var E=w.memoizedState;return E!==null&&d!==null&&rh(d,E[1])?E[0]:(h=h(),w.memoizedState=[h,d],h)}function x(h,d){var w=Ht;Ht=w!==0&&4>w?w:4,h(!0);var E=Pr.transition;Pr.transition={};try{h(!1),d()}finally{Ht=w,Pr.transition=E}}function P(){return is().memoizedState}function D(h,d,w){var E=Qa(h);w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},le(h)?we(d,w):(Ce(h,d,w),w=Ar(),h=Ts(h,E,w),h!==null&&Ye(h,d,E))}function V(h,d,w){var E=Qa(h),R={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(le(h))we(d,R);else{Ce(h,d,R);var N=h.alternate;if(h.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var ie=d.lastRenderedState,me=N(ie,w);if(R.hasEagerState=!0,R.eagerState=me,Qi(me,ie))return}catch{}finally{}w=Ar(),h=Ts(h,E,w),h!==null&&Ye(h,d,E)}}function le(h){var d=h.alternate;return h===Ln||d!==null&&d===Ln}function we(h,d){eu=qo=!0;var w=h.pending;w===null?d.next=d:(d.next=w.next,w.next=d),h.pending=d}function Ce(h,d,w){ci!==null&&h.mode&1&&!(Kt&2)?(h=d.interleaved,h===null?(w.next=w,wr===null?wr=[d]:wr.push(d)):(w.next=h.next,h.next=w),d.interleaved=w):(h=d.pending,h===null?w.next=w:(w.next=h.next,h.next=w),d.pending=w)}function Ye(h,d,w){if(w&4194240){var E=d.lanes;E&=h.pendingLanes,w|=E,d.lanes=w,yr(h,w)}}var lt={readContext:on,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},Tt={readContext:on,useCallback:function(h,d){return $i().memoizedState=[h,d===void 0?null:d],h},useContext:on,useEffect:vc,useImperativeHandle:function(h,d,w){return w=w!=null?w.concat([h]):null,nu(4194308,4,uh.bind(null,d,h),w)},useLayoutEffect:function(h,d){return nu(4194308,4,h,d)},useInsertionEffect:function(h,d){return nu(4,2,h,d)},useMemo:function(h,d){var w=$i();return d=d===void 0?null:d,h=h(),w.memoizedState=[h,d],h},useReducer:function(h,d,w){var E=$i();return d=w!==void 0?w(d):d,E.memoizedState=E.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},E.queue=h,h=h.dispatch=D.bind(null,Ln,h),[E.memoizedState,h]},useRef:function(h){var d=$i();return h={current:h},d.memoizedState=h},useState:gc,useDebugValue:fh,useDeferredValue:function(h){var d=gc(h),w=d[0],E=d[1];return vc(function(){var R=Pr.transition;Pr.transition={};try{E(h)}finally{Pr.transition=R}},[h]),w},useTransition:function(){var h=gc(!1),d=h[0];return h=x.bind(null,h[1]),$i().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,w){var E=Ln,R=$i();if(en){if(w===void 0)throw Error(o(407));w=w()}else{if(w=d(),ci===null)throw Error(o(349));ja&30||Za(E,d,w)}R.memoizedState=w;var N={value:w,getSnapshot:d};return R.queue=N,vc(tu.bind(null,E,N,h),[h]),E.flags|=2048,Ya(9,qp.bind(null,E,N,w,d),void 0,null),w},useId:function(){var h=$i(),d=ci.identifierPrefix;if(en){var w=Ys,E=ts;w=(E&~(1<<32-pr(E)-1)).toString(32)+w,d=":"+d+"R"+w,w=bo++,0<w&&(d+="H"+w.toString(32)),d+=":"}else w=W0++,d=":"+d+"r"+w.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},Xt={readContext:on,useCallback:u,useContext:on,useEffect:qa,useImperativeHandle:ch,useInsertionEffect:lh,useLayoutEffect:Jp,useMemo:g,useReducer:mc,useRef:Kp,useState:function(){return mc(To)},useDebugValue:fh,useDeferredValue:function(h){var d=mc(To),w=d[0],E=d[1];return qa(function(){var R=Pr.transition;Pr.transition={};try{E(h)}finally{Pr.transition=R}},[h]),w},useTransition:function(){var h=mc(To)[0],d=is().memoizedState;return[h,d]},useMutableSource:oh,useSyncExternalStore:ah,useId:P,unstable_isNewReconciler:!1},Hi={readContext:on,useCallback:u,useContext:on,useEffect:qa,useImperativeHandle:ch,useInsertionEffect:lh,useLayoutEffect:Jp,useMemo:g,useReducer:Gr,useRef:Kp,useState:function(){return Gr(To)},useDebugValue:fh,useDeferredValue:function(h){var d=Gr(To),w=d[0],E=d[1];return qa(function(){var R=Pr.transition;Pr.transition={};try{E(h)}finally{Pr.transition=R}},[h]),w},useTransition:function(){var h=Gr(To)[0],d=is().memoizedState;return[h,d]},useMutableSource:oh,useSyncExternalStore:ah,useId:P,unstable_isNewReconciler:!1};function jn(h,d){try{var w="",E=d;do w+=xi(E),E=E.return;while(E);var R=w}catch(N){R=`
Error generating stack: `+N.message+`
`+N.stack}return{value:h,source:d,stack:R}}function er(h,d){try{console.error(d.value)}catch(w){setTimeout(function(){throw w})}}var tr=typeof WeakMap=="function"?WeakMap:Map;function Jo(h,d,w){w=xs(-1,w),w.tag=3,w.payload={element:null};var E=d.value;return w.callback=function(){mm||(mm=!0,uy=E),er(h,d)},w}function Qp(h,d,w){w=xs(-1,w),w.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var R=d.value;w.payload=function(){return E(R)},w.callback=function(){er(h,d)}}var N=h.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(w.callback=function(){er(h,d),typeof E!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var ie=d.stack;this.componentDidCatch(d.value,{componentStack:ie!==null?ie:""})}),w}function $p(h,d,w){var E=h.pingCache;if(E===null){E=h.pingCache=new tr;var R=new Set;E.set(d,R)}else R=E.get(d),R===void 0&&(R=new Set,E.set(d,R));R.has(w)||(R.add(w),h=DI.bind(null,h,d,w),d.then(h,h))}function em(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function hh(h,d,w,E,R){return h.mode&1?(h.flags|=65536,h.lanes=R,h):(h===d?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(d=xs(-1,1),d.tag=2,ws(w,d))),w.lanes|=1),h)}function bs(h){h.flags|=4}function dh(h,d){if(h!==null&&h.child===d.child)return!0;if(d.flags&16)return!1;for(h=d.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Tn,Eo,yc,_c;if(ke)Tn=function(h,d){for(var w=d.child;w!==null;){if(w.tag===5||w.tag===6)j(h,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Eo=function(){},yc=function(h,d,w,E,R){if(h=h.memoizedProps,h!==E){var N=d.stateNode,ie=Er(Gi.current);w=ee(N,w,h,E,R,ie),(d.updateQueue=w)&&bs(d)}},_c=function(h,d,w,E){w!==E&&bs(d)};else if(he){Tn=function(h,d,w,E){for(var R=d.child;R!==null;){if(R.tag===5){var N=R.stateNode;w&&E&&(N=Jt(N,R.type,R.memoizedProps,R)),j(h,N)}else if(R.tag===6)N=R.stateNode,w&&E&&(N=At(N,R.memoizedProps,R)),j(h,N);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)N=R.child,N!==null&&(N.return=R),Tn(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===d)break;for(;R.sibling===null;){if(R.return===null||R.return===d)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var tm=function(h,d,w,E){for(var R=d.child;R!==null;){if(R.tag===5){var N=R.stateNode;w&&E&&(N=Jt(N,R.type,R.memoizedProps,R)),Rt(h,N)}else if(R.tag===6)N=R.stateNode,w&&E&&(N=At(N,R.memoizedProps,R)),Rt(h,N);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)N=R.child,N!==null&&(N.return=R),tm(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===d)break;for(;R.sibling===null;){if(R.return===null||R.return===d)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};Eo=function(h,d){var w=d.stateNode;if(!dh(h,d)){h=w.containerInfo;var E=Ft(h);tm(E,d,!1,!1),w.pendingChildren=E,bs(d),Dt(h,E)}},yc=function(h,d,w,E,R){var N=h.stateNode,ie=h.memoizedProps;if((h=dh(h,d))&&ie===E)d.stateNode=N;else{var me=d.stateNode,ze=Er(Gi.current),rt=null;ie!==E&&(rt=ee(me,w,ie,E,R,ze)),h&&rt===null?d.stateNode=N:(N=ct(N,rt,w,ie,E,d,h,me),se(N,w,E,R,ze)&&bs(d),d.stateNode=N,h?bs(d):Tn(N,d,!1,!1))}},_c=function(h,d,w,E){w!==E?(h=Er(Mo.current),w=Er(Gi.current),d.stateNode=ue(E,h,w,d),bs(d)):d.stateNode=h.stateNode}}else Eo=function(){},yc=function(){},_c=function(){};function Qo(h,d){if(!en)switch(h.tailMode){case"hidden":d=h.tail;for(var w=null;d!==null;)d.alternate!==null&&(w=d),d=d.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function Mi(h){var d=h.alternate!==null&&h.alternate.child===h.child,w=0,E=0;if(d)for(var R=h.child;R!==null;)w|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=h,R=R.sibling;else for(R=h.child;R!==null;)w|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=h,R=R.sibling;return h.subtreeFlags|=E,h.childLanes=w,d}function j0(h,d,w){var E=d.pendingProps;switch(Mr(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(d),null;case 1:return Wn(d.type)&&wt(),Mi(d),null;case 3:return E=d.stateNode,Ks(),Gt(Cn),Gt(Lt),Wa(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(Vr(d)?bs(d):h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Li!==null&&(hy(Li),Li=null))),Eo(h,d),Mi(d),null;case 5:Ha(d),w=Er(Mo.current);var R=d.type;if(h!==null&&d.stateNode!=null)yc(h,d,R,E,w),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(o(166));return Mi(d),null}if(h=Er(Gi.current),Vr(d)){if(!Se)throw Error(o(175));h=vt(d.stateNode,d.type,d.memoizedProps,w,h,d,!Jl),d.updateQueue=h,h!==null&&bs(d)}else{var N=W(R,E,w,h,d);Tn(N,d,!1,!1),d.stateNode=N,se(N,R,E,w,h)&&bs(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Mi(d),null;case 6:if(h&&d.stateNode!=null)_c(h,d,h.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(o(166));if(h=Er(Mo.current),w=Er(Gi.current),Vr(d)){if(!Se)throw Error(o(176));if(h=d.stateNode,E=d.memoizedProps,(w=bt(h,E,d,!Jl))&&(R=ui,R!==null))switch(N=(R.mode&1)!==0,R.tag){case 3:dr(R.stateNode.containerInfo,h,E,N);break;case 5:cn(R.type,R.memoizedProps,R.stateNode,h,E,N)}w&&bs(d)}else d.stateNode=ue(E,h,w,d)}return Mi(d),null;case 13:if(Gt(vn),E=d.memoizedState,en&&br!==null&&d.mode&1&&!(d.flags&128)){for(h=br;h;)h=Ee(h);return qs(),d.flags|=98560,d}if(E!==null&&E.dehydrated!==null){if(E=Vr(d),h===null){if(!E)throw Error(o(318));if(!Se)throw Error(o(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ct(h,d)}else qs(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Mi(d),null}return Li!==null&&(hy(Li),Li=null),d.flags&128?(d.lanes=w,d):(E=E!==null,w=!1,h===null?Vr(d):w=h.memoizedState!==null,E&&!w&&(d.child.flags|=8192,d.mode&1&&(h===null||vn.current&1?bi===0&&(bi=3):py())),d.updateQueue!==null&&(d.flags|=4),Mi(d),null);case 4:return Ks(),Eo(h,d),h===null&&Ne(d.stateNode.containerInfo),Mi(d),null;case 10:return li(d.type._context),Mi(d),null;case 17:return Wn(d.type)&&wt(),Mi(d),null;case 19:if(Gt(vn),R=d.memoizedState,R===null)return Mi(d),null;if(E=(d.flags&128)!==0,N=R.rendering,N===null)if(E)Qo(R,!1);else{if(bi!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(N=$l(h),N!==null){for(d.flags|=128,Qo(R,!1),h=N.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=w,E=d.child;E!==null;)w=E,R=h,w.flags&=14680066,N=w.alternate,N===null?(w.childLanes=0,w.lanes=R,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=N.childLanes,w.lanes=N.lanes,w.child=N.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=N.memoizedProps,w.memoizedState=N.memoizedState,w.updateQueue=N.updateQueue,w.type=N.type,R=N.dependencies,w.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E=E.sibling;return qt(vn,vn.current&1|2),d.child}h=h.sibling}R.tail!==null&&bn()>ly&&(d.flags|=128,E=!0,Qo(R,!1),d.lanes=4194304)}else{if(!E)if(h=$l(N),h!==null){if(d.flags|=128,E=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),Qo(R,!0),R.tail===null&&R.tailMode==="hidden"&&!N.alternate&&!en)return Mi(d),null}else 2*bn()-R.renderingStartTime>ly&&w!==1073741824&&(d.flags|=128,E=!0,Qo(R,!1),d.lanes=4194304);R.isBackwards?(N.sibling=d.child,d.child=N):(h=R.last,h!==null?h.sibling=N:d.child=N,R.last=N)}return R.tail!==null?(d=R.tail,R.rendering=d,R.tail=d.sibling,R.renderingStartTime=bn(),d.sibling=null,h=vn.current,qt(vn,E?h&1|2:h&1),d):(Mi(d),null);case 22:case 23:return dy(),E=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(d.flags|=8192),E&&d.mode&1?ss&1073741824&&(Mi(d),ke&&d.subtreeFlags&6&&(d.flags|=8192)):Mi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var SI=a.ReactCurrentOwner,rs=!1;function Cr(h,d,w,E){d.child=h===null?Yp(d,null,w,E):ns(d,h.child,w,E)}function _M(h,d,w,E,R){w=w.render;var N=d.ref;return On(d,R),E=Ko(h,d,w,E,N,R),w=sh(),h!==null&&!rs?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~R,$o(h,d,R)):(en&&w&&th(d),d.flags|=1,Cr(h,d,E,R),d.child)}function xM(h,d,w,E,R){if(h===null){var N=w.type;return typeof N=="function"&&!my(N)&&N.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(d.tag=15,d.type=N,wM(h,d,N,E,R)):(h=Sm(w.type,null,E,d,d.mode,R),h.ref=d.ref,h.return=d,d.child=h)}if(N=h.child,!(h.lanes&R)){var ie=N.memoizedProps;if(w=w.compare,w=w!==null?w:Wo,w(ie,E)&&h.ref===d.ref)return $o(h,d,R)}return d.flags|=1,h=el(N,E),h.ref=d.ref,h.return=d,d.child=h}function wM(h,d,w,E,R){if(h!==null&&Wo(h.memoizedProps,E)&&h.ref===d.ref)if(rs=!1,(h.lanes&R)!==0)h.flags&131072&&(rs=!0);else return d.lanes=h.lanes,$o(h,d,R);return Z0(h,d,w,E,R)}function SM(h,d,w){var E=d.pendingProps,R=E.children,N=h!==null?h.memoizedState:null;if(E.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},qt(xc,ss),ss|=w;else if(w&1073741824)d.memoizedState={baseLanes:0,cachePool:null},E=N!==null?N.baseLanes:w,qt(xc,ss),ss|=E;else return h=N!==null?N.baseLanes|w:w,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,qt(xc,ss),ss|=h,null;else N!==null?(E=N.baseLanes|w,d.memoizedState=null):E=w,qt(xc,ss),ss|=E;return Cr(h,d,R,w),d.child}function MM(h,d){var w=d.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(d.flags|=512,d.flags|=2097152)}function Z0(h,d,w,E,R){var N=Wn(w)?ai:Lt.current;return N=vi(d,N),On(d,R),w=Ko(h,d,w,E,N,R),E=sh(),h!==null&&!rs?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~R,$o(h,d,R)):(en&&E&&th(d),d.flags|=1,Cr(h,d,w,R),d.child)}function bM(h,d,w,E,R){if(Wn(w)){var N=!0;Qr(d)}else N=!1;if(On(d,R),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),$f(d,w,E),Zs(d,w,E,R),E=!0;else if(h===null){var ie=d.stateNode,me=d.memoizedProps;ie.props=me;var ze=ie.context,rt=w.contextType;typeof rt=="object"&&rt!==null?rt=on(rt):(rt=Wn(w)?ai:Lt.current,rt=vi(d,rt));var mt=w.getDerivedStateFromProps,Nt=typeof mt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Nt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==E||ze!==rt)&&ql(d,ie,E,rt),js=!1;var St=d.memoizedState;ie.state=St,Xl(d,E,ie,R),ze=d.memoizedState,me!==E||St!==ze||Cn.current||js?(typeof mt=="function"&&(Yl(d,w,mt,E),ze=d.memoizedState),(me=js||Qf(d,w,me,E,St,ze,rt))?(Nt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(d.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=ze),ie.props=E,ie.state=ze,ie.context=rt,E=me):(typeof ie.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{ie=d.stateNode,Kf(h,d),me=d.memoizedProps,rt=d.type===d.elementType?me:Kn(d.type,me),ie.props=rt,Nt=d.pendingProps,St=ie.context,ze=w.contextType,typeof ze=="object"&&ze!==null?ze=on(ze):(ze=Wn(w)?ai:Lt.current,ze=vi(d,ze));var yn=w.getDerivedStateFromProps;(mt=typeof yn=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==Nt||St!==ze)&&ql(d,ie,E,ze),js=!1,St=d.memoizedState,ie.state=St,Xl(d,E,ie,R);var xt=d.memoizedState;me!==Nt||St!==xt||Cn.current||js?(typeof yn=="function"&&(Yl(d,w,yn,E),xt=d.memoizedState),(rt=js||Qf(d,w,rt,E,St,xt,ze)||!1)?(mt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(E,xt,ze),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(E,xt,ze)),typeof ie.componentDidUpdate=="function"&&(d.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof ie.componentDidUpdate!="function"||me===h.memoizedProps&&St===h.memoizedState||(d.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===h.memoizedProps&&St===h.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=xt),ie.props=E,ie.state=xt,ie.context=ze,E=rt):(typeof ie.componentDidUpdate!="function"||me===h.memoizedProps&&St===h.memoizedState||(d.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===h.memoizedProps&&St===h.memoizedState||(d.flags|=1024),E=!1)}return X0(h,d,w,E,N,R)}function X0(h,d,w,E,R,N){MM(h,d);var ie=(d.flags&128)!==0;if(!E&&!ie)return R&&Mn(d,w,!1),$o(h,d,N);E=d.stateNode,SI.current=d;var me=ie&&typeof w.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,h!==null&&ie?(d.child=ns(d,h.child,null,N),d.child=ns(d,null,me,N)):Cr(h,d,me,N),d.memoizedState=E.state,R&&Mn(d,w,!0),d.child}function TM(h){var d=h.stateNode;d.pendingContext?mn(h,d.pendingContext,d.pendingContext!==d.context):d.context&&mn(h,d.context,!1),Ql(h,d.containerInfo)}function EM(h,d,w,E,R){return qs(),nh(R),d.flags|=256,Cr(h,d,w,E),d.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function im(h){return{baseLanes:h,cachePool:null}}function PM(h,d,w){var E=d.pendingProps,R=vn.current,N=!1,ie=(d.flags&128)!==0,me;if((me=ie)||(me=h!==null&&h.memoizedState===null?!1:(R&2)!==0),me?(N=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(R|=1),qt(vn,R&1),h===null)return Va(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?Q(h)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(R=E.children,h=E.fallback,N?(E=d.mode,N=d.child,R={mode:"hidden",children:R},!(E&1)&&N!==null?(N.childLanes=0,N.pendingProps=R):N=Mm(R,E,0,null),h=uu(h,E,w,null),N.return=d,h.return=d,N.sibling=h,d.child=N,d.child.memoizedState=im(w),d.memoizedState=nm,h):Y0(d,R));if(R=h.memoizedState,R!==null){if(me=R.dehydrated,me!==null){if(ie)return d.flags&256?(d.flags&=-257,rm(h,d,w,Error(o(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(N=E.fallback,R=d.mode,E=Mm({mode:"visible",children:E.children},R,0,null),N=uu(N,R,w,null),N.flags|=2,E.return=d,N.return=d,E.sibling=N,d.child=E,d.mode&1&&ns(d,h.child,null,w),d.child.memoizedState=im(w),d.memoizedState=nm,N);if(!(d.mode&1))d=rm(h,d,w,null);else if(Q(me))d=rm(h,d,w,Error(o(419)));else if(E=(w&h.childLanes)!==0,rs||E){if(E=ci,E!==null){switch(w&-w){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}E=N&(E.suspendedLanes|w)?0:N,E!==0&&E!==R.retryLane&&(R.retryLane=E,Ts(h,E,-1))}py(),d=rm(h,d,w,Error(o(421)))}else $t(me)?(d.flags|=128,d.child=h.child,d=NI.bind(null,h),fe(me,d),d=null):(w=R.treeContext,Se&&(br=pt(me),ui=d,en=!0,Li=null,Jl=!1,w!==null&&(Sr[Br++]=ts,Sr[Br++]=Ys,Sr[Br++]=Xs,ts=w.id,Ys=w.overflow,Xs=d)),d=Y0(d,d.pendingProps.children),d.flags|=4096);return d}return N?(E=AM(h,d,E.children,E.fallback,w),N=d.child,R=h.child.memoizedState,N.memoizedState=R===null?im(w):{baseLanes:R.baseLanes|w,cachePool:null},N.childLanes=h.childLanes&~w,d.memoizedState=nm,E):(w=CM(h,d,E.children,w),d.memoizedState=null,w)}return N?(E=AM(h,d,E.children,E.fallback,w),N=d.child,R=h.child.memoizedState,N.memoizedState=R===null?im(w):{baseLanes:R.baseLanes|w,cachePool:null},N.childLanes=h.childLanes&~w,d.memoizedState=nm,E):(w=CM(h,d,E.children,w),d.memoizedState=null,w)}function Y0(h,d){return d=Mm({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function CM(h,d,w,E){var R=h.child;return h=R.sibling,w=el(R,{mode:"visible",children:w}),!(d.mode&1)&&(w.lanes=E),w.return=d,w.sibling=null,h!==null&&(E=d.deletions,E===null?(d.deletions=[h],d.flags|=16):E.push(h)),d.child=w}function AM(h,d,w,E,R){var N=d.mode;h=h.child;var ie=h.sibling,me={mode:"hidden",children:w};return!(N&1)&&d.child!==h?(w=d.child,w.childLanes=0,w.pendingProps=me,d.deletions=null):(w=el(h,me),w.subtreeFlags=h.subtreeFlags&14680064),ie!==null?E=el(ie,E):(E=uu(E,N,R,null),E.flags|=2),E.return=d,w.return=d,w.sibling=E,d.child=w,E}function rm(h,d,w,E){return E!==null&&nh(E),ns(d,h.child,null,w),h=Y0(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function LM(h,d,w){h.lanes|=d;var E=h.alternate;E!==null&&(E.lanes|=d),wi(h.return,d,w)}function q0(h,d,w,E,R){var N=h.memoizedState;N===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:R}:(N.isBackwards=d,N.rendering=null,N.renderingStartTime=0,N.last=E,N.tail=w,N.tailMode=R)}function RM(h,d,w){var E=d.pendingProps,R=E.revealOrder,N=E.tail;if(Cr(h,d,E.children,w),E=vn.current,E&2)E=E&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&LM(h,w,d);else if(h.tag===19)LM(h,w,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(qt(vn,E),!(d.mode&1))d.memoizedState=null;else switch(R){case"forwards":for(w=d.child,R=null;w!==null;)h=w.alternate,h!==null&&$l(h)===null&&(R=w),w=w.sibling;w=R,w===null?(R=d.child,d.child=null):(R=w.sibling,w.sibling=null),q0(d,!1,R,w,N);break;case"backwards":for(w=null,R=d.child,d.child=null;R!==null;){if(h=R.alternate,h!==null&&$l(h)===null){d.child=R;break}h=R.sibling,R.sibling=w,w=R,R=h}q0(d,!0,w,null,N);break;case"together":q0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function $o(h,d,w){if(h!==null&&(d.dependencies=h.dependencies),wc|=d.lanes,!(w&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(o(153));if(d.child!==null){for(h=d.child,w=el(h,h.pendingProps),d.child=w,w.return=d;h.sibling!==null;)h=h.sibling,w=w.sibling=el(h,h.pendingProps),w.return=d;w.sibling=null}return d.child}function MI(h,d,w){switch(d.tag){case 3:TM(d),qs();break;case 5:Yo(d);break;case 1:Wn(d.type)&&Qr(d);break;case 4:Ql(d,d.stateNode.containerInfo);break;case 10:uc(d,d.type._context,d.memoizedProps.value);break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(qt(vn,vn.current&1),d.flags|=128,null):w&d.child.childLanes?PM(h,d,w):(qt(vn,vn.current&1),h=$o(h,d,w),h!==null?h.sibling:null);qt(vn,vn.current&1);break;case 19:if(E=(w&d.childLanes)!==0,h.flags&128){if(E)return RM(h,d,w);d.flags|=128}var R=d.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),qt(vn,vn.current),E)break;return null;case 22:case 23:return d.lanes=0,SM(h,d,w)}return $o(h,d,w)}function bI(h,d){switch(Mr(d),d.tag){case 1:return Wn(d.type)&&wt(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Ks(),Gt(Cn),Gt(Lt),Wa(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return Ha(d),null;case 13:if(Gt(vn),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(o(340));qs()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return Gt(vn),null;case 4:return Ks(),null;case 10:return li(d.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var sm=!1,ru=!1,TI=typeof WeakSet=="function"?WeakSet:Set,ut=null;function om(h,d){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){jr(h,d,E)}else w.current=null}function K0(h,d,w){try{w()}catch(E){jr(h,d,E)}}var kM=!1;function EI(h,d){for(X(h.containerInfo),ut=d;ut!==null;)if(h=ut,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,ut=d;else for(;ut!==null;){h=ut;try{var w=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,R=w.memoizedState,N=h.stateNode,ie=N.getSnapshotBeforeUpdate(h.elementType===h.type?E:Kn(h.type,E),R);N.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:ke&&nt(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){jr(h,h.return,me)}if(d=h.sibling,d!==null){d.return=h.return,ut=d;break}ut=h.return}return w=kM,kM=!1,w}function su(h,d,w){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&h)===h){var N=R.destroy;R.destroy=void 0,N!==void 0&&K0(d,w,N)}R=R.next}while(R!==E)}}function ph(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var w=d=d.next;do{if((w.tag&h)===h){var E=w.create;w.destroy=E()}w=w.next}while(w!==d)}}function J0(h){var d=h.ref;if(d!==null){var w=h.stateNode;switch(h.tag){case 5:h=ce(w);break;default:h=w}typeof d=="function"?d(h):d.current=h}}function IM(h,d,w){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Ws,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var R=E,N=R.destroy;R=R.tag,N!==void 0&&(R&2||R&4)&&K0(d,w,N),E=E.next}while(E!==h)}break;case 1:if(om(d,w),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(ie){jr(d,w,ie)}break;case 5:om(d,w);break;case 4:ke?UM(h,d,w):he&&he&&(d=d.stateNode.containerInfo,w=Ft(d),kt(d,w))}}function DM(h,d,w){for(var E=d;;)if(IM(h,E,w),E.child===null||ke&&E.tag===4){if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function NM(h){var d=h.alternate;d!==null&&(h.alternate=null,NM(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&Ke(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function OM(h){return h.tag===5||h.tag===3||h.tag===4}function zM(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||OM(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function FM(h){if(ke){e:{for(var d=h.return;d!==null;){if(OM(d))break e;d=d.return}throw Error(o(160))}var w=d;switch(w.tag){case 5:d=w.stateNode,w.flags&32&&(Le(d),w.flags&=-33),w=zM(h),$0(h,w,d);break;case 3:case 4:d=w.stateNode.containerInfo,w=zM(h),Q0(h,w,d);break;default:throw Error(o(161))}}}function Q0(h,d,w){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?Qe(w,h,d):We(w,h);else if(E!==4&&(h=h.child,h!==null))for(Q0(h,d,w),h=h.sibling;h!==null;)Q0(h,d,w),h=h.sibling}function $0(h,d,w){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?ot(w,h,d):He(w,h);else if(E!==4&&(h=h.child,h!==null))for($0(h,d,w),h=h.sibling;h!==null;)$0(h,d,w),h=h.sibling}function UM(h,d,w){for(var E=d,R=!1,N,ie;;){if(!R){R=E.return;e:for(;;){if(R===null)throw Error(o(160));switch(N=R.stateNode,R.tag){case 5:ie=!1;break e;case 3:N=N.containerInfo,ie=!0;break e;case 4:N=N.containerInfo,ie=!0;break e}R=R.return}R=!0}if(E.tag===5||E.tag===6)DM(h,E,w),ie?oe(N,E.stateNode):Ze(N,E.stateNode);else if(E.tag===18)ie?ri(N,E.stateNode):wn(N,E.stateNode);else if(E.tag===4){if(E.child!==null){N=E.stateNode.containerInfo,ie=!0,E.child.return=E,E=E.child;continue}}else if(IM(h,E,w),E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return,E.tag===4&&(R=!1)}E.sibling.return=E.return,E=E.sibling}}function ey(h,d){if(ke){switch(d.tag){case 0:case 11:case 14:case 15:su(3,d,d.return),ph(3,d),su(5,d,d.return);return;case 1:return;case 5:var w=d.stateNode;if(w!=null){var E=d.memoizedProps;h=h!==null?h.memoizedProps:E;var R=d.type,N=d.updateQueue;d.updateQueue=null,N!==null&&qe(w,N,R,h,E,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));w=d.memoizedProps,Te(d.stateNode,h!==null?h.memoizedProps:w,w);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&It(d.stateNode.containerInfo);return;case 12:return;case 13:am(d);return;case 19:am(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:su(3,d,d.return),ph(3,d),su(5,d,d.return);return;case 12:return;case 13:am(d);return;case 19:am(d);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&It(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,kt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function am(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new TI),d.forEach(function(E){var R=OI.bind(null,h,E);w.has(E)||(w.add(E),E.then(R,R))})}}function PI(h,d){for(ut=d;ut!==null;){d=ut;var w=d.deletions;if(w!==null)for(var E=0;E<w.length;E++){var R=w[E];try{var N=h;ke?UM(N,R,d):DM(N,R,d);var ie=R.alternate;ie!==null&&(ie.return=null),R.return=null}catch(_t){jr(R,d,_t)}}if(w=d.child,d.subtreeFlags&12854&&w!==null)w.return=d,ut=w;else for(;ut!==null;){d=ut;try{var me=d.flags;if(me&32&&ke&&Le(d.stateNode),me&512){var ze=d.alternate;if(ze!==null){var rt=ze.ref;rt!==null&&(typeof rt=="function"?rt(null):rt.current=null)}}if(me&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var mt=d.alternate;(mt===null||mt.memoizedState===null)&&(ay=bn())}break;case 22:var Nt=d.memoizedState!==null,St=d.alternate,yn=St!==null&&St.memoizedState!==null;if(w=d,ke){e:if(E=w,R=Nt,N=null,ke)for(var xt=E;;){if(xt.tag===5){if(N===null){N=xt;var nr=xt.stateNode;R?tt(nr):xe(xt.stateNode,xt.memoizedProps)}}else if(xt.tag===6){if(N===null){var Ps=xt.stateNode;R?re(Ps):Be(Ps,xt.memoizedProps)}}else if((xt.tag!==22&&xt.tag!==23||xt.memoizedState===null||xt===E)&&xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===E)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===E)break e;N===xt&&(N=null),xt=xt.return}N===xt&&(N=null),xt.sibling.return=xt.return,xt=xt.sibling}}if(Nt&&!yn&&w.mode&1){ut=w;for(var be=w.child;be!==null;){for(w=ut=be;ut!==null;){E=ut;var ve=E.child;switch(E.tag){case 0:case 11:case 14:case 15:su(4,E,E.return);break;case 1:om(E,E.return);var Ie=E.stateNode;if(typeof Ie.componentWillUnmount=="function"){var ft=E.return;try{Ie.props=E.memoizedProps,Ie.state=E.memoizedState,Ie.componentWillUnmount()}catch(_t){jr(E,ft,_t)}}break;case 5:om(E,E.return);break;case 22:if(E.memoizedState!==null){GM(w);continue}}ve!==null?(ve.return=E,ut=ve):GM(w)}be=be.sibling}}}switch(me&4102){case 2:FM(d),d.flags&=-3;break;case 6:FM(d),d.flags&=-3,ey(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,ey(d.alternate,d);break;case 4:ey(d.alternate,d)}}catch(_t){jr(d,d.return,_t)}if(w=d.sibling,w!==null){w.return=d.return,ut=w;break}ut=d.return}}}function CI(h,d,w){ut=h,BM(h)}function BM(h,d,w){for(var E=(h.mode&1)!==0;ut!==null;){var R=ut,N=R.child;if(R.tag===22&&E){var ie=R.memoizedState!==null||sm;if(!ie){var me=R.alternate,ze=me!==null&&me.memoizedState!==null||ru;me=sm;var rt=ru;if(sm=ie,(ru=ze)&&!rt)for(ut=R;ut!==null;)ie=ut,ze=ie.child,ie.tag===22&&ie.memoizedState!==null?HM(R):ze!==null?(ze.return=ie,ut=ze):HM(R);for(;N!==null;)ut=N,BM(N),N=N.sibling;ut=R,sm=me,ru=rt}VM(h)}else R.subtreeFlags&8772&&N!==null?(N.return=R,ut=N):VM(h)}}function VM(h){for(;ut!==null;){var d=ut;if(d.flags&8772){var w=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ru||ph(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!ru)if(w===null)E.componentDidMount();else{var R=d.elementType===d.type?w.memoizedProps:Kn(d.type,w.memoizedProps);E.componentDidUpdate(R,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var N=d.updateQueue;N!==null&&Hp(d,N,E);break;case 3:var ie=d.updateQueue;if(ie!==null){if(w=null,d.child!==null)switch(d.child.tag){case 5:w=ce(d.child.stateNode);break;case 1:w=d.child.stateNode}Hp(d,ie,w)}break;case 5:var me=d.stateNode;w===null&&d.flags&4&&st(me,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&d.memoizedState===null){var ze=d.alternate;if(ze!==null){var rt=ze.memoizedState;if(rt!==null){var mt=rt.dehydrated;mt!==null&&Bt(mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ru||d.flags&512&&J0(d)}catch(Nt){jr(d,d.return,Nt)}}if(d===h){ut=null;break}if(w=d.sibling,w!==null){w.return=d.return,ut=w;break}ut=d.return}}function GM(h){for(;ut!==null;){var d=ut;if(d===h){ut=null;break}var w=d.sibling;if(w!==null){w.return=d.return,ut=w;break}ut=d.return}}function HM(h){for(;ut!==null;){var d=ut;try{switch(d.tag){case 0:case 11:case 15:var w=d.return;try{ph(4,d)}catch(ze){jr(d,w,ze)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var R=d.return;try{E.componentDidMount()}catch(ze){jr(d,R,ze)}}var N=d.return;try{J0(d)}catch(ze){jr(d,N,ze)}break;case 5:var ie=d.return;try{J0(d)}catch(ze){jr(d,ie,ze)}}}catch(ze){jr(d,d.return,ze)}if(d===h){ut=null;break}var me=d.sibling;if(me!==null){me.return=d.return,ut=me;break}ut=d.return}}var lm=0,um=1,cm=2,fm=3,hm=4;if(typeof Symbol=="function"&&Symbol.for){var mh=Symbol.for;lm=mh("selector.component"),um=mh("selector.has_pseudo_class"),cm=mh("selector.role"),fm=mh("selector.test_id"),hm=mh("selector.text")}function ty(h){var d=Fe(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(h=Oe(h),h===null)throw Error(o(362));return h.stateNode.current}function ny(h,d){switch(d.$$typeof){case lm:if(h.type===d.value)return!0;break;case um:e:{d=d.value,h=[h,0];for(var w=0;w<h.length;){var E=h[w++],R=h[w++],N=d[R];if(E.tag!==5||!pe(E)){for(;N!=null&&ny(E,N);)R++,N=d[R];if(R===d.length){d=!0;break e}else for(E=E.child;E!==null;)h.push(E,R),E=E.sibling}}d=!1}return d;case cm:if(h.tag===5&&Me(h.stateNode,d.value))return!0;break;case hm:if((h.tag===5||h.tag===6)&&(h=B(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case fm:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function iy(h){switch(h.$$typeof){case lm:return"<"+(z(h.value)||"Unknown")+">";case um:return":has("+(iy(h)||"")+")";case cm:return'[role="'+h.value+'"]';case hm:return'"'+h.value+'"';case fm:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function WM(h,d){var w=[];h=[h,0];for(var E=0;E<h.length;){var R=h[E++],N=h[E++],ie=d[N];if(R.tag!==5||!pe(R)){for(;ie!=null&&ny(R,ie);)N++,ie=d[N];if(N===d.length)w.push(R);else for(R=R.child;R!==null;)h.push(R,N),R=R.sibling}}return w}function ry(h,d){if(!Je)throw Error(o(363));h=ty(h),h=WM(h,d),d=[],h=Array.from(h);for(var w=0;w<h.length;){var E=h[w++];if(E.tag===5)pe(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return d}var AI=Math.ceil,dm=a.ReactCurrentDispatcher,sy=a.ReactCurrentOwner,Qn=a.ReactCurrentBatchConfig,Kt=0,ci=null,fi=null,Wi=0,ss=0,xc=sn(0),bi=0,gh=null,wc=0,pm=0,oy=0,vh=null,Hr=null,ay=0,ly=1/0;function Sc(){ly=bn()+500}var mm=!1,uy=null,Ka=null,gm=!1,Ja=null,vm=0,yh=0,cy=null,ym=-1,_m=0;function Ar(){return Kt&6?bn():ym!==-1?ym:ym=bn()}function Qa(h){return h.mode&1?Kt&2&&Wi!==0?Wi&-Wi:Vt.transition!==null?(_m===0&&(h=Ui,Ui<<=1,!(Ui&4194240)&&(Ui=64),_m=h),_m):(h=Ht,h!==0?h:De()):1}function Ts(h,d,w){if(50<yh)throw yh=0,cy=null,Error(o(185));var E=xm(h,d);return E===null?null:(Ur(E,d,w),(!(Kt&2)||E!==ci)&&(E===ci&&(!(Kt&2)&&(pm|=d),bi===4&&$a(E,Wi)),Wr(E,w),d===1&&Kt===0&&!(h.mode&1)&&(Sc(),ys&&Bi())),E)}function xm(h,d){h.lanes|=d;var w=h.alternate;for(w!==null&&(w.lanes|=d),w=h,h=h.return;h!==null;)h.childLanes|=d,w=h.alternate,w!==null&&(w.childLanes|=d),w=h,h=h.return;return w.tag===3?w.stateNode:null}function Wr(h,d){var w=h.callbackNode;Vo(h,d);var E=Bs(h,h===ci?Wi:0);if(E===0)w!==null&&Et(w),h.callbackNode=null,h.callbackPriority=0;else if(d=E&-E,h.callbackPriority!==d){if(w!=null&&Et(w),d===1)h.tag===0?Zl(ZM.bind(null,h)):Ho(ZM.bind(null,h)),Pe?Xe(function(){Kt===0&&Bi()}):Gs(Hs,Bi),w=null;else{switch(Go(E)){case 1:w=Hs;break;case 4:w=za;break;case 16:w=yi;break;case 536870912:w=es;break;default:w=yi}w=tb(w,jM.bind(null,h))}h.callbackPriority=d,h.callbackNode=w}}function jM(h,d){if(ym=-1,_m=0,Kt&6)throw Error(o(327));var w=h.callbackNode;if(lu()&&h.callbackNode!==w)return null;var E=Bs(h,h===ci?Wi:0);if(E===0)return null;if(E&30||E&h.expiredLanes||d)d=wm(h,E);else{d=E;var R=Kt;Kt|=2;var N=qM();(ci!==h||Wi!==d)&&(Sc(),ou(h,d));do try{kI();break}catch(me){YM(h,me)}while(1);jo(),dm.current=N,Kt=R,fi!==null?d=0:(ci=null,Wi=0,d=bi)}if(d!==0){if(d===2&&(R=$r(h),R!==0&&(E=R,d=fy(h,R))),d===1)throw w=gh,ou(h,0),$a(h,E),Wr(h,bn()),w;if(d===6)$a(h,E);else{if(R=h.current.alternate,!(E&30)&&!LI(R)&&(d=wm(h,E),d===2&&(N=$r(h),N!==0&&(E=N,d=fy(h,N))),d===1))throw w=gh,ou(h,0),$a(h,E),Wr(h,bn()),w;switch(h.finishedWork=R,h.finishedLanes=E,d){case 0:case 1:throw Error(o(345));case 2:au(h,Hr);break;case 3:if($a(h,E),(E&130023424)===E&&(d=ay+500-bn(),10<d)){if(Bs(h,0)!==0)break;if(R=h.suspendedLanes,(R&E)!==E){Ar(),h.pingedLanes|=h.suspendedLanes&R;break}h.timeoutHandle=de(au.bind(null,h,Hr),d);break}au(h,Hr);break;case 4:if($a(h,E),(E&4194240)===E)break;for(d=h.eventTimes,R=-1;0<E;){var ie=31-pr(E);N=1<<ie,ie=d[ie],ie>R&&(R=ie),E&=~N}if(E=R,E=bn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*AI(E/1960))-E,10<E){h.timeoutHandle=de(au.bind(null,h,Hr),E);break}au(h,Hr);break;case 5:au(h,Hr);break;default:throw Error(o(329))}}}return Wr(h,bn()),h.callbackNode===w?jM.bind(null,h):null}function fy(h,d){var w=vh;return h.current.memoizedState.isDehydrated&&(ou(h,d).flags|=256),h=wm(h,d),h!==2&&(d=Hr,Hr=w,d!==null&&hy(d)),h}function hy(h){Hr===null?Hr=h:Hr.push.apply(Hr,h)}function LI(h){for(var d=h;;){if(d.flags&16384){var w=d.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var R=w[E],N=R.getSnapshot;R=R.value;try{if(!Qi(N(),R))return!1}catch{return!1}}}if(w=d.child,d.subtreeFlags&16384&&w!==null)w.return=d,d=w;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function $a(h,d){for(d&=~oy,d&=~pm,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var w=31-pr(d),E=1<<w;h[w]=-1,d&=~E}}function ZM(h){if(Kt&6)throw Error(o(327));lu();var d=Bs(h,0);if(!(d&1))return Wr(h,bn()),null;var w=wm(h,d);if(h.tag!==0&&w===2){var E=$r(h);E!==0&&(d=E,w=fy(h,E))}if(w===1)throw w=gh,ou(h,0),$a(h,d),Wr(h,bn()),w;if(w===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,au(h,Hr),Wr(h,bn()),null}function XM(h){Ja!==null&&Ja.tag===0&&!(Kt&6)&&lu();var d=Kt;Kt|=1;var w=Qn.transition,E=Ht;try{if(Qn.transition=null,Ht=1,h)return h()}finally{Ht=E,Qn.transition=w,Kt=d,!(Kt&6)&&Bi()}}function dy(){ss=xc.current,Gt(xc)}function ou(h,d){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==Ae&&(h.timeoutHandle=Ae,_e(w)),fi!==null)for(w=fi.return;w!==null;){var E=w;switch(Mr(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&wt();break;case 3:Ks(),Gt(Cn),Gt(Lt),Wa();break;case 5:Ha(E);break;case 4:Ks();break;case 13:Gt(vn);break;case 19:Gt(vn);break;case 10:li(E.type._context);break;case 22:case 23:dy()}w=w.return}if(ci=h,fi=h=el(h.current,null),Wi=ss=d,bi=0,gh=null,oy=pm=wc=0,Hr=vh=null,wr!==null){for(d=0;d<wr.length;d++)if(w=wr[d],E=w.interleaved,E!==null){w.interleaved=null;var R=E.next,N=w.pending;if(N!==null){var ie=N.next;N.next=R,E.next=ie}w.pending=E}wr=null}return h}function YM(h,d){do{var w=fi;try{if(jo(),pc.current=lt,qo){for(var E=Ln.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}qo=!1}if(ja=0,dn=Ri=Ln=null,eu=!1,bo=0,sy.current=null,w===null||w.return===null){bi=1,gh=d,fi=null;break}e:{var N=h,ie=w.return,me=w,ze=d;if(d=Wi,me.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var rt=ze,mt=me,Nt=mt.tag;if(!(mt.mode&1)&&(Nt===0||Nt===11||Nt===15)){var St=mt.alternate;St?(mt.updateQueue=St.updateQueue,mt.memoizedState=St.memoizedState,mt.lanes=St.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var yn=em(ie);if(yn!==null){yn.flags&=-257,hh(yn,ie,me,N,d),yn.mode&1&&$p(N,rt,d),d=yn,ze=rt;var xt=d.updateQueue;if(xt===null){var nr=new Set;nr.add(ze),d.updateQueue=nr}else xt.add(ze);break e}else{if(!(d&1)){$p(N,rt,d),py();break e}ze=Error(o(426))}}else if(en&&me.mode&1){var Ps=em(ie);if(Ps!==null){!(Ps.flags&65536)&&(Ps.flags|=256),hh(Ps,ie,me,N,d),nh(ze);break e}}N=ze,bi!==4&&(bi=2),vh===null?vh=[N]:vh.push(N),ze=jn(ze,me),me=ie;do{switch(me.tag){case 3:me.flags|=65536,d&=-d,me.lanes|=d;var be=Jo(me,ze,d);Jf(me,be);break e;case 1:N=ze;var ve=me.type,Ie=me.stateNode;if(!(me.flags&128)&&(typeof ve.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(Ka===null||!Ka.has(Ie)))){me.flags|=65536,d&=-d,me.lanes|=d;var ft=Qp(me,N,d);Jf(me,ft);break e}}me=me.return}while(me!==null)}JM(w)}catch(_t){d=_t,fi===w&&w!==null&&(fi=w=w.return);continue}break}while(1)}function qM(){var h=dm.current;return dm.current=lt,h===null?lt:h}function py(){(bi===0||bi===3||bi===2)&&(bi=4),ci===null||!(wc&268435455)&&!(pm&268435455)||$a(ci,Wi)}function wm(h,d){var w=Kt;Kt|=2;var E=qM();ci===h&&Wi===d||ou(h,d);do try{RI();break}catch(R){YM(h,R)}while(1);if(jo(),Kt=w,dm.current=E,fi!==null)throw Error(o(261));return ci=null,Wi=0,bi}function RI(){for(;fi!==null;)KM(fi)}function kI(){for(;fi!==null&&!Ji();)KM(fi)}function KM(h){var d=eb(h.alternate,h,ss);h.memoizedProps=h.pendingProps,d===null?JM(h):fi=d,sy.current=null}function JM(h){var d=h;do{var w=d.alternate;if(h=d.return,d.flags&32768){if(w=bI(w,d),w!==null){w.flags&=32767,fi=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{bi=6,fi=null;return}}else if(w=j0(w,d,ss),w!==null){fi=w;return}if(d=d.sibling,d!==null){fi=d;return}fi=d=h}while(d!==null);bi===0&&(bi=5)}function au(h,d){var w=Ht,E=Qn.transition;try{Qn.transition=null,Ht=1,II(h,d,w)}finally{Qn.transition=E,Ht=w}return null}function II(h,d,w){do lu();while(Ja!==null);if(Kt&6)throw Error(o(327));var E=h.finishedWork,R=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var N=E.lanes|E.childLanes;if(gs(h,N),h===ci&&(fi=ci=null,Wi=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||gm||(gm=!0,tb(yi,function(){return lu(),null})),N=(E.flags&15990)!==0,E.subtreeFlags&15990||N){N=Qn.transition,Qn.transition=null;var ie=Ht;Ht=1;var me=Kt;Kt|=4,sy.current=null,EI(h,E),PI(h,E),H(h.containerInfo),h.current=E,CI(E),fn(),Kt=me,Ht=ie,Qn.transition=N}else h.current=E;if(gm&&(gm=!1,Ja=h,vm=R),N=h.pendingLanes,N===0&&(Ka=null),Nn(E.stateNode),Wr(h,bn()),d!==null)for(w=h.onRecoverableError,E=0;E<d.length;E++)w(d[E]);if(mm)throw mm=!1,h=uy,uy=null,h;return vm&1&&h.tag!==0&&lu(),N=h.pendingLanes,N&1?h===cy?yh++:(yh=0,cy=h):yh=0,Bi(),null}function lu(){if(Ja!==null){var h=Go(vm),d=Qn.transition,w=Ht;try{if(Qn.transition=null,Ht=16>h?16:h,Ja===null)var E=!1;else{if(h=Ja,Ja=null,vm=0,Kt&6)throw Error(o(331));var R=Kt;for(Kt|=4,ut=h.current;ut!==null;){var N=ut,ie=N.child;if(ut.flags&16){var me=N.deletions;if(me!==null){for(var ze=0;ze<me.length;ze++){var rt=me[ze];for(ut=rt;ut!==null;){var mt=ut;switch(mt.tag){case 0:case 11:case 15:su(8,mt,N)}var Nt=mt.child;if(Nt!==null)Nt.return=mt,ut=Nt;else for(;ut!==null;){mt=ut;var St=mt.sibling,yn=mt.return;if(NM(mt),mt===rt){ut=null;break}if(St!==null){St.return=yn,ut=St;break}ut=yn}}}var xt=N.alternate;if(xt!==null){var nr=xt.child;if(nr!==null){xt.child=null;do{var Ps=nr.sibling;nr.sibling=null,nr=Ps}while(nr!==null)}}ut=N}}if(N.subtreeFlags&2064&&ie!==null)ie.return=N,ut=ie;else e:for(;ut!==null;){if(N=ut,N.flags&2048)switch(N.tag){case 0:case 11:case 15:su(9,N,N.return)}var be=N.sibling;if(be!==null){be.return=N.return,ut=be;break e}ut=N.return}}var ve=h.current;for(ut=ve;ut!==null;){ie=ut;var Ie=ie.child;if(ie.subtreeFlags&2064&&Ie!==null)Ie.return=ie,ut=Ie;else e:for(ie=ve;ut!==null;){if(me=ut,me.flags&2048)try{switch(me.tag){case 0:case 11:case 15:ph(9,me)}}catch(_t){jr(me,me.return,_t)}if(me===ie){ut=null;break e}var ft=me.sibling;if(ft!==null){ft.return=me.return,ut=ft;break e}ut=me.return}}if(Kt=R,Bi(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Ws,h)}catch{}E=!0}return E}finally{Ht=w,Qn.transition=d}}return!1}function QM(h,d,w){d=jn(w,d),d=Jo(h,d,1),ws(h,d),d=Ar(),h=xm(h,1),h!==null&&(Ur(h,1,d),Wr(h,d))}function jr(h,d,w){if(h.tag===3)QM(h,h,w);else for(;d!==null;){if(d.tag===3){QM(d,h,w);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ka===null||!Ka.has(E))){h=jn(w,h),h=Qp(d,h,1),ws(d,h),h=Ar(),d=xm(d,1),d!==null&&(Ur(d,1,h),Wr(d,h));break}}d=d.return}}function DI(h,d,w){var E=h.pingCache;E!==null&&E.delete(d),d=Ar(),h.pingedLanes|=h.suspendedLanes&w,ci===h&&(Wi&w)===w&&(bi===4||bi===3&&(Wi&130023424)===Wi&&500>bn()-ay?ou(h,0):oy|=w),Wr(h,d)}function $M(h,d){d===0&&(h.mode&1?(d=gr,gr<<=1,!(gr&130023424)&&(gr=4194304)):d=1);var w=Ar();h=xm(h,d),h!==null&&(Ur(h,d,w),Wr(h,w))}function NI(h){var d=h.memoizedState,w=0;d!==null&&(w=d.retryLane),$M(h,w)}function OI(h,d){var w=0;switch(h.tag){case 13:var E=h.stateNode,R=h.memoizedState;R!==null&&(w=R.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(d),$M(h,w)}var eb;eb=function(h,d,w){if(h!==null)if(h.memoizedProps!==d.pendingProps||Cn.current)rs=!0;else{if(!(h.lanes&w)&&!(d.flags&128))return rs=!1,MI(h,d,w);rs=!!(h.flags&131072)}else rs=!1,en&&d.flags&1048576&&eh(d,Kl,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var R=vi(d,Lt.current);On(d,w),R=Ko(null,d,E,h,R,w);var N=sh();return d.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Wn(E)?(N=!0,Qr(d)):N=!1,d.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,_s(d),R.updater=fc,d.stateNode=R,R._reactInternals=d,Zs(d,E,h,w),d=X0(null,d,E,!0,N,w)):(d.tag=0,en&&N&&th(d),Cr(null,d,R,w),d=d.child),d;case 16:E=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,R=E._init,E=R(E._payload),d.type=E,R=d.tag=FI(E),h=Kn(E,h),R){case 0:d=Z0(null,d,E,h,w);break e;case 1:d=bM(null,d,E,h,w);break e;case 11:d=_M(null,d,E,h,w);break e;case 14:d=xM(null,d,E,Kn(E.type,h),w);break e}throw Error(o(306,E,""))}return d;case 0:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Kn(E,R),Z0(h,d,E,R,w);case 1:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Kn(E,R),bM(h,d,E,R,w);case 3:e:{if(TM(d),h===null)throw Error(o(387));E=d.pendingProps,N=d.memoizedState,R=N.element,Kf(h,d),Xl(d,E,null,w);var ie=d.memoizedState;if(E=ie.element,Se&&N.isDehydrated)if(N={element:E,isDehydrated:!1,cache:ie.cache,transitions:ie.transitions},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){R=Error(o(423)),d=EM(h,d,E,w,R);break e}else if(E!==R){R=Error(o(424)),d=EM(h,d,E,w,R);break e}else for(Se&&(br=Re(d.stateNode.containerInfo),ui=d,en=!0,Li=null,Jl=!1),w=Yp(d,null,E,w),d.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(qs(),E===R){d=$o(h,d,w);break e}Cr(h,d,E,w)}d=d.child}return d;case 5:return Yo(d),h===null&&Va(d),E=d.type,R=d.pendingProps,N=h!==null?h.memoizedProps:null,ie=R.children,Z(E,R)?ie=null:N!==null&&Z(E,N)&&(d.flags|=32),MM(h,d),Cr(h,d,ie,w),d.child;case 6:return h===null&&Va(d),null;case 13:return PM(h,d,w);case 4:return Ql(d,d.stateNode.containerInfo),E=d.pendingProps,h===null?d.child=ns(d,null,E,w):Cr(h,d,E,w),d.child;case 11:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Kn(E,R),_M(h,d,E,R,w);case 7:return Cr(h,d,d.pendingProps,w),d.child;case 8:return Cr(h,d,d.pendingProps.children,w),d.child;case 12:return Cr(h,d,d.pendingProps.children,w),d.child;case 10:e:{if(E=d.type._context,R=d.pendingProps,N=d.memoizedProps,ie=R.value,uc(d,E,ie),N!==null)if(Qi(N.value,ie)){if(N.children===R.children&&!Cn.current){d=$o(h,d,w);break e}}else for(N=d.child,N!==null&&(N.return=d);N!==null;){var me=N.dependencies;if(me!==null){ie=N.child;for(var ze=me.firstContext;ze!==null;){if(ze.context===E){if(N.tag===1){ze=xs(-1,w&-w),ze.tag=2;var rt=N.updateQueue;if(rt!==null){rt=rt.shared;var mt=rt.pending;mt===null?ze.next=ze:(ze.next=mt.next,mt.next=ze),rt.pending=ze}}N.lanes|=w,ze=N.alternate,ze!==null&&(ze.lanes|=w),wi(N.return,w,d),me.lanes|=w;break}ze=ze.next}}else if(N.tag===10)ie=N.type===d.type?null:N.child;else if(N.tag===18){if(ie=N.return,ie===null)throw Error(o(341));ie.lanes|=w,me=ie.alternate,me!==null&&(me.lanes|=w),wi(ie,w,d),ie=N.sibling}else ie=N.child;if(ie!==null)ie.return=N;else for(ie=N;ie!==null;){if(ie===d){ie=null;break}if(N=ie.sibling,N!==null){N.return=ie.return,ie=N;break}ie=ie.return}N=ie}Cr(h,d,R.children,w),d=d.child}return d;case 9:return R=d.type,E=d.pendingProps.children,On(d,w),R=on(R),E=E(R),d.flags|=1,Cr(h,d,E,w),d.child;case 14:return E=d.type,R=Kn(E,d.pendingProps),R=Kn(E.type,R),xM(h,d,E,R,w);case 15:return wM(h,d,d.type,d.pendingProps,w);case 17:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Kn(E,R),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Wn(E)?(h=!0,Qr(d)):h=!1,On(d,w),$f(d,E,R),Zs(d,E,R,w),X0(null,d,E,!0,h,w);case 19:return RM(h,d,w);case 22:return SM(h,d,w)}throw Error(o(156,d.tag))};function tb(h,d){return Gs(h,d)}function zI(h,d,w,E){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(h,d,w,E){return new zI(h,d,w,E)}function my(h){return h=h.prototype,!(!h||!h.isReactComponent)}function FI(h){if(typeof h=="function")return my(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===M)return 14}return 2}function el(h,d){var w=h.alternate;return w===null?(w=Es(h.tag,d,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=d,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,d=h.dependencies,w.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function Sm(h,d,w,E,R,N){var ie=2;if(E=h,typeof h=="function")my(h)&&(ie=1);else if(typeof h=="string")ie=5;else e:switch(h){case f:return uu(w.children,R,N,d);case p:ie=8,R|=8;break;case m:return h=Es(12,w,d,R|2),h.elementType=m,h.lanes=N,h;case S:return h=Es(13,w,d,R),h.elementType=S,h.lanes=N,h;case T:return h=Es(19,w,d,R),h.elementType=T,h.lanes=N,h;case C:return Mm(w,R,N,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case v:ie=10;break e;case y:ie=9;break e;case _:ie=11;break e;case M:ie=14;break e;case b:ie=16,E=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return d=Es(ie,w,d,R),d.elementType=h,d.type=E,d.lanes=N,d}function uu(h,d,w,E){return h=Es(7,h,E,d),h.lanes=w,h}function Mm(h,d,w,E){return h=Es(22,h,E,d),h.elementType=C,h.lanes=w,h.stateNode={},h}function gy(h,d,w){return h=Es(6,h,null,d),h.lanes=w,h}function vy(h,d,w){return d=Es(4,h.children!==null?h.children:[],h.key,d),d.lanes=w,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function UI(h,d,w,E,R){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vs(0),this.expirationTimes=Vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vs(0),this.identifierPrefix=E,this.onRecoverableError=R,Se&&(this.mutableSourceEagerHydrationData=null)}function nb(h,d,w,E,R,N,ie,me,ze){return h=new UI(h,d,w,me,ze),d===1?(d=1,N===!0&&(d|=8)):d=0,N=Es(3,null,null,d),h.current=N,N.stateNode=h,N.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null},_s(N),h}function ib(h){if(!h)return yt;h=h._reactInternals;e:{if(O(h)!==h||h.tag!==1)throw Error(o(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Wn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(h.tag===1){var w=h.type;if(Wn(w))return xo(h,w,d)}return d}function rb(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=Y(d),h===null?null:h.stateNode}function sb(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<d?w:d}}function yy(h,d){sb(h,d),(h=h.alternate)&&sb(h,d)}function BI(h){return h=Y(h),h===null?null:h.stateNode}function VI(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var d=Ar();Ts(h,134217728,d),yy(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Ar(),w=Qa(h);Ts(h,w,d),yy(h,w)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var w=vr(d.pendingLanes);w!==0&&(yr(d,w|1),Wr(d,bn()),!(Kt&6)&&(Sc(),Bi()))}break;case 13:var E=Ar();XM(function(){return Ts(h,1,E)}),yy(h,1)}},t.batchedUpdates=function(h,d){var w=Kt;Kt|=1;try{return h(d)}finally{Kt=w,Kt===0&&(Sc(),ys&&Bi())}},t.createComponentSelector=function(h){return{$$typeof:lm,value:h}},t.createContainer=function(h,d,w,E,R,N,ie){return nb(h,d,!1,null,w,E,R,N,ie)},t.createHasPseudoClassSelector=function(h){return{$$typeof:um,value:h}},t.createHydrationContainer=function(h,d,w,E,R,N,ie,me,ze){return h=nb(w,E,!0,h,R,N,ie,me,ze),h.context=ib(null),w=h.current,E=Ar(),R=Qa(w),N=xs(E,R),N.callback=d??null,ws(w,N),h.current.lanes=R,Ur(h,R,E),Wr(h,E),h},t.createPortal=function(h,d,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:h,containerInfo:d,implementation:w}},t.createRoleSelector=function(h){return{$$typeof:cm,value:h}},t.createTestNameSelector=function(h){return{$$typeof:fm,value:h}},t.createTextSelector=function(h){return{$$typeof:hm,value:h}},t.deferredUpdates=function(h){var d=Ht,w=Qn.transition;try{return Qn.transition=null,Ht=16,h()}finally{Ht=d,Qn.transition=w}},t.discreteUpdates=function(h,d,w,E,R){var N=Ht,ie=Qn.transition;try{return Qn.transition=null,Ht=1,h(d,w,E,R)}finally{Ht=N,Qn.transition=ie,Kt===0&&Sc()}},t.findAllNodes=ry,t.findBoundingRects=function(h,d){if(!Je)throw Error(o(363));d=ry(h,d),h=[];for(var w=0;w<d.length;w++)h.push(q(d[w]));for(d=h.length-1;0<d;d--){w=h[d];for(var E=w.x,R=E+w.width,N=w.y,ie=N+w.height,me=d-1;0<=me;me--)if(d!==me){var ze=h[me],rt=ze.x,mt=rt+ze.width,Nt=ze.y,St=Nt+ze.height;if(E>=rt&&N>=Nt&&R<=mt&&ie<=St){h.splice(d,1);break}else if(E!==rt||w.width!==ze.width||St<N||Nt>ie){if(!(N!==Nt||w.height!==ze.height||mt<E||rt>R)){rt>E&&(ze.width+=rt-E,ze.x=E),mt<R&&(ze.width=R-rt),h.splice(d,1);break}}else{Nt>N&&(ze.height+=Nt-N,ze.y=N),St<ie&&(ze.height=ie-Nt),h.splice(d,1);break}}}return h},t.findHostInstance=rb,t.findHostInstanceWithNoPortals=function(h){return h=$(h),h=h!==null?J(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return rb(h)},t.flushControlled=function(h){var d=Kt;Kt|=1;var w=Qn.transition,E=Ht;try{Qn.transition=null,Ht=1,h()}finally{Ht=E,Qn.transition=w,Kt=d,Kt===0&&(Sc(),Bi())}},t.flushPassiveEffects=lu,t.flushSync=XM,t.focusWithin=function(h,d){if(!Je)throw Error(o(363));for(h=ty(h),d=WM(h,d),d=Array.from(d),h=0;h<d.length;){var w=d[h++];if(!pe(w)){if(w.tag===5&&Ve(w.stateNode))return!0;for(w=w.child;w!==null;)d.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ht},t.getFindAllNodesFailureDescription=function(h,d){if(!Je)throw Error(o(363));var w=0,E=[];h=[ty(h),0];for(var R=0;R<h.length;){var N=h[R++],ie=h[R++],me=d[ie];if((N.tag!==5||!pe(N))&&(ny(N,me)&&(E.push(iy(me)),ie++,ie>w&&(w=ie)),ie<d.length))for(N=N.child;N!==null;)h.push(N,ie),N=N.sibling}if(w<d.length){for(h=[];w<d.length;w++)h.push(iy(d[w]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ce(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:BI,findFiberByHostInstance:h.findFiberByHostInstance||VI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Ws=d.inject(h),_i=d}catch{}h=!!d.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,d,w,E){if(!Je)throw Error(o(363));h=ry(h,d);var R=je(h,w,E).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(h,d){var w=d._getVersion;w=w(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,w]:h.mutableSourceEagerHydrationData.push(d,w)},t.runWithPriority=function(h,d){var w=Ht;try{return Ht=h,d()}finally{Ht=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,d,w,E){var R=d.current,N=Ar(),ie=Qa(R);return w=ib(w),d.context===null?d.context=w:d.pendingContext=w,d=xs(N,ie),d.payload={element:h},E=E===void 0?null:E,E!==null&&(d.callback=E),ws(R,d),h=Ts(R,ie,N),h!==null&&cc(h,R,ie),ie},t};jk.exports=T9;var E9=jk.exports;const P9=iw(E9);var Zk={exports:{}},Xk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,X){var H=F.length;F.push(X);e:for(;0<H;){var W=H-1>>>1,j=F[W];if(0<r(j,X))F[W]=X,F[H]=j,H=W;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],H=F.pop();if(H!==X){F[0]=H;e:for(var W=0,j=F.length,se=j>>>1;W<se;){var ee=2*(W+1)-1,Z=F[ee],ue=ee+1,de=F[ue];if(0>r(Z,H))ue<j&&0>r(de,Z)?(F[W]=de,F[ue]=H,W=ue):(F[W]=Z,F[ee]=H,W=ee);else if(ue<j&&0>r(de,H))F[W]=de,F[ue]=H,W=ue;else break e}}return X}function r(F,X){var H=F.sortIndex-X.sortIndex;return H!==0?H:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,p=null,m=3,v=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(_=!1,b(F),!y)if(t(l)!==null)y=!0,ce(k);else{var X=t(c);X!==null&&ye(C,X.startTime-F)}}function k(F,X){y=!1,_&&(_=!1,T(A),A=-1),v=!0;var H=m;try{for(b(X),p=t(l);p!==null&&(!(p.expirationTime>X)||F&&!$());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var j=W(p.expirationTime<=X);X=n.unstable_now(),typeof j=="function"?p.callback=j:p===t(l)&&i(l),b(X)}else i(l);p=t(l)}if(p!==null)var se=!0;else{var ee=t(c);ee!==null&&ye(C,ee.startTime-X),se=!1}return se}finally{p=null,m=H,v=!1}}var I=!1,z=null,A=-1,O=5,U=-1;function $(){return!(n.unstable_now()-U<O)}function Y(){if(z!==null){var F=n.unstable_now();U=F;var X=!0;try{X=z(!0,F)}finally{X?te():(I=!1,z=null)}}else I=!1}var te;if(typeof M=="function")te=function(){M(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,te=function(){ae.postMessage(null)}}else te=function(){S(Y,0)};function ce(F){z=F,I||(I=!0,te())}function ye(F,X){A=S(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||v||(y=!0,ce(k))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var H=m;m=X;try{return F()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=m;m=F;try{return X()}finally{m=H}},n.unstable_scheduleCallback=function(F,X,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,F={id:f++,callback:X,priorityLevel:F,startTime:H,expirationTime:j,sortIndex:-1},H>W?(F.sortIndex=H,e(c,F),t(l)===null&&F===t(c)&&(_?(T(A),A=-1):_=!0,ye(C,H-W))):(F.sortIndex=j,e(l,F),y||v||(y=!0,ce(k))),F},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(F){var X=m;return function(){var H=m;m=X;try{return F.apply(this,arguments)}finally{m=H}}}})(Xk);Zk.exports=Xk;var nP=Zk.exports;function C9(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const Ig=[];function A9(n,e,t=!1,i={}){for(const s of Ig)if(C9(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Ig.indexOf(r);s!==-1&&Ig.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Ig.push(r),!t)throw r.promise}const L9=(n,e,t)=>A9(n,e,!1,t),gM={},R9=n=>void Object.assign(gM,n);function k9(n,e){function t(f,{args:p=[],attach:m,...v},y){let _=`${f[0].toUpperCase()}${f.slice(1)}`,S;if(f==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const T=v.object;S=Wc(T,{type:f,root:y,attach:m,primitive:!0})}else{const T=gM[_];if(!T)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");S=Wc(new T(...p),{type:f,root:y,attach:m,memoizedProps:{args:p}})}return S.__r3f.attach===void 0&&(S instanceof jt?S.__r3f.attach="geometry":S instanceof qi&&(S.__r3f.attach="material")),_!=="inject"&&V_(S,v),S}function i(f,p){let m=!1;if(p){var v,y;(v=p.__r3f)!=null&&v.attach?B_(f,p,p.__r3f.attach):p.isObject3D&&f.isObject3D&&(f.add(p),m=!0),m||(y=f.__r3f)==null||y.objects.push(p),p.__r3f||Wc(p,{}),p.__r3f.parent=f,Q1(p),jc(p)}}function r(f,p,m){let v=!1;if(p){var y,_;if((y=p.__r3f)!=null&&y.attach)B_(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){p.parent=f,p.dispatchEvent({type:"added"});const S=f.children.filter(M=>M!==p),T=S.indexOf(m);f.children=[...S.slice(0,T),p,...S.slice(T)],v=!0}v||(_=f.__r3f)==null||_.objects.push(p),p.__r3f||Wc(p,{}),p.__r3f.parent=f,Q1(p),jc(p)}}function s(f,p,m=!1){f&&[...f].forEach(v=>o(p,v,m))}function o(f,p,m){if(p){var v,y,_;if(p.__r3f&&(p.__r3f.parent=null),(v=f.__r3f)!=null&&v.objects&&(f.__r3f.objects=f.__r3f.objects.filter(C=>C!==p)),(y=p.__r3f)!=null&&y.attach)aP(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){var S;f.remove(p),(S=p.__r3f)!=null&&S.root&&U9(p.__r3f.root,p)}const M=(_=p.__r3f)==null?void 0:_.primitive,b=m===void 0?p.dispose!==null&&!M:m;if(!M){var T;s((T=p.__r3f)==null?void 0:T.objects,p,b),s(p.children,p,b)}p.__r3f&&(delete p.__r3f.root,delete p.__r3f.objects,delete p.__r3f.handlers,delete p.__r3f.memoizedProps,M||delete p.__r3f),b&&p.dispose&&p.type!=="Scene"&&nP.unstable_scheduleCallback(nP.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),jc(f)}}function a(f,p,m,v){var y;const _=(y=f.__r3f)==null?void 0:y.parent;if(!_)return;const S=t(p,m,f.__r3f.root);if(f.children){for(const T of f.children)T.__r3f&&i(S,T);f.children=f.children.filter(T=>!T.__r3f)}f.__r3f.objects.forEach(T=>i(S,T)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(_,f),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),i(_,S),S.raycast&&S.__r3f.eventCount&&S.__r3f.root.getState().internal.interaction.push(S),[v,v.alternate].forEach(T=>{T!==null&&(T.stateNode=S,T.ref&&(typeof T.ref=="function"?T.ref(S):T.ref.current=S))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:P9({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,p)=>{if(!p)return;const m=f.getState().scene;m.__r3f&&(m.__r3f.root=f,i(m,p))},removeChildFromContainer:(f,p)=>{p&&o(f.getState().scene,p)},insertInContainerBefore:(f,p,m)=>{if(!p||!m)return;const v=f.getState().scene;v.__r3f&&r(v,p,m)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var p;return!!((p=f==null?void 0:f.__r3f)!=null?p:{}).handlers},prepareUpdate(f,p,m,v){if(f.__r3f.primitive&&v.object&&v.object!==f)return[!0];{const{args:y=[],children:_,...S}=v,{args:T=[],children:M,...b}=m;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((k,I)=>k!==T[I]))return[!0];const C=eI(f,S,b,!0);return C.changes.length?[!1,C]:null}},commitUpdate(f,[p,m],v,y,_,S){p?a(f,v,_,S):V_(f,m)},commitMount(f,p,m,v){var y;const _=(y=f.__r3f)!=null?y:{};f.raycast&&_.handlers&&_.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Wc(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var p;const{attach:m,parent:v}=(p=f.__r3f)!=null?p:{};m&&v&&aP(v,f,m),f.isObject3D&&(f.visible=!1),jc(f)},unhideInstance(f,p){var m;const{attach:v,parent:y}=(m=f.__r3f)!=null?m:{};v&&y&&B_(y,f,v),(f.isObject3D&&p.visible==null||p.visible)&&(f.visible=!0),jc(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ff.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&In.fun(performance.now)?performance.now:In.fun(Date.now)?Date.now:()=>0,scheduleTimeout:In.fun(setTimeout)?setTimeout:void 0,cancelTimeout:In.fun(clearTimeout)?clearTimeout:void 0}),applyProps:V_}}var iP,rP;const Yk=()=>{var n;return(n=gM.ColorManagement)!=null?n:null},qk=n=>n&&n.isOrthographicCamera,I9=n=>n&&n.hasOwnProperty("current"),Vp=typeof window<"u"&&((iP=window.document)!=null&&iP.createElement||((rP=window.navigator)==null?void 0:rP.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function Kk(n){const e=K.useRef(n);return Vp(()=>void(e.current=n),[n]),e}function D9({set:n}){return Vp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Jk extends K.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Jk.getDerivedStateFromError=()=>({error:!0});const Qk="__default",sP=new Map,N9=n=>n&&!!n.memoized&&!!n.changes;function $k(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Gh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},In={obj:n=>n===Object(n)&&!In.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(In.str(n)||In.num(n))return n===e;const s=In.obj(n);if(s&&i==="reference")return n===e;const o=In.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!In.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(In.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function O9(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Wc(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function J1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const oP=/-\d+$/;function B_(n,e,t){if(In.str(t)){if(oP.test(t)){const s=t.replace(oP,""),{target:o,key:a}=J1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=J1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function aP(n,e,t){var i,r;if(In.str(t)){const{target:s,key:o}=J1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function eI(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var f;const p=(f=n==null?void 0:n.__r3f)!=null?f:{},m=Object.entries(r),v=[];if(c){const _=Object.keys(l);for(let S=0;S<_.length;S++)r.hasOwnProperty(_[S])||m.unshift([_[S],Qk+"remove"])}m.forEach(([_,S])=>{var T;if((T=n.__r3f)!=null&&T.primitive&&_==="object"||In.equ(S,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return v.push([_,S,!0,[]]);let M=[];_.includes("-")&&(M=_.split("-")),v.push([_,S,!1,M]);for(const b in r){const C=r[b];b.startsWith(`${_}-`)&&v.push([b,C,!1,b.split("-")])}});const y={...r};return p.memoizedProps&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function V_(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=N9(e)?e:eI(n,e),f=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let m=0;m<c.length;m++){let[v,y,_,S]=c[m],T=n,M=T[v];if(S.length&&(M=S.reduce((b,C)=>b[C],n),!(M&&M.set))){const[b,...C]=S.reverse();T=C.reverse().reduce((k,I)=>k[I],n),v=b}if(y===Qk+"remove")if(T.constructor){let b=sP.get(T.constructor);b||(b=new T.constructor,sP.set(T.constructor,b)),y=b[v]}else y=0;if(_)y?s.handlers[v]=y:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(M&&M.set&&(M.copy||M instanceof Gu)){if(Array.isArray(y))M.fromArray?M.fromArray(y):M.set(...y);else if(M.copy&&y&&y.constructor&&M.constructor===y.constructor)M.copy(y);else if(y!==void 0){const b=M instanceof ht;!b&&M.setScalar?M.setScalar(y):M instanceof Gu&&y instanceof Gu?M.mask=y.mask:M.set(y),!Yk()&&!a.linear&&b&&M.convertSRGBToLinear()}}else T[v]=y,!a.linear&&T[v]instanceof Gn&&T[v].format===Xr&&T[v].type===Pa&&(T[v].encoding=gn);jc(n)}if(s.parent&&a.internal&&n.raycast&&f!==s.eventCount){const m=a.internal.interaction.indexOf(n);m>-1&&a.internal.interaction.splice(m,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&Q1(n),n}function jc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Q1(n){n.onUpdate==null||n.onUpdate(n)}function z9(n,e){n.manual||(qk(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Dg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function F9(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ff.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ff.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ff.ContinuousEventPriority;default:return ff.DefaultEventPriority}}function tI(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function U9(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{tI(t.capturedMap,e,i,r)})}function B9(n){function e(l){const{internal:c}=n.getState(),f=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(f*f+p*p))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(f=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+f]}))}function i(l,c){const f=n.getState(),p=new Set,m=[],v=c?c(f.internal.interaction):f.internal.interaction;for(let T=0;T<v.length;T++){const M=Gh(v[T]);M&&(M.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function y(T){const M=Gh(T);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var b;M.events.compute==null||M.events.compute(l,M,(b=M.previousRoot)==null?void 0:b.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(T,!0):[]}let _=v.flatMap(y).sort((T,M)=>{const b=Gh(T.object),C=Gh(M.object);return!b||!C?T.distance-M.distance:C.events.priority-b.events.priority||T.distance-M.distance}).filter(T=>{const M=Dg(T);return p.has(M)?!1:(p.add(M),!0)});f.events.filter&&(_=f.events.filter(_,f));for(const T of _){let M=T.object;for(;M;){var S;(S=M.__r3f)!=null&&S.eventCount&&m.push({...T,eventObject:M}),M=M.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let T of f.internal.capturedMap.get(l.pointerId).values())p.has(Dg(T.intersection))||m.push(T.intersection);return m}function r(l,c,f,p){const m=n.getState();if(l.length){const v={stopped:!1};for(const y of l){const _=Gh(y.object)||m,{raycaster:S,pointer:T,camera:M,internal:b}=_,C=new ne(T.x,T.y,0).unproject(M),k=U=>{var $,Y;return($=(Y=b.capturedMap.get(U))==null?void 0:Y.has(y.eventObject))!=null?$:!1},I=U=>{const $={intersection:y,target:c.target};b.capturedMap.has(U)?b.capturedMap.get(U).set(y.eventObject,$):b.capturedMap.set(U,new Map([[y.eventObject,$]])),c.target.setPointerCapture(U)},z=U=>{const $=b.capturedMap.get(U);$&&tI(b.capturedMap,y.eventObject,$,U)};let A={};for(let U in c){let $=c[U];typeof $!="function"&&(A[U]=$)}let O={...y,...A,pointer:T,intersections:l,stopped:v.stopped,delta:f,unprojectedPoint:C,ray:S.ray,camera:M,stopPropagation(){const U="pointerId"in c&&b.capturedMap.get(c.pointerId);if((!U||U.has(y.eventObject))&&(O.stopped=v.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find($=>$.eventObject===y.eventObject))){const $=l.slice(0,l.indexOf(y));s([...$,y])}},target:{hasPointerCapture:k,setPointerCapture:I,releasePointerCapture:z},currentTarget:{hasPointerCapture:k,setPointerCapture:I,releasePointerCapture:z},nativeEvent:c};if(p(O),v.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const f of c.hovered.values())if(!l.length||!l.find(p=>p.object===f.object&&p.index===f.index&&p.instanceId===f.instanceId)){const m=f.eventObject.__r3f,v=m==null?void 0:m.handlers;if(c.hovered.delete(Dg(f)),m!=null&&m.eventCount){const y={...f,intersections:l};v.onPointerOut==null||v.onPointerOut(y),v.onPointerLeave==null||v.onPointerLeave(y)}}}function o(l,c){for(let f=0;f<c.length;f++){const p=c[f].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:f}=n.getState();"pointerId"in c&&f.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(c.pointerId)&&(f.capturedMap.delete(c.pointerId),s([]))})}}return function(f){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=f;const v=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=i(f,v?t:void 0),T=y?e(f):0;l==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=S.map(b=>b.eventObject)),y&&!S.length&&T<=2&&(o(f,m.interaction),p&&p(f)),v&&s(S);function M(b){const C=b.eventObject,k=C.__r3f,I=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(v){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const z=Dg(b),A=m.hovered.get(z);A?A.stopped&&b.stopPropagation():(m.hovered.set(z,b),I.onPointerOver==null||I.onPointerOver(b),I.onPointerEnter==null||I.onPointerEnter(b))}I.onPointerMove==null||I.onPointerMove(b)}else{const z=I[l];z?(!y||m.initialHits.includes(C))&&(o(f,m.interaction.filter(A=>!m.initialHits.includes(A))),z(b)):y&&m.initialHits.includes(C)&&o(f,m.interaction.filter(A=>!m.initialHits.includes(A)))}}r(S,f,T,M)}}return{handlePointer:a}}const nI=n=>!!(n!=null&&n.render),iI=K.createContext(null),V9=(n,e)=>{const t=S9((a,l)=>{const c=new ne,f=new ne,p=new ne;function m(T=l().camera,M=f,b=l().size){const{width:C,height:k,top:I,left:z}=b,A=C/k;M instanceof ne?p.copy(M):p.set(...M);const O=T.getWorldPosition(c).distanceTo(p);if(qk(T))return{width:C/T.zoom,height:k/T.zoom,top:I,left:z,factor:1,distance:O,aspect:A};{const U=T.fov*Math.PI/180,$=2*Math.tan(U/2)*O,Y=$*(C/k);return{width:Y,height:$,top:I,left:z,factor:C/Y,distance:O,aspect:A}}}let v;const y=T=>a(M=>({performance:{...M.performance,current:T}})),_=new Ge;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(T=1)=>n(l(),T),advance:(T,M)=>e(T,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new hM,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=l();v&&clearTimeout(v),T.performance.current!==T.performance.min&&y(T.performance.min),v=setTimeout(()=>y(l().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:T=>a(M=>({...M,events:{...M.events,...T}})),setSize:(T,M,b,C,k)=>{const I=l().camera,z={width:T,height:M,top:C||0,left:k||0,updateStyle:b};a(A=>({size:z,viewport:{...A.viewport,...m(I,f,z)}}))},setDpr:T=>a(M=>{const b=$k(T);return{viewport:{...M.viewport,dpr:b,initialDpr:M.viewport.initialDpr||b}}}),setFrameloop:(T="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,T!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:T}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:K.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(T,M,b)=>{const C=l().internal;return C.priority=C.priority+(M>0?1:0),C.subscribers.push({ref:T,priority:M,store:b}),C.subscribers=C.subscribers.sort((k,I)=>k.priority-I.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(M>0?1:0),k.subscribers=k.subscribers.filter(I=>I.ref!==T))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:f,set:p}=t.getState();if(l!==r||c.dpr!==s){var m;r=l,s=c.dpr,z9(a,l),f.setPixelRatio(c.dpr);const v=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,v)}a!==o&&(o=a,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Ng,G9=new Set,H9=new Set,W9=new Set;function G_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Hh(n,e){switch(n){case"before":return G_(G9,e);case"after":return G_(H9,e);case"tail":return G_(W9,e)}}let H_,W_;function j_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),H_=e.internal.subscribers,Ng=0;Ng<H_.length;Ng++)W_=H_[Ng],W_.ref.current(W_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function j9(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,Hh("before",l);for(const f of n.values()){var c;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=j_(l,r))}if(Hh("after",l),t===0)return Hh("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var f;if(!l)return n.forEach(p=>o(p.store.getState()),c);(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,f,p){if(c&&Hh("before",l),f)j_(l,f,p);else for(const m of n.values())j_(l,m.store.getState());c&&Hh("after",l)}return{loop:s,invalidate:o,advance:a}}function rI(){const n=K.useContext(iI);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function aa(n=t=>t,e){return rI()(n,e)}function sI(n,e=0){const t=rI(),i=t.getState().internal.subscribe,r=Kk(n);return Vp(()=>i(r,e,t),[e,i,t]),null}const Nf=new Map,{invalidate:lP,advance:uP}=j9(Nf),{reconciler:Qv,applyProps:Wh}=k9(Nf,F9),Vc={objects:"shallow",strict:!1},Z9=(n,e)=>{const t=typeof n=="function"?n(e):n;return nI(t)?t:new I0({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function X9(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Y9(n){const e=Nf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||V9(lP,uP),o=t||Qv.createContainer(s,ff.ConcurrentRoot,null,!1,null,"",r,null);e||Nf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(f={}){let{gl:p,size:m,scene:v,events:y,onCreated:_,shadows:S=!1,linear:T=!1,flat:M=!1,legacy:b=!1,orthographic:C=!1,frameloop:k="always",dpr:I=[1,2],performance:z,raycaster:A,camera:O,onPointerMissed:U}=f,$=s.getState(),Y=$.gl;$.gl||$.set({gl:Y=Z9(p,n)});let te=$.raycaster;te||$.set({raycaster:te=new Gk});const{params:J,...ae}=A||{};if(In.equ(ae,te,Vc)||Wh(te,{...ae}),In.equ(J,te.params,Vc)||Wh(te,{params:{...te.params,...J}}),!$.camera||$.camera===c&&!In.equ(c,O,Vc)){c=O;const W=O instanceof Ep,j=W?O:C?new Ll(0,0,0,0,.1,1e3):new ii(75,0,.1,1e3);W||(j.position.z=5,O&&Wh(j,O),!$.camera&&!(O!=null&&O.rotation)&&j.lookAt(0,0,0)),$.set({camera:j})}if(!$.scene){let W;v instanceof Jv?W=v:(W=new Jv,v&&Wh(W,v)),$.set({scene:Wc(W)})}if(!$.xr){const W=(ee,Z)=>{const ue=s.getState();ue.frameloop!=="never"&&uP(ee,!0,ue,Z)},j=()=>{const ee=s.getState();ee.gl.xr.enabled=ee.gl.xr.isPresenting,ee.gl.xr.setAnimationLoop(ee.gl.xr.isPresenting?W:null),ee.gl.xr.isPresenting||lP(ee)},se={connect(){const ee=s.getState().gl;ee.xr.addEventListener("sessionstart",j),ee.xr.addEventListener("sessionend",j)},disconnect(){const ee=s.getState().gl;ee.xr.removeEventListener("sessionstart",j),ee.xr.removeEventListener("sessionend",j)}};Y.xr&&se.connect(),$.set({xr:se})}if(Y.shadowMap){const W=Y.shadowMap.enabled,j=Y.shadowMap.type;if(Y.shadowMap.enabled=!!S,In.boo(S))Y.shadowMap.type=pd;else if(In.str(S)){var ce;const se={basic:ZL,percentage:T0,soft:pd,variance:ku};Y.shadowMap.type=(ce=se[S])!=null?ce:pd}else In.obj(S)&&Object.assign(Y.shadowMap,S);(W!==Y.shadowMap.enabled||j!==Y.shadowMap.type)&&(Y.shadowMap.needsUpdate=!0)}const ye=Yk();ye&&("enabled"in ye?ye.enabled=!b:"legacyMode"in ye&&(ye.legacyMode=b));const F=T?Ca:gn,X=M?mo:DS;Y.outputEncoding!==F&&(Y.outputEncoding=F),Y.toneMapping!==X&&(Y.toneMapping=X),$.legacy!==b&&$.set(()=>({legacy:b})),$.linear!==T&&$.set(()=>({linear:T})),$.flat!==M&&$.set(()=>({flat:M})),p&&!In.fun(p)&&!nI(p)&&!In.equ(p,Y,Vc)&&Wh(Y,p),y&&!$.events.handlers&&$.set({events:y(s)});const H=X9(n,m);return In.equ(H,$.size,Vc)||$.setSize(H.width,H.height,H.updateStyle,H.top,H.left),I&&$.viewport.dpr!==$k(I)&&$.setDpr(I),$.frameloop!==k&&$.setFrameloop(k),$.onPointerMissed||$.set({onPointerMissed:U}),z&&!In.equ(z,$.performance,Vc)&&$.set(W=>({performance:{...W.performance,...z}})),a=_,l=!0,this},render(f){return l||this.configure(),Qv.updateContainer(K.createElement(q9,{store:s,children:f,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){oI(n)}}}function q9({store:n,children:e,onCreated:t,rootElement:i}){return Vp(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),K.createElement(iI.Provider,{value:n},e)}function oI(n,e){const t=Nf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Qv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),O9(r),Nf.delete(n),e&&e(n)}catch{}},500)})}}Qv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:K.version});function Of(){return Of=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Of.apply(null,arguments)}function cP(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function K9({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=K.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=K.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,f=K.useRef(!1);K.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,v]=K.useMemo(()=>{const T=()=>{if(!a.current.element)return;const{left:M,top:b,width:C,height:k,bottom:I,right:z,x:A,y:O}=a.current.element.getBoundingClientRect(),U={left:M,top:b,width:C,height:k,bottom:I,right:z,x:A,y:O};a.current.element instanceof HTMLElement&&i&&(U.height=a.current.element.offsetHeight,U.width=a.current.element.offsetWidth),Object.freeze(U),f.current&&!eZ(a.current.lastBounds,U)&&o(a.current.lastBounds=U)};return[T,c?cP(T,c):T,l?cP(T,l):T]},[o,i,l,c]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function _(){a.current.element&&(a.current.resizeObserver=new r(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(T=>T.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=T=>{!T||T===a.current.element||(y(),a.current.element=T,a.current.scrollContainers=aI(T),_())};return Q9(v,!!e),J9(m),K.useEffect(()=>{y(),_()},[e,v,m]),K.useEffect(()=>y,[]),[S,s,p]}function J9(n){K.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Q9(n,e){K.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function aI(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...aI(n.parentElement)]}const $9=["x","y","top","bottom","left","right","width","height"],eZ=(n,e)=>$9.every(t=>n[t]===e[t]);var tZ=Object.defineProperty,nZ=Object.defineProperties,iZ=Object.getOwnPropertyDescriptors,fP=Object.getOwnPropertySymbols,rZ=Object.prototype.hasOwnProperty,sZ=Object.prototype.propertyIsEnumerable,hP=(n,e,t)=>e in n?tZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dP=(n,e)=>{for(var t in e||(e={}))rZ.call(e,t)&&hP(n,t,e[t]);if(fP)for(var t of fP(e))sZ.call(e,t)&&hP(n,t,e[t]);return n},oZ=(n,e)=>nZ(n,iZ(e)),pP,mP;typeof window<"u"&&((pP=window.document)!=null&&pP.createElement||((mP=window.navigator)==null?void 0:mP.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function lI(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=lI(i,e,t);if(r)return r;i=e?null:i.sibling}}function uI(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const gP=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=gP;return}return gP.apply(this,arguments)};const vM=uI(K.createContext(null));class cI extends K.Component{render(){return K.createElement(vM.Provider,{value:this._reactInternals},this.props.children)}}function aZ(){const n=K.useContext(vM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=lI(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function lZ(){const n=aZ(),[e]=K.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==vM&&!e.has(r)&&e.set(r,K.useContext(uI(r)))}t=t.return}return e}function uZ(){const n=lZ();return K.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>K.createElement(e,null,K.createElement(t.Provider,oZ(dP({},i),{value:n.get(t)}))),e=>K.createElement(cI,dP({},e))),[n])}const Z_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function cZ(n){const{handlePointer:e}=B9(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Z_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=Z_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Z_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const fZ=K.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=cZ,eventSource:a,eventPrefix:l,shadows:c,linear:f,flat:p,legacy:m,orthographic:v,frameloop:y,dpr:_,performance:S,raycaster:T,camera:M,onPointerMissed:b,onCreated:C,...k},I){K.useMemo(()=>R9(_9),[]);const z=uZ(),[A,O]=K9({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=K.useRef(null),$=K.useRef(null);K.useImperativeHandle(I,()=>U.current);const Y=Kk(b),[te,J]=K.useState(!1),[ae,ce]=K.useState(!1);if(te)throw te;if(ae)throw ae;const ye=K.useRef(null);Vp(()=>{const X=U.current;O.width>0&&O.height>0&&X&&(ye.current||(ye.current=Y9(X)),ye.current.configure({gl:s,events:o,shadows:c,linear:f,flat:p,legacy:m,orthographic:v,frameloop:y,dpr:_,performance:S,raycaster:T,camera:M,size:O,onPointerMissed:(...H)=>Y.current==null?void 0:Y.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(a?I9(a)?a.current:a:$.current),l&&H.setEvents({compute:(W,j)=>{const se=W[l+"X"],ee=W[l+"Y"];j.pointer.set(se/j.size.width*2-1,-(ee/j.size.height)*2+1),j.raycaster.setFromCamera(j.pointer,j.camera)}}),C==null||C(H)}}),ye.current.render(K.createElement(z,null,K.createElement(Jk,{set:ce},K.createElement(K.Suspense,{fallback:K.createElement(D9,{set:J})},e)))))}),K.useEffect(()=>{const X=U.current;if(X)return()=>oI(X)},[]);const F=a?"none":"auto";return K.createElement("div",Of({ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...r}},k),K.createElement("div",{ref:A,style:{width:"100%",height:"100%"}},K.createElement("canvas",{ref:U,style:{display:"block"}},t)))}),hZ=K.forwardRef(function(e,t){return K.createElement(cI,null,K.createElement(fZ,Of({},e,{ref:t})))});var dZ=Object.defineProperty,pZ=(n,e,t)=>e in n?dZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mZ=(n,e,t)=>(pZ(n,typeof e!="symbol"?e+"":e,t),t);class gZ{constructor(){mZ(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var vZ=Object.defineProperty,yZ=(n,e,t)=>e in n?vZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mt=(n,e,t)=>(yZ(n,typeof e!="symbol"?e+"":e,t),t);const Og=new Wf,vP=new ca,_Z=Math.cos(70*(Math.PI/180)),yP=(n,e)=>(n%e+e)%e;let xZ=class extends gZ{constructor(e,t){super(),Mt(this,"object"),Mt(this,"domElement"),Mt(this,"enabled",!0),Mt(this,"target",new ne),Mt(this,"minDistance",0),Mt(this,"maxDistance",1/0),Mt(this,"minZoom",0),Mt(this,"maxZoom",1/0),Mt(this,"minPolarAngle",0),Mt(this,"maxPolarAngle",Math.PI),Mt(this,"minAzimuthAngle",-1/0),Mt(this,"maxAzimuthAngle",1/0),Mt(this,"enableDamping",!1),Mt(this,"dampingFactor",.05),Mt(this,"enableZoom",!0),Mt(this,"zoomSpeed",1),Mt(this,"enableRotate",!0),Mt(this,"rotateSpeed",1),Mt(this,"enablePan",!0),Mt(this,"panSpeed",1),Mt(this,"screenSpacePanning",!0),Mt(this,"keyPanSpeed",7),Mt(this,"zoomToCursor",!1),Mt(this,"autoRotate",!1),Mt(this,"autoRotateSpeed",2),Mt(this,"reverseOrbit",!1),Mt(this,"reverseHorizontalOrbit",!1),Mt(this,"reverseVerticalOrbit",!1),Mt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mt(this,"mouseButtons",{LEFT:Mu.ROTATE,MIDDLE:Mu.DOLLY,RIGHT:Mu.PAN}),Mt(this,"touches",{ONE:bu.ROTATE,TWO:bu.DOLLY_PAN}),Mt(this,"target0"),Mt(this,"position0"),Mt(this,"zoom0"),Mt(this,"_domElementKeyEvents",null),Mt(this,"getPolarAngle"),Mt(this,"getAzimuthalAngle"),Mt(this,"setPolarAngle"),Mt(this,"setAzimuthalAngle"),Mt(this,"getDistance"),Mt(this,"getZoomScale"),Mt(this,"listenToKeyEvents"),Mt(this,"stopListenToKeyEvents"),Mt(this,"saveState"),Mt(this,"reset"),Mt(this,"update"),Mt(this,"connect"),Mt(this,"dispose"),Mt(this,"dollyIn"),Mt(this,"dollyOut"),Mt(this,"getScale"),Mt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=oe=>{let Le=yP(oe,2*Math.PI),tt=f.phi;tt<0&&(tt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let re=Math.abs(Le-tt);2*Math.PI-re<re&&(Le<tt?Le+=2*Math.PI:tt+=2*Math.PI),p.phi=Le-tt,i.update()},this.setAzimuthalAngle=oe=>{let Le=yP(oe,2*Math.PI),tt=f.theta;tt<0&&(tt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let re=Math.abs(Le-tt);2*Math.PI-re<re&&(Le<tt?Le+=2*Math.PI:tt+=2*Math.PI),p.theta=Le-tt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=oe=>{oe.addEventListener("keydown",He),this._domElementKeyEvents=oe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",He),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const oe=new ne,Le=new ne(0,1,0),tt=new fr().setFromUnitVectors(e.up,Le),re=tt.clone().invert(),xe=new ne,Be=new fr,nt=2*Math.PI;return function(){const Ft=i.object.position;tt.setFromUnitVectors(e.up,Le),re.copy(tt).invert(),oe.copy(Ft).sub(i.target),oe.applyQuaternion(tt),f.setFromVector3(oe),i.autoRotate&&l===a.NONE&&J(Y()),i.enableDamping?(f.theta+=p.theta*i.dampingFactor,f.phi+=p.phi*i.dampingFactor):(f.theta+=p.theta,f.phi+=p.phi);let Rt=i.minAzimuthAngle,Dt=i.maxAzimuthAngle;isFinite(Rt)&&isFinite(Dt)&&(Rt<-Math.PI?Rt+=nt:Rt>Math.PI&&(Rt-=nt),Dt<-Math.PI?Dt+=nt:Dt>Math.PI&&(Dt-=nt),Rt<=Dt?f.theta=Math.max(Rt,Math.min(Dt,f.theta)):f.theta=f.theta>(Rt+Dt)/2?Math.max(Rt,f.theta):Math.min(Dt,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),i.zoomToCursor&&O||i.object.isOrthographicCamera?f.radius=se(f.radius):f.radius=se(f.radius*m),oe.setFromSpherical(f),oe.applyQuaternion(re),Ft.copy(i.target).add(oe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),v.set(0,0,0));let kt=!1;if(i.zoomToCursor&&O){let Jt=null;if(i.object instanceof ii&&i.object.isPerspectiveCamera){const At=oe.length();Jt=se(At*m);const Ut=At-Jt;i.object.position.addScaledVector(z,Ut),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const At=new ne(A.x,A.y,0);At.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix(),kt=!0;const Ut=new ne(A.x,A.y,0);Ut.unproject(i.object),i.object.position.sub(Ut).add(At),i.object.updateMatrixWorld(),Jt=oe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Jt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Jt).add(i.object.position):(Og.origin.copy(i.object.position),Og.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Og.direction))<_Z?e.lookAt(i.target):(vP.setFromNormalAndCoplanarPoint(i.object.up,i.target),Og.intersectPlane(vP,i.target))))}else i.object instanceof Ll&&i.object.isOrthographicCamera&&(kt=m!==1,kt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix()));return m=1,O=!1,kt||xe.distanceToSquared(i.object.position)>c||8*(1-Be.dot(i.object.quaternion))>c?(i.dispatchEvent(r),xe.copy(i.object.position),Be.copy(i.object.quaternion),kt=!1,!0):!1}})(),this.connect=oe=>{i.domElement=oe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",st),i.domElement.addEventListener("pointerdown",q),i.domElement.addEventListener("pointercancel",pe),i.domElement.addEventListener("wheel",je)},this.dispose=()=>{var oe,Le,tt,re,xe,Be;i.domElement&&(i.domElement.style.touchAction="auto"),(oe=i.domElement)==null||oe.removeEventListener("contextmenu",st),(Le=i.domElement)==null||Le.removeEventListener("pointerdown",q),(tt=i.domElement)==null||tt.removeEventListener("pointercancel",pe),(re=i.domElement)==null||re.removeEventListener("wheel",je),(xe=i.domElement)==null||xe.ownerDocument.removeEventListener("pointermove",B),(Be=i.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",pe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",He)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,f=new K1,p=new K1;let m=1;const v=new ne,y=new Ge,_=new Ge,S=new Ge,T=new Ge,M=new Ge,b=new Ge,C=new Ge,k=new Ge,I=new Ge,z=new ne,A=new Ge;let O=!1;const U=[],$={};function Y(){return 2*Math.PI/60/60*i.autoRotateSpeed}function te(){return Math.pow(.95,i.zoomSpeed)}function J(oe){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=oe:p.theta-=oe}function ae(oe){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=oe:p.phi-=oe}const ce=(()=>{const oe=new ne;return function(tt,re){oe.setFromMatrixColumn(re,0),oe.multiplyScalar(-tt),v.add(oe)}})(),ye=(()=>{const oe=new ne;return function(tt,re){i.screenSpacePanning===!0?oe.setFromMatrixColumn(re,1):(oe.setFromMatrixColumn(re,0),oe.crossVectors(i.object.up,oe)),oe.multiplyScalar(tt),v.add(oe)}})(),F=(()=>{const oe=new ne;return function(tt,re){const xe=i.domElement;if(xe&&i.object instanceof ii&&i.object.isPerspectiveCamera){const Be=i.object.position;oe.copy(Be).sub(i.target);let nt=oe.length();nt*=Math.tan(i.object.fov/2*Math.PI/180),ce(2*tt*nt/xe.clientHeight,i.object.matrix),ye(2*re*nt/xe.clientHeight,i.object.matrix)}else xe&&i.object instanceof Ll&&i.object.isOrthographicCamera?(ce(tt*(i.object.right-i.object.left)/i.object.zoom/xe.clientWidth,i.object.matrix),ye(re*(i.object.top-i.object.bottom)/i.object.zoom/xe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(oe){i.object instanceof ii&&i.object.isPerspectiveCamera||i.object instanceof Ll&&i.object.isOrthographicCamera?m=oe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(oe){X(m/oe)}function W(oe){X(m*oe)}function j(oe){if(!i.zoomToCursor||!i.domElement)return;O=!0;const Le=i.domElement.getBoundingClientRect(),tt=oe.clientX-Le.left,re=oe.clientY-Le.top,xe=Le.width,Be=Le.height;A.x=tt/xe*2-1,A.y=-(re/Be)*2+1,z.set(A.x,A.y,1).unproject(i.object).sub(i.object.position).normalize()}function se(oe){return Math.max(i.minDistance,Math.min(i.maxDistance,oe))}function ee(oe){y.set(oe.clientX,oe.clientY)}function Z(oe){j(oe),C.set(oe.clientX,oe.clientY)}function ue(oe){T.set(oe.clientX,oe.clientY)}function de(oe){_.set(oe.clientX,oe.clientY),S.subVectors(_,y).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(J(2*Math.PI*S.x/Le.clientHeight),ae(2*Math.PI*S.y/Le.clientHeight)),y.copy(_),i.update()}function _e(oe){k.set(oe.clientX,oe.clientY),I.subVectors(k,C),I.y>0?H(te()):I.y<0&&W(te()),C.copy(k),i.update()}function Ae(oe){M.set(oe.clientX,oe.clientY),b.subVectors(M,T).multiplyScalar(i.panSpeed),F(b.x,b.y),T.copy(M),i.update()}function Ue(oe){j(oe),oe.deltaY<0?W(te()):oe.deltaY>0&&H(te()),i.update()}function ke(oe){let Le=!1;switch(oe.code){case i.keys.UP:F(0,i.keyPanSpeed),Le=!0;break;case i.keys.BOTTOM:F(0,-i.keyPanSpeed),Le=!0;break;case i.keys.LEFT:F(i.keyPanSpeed,0),Le=!0;break;case i.keys.RIGHT:F(-i.keyPanSpeed,0),Le=!0;break}Le&&(oe.preventDefault(),i.update())}function he(){if(U.length==1)y.set(U[0].pageX,U[0].pageY);else{const oe=.5*(U[0].pageX+U[1].pageX),Le=.5*(U[0].pageY+U[1].pageY);y.set(oe,Le)}}function Se(){if(U.length==1)T.set(U[0].pageX,U[0].pageY);else{const oe=.5*(U[0].pageX+U[1].pageX),Le=.5*(U[0].pageY+U[1].pageY);T.set(oe,Le)}}function Fe(){const oe=U[0].pageX-U[1].pageX,Le=U[0].pageY-U[1].pageY,tt=Math.sqrt(oe*oe+Le*Le);C.set(0,tt)}function Ne(){i.enableZoom&&Fe(),i.enablePan&&Se()}function De(){i.enableZoom&&Fe(),i.enableRotate&&he()}function Ke(oe){if(U.length==1)_.set(oe.pageX,oe.pageY);else{const tt=Ze(oe),re=.5*(oe.pageX+tt.x),xe=.5*(oe.pageY+tt.y);_.set(re,xe)}S.subVectors(_,y).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(J(2*Math.PI*S.x/Le.clientHeight),ae(2*Math.PI*S.y/Le.clientHeight)),y.copy(_)}function Pe(oe){if(U.length==1)M.set(oe.pageX,oe.pageY);else{const Le=Ze(oe),tt=.5*(oe.pageX+Le.x),re=.5*(oe.pageY+Le.y);M.set(tt,re)}b.subVectors(M,T).multiplyScalar(i.panSpeed),F(b.x,b.y),T.copy(M)}function Xe(oe){const Le=Ze(oe),tt=oe.pageX-Le.x,re=oe.pageY-Le.y,xe=Math.sqrt(tt*tt+re*re);k.set(0,xe),I.set(0,Math.pow(k.y/C.y,i.zoomSpeed)),H(I.y),C.copy(k)}function Je(oe){i.enableZoom&&Xe(oe),i.enablePan&&Pe(oe)}function Oe(oe){i.enableZoom&&Xe(oe),i.enableRotate&&Ke(oe)}function q(oe){var Le,tt;i.enabled!==!1&&(U.length===0&&((Le=i.domElement)==null||Le.ownerDocument.addEventListener("pointermove",B),(tt=i.domElement)==null||tt.ownerDocument.addEventListener("pointerup",pe)),qe(oe),oe.pointerType==="touch"?We(oe):Me(oe))}function B(oe){i.enabled!==!1&&(oe.pointerType==="touch"?Te(oe):Ve(oe))}function pe(oe){var Le,tt,re;ot(oe),U.length===0&&((Le=i.domElement)==null||Le.releasePointerCapture(oe.pointerId),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",B),(re=i.domElement)==null||re.ownerDocument.removeEventListener("pointerup",pe)),i.dispatchEvent(o),l=a.NONE}function Me(oe){let Le;switch(oe.button){case 0:Le=i.mouseButtons.LEFT;break;case 1:Le=i.mouseButtons.MIDDLE;break;case 2:Le=i.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case Mu.DOLLY:if(i.enableZoom===!1)return;Z(oe),l=a.DOLLY;break;case Mu.ROTATE:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(i.enablePan===!1)return;ue(oe),l=a.PAN}else{if(i.enableRotate===!1)return;ee(oe),l=a.ROTATE}break;case Mu.PAN:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(i.enableRotate===!1)return;ee(oe),l=a.ROTATE}else{if(i.enablePan===!1)return;ue(oe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ve(oe){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;de(oe);break;case a.DOLLY:if(i.enableZoom===!1)return;_e(oe);break;case a.PAN:if(i.enablePan===!1)return;Ae(oe);break}}function je(oe){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(oe.preventDefault(),i.dispatchEvent(s),Ue(oe),i.dispatchEvent(o))}function He(oe){i.enabled===!1||i.enablePan===!1||ke(oe)}function We(oe){switch(Qe(oe),U.length){case 1:switch(i.touches.ONE){case bu.ROTATE:if(i.enableRotate===!1)return;he(),l=a.TOUCH_ROTATE;break;case bu.PAN:if(i.enablePan===!1)return;Se(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case bu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ne(),l=a.TOUCH_DOLLY_PAN;break;case bu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;De(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Te(oe){switch(Qe(oe),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ke(oe),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Pe(oe),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Je(oe),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Oe(oe),i.update();break;default:l=a.NONE}}function st(oe){i.enabled!==!1&&oe.preventDefault()}function qe(oe){U.push(oe)}function ot(oe){delete $[oe.pointerId];for(let Le=0;Le<U.length;Le++)if(U[Le].pointerId==oe.pointerId){U.splice(Le,1);return}}function Qe(oe){let Le=$[oe.pointerId];Le===void 0&&(Le=new Ge,$[oe.pointerId]=Le),Le.set(oe.pageX,oe.pageY)}function Ze(oe){const Le=oe.pointerId===U[0].pointerId?U[1]:U[0];return $[Le.pointerId]}this.dollyIn=(oe=te())=>{W(oe),i.update()},this.dollyOut=(oe=te())=>{H(oe),i.update()},this.getScale=()=>m,this.setScale=oe=>{X(oe),i.update()},this.getZoomScale=()=>te(),t!==void 0&&this.connect(t),this.update()}};function wZ(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var f=r.getTransferables;if(f===void 0&&(f=null),!n[o])try{l=l.map(function(m){return m&&m.isWorkerModule&&(e(m,function(v){if(v instanceof Error)throw v}),m=n[m.id].value),m}),c=i("<"+a+">.init",c),f&&(f=i("<"+a+">.getTransferables",f));var p=null;typeof c=="function"?p=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:p,getTransferables:f},s(p)}catch(m){m&&m.noLog||console.error(m),s(m)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(f,function(p){return s(p instanceof Error?p:new Error(""+p))}):f(c)}catch(p){s(p)}function f(p){try{var m=n[a].getTransferables&&n[a].getTransferables(p);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),s(p,m)}catch(v){console.error(v),s(v)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,f){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},f||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function SZ(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var fI=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return fI=function(){return n},n},MZ=0,bZ=0,X_=!1,_d=Object.create(null),xd=Object.create(null),$1=Object.create(null);function Gp(n){if((!n||typeof n.init!="function")&&!X_)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!fI())return SZ(n);r==null&&(r="#default");var s="workerModule"+ ++MZ,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(X_=!0,c=Gp({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+cv(c)+`
)}`}),X_=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];if(!a){a=_P(r,"registerModule",l.workerModuleData);var p=function(){a=null,xd[r].delete(p)};(xd[r]||(xd[r]=new Set)).add(p)}return a.then(function(m){var v=m.isCallable;if(v)return _P(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:cv(t),getTransferables:i&&cv(i)},l}function TZ(n){xd[n]&&xd[n].forEach(function(e){e()}),_d[n]&&(_d[n].terminate(),delete _d[n])}function cv(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function EZ(n){var e=_d[n];if(!e){var t=cv(wZ);e=_d[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=$1[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete $1[s],o(r)}}return e}function _P(n,e,t){return new Promise(function(i,r){var s=++bZ;$1[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},EZ(n).postMessage({messageId:s,action:e,data:t})})}function hI(){var n=function(e){function t(X,H,W,j,se,ee,Z,ue){var de=1-Z;ue.x=de*de*X+2*de*Z*W+Z*Z*se,ue.y=de*de*H+2*de*Z*j+Z*Z*ee}function i(X,H,W,j,se,ee,Z,ue,de,_e){var Ae=1-de;_e.x=Ae*Ae*Ae*X+3*Ae*Ae*de*W+3*Ae*de*de*se+de*de*de*Z,_e.y=Ae*Ae*Ae*H+3*Ae*Ae*de*j+3*Ae*de*de*ee+de*de*de*ue}function r(X,H){for(var W=/([MLQCZ])([^MLQCZ]*)/g,j,se,ee,Z,ue;j=W.exec(X);){var de=j[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(_e){return parseFloat(_e)});switch(j[1]){case"M":Z=se=de[0],ue=ee=de[1];break;case"L":(de[0]!==Z||de[1]!==ue)&&H("L",Z,ue,Z=de[0],ue=de[1]);break;case"Q":{H("Q",Z,ue,Z=de[2],ue=de[3],de[0],de[1]);break}case"C":{H("C",Z,ue,Z=de[4],ue=de[5],de[0],de[1],de[2],de[3]);break}case"Z":(Z!==se||ue!==ee)&&H("L",Z,ue,se,ee);break}}}function s(X,H,W){W===void 0&&(W=16);var j={x:0,y:0};r(X,function(se,ee,Z,ue,de,_e,Ae,Ue,ke){switch(se){case"L":H(ee,Z,ue,de);break;case"Q":{for(var he=ee,Se=Z,Fe=1;Fe<W;Fe++)t(ee,Z,_e,Ae,ue,de,Fe/(W-1),j),H(he,Se,j.x,j.y),he=j.x,Se=j.y;break}case"C":{for(var Ne=ee,De=Z,Ke=1;Ke<W;Ke++)i(ee,Z,_e,Ae,Ue,ke,ue,de,Ke/(W-1),j),H(Ne,De,j.x,j.y),Ne=j.x,De=j.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(X,H){var W=X.getContext?X.getContext("webgl",c):X,j=l.get(W);if(!j){let Ae=function(Ne){var De=ee[Ne];if(!De&&(De=ee[Ne]=W.getExtension(Ne),!De))throw new Error(Ne+" not supported");return De},Ue=function(Ne,De){var Ke=W.createShader(De);return W.shaderSource(Ke,Ne),W.compileShader(Ke),Ke},ke=function(Ne,De,Ke,Pe){if(!Z[Ne]){var Xe={},Je={},Oe=W.createProgram();W.attachShader(Oe,Ue(De,W.VERTEX_SHADER)),W.attachShader(Oe,Ue(Ke,W.FRAGMENT_SHADER)),W.linkProgram(Oe),Z[Ne]={program:Oe,transaction:function(B){W.useProgram(Oe),B({setUniform:function(Me,Ve){for(var je=[],He=arguments.length-2;He-- >0;)je[He]=arguments[He+2];var We=Je[Ve]||(Je[Ve]=W.getUniformLocation(Oe,Ve));W["uniform"+Me].apply(W,[We].concat(je))},setAttribute:function(Me,Ve,je,He,We){var Te=Xe[Me];Te||(Te=Xe[Me]={buf:W.createBuffer(),loc:W.getAttribLocation(Oe,Me),data:null}),W.bindBuffer(W.ARRAY_BUFFER,Te.buf),W.vertexAttribPointer(Te.loc,Ve,W.FLOAT,!1,0,0),W.enableVertexAttribArray(Te.loc),se?W.vertexAttribDivisor(Te.loc,He):Ae("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Te.loc,He),We!==Te.data&&(W.bufferData(W.ARRAY_BUFFER,We,je),Te.data=We)}})}}}Z[Ne].transaction(Pe)},he=function(Ne,De){de++;try{W.activeTexture(W.TEXTURE0+de);var Ke=ue[Ne];Ke||(Ke=ue[Ne]=W.createTexture(),W.bindTexture(W.TEXTURE_2D,Ke),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST)),W.bindTexture(W.TEXTURE_2D,Ke),De(Ke,de)}finally{de--}},Se=function(Ne,De,Ke){var Pe=W.createFramebuffer();_e.push(Pe),W.bindFramebuffer(W.FRAMEBUFFER,Pe),W.activeTexture(W.TEXTURE0+De),W.bindTexture(W.TEXTURE_2D,Ne),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Ne,0);try{Ke(Pe)}finally{W.deleteFramebuffer(Pe),W.bindFramebuffer(W.FRAMEBUFFER,_e[--_e.length-1]||null)}},Fe=function(){ee={},Z={},ue={},de=-1,_e.length=0};var se=typeof WebGL2RenderingContext<"u"&&W instanceof WebGL2RenderingContext,ee={},Z={},ue={},de=-1,_e=[];W.canvas.addEventListener("webglcontextlost",function(Ne){Fe(),Ne.preventDefault()},!1),l.set(W,j={gl:W,isWebGL2:se,getExtension:Ae,withProgram:ke,withTexture:he,withTextureFramebuffer:Se,handleContextLoss:Fe})}H(j)}function p(X,H,W,j,se,ee,Z,ue){Z===void 0&&(Z=15),ue===void 0&&(ue=null),f(X,function(de){var _e=de.gl,Ae=de.withProgram,Ue=de.withTexture;Ue("copy",function(ke,he){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,se,ee,0,_e.RGBA,_e.UNSIGNED_BYTE,H),Ae("copy",o,a,function(Se){var Fe=Se.setUniform,Ne=Se.setAttribute;Ne("aUV",2,_e.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Fe("1i","image",he),_e.bindFramebuffer(_e.FRAMEBUFFER,ue||null),_e.disable(_e.BLEND),_e.colorMask(Z&8,Z&4,Z&2,Z&1),_e.viewport(W,j,se,ee),_e.scissor(W,j,se,ee),_e.drawArrays(_e.TRIANGLES,0,3)})})})}function m(X,H,W){var j=X.width,se=X.height;f(X,function(ee){var Z=ee.gl,ue=new Uint8Array(j*se*4);Z.readPixels(0,0,j,se,Z.RGBA,Z.UNSIGNED_BYTE,ue),X.width=H,X.height=W,p(Z,ue,0,0,j,se)})}var v=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:p,resizeWebGLCanvasWithoutClearing:m});function y(X,H,W,j,se,ee){ee===void 0&&(ee=1);var Z=new Uint8Array(X*H),ue=j[2]-j[0],de=j[3]-j[1],_e=[];s(W,function(Ne,De,Ke,Pe){_e.push({x1:Ne,y1:De,x2:Ke,y2:Pe,minX:Math.min(Ne,Ke),minY:Math.min(De,Pe),maxX:Math.max(Ne,Ke),maxY:Math.max(De,Pe)})}),_e.sort(function(Ne,De){return Ne.maxX-De.maxX});for(var Ae=0;Ae<X;Ae++)for(var Ue=0;Ue<H;Ue++){var ke=Se(j[0]+ue*(Ae+.5)/X,j[1]+de*(Ue+.5)/H),he=Math.pow(1-Math.abs(ke)/se,ee)/2;ke<0&&(he=1-he),he=Math.max(0,Math.min(255,Math.round(he*255))),Z[Ue*X+Ae]=he}return Z;function Se(Ne,De){for(var Ke=1/0,Pe=1/0,Xe=_e.length;Xe--;){var Je=_e[Xe];if(Je.maxX+Pe<=Ne)break;if(Ne+Pe>Je.minX&&De-Pe<Je.maxY&&De+Pe>Je.minY){var Oe=T(Ne,De,Je.x1,Je.y1,Je.x2,Je.y2);Oe<Ke&&(Ke=Oe,Pe=Math.sqrt(Ke))}}return Fe(Ne,De)&&(Pe=-Pe),Pe}function Fe(Ne,De){for(var Ke=0,Pe=_e.length;Pe--;){var Xe=_e[Pe];if(Xe.maxX<=Ne)break;var Je=Xe.y1>De!=Xe.y2>De&&Ne<(Xe.x2-Xe.x1)*(De-Xe.y1)/(Xe.y2-Xe.y1)+Xe.x1;Je&&(Ke+=Xe.y1<Xe.y2?1:-1)}return Ke!==0}}function _(X,H,W,j,se,ee,Z,ue,de,_e){ee===void 0&&(ee=1),ue===void 0&&(ue=0),de===void 0&&(de=0),_e===void 0&&(_e=0),S(X,H,W,j,se,ee,Z,null,ue,de,_e)}function S(X,H,W,j,se,ee,Z,ue,de,_e,Ae){ee===void 0&&(ee=1),de===void 0&&(de=0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0);for(var Ue=y(X,H,W,j,se,ee),ke=new Uint8Array(Ue.length*4),he=0;he<Ue.length;he++)ke[he*4+Ae]=Ue[he];p(Z,ke,de,_e,X,H,1<<3-Ae,ue)}function T(X,H,W,j,se,ee){var Z=se-W,ue=ee-j,de=Z*Z+ue*ue,_e=de?Math.max(0,Math.min(1,((X-W)*Z+(H-j)*ue)/de)):0,Ae=X-(W+_e*Z),Ue=H-(j+_e*ue);return Ae*Ae+Ue*Ue}var M=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:_,generateIntoFramebuffer:S}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",k="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",I=new Float32Array([0,0,2,0,0,2]),z=null,A=!1,O={},U=new WeakMap;function $(X){if(!A&&!ae(X))throw new Error("WebGL generation not supported")}function Y(X,H,W,j,se,ee,Z){if(ee===void 0&&(ee=1),Z===void 0&&(Z=null),!Z&&(Z=z,!Z)){var ue=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ue)throw new Error("OffscreenCanvas or DOM canvas not supported");Z=z=ue.getContext("webgl",{depth:!1})}$(Z);var de=new Uint8Array(X*H*4);f(Z,function(ke){var he=ke.gl,Se=ke.withTexture,Fe=ke.withTextureFramebuffer;Se("readable",function(Ne,De){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,X,H,0,he.RGBA,he.UNSIGNED_BYTE,null),Fe(Ne,De,function(Ke){J(X,H,W,j,se,ee,he,Ke,0,0,0),he.readPixels(0,0,X,H,he.RGBA,he.UNSIGNED_BYTE,de)})})});for(var _e=new Uint8Array(X*H),Ae=0,Ue=0;Ae<de.length;Ae+=4)_e[Ue++]=de[Ae];return _e}function te(X,H,W,j,se,ee,Z,ue,de,_e){ee===void 0&&(ee=1),ue===void 0&&(ue=0),de===void 0&&(de=0),_e===void 0&&(_e=0),J(X,H,W,j,se,ee,Z,null,ue,de,_e)}function J(X,H,W,j,se,ee,Z,ue,de,_e,Ae){ee===void 0&&(ee=1),de===void 0&&(de=0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0),$(Z);var Ue=[];s(W,function(ke,he,Se,Fe){Ue.push(ke,he,Se,Fe)}),Ue=new Float32Array(Ue),f(Z,function(ke){var he=ke.gl,Se=ke.isWebGL2,Fe=ke.getExtension,Ne=ke.withProgram,De=ke.withTexture,Ke=ke.withTextureFramebuffer,Pe=ke.handleContextLoss;if(De("rawDistances",function(Xe,Je){(X!==Xe._lastWidth||H!==Xe._lastHeight)&&he.texImage2D(he.TEXTURE_2D,0,he.RGBA,Xe._lastWidth=X,Xe._lastHeight=H,0,he.RGBA,he.UNSIGNED_BYTE,null),Ne("main",b,C,function(Oe){var q=Oe.setAttribute,B=Oe.setUniform,pe=!Se&&Fe("ANGLE_instanced_arrays"),Me=!Se&&Fe("EXT_blend_minmax");q("aUV",2,he.STATIC_DRAW,0,I),q("aLineSegment",4,he.DYNAMIC_DRAW,1,Ue),B.apply(void 0,["4f","uGlyphBounds"].concat(j)),B("1f","uMaxDistance",se),B("1f","uExponent",ee),Ke(Xe,Je,function(Ve){he.enable(he.BLEND),he.colorMask(!0,!0,!0,!0),he.viewport(0,0,X,H),he.scissor(0,0,X,H),he.blendFunc(he.ONE,he.ONE),he.blendEquationSeparate(he.FUNC_ADD,Se?he.MAX:Me.MAX_EXT),he.clear(he.COLOR_BUFFER_BIT),Se?he.drawArraysInstanced(he.TRIANGLES,0,3,Ue.length/4):pe.drawArraysInstancedANGLE(he.TRIANGLES,0,3,Ue.length/4)})}),Ne("post",o,k,function(Oe){Oe.setAttribute("aUV",2,he.STATIC_DRAW,0,I),Oe.setUniform("1i","tex",Je),he.bindFramebuffer(he.FRAMEBUFFER,ue),he.disable(he.BLEND),he.colorMask(Ae===0,Ae===1,Ae===2,Ae===3),he.viewport(de,_e,X,H),he.scissor(de,_e,X,H),he.drawArrays(he.TRIANGLES,0,3)})}),he.isContextLost())throw Pe(),new Error("webgl context lost")})}function ae(X){var H=!X||X===z?O:X.canvas||X,W=U.get(H);if(W===void 0){A=!0;var j=null;try{var se=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ee=Y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,X);W=ee&&se.length===ee.length&&ee.every(function(Z,ue){return Z===se[ue]}),W||(j="bad trial run results",console.info(se,ee))}catch(Z){W=!1,j=Z.message}j&&console.warn("WebGL SDF generation not supported:",j),A=!1,U.set(H,W)}return W}var ce=Object.freeze({__proto__:null,generate:Y,generateIntoCanvas:te,generateIntoFramebuffer:J,isSupported:ae});function ye(X,H,W,j,se,ee){se===void 0&&(se=Math.max(j[2]-j[0],j[3]-j[1])/2),ee===void 0&&(ee=1);try{return Y.apply(ce,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),y.apply(M,arguments)}}function F(X,H,W,j,se,ee,Z,ue,de,_e){se===void 0&&(se=Math.max(j[2]-j[0],j[3]-j[1])/2),ee===void 0&&(ee=1),ue===void 0&&(ue=0),de===void 0&&(de=0),_e===void 0&&(_e=0);try{return te.apply(ce,arguments)}catch(Ae){return console.info("WebGL SDF generation failed, falling back to JS",Ae),_.apply(M,arguments)}}return e.forEachPathCommand=r,e.generate=ye,e.generateIntoCanvas=F,e.javascript=M,e.pathToLineSegments=s,e.webgl=ce,e.webglUtils=v,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function PZ(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Pe,Xe){i[Pe]=1<<Xe+1,r[i[Pe]]=Pe}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,f=null;function p(){if(!f){f=new Map;var Pe=function(Je){if(t.hasOwnProperty(Je)){var Oe=0;t[Je].split(",").forEach(function(q){var B=q.split("+"),pe=B[0],Me=B[1];pe=parseInt(pe,36),Me=Me?parseInt(Me,36):0,f.set(Oe+=pe,i[Je]);for(var Ve=0;Ve<Me;Ve++)f.set(++Oe,i[Je])})}};for(var Xe in t)Pe(Xe)}}function m(Pe){return p(),f.get(Pe.codePointAt(0))||i.L}function v(Pe){return r[m(Pe)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(Pe,Xe){var Je=36,Oe=0,q=new Map,B=Xe&&new Map,pe;return Pe.split(",").forEach(function Me(Ve){if(Ve.indexOf("+")!==-1)for(var je=+Ve;je--;)Me(pe);else{pe=Ve;var He=Ve.split(">"),We=He[0],Te=He[1];We=String.fromCodePoint(Oe+=parseInt(We,Je)),Te=String.fromCodePoint(Oe+=parseInt(Te,Je)),q.set(We,Te),Xe&&B.set(Te,We)}}),{map:q,reverseMap:B}}var S,T,M;function b(){if(!S){var Pe=_(y.pairs,!0),Xe=Pe.map,Je=Pe.reverseMap;S=Xe,T=Je,M=_(y.canonical,!1).map}}function C(Pe){return b(),S.get(Pe)||null}function k(Pe){return b(),T.get(Pe)||null}function I(Pe){return b(),M.get(Pe)||null}var z=i.L,A=i.R,O=i.EN,U=i.ES,$=i.ET,Y=i.AN,te=i.CS,J=i.B,ae=i.S,ce=i.ON,ye=i.BN,F=i.NSM,X=i.AL,H=i.LRO,W=i.RLO,j=i.LRE,se=i.RLE,ee=i.PDF,Z=i.LRI,ue=i.RLI,de=i.FSI,_e=i.PDI;function Ae(Pe,Xe){for(var Je=125,Oe=new Uint32Array(Pe.length),q=0;q<Pe.length;q++)Oe[q]=m(Pe[q]);var B=new Map;function pe(li,wi){var On=Oe[li];Oe[li]=wi,B.set(On,B.get(On)-1),On&a&&B.set(a,B.get(a)-1),B.set(wi,(B.get(wi)||0)+1),wi&a&&B.set(a,(B.get(a)||0)+1)}for(var Me=new Uint8Array(Pe.length),Ve=new Map,je=[],He=null,We=0;We<Pe.length;We++)He||je.push(He={start:We,end:Pe.length-1,level:Xe==="rtl"?1:Xe==="ltr"?0:jo(We,!1)}),Oe[We]&J&&(He.end=We,He=null);for(var Te=se|j|W|H|s|_e|ee|J,st=function(li){return li+(li&1?1:2)},qe=function(li){return li+(li&1?2:1)},ot=0;ot<je.length;ot++){He=je[ot];var Qe=[{_level:He.level,_override:0,_isolate:0}],Ze=void 0,oe=0,Le=0,tt=0;B.clear();for(var re=He.start;re<=He.end;re++){var xe=Oe[re];if(Ze=Qe[Qe.length-1],B.set(xe,(B.get(xe)||0)+1),xe&a&&B.set(a,(B.get(a)||0)+1),xe&Te)if(xe&(se|j)){Me[re]=Ze._level;var Be=(xe===se?qe:st)(Ze._level);Be<=Je&&!oe&&!Le?Qe.push({_level:Be,_override:0,_isolate:0}):oe||Le++}else if(xe&(W|H)){Me[re]=Ze._level;var nt=(xe===W?qe:st)(Ze._level);nt<=Je&&!oe&&!Le?Qe.push({_level:nt,_override:xe&W?A:z,_isolate:0}):oe||Le++}else if(xe&s){xe&de&&(xe=jo(re+1,!0)===1?ue:Z),Me[re]=Ze._level,Ze._override&&pe(re,Ze._override);var ct=(xe===ue?qe:st)(Ze._level);ct<=Je&&oe===0&&Le===0?(tt++,Qe.push({_level:ct,_override:0,_isolate:1,_isolInitIndex:re})):oe++}else if(xe&_e){if(oe>0)oe--;else if(tt>0){for(Le=0;!Qe[Qe.length-1]._isolate;)Qe.pop();var Ft=Qe[Qe.length-1]._isolInitIndex;Ft!=null&&(Ve.set(Ft,re),Ve.set(re,Ft)),Qe.pop(),tt--}Ze=Qe[Qe.length-1],Me[re]=Ze._level,Ze._override&&pe(re,Ze._override)}else xe&ee?(oe===0&&(Le>0?Le--:!Ze._isolate&&Qe.length>1&&(Qe.pop(),Ze=Qe[Qe.length-1])),Me[re]=Ze._level):xe&J&&(Me[re]=He.level);else Me[re]=Ze._level,Ze._override&&xe!==ye&&pe(re,Ze._override)}for(var Rt=[],Dt=null,kt=He.start;kt<=He.end;kt++){var Jt=Oe[kt];if(!(Jt&l)){var At=Me[kt],Ut=Jt&s,zi=Jt===_e;Dt&&At===Dt._level?(Dt._end=kt,Dt._endsWithIsolInit=Ut):Rt.push(Dt={_start:kt,_end:kt,_level:At,_startsWithPDI:zi,_endsWithIsolInit:Ut})}}for(var mi=[],$t=0;$t<Rt.length;$t++){var Q=Rt[$t];if(!Q._startsWithPDI||Q._startsWithPDI&&!Ve.has(Q._start)){for(var fe=[Dt=Q],Ee=void 0;Dt&&Dt._endsWithIsolInit&&(Ee=Ve.get(Dt._end))!=null;)for(var ge=$t+1;ge<Rt.length;ge++)if(Rt[ge]._start===Ee){fe.push(Dt=Rt[ge]);break}for(var Re=[],pt=0;pt<fe.length;pt++)for(var vt=fe[pt],bt=vt._start;bt<=vt._end;bt++)Re.push(bt);for(var Ct=Me[Re[0]],Zt=He.level,It=Re[0]-1;It>=0;It--)if(!(Oe[It]&l)){Zt=Me[It];break}var Bt=Re[Re.length-1],wn=Me[Bt],ri=He.level;if(!(Oe[Bt]&s)){for(var gi=Bt+1;gi<=He.end;gi++)if(!(Oe[gi]&l)){ri=Me[gi];break}}mi.push({_seqIndices:Re,_sosType:Math.max(Zt,Ct)%2?A:z,_eosType:Math.max(ri,wn)%2?A:z})}}for(var dr=0;dr<mi.length;dr++){var cn=mi[dr],$e=cn._seqIndices,Fi=cn._sosType,Sn=cn._eosType,si=Me[$e[0]]&1?A:z;if(B.get(F))for(var Fs=0;Fs<$e.length;Fs++){var Ki=$e[Fs];if(Oe[Ki]&F){for(var oi=Fi,sn=Fs-1;sn>=0;sn--)if(!(Oe[$e[sn]]&l)){oi=Oe[$e[sn]];break}pe(Ki,oi&(s|_e)?ce:oi)}}if(B.get(O))for(var Gt=0;Gt<$e.length;Gt++){var qt=$e[Gt];if(Oe[qt]&O)for(var yt=Gt-1;yt>=-1;yt--){var Lt=yt===-1?Fi:Oe[$e[yt]];if(Lt&o){Lt===X&&pe(qt,Y);break}}}if(B.get(X))for(var Cn=0;Cn<$e.length;Cn++){var ai=$e[Cn];Oe[ai]&X&&pe(ai,A)}if(B.get(U)||B.get(te))for(var vi=1;vi<$e.length-1;vi++){var Wn=$e[vi];if(Oe[Wn]&(U|te)){for(var wt=0,mn=0,xo=vi-1;xo>=0&&(wt=Oe[$e[xo]],!!(wt&l));xo--);for(var Qr=vi+1;Qr<$e.length&&(mn=Oe[$e[Qr]],!!(mn&l));Qr++);wt===mn&&(Oe[Wn]===U?wt===O:wt&(O|Y))&&pe(Wn,wt)}}if(B.get(O))for(var Mn=0;Mn<$e.length;Mn++){var pr=$e[Mn];if(Oe[pr]&O){for(var Us=Mn-1;Us>=0&&Oe[$e[Us]]&($|l);Us--)pe($e[Us],O);for(Mn++;Mn<$e.length&&Oe[$e[Mn]]&($|l|O);Mn++)Oe[$e[Mn]]!==O&&pe($e[Mn],O)}}if(B.get($)||B.get(U)||B.get(te))for(var mr=0;mr<$e.length;mr++){var An=$e[mr];if(Oe[An]&($|U|te)){pe(An,ce);for(var Ui=mr-1;Ui>=0&&Oe[$e[Ui]]&l;Ui--)pe($e[Ui],ce);for(var gr=mr+1;gr<$e.length&&Oe[$e[gr]]&l;gr++)pe($e[gr],ce)}}if(B.get(O))for(var vr=0,Bs=Fi;vr<$e.length;vr++){var wo=$e[vr],Vo=Oe[wo];Vo&O?Bs===z&&pe(wo,z):Vo&o&&(Bs=Vo)}if(B.get(a)){var $r=A|O|Y,Vs=$r|z,Ur=[];{for(var gs=[],yr=0;yr<$e.length;yr++)if(Oe[$e[yr]]&a){var Ht=Pe[$e[yr]],Go=void 0;if(C(Ht)!==null)if(gs.length<63)gs.push({char:Ht,seqIndex:yr});else break;else if((Go=k(Ht))!==null)for(var Gs=gs.length-1;Gs>=0;Gs--){var Et=gs[Gs].char;if(Et===Go||Et===k(I(Ht))||C(I(Et))===Ht){Ur.push([gs[Gs].seqIndex,yr]),gs.length=Gs;break}}}Ur.sort(function(li,wi){return li[0]-wi[0]})}for(var Ji=0;Ji<Ur.length;Ji++){for(var fn=Ur[Ji],bn=fn[0],Hs=fn[1],za=!1,yi=0,es=bn+1;es<Hs;es++){var Ws=$e[es];if(Oe[Ws]&Vs){za=!0;var _i=Oe[Ws]&$r?A:z;if(_i===si){yi=_i;break}}}if(za&&!yi){yi=Fi;for(var Nn=bn-1;Nn>=0;Nn--){var vs=$e[Nn];if(Oe[vs]&Vs){var Qi=Oe[vs]&$r?A:z;Qi!==si?yi=Qi:yi=si;break}}}if(yi){if(Oe[$e[bn]]=Oe[$e[Hs]]=yi,yi!==si){for(var Ai=bn+1;Ai<$e.length;Ai++)if(!(Oe[$e[Ai]]&l)){m(Pe[$e[Ai]])&F&&(Oe[$e[Ai]]=yi);break}}if(yi!==si){for(var ys=Hs+1;ys<$e.length;ys++)if(!(Oe[$e[ys]]&l)){m(Pe[$e[ys]])&F&&(Oe[$e[ys]]=yi);break}}}}for(var _r=0;_r<$e.length;_r++)if(Oe[$e[_r]]&a){for(var Ho=_r,Zl=_r,Bi=Fi,Vt=_r-1;Vt>=0;Vt--)if(Oe[$e[Vt]]&l)Ho=Vt;else{Bi=Oe[$e[Vt]]&$r?A:z;break}for(var Wo=Sn,xi=_r+1;xi<$e.length;xi++)if(Oe[$e[xi]]&(a|l))Zl=xi;else{Wo=Oe[$e[xi]]&$r?A:z;break}for(var Kn=Ho;Kn<=Zl;Kn++)Oe[$e[Kn]]=Bi===Wo?Bi:si;_r=Zl}}}for(var Jn=He.start;Jn<=He.end;Jn++){var Fa=Me[Jn],xr=Oe[Jn];if(Fa&1?xr&(z|O|Y)&&Me[Jn]++:xr&A?Me[Jn]++:xr&(Y|O)&&(Me[Jn]+=2),xr&l&&(Me[Jn]=Jn===0?He.level:Me[Jn-1]),Jn===He.end||m(Pe[Jn])&(ae|J))for(var So=Jn;So>=0&&m(Pe[So])&c;So--)Me[So]=He.level}}return{levels:Me,paragraphs:je};function jo(li,wi){for(var On=li;On<Pe.length;On++){var on=Oe[On];if(on&(A|X))return 1;if(on&(J|z)||wi&&on===_e)return 0;if(on&s){var wr=uc(On);On=wr===-1?Pe.length:wr}}return 0}function uc(li){for(var wi=1,On=li+1;On<Pe.length;On++){var on=Oe[On];if(on&J)break;if(on&_e){if(--wi===0)return On}else on&s&&wi++}return-1}}var Ue="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ke;function he(){if(!ke){var Pe=_(Ue,!0),Xe=Pe.map,Je=Pe.reverseMap;Je.forEach(function(Oe,q){Xe.set(q,Oe)}),ke=Xe}}function Se(Pe){return he(),ke.get(Pe)||null}function Fe(Pe,Xe,Je,Oe){var q=Pe.length;Je=Math.max(0,Je==null?0:+Je),Oe=Math.min(q-1,Oe==null?q-1:+Oe);for(var B=new Map,pe=Je;pe<=Oe;pe++)if(Xe[pe]&1){var Me=Se(Pe[pe]);Me!==null&&B.set(pe,Me)}return B}function Ne(Pe,Xe,Je,Oe){var q=Pe.length;Je=Math.max(0,Je==null?0:+Je),Oe=Math.min(q-1,Oe==null?q-1:+Oe);var B=[];return Xe.paragraphs.forEach(function(pe){var Me=Math.max(Je,pe.start),Ve=Math.min(Oe,pe.end);if(Me<Ve){for(var je=Xe.levels.slice(Me,Ve+1),He=Ve;He>=Me&&m(Pe[He])&c;He--)je[He]=pe.level;for(var We=pe.level,Te=1/0,st=0;st<je.length;st++){var qe=je[st];qe>We&&(We=qe),qe<Te&&(Te=qe|1)}for(var ot=We;ot>=Te;ot--)for(var Qe=0;Qe<je.length;Qe++)if(je[Qe]>=ot){for(var Ze=Qe;Qe+1<je.length&&je[Qe+1]>=ot;)Qe++;Qe>Ze&&B.push([Ze+Me,Qe+Me])}}}),B}function De(Pe,Xe,Je,Oe){var q=Ke(Pe,Xe,Je,Oe),B=[].concat(Pe);return q.forEach(function(pe,Me){B[Me]=(Xe.levels[pe]&1?Se(Pe[pe]):null)||Pe[pe]}),B.join("")}function Ke(Pe,Xe,Je,Oe){for(var q=Ne(Pe,Xe,Je,Oe),B=[],pe=0;pe<Pe.length;pe++)B[pe]=pe;return q.forEach(function(Me){for(var Ve=Me[0],je=Me[1],He=B.slice(Ve,je+1),We=He.length;We--;)B[je-We]=He[We]}),B}return e.closingToOpeningBracket=k,e.getBidiCharType=m,e.getBidiCharTypeName=v,e.getCanonicalBracket=I,e.getEmbeddingLevels=Ae,e.getMirroredCharacter=Se,e.getMirroredCharactersMap=Fe,e.getReorderSegments=Ne,e.getReorderedIndices=Ke,e.getReorderedString=De,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const dI=/\bvoid\s+main\s*\(\s*\)\s*{/g;function ew(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Wt[r];return s?ew(s):i}return n.replace(e,t)}const ji=[];for(let n=0;n<256;n++)ji[n]=(n<16?"0":"")+n.toString(16);function CZ(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ji[n&255]+ji[n>>8&255]+ji[n>>16&255]+ji[n>>24&255]+"-"+ji[e&255]+ji[e>>8&255]+"-"+ji[e>>16&15|64]+ji[e>>24&255]+"-"+ji[t&63|128]+ji[t>>8&255]+"-"+ji[t>>16&255]+ji[t>>24&255]+ji[i&255]+ji[i>>8&255]+ji[i>>16&255]+ji[i>>24&255]).toUpperCase()}const xu=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},AZ=Date.now(),xP=new WeakMap,wP=new Map;let LZ=1e10;function tw(n,e){const t=DZ(e);let i=xP.get(n);if(i||xP.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,f){n.onBeforeCompile.call(this,c,f);const p=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let m=wP[p];if(!m){const v=RZ(this,c,e,t);m=wP[p]=v}c.vertexShader=m.vertexShader,c.fragmentShader=m.fragmentShader,xu(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-AZ}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const f=Object.create(c,l);return Object.defineProperty(f,"baseMaterial",{value:n}),Object.defineProperty(f,"id",{value:LZ++}),f.uuid=CZ(),f.uniforms=xu({},c.uniforms,e.uniforms),f.defines=xu({},c.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=xu({},c.extensions,e.extensions),f._listeners=void 0,f},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(xu(this.extensions,c.extensions),xu(this.defines,c.defines),xu(this.uniforms,jS.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=tw(n.isDerivedMaterial?n.getDepthMaterial():new R0({depthPacking:FS}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=tw(n.isDerivedMaterial?n.getDistanceMaterial():new k0,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:f}=this;c&&c.dispose(),f&&f.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function RZ(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:f,fragmentMainOutro:p,fragmentColorTransform:m,customRewriter:v,timeUniform:y}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",f=f||"",p=p||"",(l||v)&&(e=ew(e)),(m||v)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=ew(t)),v){let _=v({vertexShader:e,fragmentShader:t});e=_.vertexShader,t=_.fragmentShader}if(m){let _=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(_.push(S),"")),p=`${m}
${_.join(`
`)}
${p}`}if(y){const _=`
uniform float ${y};
`;s=_+s,c=_+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,S,T,M)=>/\battribute\s+vec[23]\s+$/.test(M.substr(0,T))?S:`troika_${S}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=SP(e,r,s,o,a),t=SP(t,r,c,f,p),{vertexShader:e,fragmentShader:t}}function SP(n,e,t,i,r){return(i||r||t)&&(n=n.replace(dI,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function kZ(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let IZ=0;const MP=new Map;function DZ(n){const e=JSON.stringify(n,kZ);let t=MP.get(e);return t==null&&MP.set(e,t=++IZ),t}function NZ(n,e,t){const{defaultFontURL:i}=t,r=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(M,b){function C(){const k=I=>{console.error(`Failure loading font ${M}${M===i?"":"; trying fallback"}`,I),M!==i&&(M=i,C())};try{const I=new XMLHttpRequest;I.open("get",M,!0),I.responseType="arraybuffer",I.onload=function(){if(I.status>=400)k(new Error(I.statusText));else if(I.status>0)try{const z=n(I.response);b(z)}catch(z){k(z)}},I.onerror=k,I.send()}catch(I){k(I)}}C()}function f(M,b){M||(M=i);let C=r[M];C?C.pending?C.pending.push(b):b(C):(r[M]={pending:[b]},c(M,k=>{let I=r[M].pending;r[M]=k,I.forEach(z=>z(k))}))}function p({text:M="",font:b=i,sdfGlyphSize:C=64,fontSize:k=1,letterSpacing:I=0,lineHeight:z="normal",maxWidth:A=s,direction:O,textAlign:U="left",textIndent:$=0,whiteSpace:Y="normal",overflowWrap:te="normal",anchorX:J=0,anchorY:ae=0,includeCaretPositions:ce=!1,chunkedBoundsSize:ye=8192,colorRanges:F=null},X,H=!1){const W=_(),j={fontLoad:0,typesetting:0};M.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),M=M.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),k=+k,I=+I,A=+A,z=z||"normal",$=+$,f(b,se=>{const ee=isFinite(A);let Z=null,ue=null,de=null,_e=null,Ae=null,Ue=null,ke=null,he=0,Se=0,Fe=Y!=="nowrap";const{ascender:Ne,descender:De,unitsPerEm:Ke,lineGap:Pe,capHeight:Xe,xHeight:Je}=se;j.fontLoad=_()-W;const Oe=_(),q=k/Ke;z==="normal"&&(z=(Ne-De+Pe)/Ke),z=z*k;const B=(z-(Ne-De)*q)/2,pe=-(Ne*q+B),Me=Math.min(z,(Ne-De)*q),Ve=(Ne+De)/2*q-Me/2;let je=$,He=new S;const We=[He];se.forEachGlyph(M,k,I,(qe,ot,Qe)=>{const Ze=M.charAt(Qe),oe=qe.advanceWidth*q,Le=He.count;let tt;if("isEmpty"in qe||(qe.isWhitespace=!!Ze&&new RegExp(a).test(Ze),qe.canBreakAfter=!!Ze&&l.test(Ze),qe.isEmpty=qe.xMin===qe.xMax||qe.yMin===qe.yMax||o.test(Ze)),!qe.isWhitespace&&!qe.isEmpty&&Se++,Fe&&ee&&!qe.isWhitespace&&ot+oe+je>A&&Le){if(He.glyphAt(Le-1).glyphObj.canBreakAfter)tt=new S,je=-ot;else for(let xe=Le;xe--;)if(xe===0&&te==="break-word"){tt=new S,je=-ot;break}else if(He.glyphAt(xe).glyphObj.canBreakAfter){tt=He.splitAt(xe+1);const Be=tt.glyphAt(0).x;je-=Be;for(let nt=tt.count;nt--;)tt.glyphAt(nt).x-=Be;break}tt&&(He.isSoftWrapped=!0,He=tt,We.push(He),he=A)}let re=He.glyphAt(He.count);re.glyphObj=qe,re.x=ot+je,re.width=oe,re.charIndex=Qe,Ze===`
`&&(He=new S,We.push(He),je=-(ot+oe+I*k)+$)}),We.forEach(qe=>{for(let ot=qe.count;ot--;){let{glyphObj:Qe,x:Ze,width:oe}=qe.glyphAt(ot);if(!Qe.isWhitespace){qe.width=Ze+oe,qe.width>he&&(he=qe.width);return}}});let Te=0,st=0;if(J&&(typeof J=="number"?Te=-J:typeof J=="string"&&(Te=-he*(J==="left"?0:J==="center"?.5:J==="right"?1:v(J)))),ae){if(typeof ae=="number")st=-ae;else if(typeof ae=="string"){let qe=We.length*z;st=ae==="top"?0:ae==="top-baseline"?-pe:ae==="top-cap"?-pe-Xe*q:ae==="top-ex"?-pe-Je*q:ae==="middle"?qe/2:ae==="bottom"?qe:ae==="bottom-baseline"?qe-B+De*q:v(ae)*qe}}if(!H){const qe=e.getEmbeddingLevels(M,O);Z=new Uint16Array(Se),ue=new Float32Array(Se*2),de={},Ue=[s,s,-s,-s],ke=[];let ot=pe;ce&&(Ae=new Float32Array(M.length*3)),F&&(_e=new Uint8Array(Se*3));let Qe=0,Ze=-1,oe=-1,Le,tt;if(We.forEach((re,xe)=>{let{count:Be,width:nt}=re;if(Be>0){let ct=0;for(let At=Be;At--&&re.glyphAt(At).glyphObj.isWhitespace;)ct++;let Ft=0,Rt=0;if(U==="center")Ft=(he-nt)/2;else if(U==="right")Ft=he-nt;else if(U==="justify"&&re.isSoftWrapped){let At=0;for(let Ut=Be-ct;Ut--;)re.glyphAt(Ut).glyphObj.isWhitespace&&At++;Rt=(he-nt)/At}if(Rt||Ft){let At=0;for(let Ut=0;Ut<Be;Ut++){let zi=re.glyphAt(Ut);const mi=zi.glyphObj;zi.x+=Ft+At,Rt!==0&&mi.isWhitespace&&Ut<Be-ct&&(At+=Rt,zi.width+=Rt)}}const Dt=e.getReorderSegments(M,qe,re.glyphAt(0).charIndex,re.glyphAt(re.count-1).charIndex);for(let At=0;At<Dt.length;At++){const[Ut,zi]=Dt[At];let mi=1/0,$t=-1/0;for(let Q=0;Q<Be;Q++)if(re.glyphAt(Q).charIndex>=Ut){let fe=Q,Ee=Q;for(;Ee<Be;Ee++){let ge=re.glyphAt(Ee);if(ge.charIndex>zi)break;Ee<Be-ct&&(mi=Math.min(mi,ge.x),$t=Math.max($t,ge.x+ge.width))}for(let ge=fe;ge<Ee;ge++){const Re=re.glyphAt(ge);Re.x=$t-(Re.x+Re.width-mi)}break}}let kt;const Jt=At=>kt=At;for(let At=0;At<Be;At++){let Ut=re.glyphAt(At);kt=Ut.glyphObj;const zi=kt.index,mi=qe.levels[Ut.charIndex]&1;if(mi){const $t=e.getMirroredCharacter(M[Ut.charIndex]);$t&&se.forEachGlyph($t,0,0,Jt)}if(ce){const{charIndex:$t}=Ut,Q=Ut.x+Te,fe=Ut.x+Ut.width+Te;Ae[$t*3]=mi?fe:Q,Ae[$t*3+1]=mi?Q:fe,Ae[$t*3+2]=ot+Ve+st;const Ee=$t-Ze;Ee>1&&y(Ae,Ze,Ee),Ze=$t}if(F){const{charIndex:$t}=Ut;for(;$t>oe;)oe++,F.hasOwnProperty(oe)&&(tt=F[oe])}if(!kt.isWhitespace&&!kt.isEmpty){const $t=Qe++;de[zi]||(de[zi]={path:kt.path,pathBounds:[kt.xMin,kt.yMin,kt.xMax,kt.yMax]});const Q=Ut.x+Te,fe=ot+st;ue[$t*2]=Q,ue[$t*2+1]=fe;const Ee=Q+kt.xMin*q,ge=fe+kt.yMin*q,Re=Q+kt.xMax*q,pt=fe+kt.yMax*q;Ee<Ue[0]&&(Ue[0]=Ee),ge<Ue[1]&&(Ue[1]=ge),Re>Ue[2]&&(Ue[2]=Re),pt>Ue[3]&&(Ue[3]=pt),$t%ye===0&&(Le={start:$t,end:$t,rect:[s,s,-s,-s]},ke.push(Le)),Le.end++;const vt=Le.rect;if(Ee<vt[0]&&(vt[0]=Ee),ge<vt[1]&&(vt[1]=ge),Re>vt[2]&&(vt[2]=Re),pt>vt[3]&&(vt[3]=pt),Z[$t]=zi,F){const bt=$t*3;_e[bt]=tt>>16&255,_e[bt+1]=tt>>8&255,_e[bt+2]=tt&255}}}}ot-=z}),Ae){const re=M.length-Ze;re>1&&y(Ae,Ze,re)}}j.typesetting=_()-Oe,X({glyphIds:Z,glyphPositions:ue,glyphData:de,caretPositions:Ae,caretHeight:Me,glyphColors:_e,chunkedBounds:ke,fontSize:k,unitsPerEm:Ke,ascender:Ne*q,descender:De*q,capHeight:Xe*q,xHeight:Je*q,lineHeight:z,topBaseline:pe,blockBounds:[Te,st-We.length*z,Te+he,st],visibleBounds:Ue,timings:j})})}function m(M,b){p(M,C=>{const[k,I,z,A]=C.blockBounds;b({width:z-k,height:A-I})},{metricsOnly:!0})}function v(M){let b=M.match(/^([\d.]+)%$/),C=b?parseFloat(b[1]):NaN;return isNaN(C)?0:C/100}function y(M,b,C){const k=M[b*3],I=M[b*3+1],z=M[b*3+2],A=(I-k)/C;for(let O=0;O<C;O++){const U=(b+O)*3;M[U]=k+A*O,M[U+1]=k+A*(O+1),M[U+2]=z}}function _(){return(self.performance||Date).now()}function S(){this.data=[]}const T=["glyphObj","x","width","charIndex"];return S.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/T.length)},glyphAt(M){let b=S.flyweight;return b.data=this.data,b.index=M,b},splitAt(M){let b=new S;return b.data=this.data.splice(M*T.length),b}},S.flyweight=T.reduce((M,b,C,k)=>(Object.defineProperty(M,b,{get(){return this.data[this.index*T.length+C]},set(I){this.data[this.index*T.length+C]=I}}),M),{data:null,index:0}),{typeset:p,measure:m,loadFont:f}}const Wu=()=>(self.performance||Date).now(),H0=hI();let bP;function OZ(n,e,t,i,r,s,o,a,l,c,f=!0){return f?FZ(n,e,t,i,r,s,o,a,l,c).then(null,p=>(bP||(console.warn("WebGL SDF generation failed, falling back to JS",p),bP=!0),EP(n,e,t,i,r,s,o,a,l,c))):EP(n,e,t,i,r,s,o,a,l,c)}const fv=[],zZ=5;let nw=0;function pI(){const n=Wu();for(;fv.length&&Wu()-n<zZ;)fv.shift()();nw=fv.length?setTimeout(pI,0):0}const FZ=(...n)=>new Promise((e,t)=>{fv.push(()=>{const i=Wu();try{H0.webgl.generateIntoCanvas(...n),e({timing:Wu()-i})}catch(r){t(r)}}),nw||(nw=setTimeout(pI,0))}),UZ=4,BZ=2e3,TP={};let VZ=0;function EP(n,e,t,i,r,s,o,a,l,c){const f="TroikaTextSDFGenerator_JS_"+VZ++%UZ;let p=TP[f];return p||(p=TP[f]={workerModule:Gp({name:f,workerId:f,dependencies:[hI,Wu],init(m,v){const y=m().javascript.generate;return function(..._){const S=v();return{textureData:y(..._),timing:v()-S}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(n,e,t,i,r,s).then(({textureData:m,timing:v})=>{const y=Wu(),_=new Uint8Array(m.length*4);for(let S=0;S<m.length;S++)_[S*4+c]=m[S];return H0.webglUtils.renderImageData(o,_,a,l,n,e,1<<3-c),v+=Wu()-y,--p.requests===0&&(p.idleTimer=setTimeout(()=>{TZ(f)},BZ)),{timing:v}})}function GZ(n){n._warm||(H0.webgl.isSupported(n),n._warm=!0)}const HZ=H0.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function WZ(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],f=0;f<l;f++){var p=s.readUint(o,a);a+=4,c.push(e._readFont(o,p))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],f={_data:r,_offset:a},p={},m=0;m<l;m++){var v=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var y=o.readUint(r,s);s+=4;var _=o.readUint(r,s);s+=4,p[v]={offset:y,length:_}}for(m=0;m<c.length;m++){var S=c[m];p[S]&&(f[S.trim()]=e[S.trim()].parse(r,p[S].offset,p[S].length,f))}return f},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,f=0;f<l;f++){var p=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var m=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,p==s)return m}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,f={},p=s;c.readFixed(r,s),s+=4;var m=c.readUshort(r,s);s+=2;var v=c.readUshort(r,s);s+=2;var y=c.readUshort(r,s);return s+=2,f.scriptList=e._lctf.readScriptList(r,p+m),f.featureList=e._lctf.readFeatureList(r,p+v),f.lookupList=e._lctf.readLookupList(r,p+y,l),f},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var m=a.readUshort(r,s);s+=2;var v=e._lctf.readLookupTable(r,l+m,o);c.push(v)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2;for(var p=c.ltype,m=0;m<f;m++){var v=a.readUshort(r,s);s+=2;var y=o(r,p,l+v,c);c.tabs.push(y)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var f=o.readUshort(r,s);s+=2;for(var p=0;p<f;p++)a.push(c+p),a.push(c+p),a.push(o.readUshort(r,s)),s+=2}if(l==2){var m=o.readUshort(r,s);for(s+=2,p=0;p<m;p++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var p=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2;var v=e._lctf.readFeatureTable(r,a+m);v.tag=p.trim(),l.push(v)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var f=o.readUshort(r,s);s+=2,l.tab=[];for(var p=0;p<f;p++)l.tab.push(o.readUshort(r,s+2*p));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var p=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2,l[p.trim()]=e._lctf.readScriptTable(r,a+m)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,l.default=e._lctf.readLangSysTable(r,a+c);var f=o.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var m=o.readASCII(r,s,4);s+=4;var v=o.readUshort(r,s);s+=2,l[m.trim()]=e._lctf.readLangSysTable(r,a+v)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],f=0;f<l.length-1;f++)c.push(a.readASCII(r,s+l[f],l[f+1]-l[f]));s+=l[l.length-1];var p=[];s=e.CFF.readIndex(r,s,p);var m=[];for(f=0;f<p.length-1;f++)m.push(e.CFF.readDict(r,s+p[f],s+p[f+1]));s+=p[p.length-1];var v=m[0],y=[];s=e.CFF.readIndex(r,s,y);var _=[];for(f=0;f<y.length-1;f++)_.push(a.readASCII(r,s+y[f],y[f+1]-y[f]));if(s+=y[y.length-1],e.CFF.readSubrs(r,s,v),v.CharStrings){s=v.CharStrings,y=[],s=e.CFF.readIndex(r,s,y);var S=[];for(f=0;f<y.length-1;f++)S.push(a.readBytes(r,s+y[f],y[f+1]-y[f]));v.CharStrings=S}if(v.ROS){s=v.FDArray;var T=[];for(s=e.CFF.readIndex(r,s,T),v.FDArray=[],f=0;f<T.length-1;f++){var M=e.CFF.readDict(r,s+T[f],s+T[f+1]);e.CFF._readFDict(r,M,_),v.FDArray.push(M)}s+=T[T.length-1],s=v.FDSelect,v.FDSelect=[];var b=r[s];if(s++,b!=3)throw b;var C=a.readUshort(r,s);for(s+=2,f=0;f<C+1;f++)v.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return v.Encoding&&(v.Encoding=e.CFF.readEncoding(r,v.Encoding,v.CharStrings.length)),v.charset&&(v.charset=e.CFF.readCharset(r,v.charset,v.CharStrings.length)),e.CFF._readFDict(r,v,_),v},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,f=l.length;c=f<1240?107:f<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var p=0;p<l.length-1;p++)o.Subrs.push(a.readBytes(r,s+l[p],l[p+1]-l[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var f=0;f<c;f++)a.push(r[s+f]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var f=0;f<o;f++){var p=a.readUshort(r,s);s+=2,l.push(p)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){p=a.readUshort(r,s),s+=2;var m=0;for(c==1?(m=r[s],s++):(m=a.readUshort(r,s),s+=2),f=0;f<=m;f++)l.push(p),p++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var f=0;f<l;f++)o.push(r[s+f]);else if(c==2)for(f=0;f<l;f++)o.push(a.readUshort(r,s+2*f));else if(c==3)for(f=0;f<l;f++)o.push(16777215&a.readUint(r,s+3*f-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,p=null,m=null;l<=20&&(p=l,f=1),l==12&&(p=100*l+c,f=2),21<=l&&l<=27&&(p=l,f=1),l==28&&(m=a.readShort(r,s+1),f=3),29<=l&&l<=31&&(p=l,f=1),32<=l&&l<=246&&(m=l-139,f=1),247<=l&&l<=250&&(m=256*(l-247)+c+108,f=2),251<=l&&l<=254&&(m=256*-(l-251)-c-108,f=2),l==255&&(m=a.readInt(r,s+1)/65535,f=5),o.val=m??"o"+p,o.size=f},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var f=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,v=null,y=null;f<=20&&(v=f,m=1),f==12&&(v=100*f+p,m=2),f!=19&&f!=20||(v=f,m=2),21<=f&&f<=27&&(v=f,m=1),f==28&&(y=l.readShort(r,s+1),m=3),29<=f&&f<=31&&(v=f,m=1),32<=f&&f<=246&&(y=f-139,m=1),247<=f&&f<=250&&(y=256*(f-247)+p+108,m=2),251<=f&&f<=254&&(y=256*-(f-251)-p-108,m=2),f==255&&(y=l.readInt(r,s+1)/65535,m=5),c.push(y??"o"+v),s+=m}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var f=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,v=null,y=null;if(f==28&&(y=a.readShort(r,s+1),m=3),f==29&&(y=a.readInt(r,s+1),m=5),32<=f&&f<=246&&(y=f-139,m=1),247<=f&&f<=250&&(y=256*(f-247)+p+108,m=2),251<=f&&f<=254&&(y=256*-(f-251)-p-108,m=2),f==255)throw y=a.readInt(r,s+1)/65535,m=5,"unknown number";if(f==30){var _=[];for(m=1;;){var S=r[s+m];m++;var T=S>>4,M=15&S;if(T!=15&&_.push(T),M!=15&&_.push(M),M==15)break}for(var b="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],k=0;k<_.length;k++)b+=C[_[k]];y=parseFloat(b)}f<=21&&(v=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],m=1,f==12&&(v=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],m=2)),v!=null?(l[v]=c.length==1?c[0]:c,c=[]):c.push(y),s+=m}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var f=[];l.tables=[];for(var p=0;p<c;p++){var m=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var y=a.readUint(r,s);s+=4;var _="p"+m+"e"+v,S=f.indexOf(y);if(S==-1){var T;S=l.tables.length,f.push(y);var M=a.readUshort(r,y);M==0?T=e.cmap.parse0(r,y):M==4?T=e.cmap.parse4(r,y):M==6?T=e.cmap.parse6(r,y):M==12?T=e.cmap.parse12(r,y):console.debug("unknown format: "+M,m,v,y),l.tables.push(T)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=S}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var f=o.readUshort(r,s);s+=2;var p=f/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,p),s+=2*p,s+=2,l.startCount=o.readUshorts(r,s,p),s+=2*p,l.idDelta=[];for(var m=0;m<p;m++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,p),s+=2*p,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var f=s+12*c,p=o.readUint(r,f+0),m=o.readUint(r,f+4),v=o.readUint(r,f+8);a.groups.push([p,m,v])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var f=0;f<c.noc;f++)c.endPts.push(o.readUshort(a,l)),l+=2;var p=o.readUshort(a,l);if(l+=2,a.length-l<p)return null;c.instructions=o.readBytes(a,l,p),l+=p;var m=c.endPts[c.noc-1]+1;for(c.flags=[],f=0;f<m;f++){var v=a[l];if(l++,c.flags.push(v),(8&v)!=0){var y=a[l];l++;for(var _=0;_<y;_++)c.flags.push(v),f++}}for(c.xs=[],f=0;f<m;f++){var S=(2&c.flags[f])!=0,T=(16&c.flags[f])!=0;S?(c.xs.push(T?a[l]:-a[l]),l++):T?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],f=0;f<m;f++)S=(4&c.flags[f])!=0,T=(32&c.flags[f])!=0,S?(c.ys.push(T?a[l]:-a[l]),l++):T?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var M=0,b=0;for(f=0;f<m;f++)M+=c.xs[f],b+=c.ys[f],c.xs[f]=M,c.ys[f]=b}else{var C;c.parts=[];do{C=o.readUshort(a,l),l+=2;var k={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(k),k.glyphIndex=o.readUshort(a,l),l+=2,1&C){var I=o.readShort(a,l);l+=2;var z=o.readShort(a,l);l+=2}else I=o.readInt8(a,l),l++,z=o.readInt8(a,l),l++;2&C?(k.m.tx=I,k.m.ty=z):(k.p1=I,k.p2=z),8&C?(k.m.a=k.m.d=o.readF2dot14(a,l),l+=2):64&C?(k.m.a=o.readF2dot14(a,l),l+=2,k.m.d=o.readF2dot14(a,l),l+=2):128&C&&(k.m.a=o.readF2dot14(a,l),l+=2,k.m.b=o.readF2dot14(a,l),l+=2,k.m.c=o.readF2dot14(a,l),l+=2,k.m.d=o.readF2dot14(a,l),l+=2)}while(32&C);if(256&C){var A=o.readUshort(a,l);for(l+=2,c.instr=[],f=0;f<A;f++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&f.fmt<=2){var p=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,p+c)}if(s==1&&f.fmt==1){var m=l.readUshort(r,o);o+=2;var v=e._lctf.numOfOnes(m);m!=0&&(f.pos=e.GPOS.readValueRecord(r,o,m))}else if(s==2&&f.fmt>=1&&f.fmt<=2){m=l.readUshort(r,o),o+=2;var y=l.readUshort(r,o);o+=2,v=e._lctf.numOfOnes(m);var _=e._lctf.numOfOnes(y);if(f.fmt==1){f.pairsets=[];var S=l.readUshort(r,o);o+=2;for(var T=0;T<S;T++){var M=c+l.readUshort(r,o);o+=2;var b=l.readUshort(r,M);M+=2;for(var C=[],k=0;k<b;k++){var I=l.readUshort(r,M);M+=2,m!=0&&(Y=e.GPOS.readValueRecord(r,M,m),M+=2*v),y!=0&&(te=e.GPOS.readValueRecord(r,M,y),M+=2*_),C.push({gid2:I,val1:Y,val2:te})}f.pairsets.push(C)}}if(f.fmt==2){var z=l.readUshort(r,o);o+=2;var A=l.readUshort(r,o);o+=2;var O=l.readUshort(r,o);o+=2;var U=l.readUshort(r,o);for(o+=2,f.classDef1=e._lctf.readClassDef(r,c+z),f.classDef2=e._lctf.readClassDef(r,c+A),f.matrix=[],T=0;T<O;T++){var $=[];for(k=0;k<U;k++){var Y=null,te=null;m!=0&&(Y=e.GPOS.readValueRecord(r,o,m),o+=2*v),y!=0&&(te=e.GPOS.readValueRecord(r,o,y),o+=2*_),$.push({val1:Y,val2:te})}f.matrix.push($)}}}else{if(s==9&&f.fmt==1){var J=l.readUshort(r,o);o+=2;var ae=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=J;else if(a.ltype!=J)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+ae)}console.debug("unsupported GPOS table LookupType",s,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&f.fmt<=2||s==6&&f.fmt<=2){var p=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,c+p)}if(s==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=l.readShort(r,o),o+=2;else if(f.fmt==2){var m=l.readUshort(r,o);o+=2,f.newg=l.readUshorts(r,o,m),o+=2*f.newg.length}}else if(s==4){f.vals=[],m=l.readUshort(r,o),o+=2;for(var v=0;v<m;v++){var y=l.readUshort(r,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(r,c+y))}}else if(s==5&&f.fmt==2){if(f.fmt==2){var _=l.readUshort(r,o);o+=2,f.cDef=e._lctf.readClassDef(r,c+_),f.scset=[];var S=l.readUshort(r,o);for(o+=2,v=0;v<S;v++){var T=l.readUshort(r,o);o+=2,f.scset.push(T==0?null:e.GSUB.readSubClassSet(r,c+T))}}}else if(s==6&&f.fmt==3){if(f.fmt==3){for(v=0;v<3;v++){m=l.readUshort(r,o),o+=2;for(var M=[],b=0;b<m;b++)M.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*b)));o+=2*m,v==0&&(f.backCvg=M),v==1&&(f.inptCvg=M),v==2&&(f.ahedCvg=M)}m=l.readUshort(r,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(r,o,m)}}else{if(s==7&&f.fmt==1){var C=l.readUshort(r,o);o+=2;var k=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=C;else if(a.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+k)}console.debug("unsupported GSUB table LookupType",s,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var f=0;f<c;f++){var p=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+p))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var f=0;f<l-1;f++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var p=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+p))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var f=o.readUshort(r,s);s+=2,c==1&&f--,a[l[c]]=o.readUshorts(r,s,f),s+=2*a[l[c]].length}return f=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*f),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var p=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+p))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},f=0,p=0,m=0;m<a.maxp.numGlyphs;m++)m<a.hhea.numberOfHMetrics&&(f=l.readUshort(r,s),s+=2,p=l.readShort(r,s),s+=2),c.aWidth.push(f),c.lsBearing.push(p);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var f=l.readUshort(r,s);s+=2;for(var p={glyph1:[],rval:[]},m=0;m<f;m++){s+=2,o=l.readUshort(r,s),s+=2;var v=l.readUshort(r,s);s+=2;var y=v>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(r,s,p)}return p},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var f={glyph1:[],rval:[]},p=0;p<c;p++){l.readUint(r,s),s+=4;var m=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var v=m>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(r,s,f)}return f},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=0;f<c;f++){var p=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var v=a.readShort(r,s);s+=2,p!=l&&(o.glyph1.push(p),o.rval.push({glyph2:[],vals:[]}));var y=o.rval[o.rval.length-1];y.glyph2.push(m),y.vals.push(v),l=p}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],f=a.head.indexToLocFormat,p=a.maxp.numGlyphs+1;if(f==0)for(var m=0;m<p;m++)c.push(l.readUshort(r,s+(m<<1))<<1);if(f==1)for(m=0;m<p;m++)c.push(l.readUint(r,s+(m<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var f,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=s+=2,v=0;v<c;v++){var y=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var S=a.readUshort(r,s);s+=2;var T=a.readUshort(r,s);s+=2;var M=a.readUshort(r,s);s+=2;var b=a.readUshort(r,s);s+=2;var C,k=p[T],I=m+12*c+b;if(y==0)C=a.readUnicode(r,I,M/2);else if(y==3&&_==0)C=a.readUnicode(r,I,M/2);else if(_==0)C=a.readASCII(r,I,M);else if(_==1)C=a.readUnicode(r,I,M/2);else if(_==3)C=a.readUnicode(r,I,M/2);else{if(y!=1)throw"unknown encoding "+_+", platformID: "+y;C=a.readASCII(r,I,M),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var z="p"+y+","+S.toString(16);l[z]==null&&(l[z]={}),l[z][k!==void 0?k:T]=C,l[z]._lang=S}for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==1033)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==0)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==3084)return l[A];for(var A in l)if(l[A].postScriptName!=null)return l[A];for(var A in l){f=A;break}return console.debug("returning name table with languageID "+l[f]._lang),l[f]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,f=0;f<l.endCount.length;f++)if(s<=l.endCount[f]){c=f;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(f=0;f<l.groups.length;f++){var p=l.groups[f];if(p[0]<=s&&s<=p[1])return p[2]+(s-p[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,f=r.CFF.Private;if(c.ROS){for(var p=0;c.FDSelect[p+2]<=s;)p+=2;f=c.FDArray[c.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,f,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var f=c==a?l:c-1,p=c==l?a:c+1,m=1&r.flags[c],v=1&r.flags[f],y=1&r.flags[p],_=r.xs[c],S=r.ys[c];if(c==a)if(m){if(!v){e.U.P.moveTo(s,_,S);continue}e.U.P.moveTo(s,r.xs[f],r.ys[f])}else v?e.U.P.moveTo(s,r.xs[f],r.ys[f]):e.U.P.moveTo(s,(r.xs[f]+_)/2,(r.ys[f]+S)/2);m?v&&e.U.P.lineTo(s,_,S):y?e.U.P.qcurveTo(s,_,S,r.xs[p],r.ys[p]):e.U.P.qcurveTo(s,_,S,(_+r.xs[p])/2,(S+r.ys[p])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var f=c.m,p=0;p<l.crds.length;p+=2){var m=l.crds[p],v=l.crds[p+1];o.crds.push(m*f.a+v*f.b+f.tx),o.crds.push(m*f.c+v*f.d+f.ty)}for(p=0;p<l.cmds.length;p++)o.cmds.push(l.cmds[p])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(r,s,o){var a=!1;if(r.GPOS)for(var l=r.GPOS,c=l.lookupList,f=l.featureList,p=[],m=0;m<f.length;m++){var v=f[m];if(v.tag=="kern"){a=!0;for(var y=0;y<v.tab.length;y++)if(!p[v.tab[y]]){p[v.tab[y]]=!0;for(var _=c[v.tab[y]],S=0;S<_.tabs.length;S++)if(_.tabs[S]!=null){var T,M=_.tabs[S];if((!M.coverage||(T=e._lctf.coverageIndex(M.coverage,s))!=-1)&&_.ltype!=1){if(_.ltype==2){var b=null;if(M.fmt==1){var C=M.pairsets[T];for(m=0;m<C.length;m++)C[m].gid2==o&&(b=C[m])}else if(M.fmt==2){var k=e.U._getGlyphClass(s,M.classDef1),I=e.U._getGlyphClass(o,M.classDef2);b=M.matrix[k][I]}if(b){var z=0;return b.val1&&b.val1[2]&&(z+=b.val1[2]),b.val2&&b.val2[0]&&(z+=b.val2[0]),z}}}}}}}if(r.kern&&!a){var A=r.kern.glyph1.indexOf(s);if(A!=-1){var O=r.kern.rval[A].glyph2.indexOf(o);if(O!=-1)return r.kern.rval[A].vals[O]}}return 0},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var f,p=o.tabs[c];if(!p.coverage||(f=e._lctf.coverageIndex(p.coverage,r[s]))!=-1){if(o.ltype==1)r[s],p.fmt==1?r[s]=r[s]+p.delta:r[s]=p.newg[f];else if(o.ltype==4)for(var m=p.vals[f],v=0;v<m.length;v++){var y=m[v],_=y.chain.length;if(!(_>l)){for(var S=!0,T=0,M=0;M<_;M++){for(;r[s+T+(1+M)]==-1;)T++;y.chain[M]!=r[s+T+(1+M)]&&(S=!1)}if(S){for(r[s]=y.nglyph,M=0;M<_+T;M++)r[s+M+1]=-1;break}}}else if(o.ltype==5&&p.fmt==2)for(var b=e._lctf.getInterval(p.cDef,r[s]),C=p.cDef[b+2],k=p.scset[C],I=0;I<k.length;I++){var z=k[I],A=z.input;if(!(A.length>l)){for(S=!0,M=0;M<A.length;M++){var O=e._lctf.getInterval(p.cDef,r[s+1+M]);if(b==-1&&p.cDef[O+2]!=A[M]){S=!1;break}}if(S){var U=z.substLookupRecords;for(v=0;v<U.length;v+=2)U[v],U[v+1]}}}else if(o.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,s-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,s)||!e.U._glsCovered(r,p.ahedCvg,s+p.inptCvg.length))continue;var $=p.lookupRec;for(I=0;I<$.length;I+=2){b=$[I];var Y=a[$[I+1]];e.U._applySubs(r,s+b,Y,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var f=s[c];if(f!=-1){for(var p=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,m=e.U.glyphToPath(r,f),v=0;v<m.crds.length;v+=2)a.crds.push(m.crds[v]+l),a.crds.push(m.crds[v+1]);for(o&&a.cmds.push(o),v=0;v<m.cmds.length;v++)a.cmds.push(m.cmds[v]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[f],c<s.length-1&&(l+=e.U.getPairAdjustment(r,f,p))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,f){r.cmds.push("C"),r.crds.push(s,o,a,l,c,f)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,f=s.nStems,p=s.haveWidth,m=s.width,v=s.open,y=0,_=s.x,S=s.y,T=0,M=0,b=0,C=0,k=0,I=0,z=0,A=0,O=0,U=0,$={val:0,size:0};y<r.length;){e.CFF.getCharString(r,y,$);var Y=$.val;if(y+=$.size,Y=="o1"||Y=="o18")c.length%2!=0&&!p&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,p=!0;else if(Y=="o3"||Y=="o23")c.length%2!=0&&!p&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,p=!0;else if(Y=="o4")c.length>1&&!p&&(m=c.shift()+a.nominalWidthX,p=!0),v&&e.U.P.closePath(l),S+=c.pop(),e.U.P.moveTo(l,_,S),v=!0;else if(Y=="o5")for(;c.length>0;)_+=c.shift(),S+=c.shift(),e.U.P.lineTo(l,_,S);else if(Y=="o6"||Y=="o7")for(var te=c.length,J=Y=="o6",ae=0;ae<te;ae++){var ce=c.shift();J?_+=ce:S+=ce,J=!J,e.U.P.lineTo(l,_,S)}else if(Y=="o8"||Y=="o24"){te=c.length;for(var ye=0;ye+6<=te;)T=_+c.shift(),M=S+c.shift(),b=T+c.shift(),C=M+c.shift(),_=b+c.shift(),S=C+c.shift(),e.U.P.curveTo(l,T,M,b,C,_,S),ye+=6;Y=="o24"&&(_+=c.shift(),S+=c.shift(),e.U.P.lineTo(l,_,S))}else{if(Y=="o11")break;if(Y=="o1234"||Y=="o1235"||Y=="o1236"||Y=="o1237")Y=="o1234"&&(M=S,b=(T=_+c.shift())+c.shift(),U=C=M+c.shift(),I=C,A=S,_=(z=(k=(O=b+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,T,M,b,C,O,U),e.U.P.curveTo(l,k,I,z,A,_,S)),Y=="o1235"&&(T=_+c.shift(),M=S+c.shift(),b=T+c.shift(),C=M+c.shift(),O=b+c.shift(),U=C+c.shift(),k=O+c.shift(),I=U+c.shift(),z=k+c.shift(),A=I+c.shift(),_=z+c.shift(),S=A+c.shift(),c.shift(),e.U.P.curveTo(l,T,M,b,C,O,U),e.U.P.curveTo(l,k,I,z,A,_,S)),Y=="o1236"&&(T=_+c.shift(),M=S+c.shift(),b=T+c.shift(),U=C=M+c.shift(),I=C,z=(k=(O=b+c.shift())+c.shift())+c.shift(),A=I+c.shift(),_=z+c.shift(),e.U.P.curveTo(l,T,M,b,C,O,U),e.U.P.curveTo(l,k,I,z,A,_,S)),Y=="o1237"&&(T=_+c.shift(),M=S+c.shift(),b=T+c.shift(),C=M+c.shift(),O=b+c.shift(),U=C+c.shift(),k=O+c.shift(),I=U+c.shift(),z=k+c.shift(),A=I+c.shift(),Math.abs(z-_)>Math.abs(A-S)?_=z+c.shift():S=A+c.shift(),e.U.P.curveTo(l,T,M,b,C,O,U),e.U.P.curveTo(l,k,I,z,A,_,S));else if(Y=="o14"){if(c.length>0&&!p&&(m=c.shift()+o.nominalWidthX,p=!0),c.length==4){var F=c.shift(),X=c.shift(),H=c.shift(),W=c.shift(),j=e.CFF.glyphBySE(o,H),se=e.CFF.glyphBySE(o,W);e.U._drawCFF(o.CharStrings[j],s,o,a,l),s.x=F,s.y=X,e.U._drawCFF(o.CharStrings[se],s,o,a,l)}v&&(e.U.P.closePath(l),v=!1)}else if(Y=="o19"||Y=="o20")c.length%2!=0&&!p&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,p=!0,y+=f+7>>3;else if(Y=="o21")c.length>2&&!p&&(m=c.shift()+a.nominalWidthX,p=!0),S+=c.pop(),_+=c.pop(),v&&e.U.P.closePath(l),e.U.P.moveTo(l,_,S),v=!0;else if(Y=="o22")c.length>1&&!p&&(m=c.shift()+a.nominalWidthX,p=!0),_+=c.pop(),v&&e.U.P.closePath(l),e.U.P.moveTo(l,_,S),v=!0;else if(Y=="o25"){for(;c.length>6;)_+=c.shift(),S+=c.shift(),e.U.P.lineTo(l,_,S);T=_+c.shift(),M=S+c.shift(),b=T+c.shift(),C=M+c.shift(),_=b+c.shift(),S=C+c.shift(),e.U.P.curveTo(l,T,M,b,C,_,S)}else if(Y=="o26")for(c.length%2&&(_+=c.shift());c.length>0;)T=_,M=S+c.shift(),_=b=T+c.shift(),S=(C=M+c.shift())+c.shift(),e.U.P.curveTo(l,T,M,b,C,_,S);else if(Y=="o27")for(c.length%2&&(S+=c.shift());c.length>0;)M=S,b=(T=_+c.shift())+c.shift(),C=M+c.shift(),_=b+c.shift(),S=C,e.U.P.curveTo(l,T,M,b,C,_,S);else if(Y=="o10"||Y=="o29"){var ee=Y=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var Z=c.pop(),ue=ee.Subrs[Z+ee.Bias];s.x=_,s.y=S,s.nStems=f,s.haveWidth=p,s.width=m,s.open=v,e.U._drawCFF(ue,s,o,a,l),_=s.x,S=s.y,f=s.nStems,p=s.haveWidth,m=s.width,v=s.open}}else if(Y=="o30"||Y=="o31"){var de=c.length,_e=(ye=0,Y=="o31");for(ye+=de-(te=-3&de);ye<te;)_e?(M=S,b=(T=_+c.shift())+c.shift(),S=(C=M+c.shift())+c.shift(),te-ye==5?(_=b+c.shift(),ye++):_=b,_e=!1):(T=_,M=S+c.shift(),b=T+c.shift(),C=M+c.shift(),_=b+c.shift(),te-ye==5?(S=C+c.shift(),ye++):S=C,_e=!0),e.U.P.curveTo(l,T,M,b,C,_,S),ye+=4}else{if((Y+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Y,r),Y;c.push(Y)}}}s.x=_,s.y=S,s.nStems=f,s.haveWidth=p,s.width=m,s.open=v};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function jZ(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(Y,te){for(var J=new t(31),ae=0;ae<31;++ae)J[ae]=te+=1<<Y[ae-1];var ce=new i(J[30]);for(ae=1;ae<30;++ae)for(var ye=J[ae];ye<J[ae+1];++ye)ce[ye]=ye-J[ae]<<5|ae;return[J,ce]},l=a(r,2),c=l[0],f=l[1];c[28]=258,f[258]=28;for(var p=a(s,0)[0],m=new t(32768),v=0;v<32768;++v){var y=(43690&v)>>>1|(21845&v)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,m[v]=((65280&y)>>>8|(255&y)<<8)>>>1}var _=function(Y,te,J){for(var ae=Y.length,ce=0,ye=new t(te);ce<ae;++ce)++ye[Y[ce]-1];var F,X=new t(te);for(ce=0;ce<te;++ce)X[ce]=X[ce-1]+ye[ce-1]<<1;if(J){F=new t(1<<te);var H=15-te;for(ce=0;ce<ae;++ce)if(Y[ce])for(var W=ce<<4|Y[ce],j=te-Y[ce],se=X[Y[ce]-1]++<<j,ee=se|(1<<j)-1;se<=ee;++se)F[m[se]>>>H]=W}else for(F=new t(ae),ce=0;ce<ae;++ce)Y[ce]&&(F[ce]=m[X[Y[ce]-1]++]>>>15-Y[ce]);return F},S=new e(288);for(v=0;v<144;++v)S[v]=8;for(v=144;v<256;++v)S[v]=9;for(v=256;v<280;++v)S[v]=7;for(v=280;v<288;++v)S[v]=8;var T=new e(32);for(v=0;v<32;++v)T[v]=5;var M=_(S,9,1),b=_(T,5,1),C=function(Y){for(var te=Y[0],J=1;J<Y.length;++J)Y[J]>te&&(te=Y[J]);return te},k=function(Y,te,J){var ae=te/8|0;return(Y[ae]|Y[ae+1]<<8)>>(7&te)&J},I=function(Y,te){var J=te/8|0;return(Y[J]|Y[J+1]<<8|Y[J+2]<<16)>>(7&te)},z=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(Y,te,J){var ae=new Error(te||z[Y]);if(ae.code=Y,Error.captureStackTrace&&Error.captureStackTrace(ae,A),!J)throw ae;return ae},O=function(Y,te,J){var ae=Y.length;if(!ae||J&&!J.l&&ae<5)return te||new e(0);var ce=!te||J,ye=!J||J.i;J||(J={}),te||(te=new e(3*ae));var F,X=function(Ze){var oe=te.length;if(Ze>oe){var Le=new e(Math.max(2*oe,Ze));Le.set(te),te=Le}},H=J.f||0,W=J.p||0,j=J.b||0,se=J.l,ee=J.d,Z=J.m,ue=J.n,de=8*ae;do{if(!se){J.f=H=k(Y,W,1);var _e=k(Y,W+1,3);if(W+=3,!_e){var Ae=Y[(Je=((F=W)/8|0)+(7&F&&1)+4)-4]|Y[Je-3]<<8,Ue=Je+Ae;if(Ue>ae){ye&&A(0);break}ce&&X(j+Ae),te.set(Y.subarray(Je,Ue),j),J.b=j+=Ae,J.p=W=8*Ue;continue}if(_e==1)se=M,ee=b,Z=9,ue=5;else if(_e==2){var ke=k(Y,W,31)+257,he=k(Y,W+10,15)+4,Se=ke+k(Y,W+5,31)+1;W+=14;for(var Fe=new e(Se),Ne=new e(19),De=0;De<he;++De)Ne[o[De]]=k(Y,W+3*De,7);W+=3*he;var Ke=C(Ne),Pe=(1<<Ke)-1,Xe=_(Ne,Ke,1);for(De=0;De<Se;){var Je,Oe=Xe[k(Y,W,Pe)];if(W+=15&Oe,(Je=Oe>>>4)<16)Fe[De++]=Je;else{var q=0,B=0;for(Je==16?(B=3+k(Y,W,3),W+=2,q=Fe[De-1]):Je==17?(B=3+k(Y,W,7),W+=3):Je==18&&(B=11+k(Y,W,127),W+=7);B--;)Fe[De++]=q}}var pe=Fe.subarray(0,ke),Me=Fe.subarray(ke);Z=C(pe),ue=C(Me),se=_(pe,Z,1),ee=_(Me,ue,1)}else A(1);if(W>de){ye&&A(0);break}}ce&&X(j+131072);for(var Ve=(1<<Z)-1,je=(1<<ue)-1,He=W;;He=W){var We=(q=se[I(Y,W)&Ve])>>>4;if((W+=15&q)>de){ye&&A(0);break}if(q||A(2),We<256)te[j++]=We;else{if(We==256){He=W,se=null;break}var Te=We-254;if(We>264){var st=r[De=We-257];Te=k(Y,W,(1<<st)-1)+c[De],W+=st}var qe=ee[I(Y,W)&je],ot=qe>>>4;if(qe||A(3),W+=15&qe,Me=p[ot],ot>3&&(st=s[ot],Me+=I(Y,W)&(1<<st)-1,W+=st),W>de){ye&&A(0);break}ce&&X(j+131072);for(var Qe=j+Te;j<Qe;j+=4)te[j]=te[j-Me],te[j+1]=te[j+1-Me],te[j+2]=te[j+2-Me],te[j+3]=te[j+3-Me];j=Qe}}J.l=se,J.p=He,J.b=j,se&&(H=1,J.m=Z,J.d=ee,J.n=ue)}while(!H);return j==te.length?te:function(Ze,oe,Le){(oe==null||oe<0)&&(oe=0),(Le==null||Le>Ze.length)&&(Le=Ze.length);var tt=new(Ze instanceof t?t:Ze instanceof i?i:e)(Le-oe);return tt.set(Ze.subarray(oe,Le)),tt}(te,0,j)},U=new e(0),$=typeof TextDecoder<"u"&&new TextDecoder;try{$.decode(U,{stream:!0})}catch{}return n.convert_streams=function(Y){var te=new DataView(Y),J=0;function ae(){var ke=te.getUint16(J);return J+=2,ke}function ce(){var ke=te.getUint32(J);return J+=4,ke}function ye(ke){Ae.setUint16(Ue,ke),Ue+=2}function F(ke){Ae.setUint32(Ue,ke),Ue+=4}for(var X={signature:ce(),flavor:ce(),length:ce(),numTables:ae(),reserved:ae(),totalSfntSize:ce(),majorVersion:ae(),minorVersion:ae(),metaOffset:ce(),metaLength:ce(),metaOrigLength:ce(),privOffset:ce(),privLength:ce()},H=0;Math.pow(2,H)<=X.numTables;)H++;H--;for(var W=16*Math.pow(2,H),j=16*X.numTables-W,se=12,ee=[],Z=0;Z<X.numTables;Z++)ee.push({tag:ce(),offset:ce(),compLength:ce(),origLength:ce(),origChecksum:ce()}),se+=16;var ue,de=new Uint8Array(12+16*ee.length+ee.reduce(function(ke,he){return ke+he.origLength+4},0)),_e=de.buffer,Ae=new DataView(_e),Ue=0;return F(X.flavor),ye(X.numTables),ye(W),ye(H),ye(j),ee.forEach(function(ke){F(ke.tag),F(ke.origChecksum),F(se),F(ke.origLength),ke.outOffset=se,(se+=ke.origLength)%4!=0&&(se+=4-se%4)}),ee.forEach(function(ke){var he,Se=Y.slice(ke.offset,ke.offset+ke.compLength);if(ke.compLength!=ke.origLength){var Fe=new Uint8Array(ke.origLength);he=new Uint8Array(Se,2),O(he,Fe)}else Fe=new Uint8Array(Se);de.set(Fe,ke.outOffset);var Ne=0;(se=ke.outOffset+ke.origLength)%4!=0&&(Ne=4-se%4),de.set(new Uint8Array(Ne).buffer,ke.outOffset+ke.origLength),ue=se+Ne}),_e.slice(0,ue)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function ZZ(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let f;function p(k){if(!f){const I={R:s,L:r,D:o,C:l,U:c,T:a};f=new Map;for(let z in i){let A=0;i[z].split(",").forEach(O=>{let[U,$]=O.split("+");U=parseInt(U,36),$=$?parseInt($,36):0,f.set(A+=U,I[z]);for(let Y=$;Y--;)f.set(++A,I[z])})}}return f.get(k)||c}const m=1,v=2,y=3,_=4,S=[null,"isol","init","fina","medi"];function T(k){const I=new Uint8Array(k.length);let z=c,A=m,O=-1;for(let U=0;U<k.length;U++){const $=k.codePointAt(U);let Y=p($)|0,te=m;Y&a||(z&(r|o|l)?Y&(s|o|l)?(te=y,(A===m||A===y)&&I[O]++):Y&(r|c)&&(A===v||A===_)&&I[O]--:z&(s|c)&&(A===v||A===_)&&I[O]--,A=I[U]=te,z=Y,O=U,$>65535&&U++)}return I}function M(k,I){const z=[];for(let O=0;O<I.length;O++){const U=I.codePointAt(O);U>65535&&O++,z.push(n.U.codeToGlyph(k,U))}const A=k.GSUB;if(A){const{lookupList:O,featureList:U}=A;let $;const Y=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,te=[];U.forEach(J=>{if(Y.test(J.tag))for(let ae=0;ae<J.tab.length;ae++){if(te[J.tab[ae]])continue;te[J.tab[ae]]=!0;const ce=O[J.tab[ae]],ye=/^(isol|init|fina|medi)$/.test(J.tag);ye&&!$&&($=T(I));for(let F=0;F<z.length;F++)(!$||!ye||S[$[F]]===J.tag)&&n.U._applySubs(z,F,ce,O)}})}return z}function b(...k){for(let I=0;I<k.length;I++)if(typeof k[I]=="number")return k[I]}function C(k){const I=Object.create(null),z=k["OS/2"],A=k.hhea,O=k.head.unitsPerEm,U=b(z&&z.sTypoAscender,A&&A.ascender,O),$={unitsPerEm:O,ascender:U,descender:b(z&&z.sTypoDescender,A&&A.descender,0),capHeight:b(z&&z.sCapHeight,U),xHeight:b(z&&z.sxHeight,U),lineGap:b(z&&z.sTypoLineGap,A&&A.lineGap),forEachGlyph(Y,te,J,ae){let ce=0;const ye=1/$.unitsPerEm*te,F=M(k,Y);let X=0,H=-1;return F.forEach((W,j)=>{if(W!==-1){let se=I[W];if(!se){const{cmds:ee,crds:Z}=n.U.glyphToPath(k,W);let ue="",de=0;for(let he=0,Se=ee.length;he<Se;he++){const Fe=t[ee[he]];ue+=ee[he];for(let Ne=1;Ne<=Fe;Ne++)ue+=(Ne>1?",":"")+Z[de++]}let _e,Ae,Ue,ke;if(Z.length){_e=Ae=1/0,Ue=ke=-1/0;for(let he=0,Se=Z.length;he<Se;he+=2){let Fe=Z[he],Ne=Z[he+1];Fe<_e&&(_e=Fe),Ne<Ae&&(Ae=Ne),Fe>Ue&&(Ue=Fe),Ne>ke&&(ke=Ne)}}else _e=Ue=Ae=ke=0;se=I[W]={index:W,advanceWidth:k.hmtx.aWidth[W],xMin:_e,yMin:Ae,xMax:Ue,yMax:ke,path:ue,pathCommandCount:ee.length}}H!==-1&&(ce+=n.U.getPairAdjustment(k,H,W)*ye),ae.call(null,se,ce,X),se.advanceWidth&&(ce+=se.advanceWidth*ye),J&&(ce+=J*te),H=W}X+=Y.codePointAt(X)>65535?2:1}),ce}};return $}return function(I){const z=new Uint8Array(I,0,4),A=n._bin.readASCII(z,0,4);if(A==="wOFF")I=e(I);else if(A==="wOF2")throw new Error("woff2 fonts not supported");return C(n.parse(I)[0])}}const XZ=Gp({name:"Typr Font Parser",dependencies:[WZ,jZ,ZZ],init(n,e,t){const i=n(),r=e();return t(i,r)}}),hf={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},YZ=new ht;function Gc(){return(self.performance||Date).now()}const PP=Object.create(null);function mI(n,e){n=JZ({},n);const t=Gc();if(n.font=QZ(n.font||hf.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||hf.sdfGlyphSize,n.colorRanges!=null){let p={};for(let m in n.colorRanges)if(n.colorRanges.hasOwnProperty(m)){let v=n.colorRanges[m];typeof v!="number"&&(v=YZ.set(v).getHex()),p[m]=v}n.colorRanges=p}Object.freeze(n);const{textureWidth:i,sdfExponent:r}=hf,{sdfGlyphSize:s}=n,o=i/s*4;let a=PP[s];if(!a){const p=document.createElement("canvas");p.width=i,p.height=s*256/o,a=PP[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:p,sdfTexture:new Gn(p,void 0,void 0,void 0,Fn,Fn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,qZ(a)}const{sdfTexture:l,sdfCanvas:c}=a;let f=a.glyphsByFont.get(n.font);f||a.glyphsByFont.set(n.font,f=new Map),eX(n).then(p=>{const{glyphIds:m,glyphPositions:v,fontSize:y,unitsPerEm:_,timings:S}=p,T=[],M=new Float32Array(m.length*4),b=y/_;let C=0,k=0;const I=Gc();m.forEach(($,Y)=>{let te=f.get($);if(!te){const{path:ye,pathBounds:F}=p.glyphData[$],X=Math.max(F[2]-F[0],F[3]-F[1])/s*(hf.sdfMargin*s+.5),H=a.glyphCount++,W=[F[0]-X,F[1]-X,F[2]+X,F[3]+X];f.set($,te={path:ye,atlasIndex:H,sdfViewBox:W}),T.push(te)}const{sdfViewBox:J}=te,ae=v[k++],ce=v[k++];M[C++]=ae+J[0]*b,M[C++]=ce+J[1]*b,M[C++]=ae+J[2]*b,M[C++]=ce+J[3]*b,m[Y]=te.atlasIndex}),S.quads=(S.quads||0)+(Gc()-I);const z=Gc();S.sdf={};const A=c.height,O=Math.ceil(a.glyphCount/o),U=Math.pow(2,Math.ceil(Math.log2(O*s)));U>A&&(console.info(`Increasing SDF texture size ${A}->${U}`),HZ(c,i,U),l.dispose()),Promise.all(T.map($=>gI($,a,n.gpuAccelerateSDF).then(({timing:Y})=>{S.sdf[$.atlasIndex]=Y}))).then(()=>{T.length&&!a.contextLost&&(vI(a),l.needsUpdate=!0),S.sdfTotal=Gc()-z,S.total=Gc()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:r,glyphBounds:M,glyphAtlasIndices:m,glyphColors:p.glyphColors,caretPositions:p.caretPositions,caretHeight:p.caretHeight,chunkedBounds:p.chunkedBounds,ascender:p.ascender,descender:p.descender,lineHeight:p.lineHeight,capHeight:p.capHeight,xHeight:p.xHeight,topBaseline:p.topBaseline,blockBounds:p.blockBounds,visibleBounds:p.visibleBounds,timings:p.timings}))})}),Promise.resolve().then(()=>{a.contextLost||GZ(c)})}function gI({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=hf,c=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),p=f%(a/i)*i,m=Math.floor(f/(a/i))*i,v=e%4;return OZ(i,i,n,t,c,l,r,p,m,v,o)}function qZ(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(gI(s,n,!0))})}),Promise.all(i).then(()=>{vI(n),n.sdfTexture.needsUpdate=!0})})}function KZ({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;mI({font:n,sdfGlyphSize:t,text:r},i)}function JZ(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let zg;function QZ(n){return zg||(zg=typeof document>"u"?{}:document.createElement("a")),zg.href=n,zg.href}function vI(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const $Z=Gp({name:"Typesetter",dependencies:[hf,XZ,NZ,PZ],init(n,e,t,i){const{defaultFontURL:r}=n;return t(e,i(),{defaultFontURL:r})}}),eX=Gp({name:"Typesetter",dependencies:[$Z],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),CP={};function tX(n){let e=CP[n];if(!e){const t=new Na(1,1,n,n),i=t.clone(),r=t.attributes,s=i.attributes,o=new jt,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new gt([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=CP[n]=o}return e}const nX="aTroikaGlyphBounds",AP="aTroikaGlyphIndex",iX="aTroikaGlyphColor";class rX extends cM{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Hl,this.boundingBox=new Gl}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Nr?t/2:0,e===uo?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=tX(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){Y_(this,nX,e,4),Y_(this,AP,t,1),Y_(this,iX,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,f=r/2,p=r*2,m=Math.abs(t),v=e[0]/m,y=e[2]/m,_=s((v+f)/p)!==s((y+f)/p)?-m:o(l(v)*m,l(y)*m),S=s((v-f)/p)!==s((y-f)/p)?m:a(l(v)*m,l(y)*m),T=s((v+r)/p)!==s((y+r)/p)?m*2:a(m-c(v)*m,m-c(y)*m);i.min.set(_,e[1],t<0?-T:0),i.max.set(S,e[3],t<0?0:T)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(AP).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function Y_(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new $u(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const sX=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,oX=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,aX=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,lX=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function uX(n){const e=tw(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ge},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new hn(0,0,0,0)},uTroikaClipRect:{value:new hn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ge},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ht},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ni},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:sX,vertexTransform:oX,fragmentDefs:aX,fragmentColorTransform:lX,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(dI,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const yM=new Da({color:16777215,side:uo,transparent:!0}),LP=8421504,RP=new zt,Fg=new ne,q_=new ne,jh=[],cX=new ne,K_="+x+y";function kP(n){return Array.isArray(n)?n[0]:n}let yI=()=>{const n=new pi(new Na(1,1),yM);return yI=()=>n,n},_I=()=>{const n=new pi(new Na(1,1,32,1),yM);return _I=()=>n,n};const fX={type:"syncstart"},hX={type:"synccomplete"},xI=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],dX=xI.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let wI=class extends pi{constructor(){const e=new rX;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=LP,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=K_,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(fX),mI({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(hX),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=zo}onAfterRender(e,t,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=yM.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=uX(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return kP(this.material).getDepthMaterial()}get customDistanceMaterial(){return kP(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,f=0,p=0,m,v,y,_=0,S=0;if(t){let{outlineWidth:M,outlineOffsetX:b,outlineOffsetY:C,outlineBlur:k,outlineOpacity:I}=this;c=this._parsePercent(M)||0,f=Math.max(0,this._parsePercent(k)||0),m=I,_=this._parsePercent(b)||0,S=this._parsePercent(C)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(y=this.strokeColor,i.uTroikaStrokeColor.value.set(y??LP),v=this.strokeOpacity,v==null&&(v=1)),m=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(_,S),i.uTroikaBlurRadius.value=f,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=v,i.uTroikaFillOpacity.value=m??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let T=this.clipRect;if(T&&Array.isArray(T)&&T.length===4)i.uTroikaClipRect.value.fromArray(T);else{const M=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-M,l[1]-M,l[2]+M,l[3]+M)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new ht;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||K_;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==K_&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,f,p,m]=l;Fg.set(0,0,0)[f]=c==="-"?1:-1,q_.set(0,0,0)[m]=p==="-"?-1:1,RP.lookAt(cX,Fg.cross(q_),q_),a.setFromMatrix4(RP)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ge){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Ge){return Fg.copy(e),this.localPositionToTextCoords(this.worldToLocal(Fg),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?_I():yI(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let f=0;f<c.count;f++){let p=s[0]+c.getX(f)*(s[2]-s[0]);const m=s[1]+c.getY(f)*(s[3]-s[1]);let v=0;r&&(v=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),l.setXYZ(f,p,m,v)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,jh.length=0,o.raycast(e,jh);for(let f=0;f<jh.length;f++)jh[f].object=this,t.push(jh[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,dX.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};xI.forEach(n=>{const e="_private_"+n;Object.defineProperty(wI.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const pX=K.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:r,characters:s,onSync:o,...a},l)=>{const c=aa(({invalidate:v})=>v),[f]=K.useState(()=>new wI),[p,m]=K.useMemo(()=>{const v=[];let y="";return K.Children.forEach(r,_=>{typeof _=="string"||typeof _=="number"?y+=_:v.push(_)}),[v,y]},[r]);return L9(()=>new Promise(v=>KZ({font:t,characters:s},v)),["troika-text",t,s]),K.useLayoutEffect(()=>void f.sync(()=>{c(),o&&o(f)})),K.useEffect(()=>()=>f.dispose(),[f]),K.createElement("primitive",Of({object:f,ref:l,font:t,text:m,anchorX:n,anchorY:e,fontSize:i},a),p)}),mX=K.forwardRef(({makeDefault:n,events:e,camera:t,regress:i,domElement:r,enableDamping:s=!0,onChange:o,onStart:a,onEnd:l,...c},f)=>{const p=aa(I=>I.invalidate),m=aa(I=>I.camera),v=aa(I=>I.gl),y=aa(I=>I.events),_=aa(I=>I.setEvents),S=aa(I=>I.set),T=aa(I=>I.get),M=aa(I=>I.performance),b=t||m,C=r||y.connected||v.domElement,k=K.useMemo(()=>new xZ(b),[b]);return sI(()=>{k.enabled&&k.update()},-1),K.useEffect(()=>(k.connect(C),()=>void k.dispose()),[C,i,k,p]),K.useEffect(()=>{e&&_({enabled:!0});const I=O=>{p(),i&&M.regress(),o&&o(O)},z=O=>{a&&a(O),e||_({enabled:!1})},A=O=>{l&&l(O),e||_({enabled:!0})};return k.addEventListener("change",I),k.addEventListener("start",z),k.addEventListener("end",A),()=>{k.removeEventListener("start",z),k.removeEventListener("end",A),k.removeEventListener("change",I)}},[o,a,l,k,p,e,_]),K.useEffect(()=>{if(n){const I=T().controls;return S({controls:k}),()=>S({controls:I})}},[n,k]),K.createElement("primitive",Of({ref:f,object:k,enableDamping:s},c))}),gX=()=>{const n=K.useRef(),e=K.useRef(),t=K.useRef(),i=K.useRef(),r=K.useRef(),s=K.useRef(),o=K.useRef();return sI(a=>{const l=a.clock.getElapsedTime();n.current&&(n.current.position.y=Math.sin(l*1.5)*.04,n.current.rotation.y=Math.sin(l*.8)*.05),e.current&&(e.current.rotation.z=-.3+Math.sin(l*2)*.12),t.current&&(t.current.rotation.z=.15+Math.sin(l*1.5)*.06),i.current&&(i.current.position.y=1.78+Math.sin(l*2)*.01),r.current&&(r.current.rotation.z=Math.sin(l*1.8)*.06),s.current&&(s.current.rotation.z=Math.sin(l*1.1)*.015),o.current&&(o.current.position.y=2.4+Math.sin(l*3)*.06,o.current.rotation.z=Math.sin(l*2)*.4)}),G.jsxs("group",{ref:n,scale:1.15,children:[G.jsxs("group",{ref:i,position:[0,1.75,0],children:[G.jsxs("mesh",{children:[G.jsx("coneGeometry",{args:[.65,.85,16]}),G.jsx("meshStandardMaterial",{color:"#F5F5F5"})]}),G.jsxs("mesh",{position:[0,-.15,0],children:[G.jsx("cylinderGeometry",{args:[.7,.7,.06,32]}),G.jsx("meshStandardMaterial",{color:"#C4A484"})]})]}),G.jsxs("mesh",{position:[0,1.25,0],children:[G.jsx("sphereGeometry",{args:[.48,16,16]}),G.jsx("meshStandardMaterial",{color:"#FFE0BD"}),G.jsxs("mesh",{position:[.16,.05,.42],children:[G.jsx("sphereGeometry",{args:[.05,12,12]}),G.jsx("meshStandardMaterial",{color:"#2C3E50"})]}),G.jsxs("mesh",{position:[-.16,.05,.42],children:[G.jsx("sphereGeometry",{args:[.05,12,12]}),G.jsx("meshStandardMaterial",{color:"#2C3E50"})]}),G.jsxs("mesh",{position:[0,-.12,.43],children:[G.jsx("torusGeometry",{args:[.11,.015,8,16,Math.PI]}),G.jsx("meshStandardMaterial",{color:"#8B4513"})]})]}),G.jsxs("group",{ref:s,position:[0,.5,0],children:[G.jsxs("mesh",{children:[G.jsx("cylinderGeometry",{args:[.45,.55,1,16]}),G.jsx("meshStandardMaterial",{color:"#7A3E15"})]}),G.jsxs("mesh",{position:[0,.22,.4],children:[G.jsx("boxGeometry",{args:[.55,.25,.05]}),G.jsx("meshStandardMaterial",{color:"#D4AF37"})]})]}),G.jsxs("group",{children:[G.jsx("group",{ref:t,position:[-.55,.8,0],rotation:[0,0,-.2],children:G.jsxs("mesh",{children:[G.jsx("cylinderGeometry",{args:[.09,.09,.55,12]}),G.jsx("meshStandardMaterial",{color:"#FFE0BD"})]})}),G.jsxs("group",{ref:e,position:[.55,.8,0],rotation:[0,0,.2],children:[G.jsxs("mesh",{children:[G.jsx("cylinderGeometry",{args:[.09,.09,.55,12]}),G.jsx("meshStandardMaterial",{color:"#FFE0BD"})]}),G.jsxs("group",{ref:r,position:[0,-.25,0],rotation:[0,0,-Math.PI/4],children:[G.jsxs("mesh",{scale:[1,1,.5],children:[G.jsx("sphereGeometry",{args:[.22,16,16]}),G.jsx("meshStandardMaterial",{color:"#A0522D"})]}),G.jsxs("mesh",{position:[0,.55,0],children:[G.jsx("boxGeometry",{args:[.06,.8,.04]}),G.jsx("meshStandardMaterial",{color:"#8B4513"})]})]})]})]}),G.jsxs("group",{children:[G.jsxs("mesh",{position:[-.15,-.55,0],children:[G.jsx("cylinderGeometry",{args:[.11,.11,.55,12]}),G.jsx("meshStandardMaterial",{color:"#4A3520"})]}),G.jsxs("mesh",{position:[.15,-.55,0],children:[G.jsx("cylinderGeometry",{args:[.11,.11,.55,12]}),G.jsx("meshStandardMaterial",{color:"#4A3520"})]})]}),G.jsx(pX,{position:[0,2.3,0],fontSize:.23,color:"#D4AF37",anchorX:"center",anchorY:"middle",children:"Salem!"}),G.jsx("group",{ref:o,children:[0,.25,-.25].map((a,l)=>G.jsxs("mesh",{position:[a,2.45,0],children:[G.jsx("sphereGeometry",{args:[.05,12,12]}),G.jsx("meshStandardMaterial",{color:"#D4AF37"})]},l))})]})},vX=()=>G.jsx("div",{style:{height:"300px",width:"100%",background:"transparent"},children:G.jsxs(hZ,{camera:{position:[5,2,5],fov:50},style:{background:"transparent"},children:[G.jsx("ambientLight",{intensity:.8}),G.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),G.jsx("pointLight",{position:[-10,-10,-10],intensity:.3}),G.jsx(K.Suspense,{fallback:G.jsxs("mesh",{children:[G.jsx("boxGeometry",{args:[1,1,1]}),G.jsx("meshStandardMaterial",{color:"orange"})]}),children:G.jsx(gX,{})}),G.jsx(mX,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/6,autoRotate:!0,autoRotateSpeed:1})]})});delete AS.Icon.Default.prototype._getIconUrl;AS.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const yX=new AS.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),_X=[{id:1,name:"Bayterek Tower",position:[51.1283,71.4305],description:"Iconic monument and observation tower offering panoramic city views",type:"landmark",hours:"10:00 AM - 9:00 PM",price:"2,000"},{id:2,name:"Khan Shatyr",position:[51.1242,71.43],description:"Giant transparent tent with shopping, entertainment and beach resort",type:"shopping",hours:"10:00 AM - 10:00 PM",price:"Free entry"},{id:3,name:"Nur-Astana Mosque",position:[51.1469,71.4111],description:"One of the largest mosques in Central Asia with stunning architecture",type:"religious",hours:"5:00 AM - 10:00 PM",price:"Free"},{id:4,name:"EXPO 2017",position:[51.0914,71.4169],description:"Futuristic expo center and energy museum with interactive exhibits",type:"cultural",hours:"10:00 AM - 8:00 PM",price:"1,500"},{id:5,name:"National Museum",position:[51.1475,71.4736],description:"Museum of Kazakh history, culture, and modern art exhibitions",type:"museum",hours:"10:00 AM - 6:00 PM",price:"1,000"},{id:6,name:"Ishim River Embankment",position:[51.15,71.44],description:"Scenic river with walking paths, bridges and boat tours",type:"nature",hours:"24/7",price:"Free"},{id:7,name:"Nurly Zhol Boulevard",position:[51.1386,71.4133],description:"Modern pedestrian boulevard with fountains and city landmarks",type:"park",hours:"24/7",price:"Free"},{id:8,name:"Astana Opera",position:[51.1428,71.4192],description:"World-class opera and ballet theater with magnificent architecture",type:"cultural",hours:"10:00 AM - 7:00 PM",price:"From 3,000"}],xX=()=>{const[n,e]=K.useState(null),t=i=>{const r=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i+" Astana, Kazakhstan")}`;window.open(r,"_blank")};return G.jsxs("div",{className:"min-h-screen text-white bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:[G.jsx(tn.img,{src:"/kazakh_guide.png",alt:"Kazakh Guide",initial:{y:-10,opacity:1},animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0,repeatType:"loop",ease:"easeInOut"},className:`\r
            fixed \r
            top-9 \r
            left-4 \r
            w-24 \r
            md:w-28 \r
            drop-shadow-xl \r
            pointer-events-none \r
            select-none\r
            z-50\r
          `}),G.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[G.jsxs(tn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[G.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 heading-font",children:"Astana City Insights"}),G.jsx("p",{className:"text-xl text-slate-300 max-w-2xl mx-auto",children:"Discover the best tourist spots with our interactive map and friendly Kazakh guide"})]}),G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[G.jsx("div",{className:"lg:col-span-2",children:G.jsxs(tn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 h-[600px]",children:[G.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Interactive Astana Map"}),G.jsxs(o6,{center:[51.1694,71.4491],zoom:12,style:{height:"90%",width:"100%",borderRadius:"10px"},className:"z-0",children:[G.jsx(u6,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),_X.map(i=>G.jsx(a6,{position:i.position,icon:yX,eventHandlers:{click:()=>e(i)},children:G.jsx(l6,{children:G.jsxs("div",{className:"text-black",children:[G.jsx("h3",{className:"font-bold text-lg",children:i.name}),G.jsx("p",{className:"text-sm",children:i.description}),G.jsx("button",{onClick:()=>t(i.name),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"Get Directions"})]})})},i.id))]})]})}),G.jsxs("div",{className:"space-y-6",children:[G.jsxs(tn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[G.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Your Kazakh Guide"}),G.jsx("div",{className:"flex justify-center items-center h-64",children:G.jsx(vX,{})}),G.jsx(tn.p,{className:"text-center mt-4 text-slate-300 italic",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:'"Slem! Explore Astana with me!"'})]}),G.jsxs(tn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[G.jsx("h3",{className:"text-xl font-bold mb-4",children:n?n.name:"Select a Location"}),n?G.jsxs(tn.div,{initial:{opacity:0},animate:{opacity:1},children:[G.jsx("p",{className:"text-slate-300 mb-3",children:n.description}),G.jsxs("div",{className:"space-y-2 mb-4",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-slate-400",children:"Hours:"}),G.jsx("span",{className:"text-white",children:n.hours})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-slate-400",children:"Entry Price:"}),G.jsx("span",{className:"text-green-300",children:n.price})]})]}),G.jsx("div",{className:"flex items-center gap-2 mb-4",children:G.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.type==="landmark"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":n.type==="cultural"?"bg-purple-500/20 text-purple-300 border border-purple-500/30":n.type==="museum"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":n.type==="nature"?"bg-green-500/20 text-green-300 border border-green-500/30":n.type==="shopping"?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30"}`,children:n.type.toUpperCase()})}),G.jsx("button",{onClick:()=>t(n.name),className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500 text-black font-semibold py-2 rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:"Get Directions "})]},n.id):G.jsx("p",{className:"text-slate-400 text-center py-8",children:"Click on any marker on the map to see details"})]}),G.jsxs(tn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[G.jsx("h3",{className:"text-xl font-bold mb-4",children:"Travel Tips"}),G.jsxs("ul",{className:"space-y-2 text-slate-300",children:[G.jsxs("li",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"text-green-400",children:""}),"Best time to visit: May to September"]}),G.jsxs("li",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"text-green-400",children:""}),"Try traditional Kazakh cuisine"]}),G.jsxs("li",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"text-green-400",children:""}),"Use public transport - it's efficient"]}),G.jsxs("li",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"text-green-400",children:""}),"English is widely spoken in tourist areas"]}),G.jsxs("li",{className:"flex items-center gap-2",children:[G.jsx("span",{className:"text-green-400",children:""}),"Don't miss the night illumination"]})]})]})]})]})]})]})};function wX(){return G.jsxs(R4,{children:[G.jsx(VB,{}),G.jsxs(a4,{children:[G.jsx(Kh,{path:"/",element:G.jsx(SB,{})}),G.jsx(Kh,{path:"/videos",element:G.jsx(BB,{})}),G.jsx(Kh,{path:"/itineraries",element:G.jsx(ZB,{})}),G.jsx(Kh,{path:"/insights",element:G.jsx(xX,{})})]})]})}const SX=Z3(document.getElementById("root"));SX.render(G.jsx(ju.StrictMode,{children:G.jsx(wX,{})}));export{X3 as _,iw as a,HI as c,MX as g};
